webpackJsonp([1],{"1zV9":function(e,t){e.exports="#define GLSLIFY 1\n#define PI 3.14159265359\n#define EXP 2.71828182846\n\n#define MONO_A 1\n#define MONO_B 2\n#define HALF_COLOR 3\n#define CIRCLE_OUT 4\n#define STAR_ROTATING 5\n#define CLOUDS 6\n#define SPIRAL 7\n#define VORONOI 8\n\nuniform float uTime;\nuniform float force;\nuniform vec2 uResolution;\nuniform vec3 colorTeamA;\nuniform vec3 colorTeamB;\nuniform vec3 goalColorA;\nuniform vec3 goalColorB;\n\nuniform int currentEffect;\nuniform int exitEffect;\nuniform int nextEffect;\nuniform float trans;\n\n// varying vec3 vNormal;w\nvarying vec3 vNormel;\n\n// varying vec2 VUV;\n\nfloat w1 = 3.0;\nfloat w2 = 1.0;\nfloat w3 = 20.0;\nfloat A = 1.0;\nfloat R = 6.0;\n\nfloat horizontal(in vec2 xy, float t)\t{\n    float v = cos(w1*xy.x + A*t);\n  return v;\n}\n\nfloat diagonal(in vec2 xy, float t)\t{\n    float v = cos(w2*(xy.x*cos(t) + 5.0*xy.y*sin(t)) + A*t);\n    return v;\n}\n\nfloat radial(in vec2 xy, float t)\t{\n    float x = 0.3*xy.x - 0.5 + cos(t);\n    float y = 0.3*xy.y - 0.5 + sin(t*0.5);\n    float v = sin(w3*sqrt(x*x+y*y+1.0)+A*t);\n    return v;\n}\n\nfloat xmap(float a,float b,float c,float d,float x) {\n    return ((x-a)*(d-c)/(b-a))+c;\n}\n\nfloat log_map(float a,float b,float c,float d,float x) {\n    float x1 = xmap(a,b,1.0,EXP,x);\n    return log(x1)*(d-c)+c;\n}\n\nvec2 toUV( vec2 p )\n{\n    vec2 uv = -1.1 + 2.2 * p / vViewPosition.xy;\n    uv.x *= vViewPosition.x / vViewPosition.y;\n    return uv;\n}\n\nvec3 hsv2rgb(float h, float s, float v) {\n  vec3 p = abs( fract( h +  vec3(3,2,1)/3. ) * 6. - 3.) -1.;\n  return v * mix(vec3(1), clamp(p, 0., 1.), s);\n}\n\nfloat sq(float v) {\n\treturn v*v;    \n}\n\nvec2 random2( vec2 p ) {\n    return fract(sin(vec2(dot(p,vec2(127.1,311.7)),dot(p,vec2(269.5,183.3))))*43758.5453);\n}\n"},"3Vsr":function(e,t){},"4JYt":function(e,t){},"7/tV":function(e,t){e.exports="#define GLSLIFY 1\n#define PHONG\n\nvarying vec3 vViewPosition;\nvarying float intensity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#pragma include(THREE.ShaderChunk.common)\n#pragma include(THREE.ShaderChunk.uv_pars_vertex)\n#pragma include(THREE.ShaderChunk.uv2_pars_vertex)\n#pragma include(THREE.ShaderChunk.displacementmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.envmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.color_pars_vertex)\n#pragma include(THREE.ShaderChunk.fog_pars_vertex)\n#pragma include(THREE.ShaderChunk.morphtarget_pars_vertex)\n#pragma include(THREE.ShaderChunk.skinning_pars_vertex)\n#pragma include(THREE.ShaderChunk.shadowmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.logdepthbuf_pars_vertex)\n#pragma include(THREE.ShaderChunk.clipping_planes_pars_vertex)\n\nvoid main() {\n\n\t#pragma include(THREE.ShaderChunk.uv_vertex)\n\t#pragma include(THREE.ShaderChunk.uv2_vertex)\n\t#pragma include(THREE.ShaderChunk.color_vertex)\n\n\t#pragma include(THREE.ShaderChunk.beginnormal_vertex)\n\t#pragma include(THREE.ShaderChunk.morphnormal_vertex)\n\t#pragma include(THREE.ShaderChunk.skinbase_vertex)\n\t#pragma include(THREE.ShaderChunk.skinnormal_vertex)\n\t#pragma include(THREE.ShaderChunk.defaultnormal_vertex)\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\tvNormal = normalize( transformedNormal );\n\n\t#pragma include(THREE.ShaderChunk.begin_vertex)\n\t#pragma include(THREE.ShaderChunk.morphtarget_vertex)\n\t#pragma include(THREE.ShaderChunk.skinning_vertex)\n\t#pragma include(THREE.ShaderChunk.displacementmap_vertex)\n\t#pragma include(THREE.ShaderChunk.project_vertex)\n\t#pragma include(THREE.ShaderChunk.logdepthbuf_vertex)\n\t#pragma include(THREE.ShaderChunk.clipping_planes_vertex)\n\n  // vec3 vNormel = normalize( normalMatrix * viewVector );\n\t// intensity = pow( 0.02 - dot(vNormal, vNormel), 1. );\n\tvViewPosition = - mvPosition.xyz;\n\n\t#pragma include(THREE.ShaderChunk.worldpos_vertex)\n\t#pragma include(THREE.ShaderChunk.envmap_vertex)\n\t#pragma include(THREE.ShaderChunk.shadowmap_vertex)\n\t#pragma include(THREE.ShaderChunk.fog_vertex)\n\n}\n"},"9LDw":function(e,t){},"9Pf6":function(e,t){},BMwM:function(e,t){},D55v:function(e,t){},Fq68:function(e,t){},Gxgy:function(e,t){e.exports="#define GLSLIFY 1\n\n// Main Variables Calculations\nvec3 color = vec3(0.);\nvec4 lightColor = vec4(color, 1.0);\nvec2 st = vUv.xy;\n\n// MONOCROMATIC\nif (currentEffect == MONO_A || nextEffect == MONO_A) {\n  vec3 colorDefault = colorTeamA;\n  float intensity = nextEffect == MONO_A ? trans : exitEffect == MONO_A ? 1. - trans : 1.;\n  colorDefault *= intensity;\n  color += colorDefault;\n}\nif (currentEffect == MONO_B || nextEffect == MONO_B) {\n  vec3 colorDefault = colorTeamB;\n  float intensity = nextEffect == MONO_B ? trans : exitEffect == MONO_B ? 1. - trans : 1.;\n  colorDefault *= intensity;\n  color += colorDefault;\n}\n\n// Default DOUBLE Color SCHEME\nif (currentEffect == HALF_COLOR || nextEffect == HALF_COLOR) {\n  float grad = st.y * 1.5;\n  vec3 colorDefault = mix(colorTeamB, colorTeamA, grad);\n  float intensity = nextEffect == HALF_COLOR ? trans : exitEffect == HALF_COLOR ? 1. - trans : 1.;\n  colorDefault *= intensity;\n  color += colorDefault;\n}\n\n// CIRCLES MOVING OUT OF THE POOL\nif (currentEffect == CIRCLE_OUT || nextEffect == CIRCLE_OUT) {\n  float looper = uTime * 2.5;\n  st = st * vec2(1.2, 1.);\n  vec2 center = vec2(0.6, 0.5);\n  float d = distance(st, center);\n  float radius = mod(looper / 6., 0.8);\n  float spe = 0.0196;\n  float er = smoothstep(d, d+spe, radius);\n  float ir = smoothstep(d, d+spe, radius - 0.14);\n  float offset = (er - ir);\n  float radius2 = mod((looper + 1.5) / 6., 0.8);\n  float er2 = smoothstep(d, d+spe, radius2);\n  float ir2 = smoothstep(d, d+spe, radius2 - 0.14);\n  float offset2 = (er2 - ir2);\n  vec3 color1 = vec3(offset) * goalColorA;\n  vec3 color2 = vec3(offset2) * goalColorB;\n  float intensity = nextEffect == CIRCLE_OUT ? trans : exitEffect == CIRCLE_OUT ? 1. - trans : 1.;\n  color += (color1 + color2) * intensity;\n}\n\n// STAR ROTATING\nif (currentEffect == STAR_ROTATING || nextEffect == STAR_ROTATING) {\n  float looper = uTime * .6;\n  vec2 uv = vUv - vec2(0.5);\n  float angle = atan(uv.y,uv.x) + looper;\n  float much = pow(sin(angle*10.0) * 0.5 + 0.7, 2.0);\n  vec3 color1 = vec3(much) * goalColorA;\n  vec3 color2 = vec3(1. - much) * goalColorB;\n  float intensity = nextEffect == STAR_ROTATING ? trans : exitEffect == STAR_ROTATING ? 1. - trans : 1.;\n  color += (color1 + color2) * intensity;\n}\n\n// CLOUDS\nif (currentEffect == CLOUDS || nextEffect == CLOUDS) {\n  float t = uTime / 6.;\n  float v = horizontal(vUv,t);\n  v += diagonal(vUv,t);\n  v += radial(vUv,t);\n  v /= 0.6;\n  float r = xmap(-0.0, 1.0, 0.75, 1.0, sin(PI*v));\n  float g = xmap(-1.0, 1.0, 0.0,  1.0, sin(PI*v));\n  float b = xmap(-1.0, 1.0, 1.0,  1.0, sin(PI*v));\n  vec3 colorOut = vec4(pow(r,R)+0.1,pow(g,R)+0.1,pow(b,R)+0.1,1.0).rgb;\n  float grayColorOut =  0.299 * colorOut.r + 0.587 * colorOut.g + 0.114 * colorOut.b;\n  vec3 cout = vec3(grayColorOut);\n  vec3 out2 = mix(goalColorA * cout, goalColorB * (1.- cout), 0.5);\n  float intensity = nextEffect == CLOUDS ? trans : exitEffect == CLOUDS ? 1. - trans : 1.;\n  color += out2 * intensity;\n}\n\n// SPIRAL\nif (currentEffect == SPIRAL || nextEffect == SPIRAL) {\n  float looper = uTime * .7;\n  vec2 uv = vUv - vec2(0.5);\n  float d = distance(vUv, vec2(0.5)) * 35. * sin(looper);\n  float angle = atan(uv.y,uv.x) + sin(looper) + looper / 2.;\n  float localintensity = pow(sin(angle*4.0 - d) * 0.5 + 0.5, 2.0);\n  vec3 color1 = vec3(localintensity) * colorTeamA;\n  vec3 color2 = vec3(1. - localintensity) * colorTeamB;\n  float intensity = nextEffect == SPIRAL ? trans : exitEffect == SPIRAL ? 1. - trans : 1.;\n\tcolor += (color1 + color2) * intensity;\n}\n\n// VORONOI \nif (currentEffect == VORONOI || nextEffect == VORONOI) {\n  vec3 vCol = vec3(0.);\n  float looper = uTime * 2.5;\n  st = vUv * 10.;\n  vec2 i_st = floor(st);\n  vec2 f_st = fract(st);\n  float m_dist = 10.;\n  vec2 m_point;\n  for (int j=-1; j<=1; j++ ) {\n      for (int i=-1; i<=1; i++ ) {\n          vec2 neighbor = vec2(float(i),float(j));\n          vec2 point = random2(i_st + neighbor);\n          point = 0.5 + 0.5*sin(looper + 6.2831*point);\n          vec2 diff = neighbor + point - f_st;\n          float dist = length(diff);\n          if( dist < m_dist ) {\n              m_dist = dist;\n              m_point = point;\n          }\n      }\n  }\n  vCol += dot(m_point,vec2(1.,.0));\n  vec3 CA = colorTeamA * vCol;\n  vec3 CB = colorTeamB * (1. - vCol);\n  vec3 outc = CA + CB;\n  float intensity = nextEffect == VORONOI ? trans : exitEffect == VORONOI ? 1. - trans : 1.;\n  color += (CA + CB) * intensity;\n}\n\nlightColor = vec4((color + vec3(.1)) * force, 1.);\n"},HiP1:function(e,t){},JbKV:function(e,t,n){var i=n("Ra0v");i.FXAAShader={uniforms:{tDiffuse:{value:null},resolution:{value:new i.Vector2(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immedates.","    // Immedates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")}},JbgM:function(e,t,n){e.exports="#define GLSLIFY 1\n#define PHONG\n\n  uniform vec3 diffuse;\n  uniform vec3 emissive;\n  uniform vec3 specular;\n  uniform float shininess;\n  uniform float opacity;\n\n  #pragma include(THREE.ShaderChunk.common)\n  #pragma include(THREE.ShaderChunk.packing)\n  #pragma include(THREE.ShaderChunk.dithering_pars_fragment)\n  #pragma include(THREE.ShaderChunk.color_pars_fragment)\n  #pragma include(THREE.ShaderChunk.uv_pars_fragment)\n  #pragma include(THREE.ShaderChunk.uv2_pars_fragment)\n  #pragma include(THREE.ShaderChunk.map_pars_fragment)\n  #pragma include(THREE.ShaderChunk.alphamap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.aomap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.lightmap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.emissivemap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.envmap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.gradientmap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.fog_pars_fragment)\n  #pragma include(THREE.ShaderChunk.bsdfs)\n  #pragma include(THREE.ShaderChunk.lights_pars_begin)\n  #pragma include(THREE.ShaderChunk.lights_pars_maps)\n  #pragma include(THREE.ShaderChunk.lights_phong_pars_fragment)\n  #pragma include(THREE.ShaderChunk.shadowmap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.bumpmap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.normalmap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.specularmap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.logdepthbuf_pars_fragment)\n  #pragma include(THREE.ShaderChunk.clipping_planes_pars_fragment)\n\n  "+n("1zV9")+"\n\n  void main() {\n\n    #pragma include(THREE.ShaderChunk.clipping_planes_fragment)\n\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n\n    #pragma include(THREE.ShaderChunk.logdepthbuf_fragment)\n    #pragma include(THREE.ShaderChunk.map_fragment)\n    #pragma include(THREE.ShaderChunk.color_fragment)\n    #pragma include(THREE.ShaderChunk.alphamap_fragment)\n    #pragma include(THREE.ShaderChunk.alphatest_fragment)\n    #pragma include(THREE.ShaderChunk.specularmap_fragment)\n    #pragma include(THREE.ShaderChunk.normal_fragment_begin)\n    #pragma include(THREE.ShaderChunk.normal_fragment_maps)\n    #pragma include(THREE.ShaderChunk.emissivemap_fragment)\n\n    // accumulation\n    #pragma include(THREE.ShaderChunk.lights_phong_fragment)\n    #pragma include(THREE.ShaderChunk.lights_fragment_begin)\n    #pragma include(THREE.ShaderChunk.lights_fragment_maps)\n    #pragma include(THREE.ShaderChunk.lights_fragment_end)\n    #pragma include(THREE.ShaderChunk.aomap_fragment)\n\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n    #pragma include(THREE.ShaderChunk.envmap_fragment)\n    "+n("Gxgy")+"\n\n    gl_FragColor = vec4( outgoingLight * lightColor.rgb, 1. );\n\n    #pragma include(THREE.ShaderChunk.tonemapping_fragment)\n    #pragma include(THREE.ShaderChunk.encodings_fragment)\n    #pragma include(THREE.ShaderChunk.fog_fragment)\n    #pragma include(THREE.ShaderChunk.premultiplied_alpha_fragment)\n    #pragma include(THREE.ShaderChunk.dithering_fragment)\n\n  }\n\n\n  "},"KA/m":function(e,t){},KPc5:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("7+uW"),r=n("NYxO"),a=n("ufW0"),o=n.n(a),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var c=n("VU/8")({name:"App"},s,!1,function(e){n("bHRZ")},null,null).exports;var l=this;i.a.use(r.a),this.teams=new class{constructor(){this.list=[{id:1,name:"ARGENTINA",slug:"ARG",difficulty:5,homekit:{colorFamily:"blue",shirt:"0x67bbd1",shorts:"0x272727",socks:"0x67bbd1",themeColorLight:"0x64EFFF",themeColorDark:"0x02071B",shadowColor:"0x67bbd1"},awaykit:{colorFamily:"black",shirt:"0x272727",shorts:"0x67bbd1",socks:"0xd3d3d3",themeColorLight:"0x02071B",themeColorDark:"0x3e96a8",shadowColor:"0xc9e4f4"}},{id:2,name:"AUSTRALIA",slug:"AUS",difficulty:36,homekit:{colorFamily:"yellow",shirt:"0xe4bd3f",shorts:"0x272727",socks:"0xe4bd3f",themeColorLight:"0xFFDB16",themeColorDark:"0x001205",shadowColor:"0xe4bd3f"},awaykit:{colorFamily:"green",shirt:"0x58a129",shorts:"0xe4bd3f",socks:"0x58a129",themeColorLight:"0xa09110",themeColorDark:"0x101f07",shadowColor:"0x58a129"}},{id:3,name:"BELGIUM",slug:"BEL",difficulty:3,homekit:{colorFamily:"red",shirt:"0xC73931",shorts:"0xC73931",socks:"0xE3B63B",themeColorLight:"0xFFEF69",themeColorDark:"0x1C0000",shadowColor:"0xFFFFFF"},awaykit:{colorFamily:"yellow",shirt:"0xE3B63B",shorts:"0x272727",socks:"0xE3B63B",themeColorLight:"0xFFEF69",themeColorDark:"0x1C0000",shadowColor:"0xE3B63B"}},{id:4,name:"BRAZIL",slug:"BRA",difficulty:2,homekit:{colorFamily:"yellow",shirt:"0xEFE133",shorts:"0x355FB5",socks:"0xEFE133",themeColorLight:"0x30FF00",themeColorDark:"0x050035",shadowColor:"0x30FF00"},awaykit:{colorFamily:"blue",shirt:"0x355FB5",shorts:"0xd3d3d3",socks:"0xEFE133",themeColorLight:"0x30FF00",themeColorDark:"0x050035",shadowColor:"0xEFE133"}},{id:5,name:"COLOMBIA",slug:"COL",difficulty:16,homekit:{colorFamily:"yellow",shirt:"0xCCD35B",shorts:"0x25253A",socks:"0xC63534",themeColorLight:"0xFFEF3E",themeColorDark:"0x000339",shadowColor:"0xCCD35B"},awaykit:{colorFamily:"blue",shirt:"0x5c90ff",shorts:"0xCE6E5E",socks:"0x5c90ff",themeColorLight:"0xFFEF3E",themeColorDark:"0x000339",shadowColor:"0x5c90ff"}},{id:6,name:"COSTA RICA",slug:"CRC",difficulty:23,homekit:{colorFamily:"red",shirt:"0xC22C35",shorts:"0x5165B9",socks:"0xd3d3d3",themeColorLight:"0xEA1220",themeColorDark:"0x000452",shadowColor:"0xC22C35"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0x5165B9",socks:"0xC22C35",themeColorLight:"0xEA1220",themeColorDark:"0x000452",shadowColor:"0x5165B9"}},{id:7,name:"CROATIA",slug:"CRO",difficulty:20,homekit:{colorFamily:"red",shirt:"0xCA393E",shorts:"0xd3d3d3",socks:"0xd3d3d3",themeColorLight:"0xC7444D",themeColorDark:"0x00033C",shadowColor:"0xCA393E"},awaykit:{colorFamily:"blue",shirt:"0x5070CC",shorts:"0x1A1C36",socks:"0xd3d3d3",themeColorLight:"0xC7444D",themeColorDark:"0x00033C",shadowColor:"0x5070CC"}},{id:8,name:"DENMARK",slug:"DEN",difficulty:12,homekit:{colorFamily:"red",shirt:"0xF92F2F",shorts:"0x272727",socks:"0xd3d3d3",themeColorLight:"0xF05555",themeColorDark:"0x0F0000",shadowColor:"0xF92F2F"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0xF92F2F",socks:"0xF92F2F",themeColorLight:"0xF05555",themeColorDark:"0x0F0000",shadowColor:"0xdea1a1"}},{id:9,name:"EGYPT",slug:"EGY",difficulty:45,homekit:{colorFamily:"red",shirt:"0xDB2C2F",shorts:"0xd3d3d3",socks:"0xDB2C2F",themeColorLight:"0xE53D3D",themeColorDark:"0x080000",shadowColor:"0xDB2C2F"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0xDB2C2F",socks:"0xd3d3d3",themeColorLight:"0xE53D3D",themeColorDark:"0x080000",shadowColor:"0xdea1a1"}},{id:10,name:"ENGLAND",slug:"ENG",difficulty:12,homekit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0x3550A0",socks:"0xd3d3d3",themeColorLight:"0xFC3434",themeColorDark:"0x00125FÈ",shadowColor:"0x3550A0"},awaykit:{colorFamily:"red",shirt:"0xA62626",shorts:"0xd3d3d3",socks:"0xA62626",themeColorLight:"0xFC3434",themeColorDark:"0x00125FÈ",shadowColor:"0xA62626"}},{id:11,name:"FRANCE",slug:"FRA",difficulty:7,homekit:{colorFamily:"blue",shirt:"0x235AE5",shorts:"0xd3d3d3",socks:"0xE42323",themeColorLight:"0xE42323",themeColorDark:"0x000E3B",shadowColor:"0x235AE5"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0x235AE5",socks:"0xd3d3d3",themeColorLight:"0xE42323",themeColorDark:"0x000E3B",shadowColor:"0xE42323"}},{id:12,name:"GERMANY",slug:"GER",difficulty:1,homekit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0x272727",socks:"0xd3d3d3",themeColorLight:"0xFFC426",themeColorDark:"0x111110",shadowColor:"0xf9da70"},awaykit:{colorFamily:"green",shirt:"0x35B8B9",shorts:"0x272727",socks:"0x35B8B9",themeColorLight:"0xFFC426",themeColorDark:"0x111110",shadowColor:"0x35B8B9"}},{id:13,name:"ICELAND",slug:"ISL",difficulty:22,homekit:{colorFamily:"blue",shirt:"0x144FD1",shorts:"0x144FD1",socks:"0xFF413C",themeColorLight:"0xFF413C",themeColorDark:"0x00054C",shadowColor:"0x144FD1"},awaykit:{colorFamily:"red",shirt:"0xFF413C",shorts:"0xd3d3d3",socks:"0xd3d3d3",themeColorLight:"0xFF413C",themeColorDark:"0x00054C",shadowColor:"0xFF413C"}},{id:14,name:"IRAN",slug:"IRN",difficulty:100,homekit:{colorFamily:"green",shirt:"0x7DCD65",shorts:"0xd3d3d3",socks:"0xE14140",themeColorLight:"0xDC2121",themeColorDark:"0x041F10",shadowColor:"0x7DCD65"},awaykit:{colorFamily:"red",shirt:"0xE14140",shorts:"0xd3d3d3",socks:"0xd3d3d3",themeColorLight:"0xDC2121",themeColorDark:"0x041F10",shadowColor:"0xE14140"}},{id:15,name:"JAPAN",slug:"JPN",difficulty:61,homekit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0xd3d3d3",socks:"0xCC0031",themeColorLight:"0xCC0031",themeColorDark:"0x130307",shadowColor:"0xCC0031"},awaykit:{colorFamily:"blue",shirt:"0x526BEC",shorts:"0x1C1F3D",socks:"0xd3d3d3",themeColorLight:"0xCC0031",themeColorDark:"0x130307",shadowColor:"0x536296"}},{id:16,name:"MEXICO",slug:"MEX",difficulty:15,homekit:{colorFamily:"green",shirt:"0x40BEA8",shorts:"0xd3d3d3",socks:"0xCA172B",themeColorLight:"0xCE1126",themeColorDark:"0x02251E",shadowColor:"0x40BEA8"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0xCA172B",socks:"0xd3d3d3",themeColorLight:"0xCE1126",themeColorDark:"0x02251E",shadowColor:"0xCA172B"}},{id:17,name:"MOROCCO",slug:"MAR",difficulty:41,homekit:{colorFamily:"red",shirt:"0xEE3F3D",shorts:"0x488A5D",socks:"0xd3d3d3",themeColorLight:"0x157432",themeColorDark:"0x23000E",shadowColor:"0xEE3F3D"},awaykit:{colorFamily:"green",shirt:"0x488A5D",shorts:"0xEE3F3D",socks:"0xff3388",themeColorLight:"0x157432",themeColorDark:"0x23000E",shadowColor:"0x488A5D"}},{id:18,name:"NIGERIA",slug:"NGA",difficulty:48,homekit:{colorFamily:"green",shirt:"0x76B06B",shorts:"0xd3d3d3",socks:"0x76B06B",themeColorLight:"0x5D8523",themeColorDark:"0x02120F",shadowColor:"0x76B06B"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0x39946B",socks:"0x39946B",themeColorLight:"0x5D8523",themeColorDark:"0x02120F",shadowColor:"0x39946B"}},{id:19,name:"PANAMA",slug:"PAN",difficulty:55,homekit:{colorFamily:"red",shirt:"0xDF194D",shorts:"0xDF194D",socks:"0xd3d3d3",themeColorLight:"0xD21034",themeColorDark:"0x031B2E",shadowColor:"0xDF194D"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0xd3d3d3",socks:"0x21356D",themeColorLight:"0xD21034",themeColorDark:"0x031B2E",shadowColor:"0x21356D"}},{id:20,name:"PERU",slug:"PER",difficulty:11,homekit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0xCC1B24",socks:"0xd3d3d3",themeColorLight:"0xff5454",themeColorDark:"0x0c0101",shadowColor:"0xCC1B24"},awaykit:{colorFamily:"red",shirt:"0xCC1B24",shorts:"0xd3d3d3",socks:"0xd3d3d3",themeColorLight:"0xff5454",themeColorDark:"0x0c0101",shadowColor:"0xffa6a6"}},{id:21,name:"POLAND",slug:"POL",difficulty:8,homekit:{colorFamily:"red",shirt:"0xF62268",shorts:"0xd3d3d3",socks:"0xF62268",themeColorLight:"0xDC143C",themeColorDark:"0x0f0505",shadowColor:"0xF62268"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0xF62268",socks:"0xd3d3d3",themeColorLight:"0xDC143C",themeColorDark:"0x0f0505",shadowColor:"0x30508B"}},{id:22,name:"PORTUGAL",slug:"POR",difficulty:4,homekit:{colorFamily:"red",shirt:"0xFB4D53",shorts:"0x35e7a9",socks:"0xFB4D53",themeColorLight:"0xEE1A38",themeColorDark:"0x00231B",shadowColor:"0xFB4D53"},awaykit:{colorFamily:"white",shirt:"0x35e7a9",shorts:"0x35e7a9",socks:"0xd3d3d3",themeColorLight:"0xEE1A38",themeColorDark:"0x00231B",shadowColor:"0x35e7a9"}},{id:23,name:"RUSSIA",slug:"RUS",difficulty:70,homekit:{colorFamily:"red",shirt:"0xE94533",shorts:"0xd3d3d3",socks:"0xE94533",themeColorLight:"0xD52B1E",themeColorDark:"0x011735",shadowColor:"0xE94533"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0x345C7E",socks:"0xE94533",themeColorLight:"0xD52B1E",themeColorDark:"0x011735",shadowColor:"0x345C7E"}},{id:24,name:"SAUDI ARABIA",slug:"KSA",difficulty:67,homekit:{colorFamily:"green",shirt:"0x77D56D",shorts:"0xd3d3d3",socks:"0x77D56D",themeColorLight:"0x7AD784",themeColorDark:"0x01130B",shadowColor:"0x77D56D"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0x77D56D",socks:"0xd3d3d3",themeColorLight:"0x7AD784",themeColorDark:"0x01130B",shadowColor:"0xd2fa9e"}},{id:25,name:"SENEGAL",slug:"SEN",difficulty:27,homekit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0x40C888",socks:"0xB9C949",themeColorLight:"0xFFF06E",themeColorDark:"0x032222",shadowColor:"0x40C888"},awaykit:{colorFamily:"green",shirt:"0x40C888",shorts:"0xB9C949",socks:"0xd3d3d3",themeColorLight:"0xFFF06E",themeColorDark:"0x032222",shadowColor:"0xB9C949"}},{id:26,name:"SERBIA",slug:"SRB",difficulty:34,homekit:{colorFamily:"red",shirt:"0xD93E3F",shorts:"0xD93E3F",socks:"0xd3d3d3",themeColorLight:"0xFF4739",themeColorDark:"0x020D36",shadowColor:"0xD93E3F"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0xD93E3F",socks:"0xd3d3d3",themeColorLight:"0xFF4739",themeColorDark:"0x020D36",shadowColor:"0x4755ff"}},{id:27,name:"SOUTH KOREA",slug:"KOR",difficulty:74,homekit:{colorFamily:"red",shirt:"0xDD1A38",shorts:"0x272727",socks:"0xd3d3d3",themeColorLight:"0xCE1126",themeColorDark:"0x030E2C",shadowColor:"0xDD1A38"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0xd3d3d3",socks:"0xd3d3d3",themeColorLight:"0xCE1126",themeColorDark:"0x030E2C",shadowColor:"0xffb4b4"}},{id:28,name:"SPAIN",slug:"ESP",difficulty:10,homekit:{colorFamily:"red",shirt:"0xE53213",shorts:"0x1D7F99",socks:"0x272727",themeColorLight:"0xFFBA00",themeColorDark:"0x250000",shadowColor:"0xE53213"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0xd3d3d3",socks:"0xE53213",themeColorLight:"0xFFBA00",themeColorDark:"0x250000",shadowColor:"0xeeb036"}},{id:29,name:"SWEDEN",slug:"SWE",difficulty:24,homekit:{colorFamily:"yellow",shirt:"0xD2D85C",shorts:"0x4A6AB4",socks:"0xD2D85C",themeColorLight:"0xD4DD3D",themeColorDark:"0x00173C",shadowColor:"0xD2D85C"},awaykit:{colorFamily:"blue",shirt:"0x4A6AB4",shorts:"0xD2D85C",socks:"0x4A6AB4",themeColorLight:"0xD4DD3D",themeColorDark:"0x00173C",shadowColor:"0x4A6AB4"}},{id:30,name:"SWITZERLAND",slug:"SUI",difficulty:6,homekit:{colorFamily:"red",shirt:"0xF9313F",shorts:"0xd3d3d3",socks:"0xF9313F",themeColorLight:"0xFF4E4E",themeColorDark:"0x160202",shadowColor:"0xF9313F"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0xd3d3d3",socks:"0xF9313F",themeColorLight:"0xFF4E4E",themeColorDark:"0x160202",shadowColor:"0xff888e"}},{id:31,name:"TUNISIA",slug:"TUN",difficulty:21,homekit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0xC22A37",socks:"0xd3d3d3",themeColorLight:"0xE52B38",themeColorDark:"0x15090A",shadowColor:"0xC22A37"},awaykit:{colorFamily:"red",shirt:"0xC22A37",shorts:"0xd3d3d3",socks:"0xC22A37",themeColorLight:"0xE52B38",themeColorDark:"0x15090A",shadowColor:"0xff888e"}},{id:32,name:"URUGUAY",slug:"URU",difficulty:14,homekit:{colorFamily:"blue",shirt:"0x91DEE4",shorts:"0x272727",socks:"0x91DEE4",themeColorLight:"0xFFD800",themeColorDark:"0x05183D",shadowColor:"0x91DEE4"},awaykit:{colorFamily:"white",shirt:"0xd3d3d3",shorts:"0x91DEE4",socks:"0xd3d3d3",themeColorLight:"0xFFD800",themeColorDark:"0x05183D",shadowColor:"0xFFD800"}}]}};var u=new Date(2019,0,5,23,59,59,999),h=(new Date).getTime()>u.getTime(),d=function(){return{isEnded:h,isReady:!1,isLowPerformance:!1,isInGame:!1,isEndingScreen:!1,restartKey:0,overHeader:!1,isMobile:!1,mouseVisible:!0,isLogoScreen:!1,isTeamSelection:!1,isAwaySelection:!1,isSideSelection:!1,isTutorial:!1,popUpCookiesViewed:!1,loading:!0,percentLoaded:0,stepGame:0,userGoal:0,cpuGoal:0,possess:"user",userTeam:0,cpuTeam:0,cpuAwayShirt:!1,userTeamObj:{name:"USER",slug:"USE",difficulty:0,kit:{colorFamily:"",shirt:"0xFF0000",shorts:"0xFF0000",socks:"0xFF0000",themeColorLight:"0xFF0000",themeColorDark:"0xFF0000",shadowColor:"0xFF0000"}},cpuTeamObj:{name:"CPU",slug:"CPU",difficulty:0,kit:{colorFamily:"",shirt:"0x0000FF",shorts:"0x0000FF",socks:"0x0000FF",themeColorLight:"0x0000FF",themeColorDark:"0x0000FF",shadowColor:"0x0000FF"}},time:180,isInGoldenGoal:!1,isGoalAnimation:!1,pauseGame:!0,endGame:!1,userSideLeft:!0,teams:l.teams.list,score:0,userDataSubmitted:!1}},f={updateRestartKey:function(e){e.restartKey+=1},setMobile:function(e,t){e.isMobile=t},setMouseVisible:function(e,t){e.mouseVisible=t},setEndingScreen:function(e,t){e.isEndingScreen=t},setOverHeader:function(e,t){e.overHeader=t},resetPoints:function(e){e.score=0},addPoints:function(e,t){e.score+=t},setLoadedPercent:function(e,t){e.percentLoaded=t},planeReady:function(e,t){e.isReady=t},setLoading:function(e,t){e.loading=t},setStepGame:function(e,t){e.stepGame=t},setUserTeam:function(e,t){e.userTeam=t,e.userTeamObj={name:e.teams[t].name,slug:e.teams[t].slug,difficulty:e.teams[t].difficulty,kit:{colorFamily:e.teams[t].homekit.colorFamily,shirt:e.teams[t].homekit.shirt,shorts:e.teams[t].homekit.shorts,socks:e.teams[t].homekit.socks,themeColorLight:e.teams[t].homekit.themeColorLight,themeColorDark:e.teams[t].homekit.themeColorDark,shadowColor:e.teams[t].homekit.shadowColor}}},setUserTeamEE:function(e){e.userTeam=-1,e.userTeamObj={name:"ITALY",slug:"ITA",difficulty:0,kit:{colorFamily:"blue",shirt:"0x027aef",shorts:"0xd3d3d3",socks:"0x027aef",themeColorLight:"0x00a8ff",themeColorDark:"0x000a1d",shadowColor:"0x00a8ff"}}},setCpuTeam:function(e,t){e.cpuTeam=t,e.cpuTeamObj={name:e.teams[t].name,slug:e.teams[t].slug,difficulty:e.teams[t].difficulty,kit:{colorFamily:e.cpuAwayShirt?e.teams[t].awaykit.colorFamily:e.teams[t].homekit.colorFamily,shirt:e.cpuAwayShirt?e.teams[t].awaykit.shirt:e.teams[t].homekit.shirt,shorts:e.cpuAwayShirt?e.teams[t].awaykit.shorts:e.teams[t].homekit.shorts,socks:e.cpuAwayShirt?e.teams[t].awaykit.socks:e.teams[t].homekit.socks,themeColorLight:e.cpuAwayShirt?e.teams[t].awaykit.themeColorLight:e.teams[t].homekit.themeColorLight,themeColorDark:e.cpuAwayShirt?e.teams[t].awaykit.themeColorDark:e.teams[t].homekit.themeColorDark,shadowColor:e.cpuAwayShirt?e.teams[t].awaykit.shadowColor:e.teams[t].homekit.shadowColor}}},setCpuAwayShirt:function(e,t){e.cpuAwayShirt=t},incrementUserGoal:function(e){e.userGoal+=1},incrementCpuGoal:function(e){e.cpuGoal+=1},resetUserGoal:function(e){e.userGoal=0},resetCpuGoal:function(e){e.cpuGoal=0},setPossess:function(e,t){e.possess=t},updateTime:function(e,t){e.time=t},resetTime:function(e){e.time=180},setPauseGame:function(e,t){e.pauseGame=t},setEndGame:function(e,t){e.endGame=t},setInGame:function(e,t){e.isInGame=t},setLogoScreen:function(e,t){e.isLogoScreen=t},setTeamSelection:function(e,t){e.isTeamSelection=t},setAwaySelection:function(e,t){e.isAwaySelection=t},setSideSelection:function(e,t){e.isSideSelection=t},setTutorial:function(e,t){e.isTutorial=t},setUserSideLeft:function(e,t){e.userSideLeft=t},setInGoldenGoal:function(e,t){e.isInGoldenGoal=t},setUserDataSubmitted:function(e,t){e.userDataSubmitted=t}},p=new r.a.Store({state:d,mutations:f,getters:{}}),m=n("/ocq"),g=n("Dd8w"),v=n.n(g),y={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,n=void 0,i=void 0;n=void 0!==(e=e||{}).parent?e.parent:document.body,t=void 0!==e.id?e.id:"oldie",(i=this.getWebGLErrorMessage()).id=t,n.appendChild(i)}},x=n("Zrlr"),_=n.n(x),b=n("Ra0v"),w=function e(){if(_()(this,e),null!==e.instance)return e.instance;e.instance=this,e.edElement=document.createTextNode("EDDOM"),e.off=e.edElement.removeEventListener.bind(e.edElement),e.on=e.edElement.addEventListener.bind(e.edElement)};w.emit=function(e,t){if(e){var n=new CustomEvent(e,{detail:t});w.edElement.dispatchEvent(n)}};var E=w;w.instance=null,w.edElement=null;var T=function e(t){var n=this;_()(this,e),this.init=function(){E.on("config.pointsGame",function(e){n.$store.commit("setPointsGame",e.detail)}),E.on("config.stepGame",function(e){n.$store.commit("setStepGame",e.detail)}),E.on("config.userTeam",function(e){n.$store.commit("setUserTeam",e.detail)}),E.on("config.cpuTeam",function(e){n.$store.commit("setCpuTeam",e.detail)}),E.on("game.userGoal",function(){n.$store.commit("incrementUserGoal")}),E.on("game.cpuGoal",function(){n.$store.commit("incrementCpuGoal")}),E.on("game.resetUserGoal",function(){n.$store.commit("resetUserGoal")}),E.on("game.resetCpuGoal",function(){n.$store.commit("resetCpuGoal")}),E.on("game.possess",function(e){n.$store.commit("setPossess",e.detail)}),E.on("game.updateTime",function(e){n.$store.commit("updateTime",e.detail)}),E.on("game.userSideLeft",function(e){n.$store.commit("setUserSideLeft",e.detail)}),E.on("game.pauseGame",function(e){n.$store.commit("setPauseGame",e.detail)}),E.on("game.endGame",function(e){n.$store.commit("setEndGame",e.detail)})},this.$store=t,this.init()},S=n("wxAW"),M=n.n(S),A=n("+Uzz"),L=n("vy4U"),C={preload:[{id:"loop_intro",path:"./static/sounds/menu/Musica_menu_loop.ogg",path2:"./static/sounds/menu/Musica_menu_loop.mp3"},{id:"pool",path:"./static/models/stadio_12.dae"},{id:"player",path:"./static/models/player.dae"},{id:"logo",path:"./static/models/foosball-z.dae"},{id:"utilities",path:"./static/models/blocks_12.dae"},{id:"poolbaked",path:"./static/textures/bake_new_low4.jpg"},{id:"white",path:"./static/textures/white.png"},{id:"ball",path:"./static/textures/ball.jpg"},{id:"scudetto",path:"./static/textures/scudetto.png"},{id:"ball_glow",path:"./static/textures/ball.jpg"},{id:"ball_bump",path:"./static/textures/ball_bump.jpg"},{id:"neon",path:"./static/textures/white.png"},{id:"inno",path:"./static/sounds/menu/Inno.ogg",path2:"./static/sounds/menu/Inno.mp3"},{id:"coin",path:"./static/sounds/menu/Coin.ogg",path2:"./static/sounds/menu/Coin.mp3"},{id:"click",path:"./static/sounds/menu/Click_generico.ogg",path2:"./static/sounds/menu/Click_generico.mp3"},{id:"tick",path:"./static/sounds/menu/Click_squadre.ogg",path2:"./static/sounds/menu/Click_squadre.mp3"},{id:"countdown",path:"./static/sounds/menu/Countdown.ogg",path2:"./static/sounds/menu/Countdown.mp3"},{id:"sxdx",path:"./static/sounds/menu/Entrata_SX_DX.ogg",path2:"./static/sounds/menu/Entrata_SX_DX.mp3"},{id:"player_come",path:"./static/sounds/menu/Intro_giocatore.ogg",path2:"./static/sounds/menu/Intro_giocatore.mp3"},{id:"menu_stadio",path:"./static/sounds/menu/Pad_transizione_Menu_Stadio.ogg",path2:"./static/sounds/menu/Pad_transizione_Menu_Stadio.mp3"},{id:"player_side",path:"./static/sounds/menu/Scelta_giocatore.ogg",path2:"./static/sounds/menu/Scelta_giocatore.mp3"},{id:"logo_intro",path:"./static/sounds/menu/Swoosh_intro.ogg",path2:"./static/sounds/menu/Swoosh_intro.mp3"},{id:"srull",path:"./static/sounds/stadio/Swoosh_tiro.ogg",path2:"./static/sounds/stadio/Swoosh_tiro.mp3"},{id:"sball",path:"./static/sounds/stadio/Intro_palla.ogg",path2:"./static/sounds/stadio/Intro_palla.mp3"},{id:"goal_user",path:"./static/sounds/stadio/Goal_segnato.ogg",path2:"./static/sounds/stadio/Goal_segnato.mp3"},{id:"goal_cpu",path:"./static/sounds/stadio/Goal_subito.ogg",path2:"./static/sounds/stadio/Goal_subito.mp3"},{id:"kick1",path:"./static/sounds/stadio/Tiro1.ogg",path2:"./static/sounds/stadio/Tiro1.mp3"},{id:"kick2",path:"./static/sounds/stadio/Tiro2.ogg",path2:"./static/sounds/stadio/Tiro2.mp3"},{id:"sponda",path:"./static/sounds/stadio/Sponda.ogg",path2:"./static/sounds/stadio/Sponda.mp3"},{id:"userGoal",path:"./static/sounds/stadio/Goal_giocatore.ogg",path2:"./static/sounds/stadio/Goal_giocatore.mp3"},{id:"cpuGoal",path:"./static/sounds/stadio/Goal_avversario_v2.ogg",path2:"./static/sounds/stadio/Goal_avversario_v2.mp3"},{id:"base",path:"./static/sounds/stadio/Musica_stadio.ogg",path2:"./static/sounds/stadio/Musica_stadio.mp3"}],isDev:!1,isLoaded:!1,isTweening:!1,isRotating:!0,isMouseMoving:!1,isMouseOver:!1,maxAnisotropy:1,dpr:1,easing:n.n(L).a.Easing.Quadratic.InOut,duration:500,model:{path:"./static/models/stadio_07.dae",scale:10},player:{path:"./static/models/player.dae",scale:10},helpers:{path:"./static/models/blocks_12.dae",scale:10},material:{path:"./static/models/",file:"testScene.mtl"},textures:{stadium:"./static/textures/bake_new.jpg",neon:"./static/textures/white.png",ball:"./static/textures/ball.png",ballGlow:"./static/textures/ball_glow.png"},fog:{color:8925232,near:0,far:1e3},camera:{fov:80,near:10,far:5e3,aspect:1,posX:0,posY:170,posZ:150},ambientLight:{enabled:!0,color:394758},pointLight:{enabled:!0,color:15790320,intensity:.8,x:0,y:600,z:0},shadow:{enabled:!0,helperEnabled:!1,bias:0,mapWidth:2048,mapHeight:2048,near:0,far:1e4,top:1e4,right:1e4,bottom:-1e4,left:-1e4}},P=n("k9Ku"),R=this,F={},I=function(e,t){F[e]=t},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;0!==t?setTimeout(function(){F[e].volume(n),F[e].play()},t):(F[e].volume(n),F[e].play())},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;F[e].fade(1,0,t),F[e].on("fade",function(){})},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;0!==n?setTimeout(function(){F[e].volume(0),F[e].loop(!0),F[e].play(),F[e].fade(0,1,t)},n):(F[e].volume(0),F[e].loop(!0),F[e].play(),F[e].fade(0,1,t))},D=function(){function e(t,n){var i=this;_()(this,e),this.updateCameraOffset=function(e){i.followCameraActive||(i.offsetX=5*e.detail.mouse.x)},this.update=function(){i.threeCamera.position.x-=(i.threeCamera.position.x-i.offsetX)/10},this.introCamGotoStep=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},r=i.introCamera.position,a=i.cameraSteps[i.cameraStep].target,o=i.cameraSteps[i.cameraStep].deformationMax,s=i.cameraSteps[e].position,c=i.cameraSteps[e].target,l=i.cameraSteps[e].timing,u=i.cameraSteps[e].isLast;i.cameraStep=e,u?(i.introCamera.updateProjectionMatrix(),A.TweenMax.to(i.introCamera.position,l,{bezier:{type:"cubic",values:[{x:r.x+i.offsetX,y:r.y,z:r.z},{x:-200,y:30,z:-300},{x:-200,y:850,z:-1e3},{x:0,y:s.y,z:s.z}],autoRotate:!1},ease:A.Quint.easeInOut,onUpdateParams:["{self}"],onUpdate:function(e){E.emit("camera.progress",{progress:e.progress(),multi:1.4})},onComplete:function(){n()}}),A.TweenMax.to(a,l,{bezier:{type:"thru",values:[{x:a.x,y:a.y,z:a.z},{x:c.x,y:c.y,z:c.z}],autoRotate:!1},ease:A.Quint.easeInOut,onUpdate:function(){i.introCamera.lookAt(a.x,a.y,a.z)}})):(i.followCameraActive=!1,A.TweenMax.to(r,l,{x:s.x+i.offsetX,y:s.y,z:s.z+t,ease:A.Quint.easeInOut,onUpdateParams:["{self}"],onUpdate:function(e){E.emit("camera.progress",{progress:e.progress(),multi:o}),i.introCamera.position.set(r.x,r.y,r.z)},onComplete:function(){n()}}),A.TweenMax.to(a,l,{x:c.x,y:c.y,z:c.z,ease:A.Quint.easeInOut,onUpdate:function(){i.introCamera.lookAt(a.x,a.y,a.z)}}))},this.followBall=function(){i.followCameraActive=!0},this.resetCameraRestart=function(){i.followCameraActive=!1;var e=i.cameraSteps[3].position,t=i.cameraSteps[3].target,n=i.lerpedBallPosition;A.TweenMax.to(i.introCamera.position,.8,{x:0,y:e.y,z:e.z,ease:A.Quint.easeInOut}),A.TweenMax.to(n,.8,{x:t.x,y:t.y,z:t.z,ease:A.Quint.easeInOut,onUpdate:function(){i.introCamera.lookAt(n.x,n.y,n.z)}})},this.updateBallPosition=function(e){i.ballPosition=new b.Vector3(e.detail.ballX/4,e.detail.ballY/2-78,e.detail.ballZ/2-1493.436),i.followCameraActive&&(i.followPositionActive&&i.threeCamera.position.set(0+e.detail.ballX/3,128.75-e.detail.ballY/5,-1280.51-e.detail.ballZ/10),i.lerpedBallPosition.x-=(i.lerpedBallPosition.x-i.ballPosition.x)/3,i.lerpedBallPosition.y-=(i.lerpedBallPosition.y-i.ballPosition.y)/3,i.lerpedBallPosition.z-=(i.lerpedBallPosition.z-i.ballPosition.z)/3,i.threeCamera.lookAt(i.lerpedBallPosition))},this.switchCamera=function(){i.selectedCamera+=1,i.selectedCamera>i.cameras.length-1&&(i.selectedCamera=0);var e=i.cameras[i.selectedCamera];i.threeCamera=e},this.goal=function(e){i.$store.state.isGoalAnimation=!0,N("user"===e?"userGoal":"cpuGoal"),i.followPositionActive=!1,i.followCameraActive=!1;var t=(new b.Vector3).copy(i.threeCamera.position),n=i.lerpedBallPosition,r=[[{x:279.687,y:68.856,z:-1445.529},{x:1.964,y:-11.353,z:-1623.894},{x:-198.938,y:-4.718,z:-1493.256},{x:0,y:t.y,z:t.z}],[{x:-169.809,y:76.2104,z:-1322.599},{x:-229.282,y:87.8664,z:-1374.414},{x:-76.869,y:119.4016,z:-1309.362},{x:0,y:t.y,z:t.z}],[{x:363.682,y:112.5,z:-1535},{x:-.379,y:100,z:-1681.579},{x:-343.136,y:112.5,z:-1535},{x:0,y:t.y,z:t.z}],[{x:-.474,y:17.161,z:-1307.98},{x:-140.554,y:117.925,z:-1389.977},{x:-264.392,y:50.345,z:-1422.875},{x:0,y:t.y,z:t.z}],[{x:t.x-200,y:t.y+80,z:t.z-100},{x:t.x-300,y:t.y+120,z:t.z},{x:t.x+300,y:t.y+60,z:t.z+100},{x:t.x+300,y:t.y+100,z:t.z},{x:0,y:t.y,z:t.z}],[{x:t.x+100,y:t.y+180,z:t.z-100},{x:t.x+200,y:t.y+120,z:t.z},{x:t.x-200,y:t.y+160,z:t.z+50},{x:t.x-200,y:t.y+80,z:t.z},{x:0,y:t.y,z:t.z}],[{x:t.x-40,y:t.y,z:t.z-100},{x:t.x-40,y:10,z:t.z-200},{x:t.x+40,y:20,z:t.z-150},{x:t.x+80,y:20,z:t.z},{x:0,y:t.y,z:t.z}]],a=[[{x:n.x,y:-78.57,z:n.z},{x:n.x,y:-30,z:n.z},{x:n.x,y:-78.57,z:n.z},{x:0,y:-78.7,z:-1493}],[{x:n.x,y:-78.57,z:n.z},{x:n.x,y:-30,z:n.z},{x:n.x,y:-78.57,z:n.z},{x:0,y:-78.7,z:-1493}],[{x:n.x,y:-78.57,z:n.z},{x:n.x,y:-40.529,z:n.z},{x:n.x,y:-78.57,z:n.z},{x:0,y:-78.7,z:-1493}],[{x:n.x,y:-78.57,z:n.z},{x:n.x,y:-10.529,z:n.z},{x:n.x,y:-78.57,z:n.z},{x:0,y:-78.7,z:-1493}],[{x:n.x,y:n.y,z:n.z},{x:n.x,y:n.y,z:n.z},{x:n.x,y:n.y,z:n.z},{x:0,y:-78.7,z:-1493}],[{x:n.x,y:n.y,z:n.z},{x:n.x,y:n.y,z:n.z},{x:n.x,y:n.y,z:n.z},{x:0,y:-78.7,z:-1493}],[{x:n.x,y:n.y,z:n.z},{x:n.x,y:n.y,z:n.z},{x:n.x,y:n.y,z:n.z},{x:0,y:-78.7,z:-1493}]],o=Math.floor(7*Math.random());A.TweenMax.to(n,5,{bezier:{type:"thru",values:a[o],autoRotate:!1}}),A.TweenMax.to(i.threeCamera.position,5,{bezier:{type:"thru",values:r[o],autoRotate:!1},onUpdate:function(){i.threeCamera.lookAt(n.x,n.y,n.z)},onComplete:function(){E.emit("goal.exit"),A.TweenMax.to(i.goalDistance,1.5,{z:0,y:0,ease:A.Quint.easeInOut,onComplete:function(){E.emit("ball.restart"),i.followCameraActive=!0,i.followPositionActive=!0,i.$store.state.isGoalAnimation=!1,E.emit("game.goalAnimationFinished")}})}})},this.$store=n,this.cameras=[],this.selectedCamera=0;var r=t.domElement.width,a=t.domElement.height;this.offsetX=0,this.cameraSteps=[{position:new b.Vector3(0,48.7,2194),target:new b.Vector3(0,48.7,0),timing:1.5,isLast:!1,deformationMax:.9},{position:new b.Vector3(0,48.7,1972),target:new b.Vector3(0,48.7,0),timing:3,isLast:!1,deformationMax:1.5},{position:new b.Vector3(0,48.7,1391),target:new b.Vector3(0,48.7,0),timing:3,isLast:!1,deformationMax:.7},{position:new b.Vector3(0,128.75,-1280.51),target:new b.Vector3(0,-78.7,-1493),timing:6,isLast:!0,deformationMax:2}],this.cameraStep=0,this.ballPosition=new b.Vector3(0,-78,-1493.436),this.lerpedBallPosition=new b.Vector3(0,-78,-1493.436),E.on("ball.move",this.updateBallPosition),E.on("game.userGoal",function(){i.goal("user")}),E.on("game.cpuGoal",function(){i.goal("cpu")}),E.on("game.started",this.followBall),E.on("game.restart",this.resetCameraRestart);var o=C.camera.near,s=C.camera.far;this.introCamera=new b.PerspectiveCamera(50,r/a,o,s),this.introCamera.position.copy(this.cameraSteps[this.cameraStep].position),this.introCamera.lookAt(this.cameraSteps[this.cameraStep].target),this.introCamera.far=8e3,this.introCamera.fov=50,this.cameras.push(this.introCamera),this.goalDistance={x:0,y:0,z:0},this.threeCamera=this.introCamera,this.followCameraActive=!1,this.followPositionActive=!0,E.on("IM.mousemove",this.updateCameraOffset),this.updateSize(t),window.addEventListener("resize",function(){return i.updateSize(t)},!1)}return M()(e,[{key:"updateSize",value:function(e){var t=e.domElement.width,n=e.domElement.height;this.threeCamera.aspect=t/n,this.threeCamera.fov=50,this.threeCamera.updateProjectionMatrix()}}]),e}(),z=function(){function e(t,n){var i=this;_()(this,e),this.updateFogColor=function(e){i.threeRenderer.setClearColor(e.detail.color)},this.scene=t,this.container=n,this.threeRenderer=new b.WebGLRenderer({antialias:!0,powerPreference:"high-performance"}),this.threeRenderer.setClearColor(new b.Color(0)),this.threeRenderer.setPixelRatio(1),this.container.appendChild(this.threeRenderer.domElement),this.threeRenderer.shadowMap.enabled=!1,this.threeRenderer.shadowMap.type=b.PCFSoftShadowMap,this.threeRenderer.shadowMapSoft=!1,this.updateSize(),E.on("maincolor",this.updateFogColor),document.addEventListener("DOMContentLoaded",function(){return i.updateSize()},!1),window.addEventListener("resize",function(){return i.updateSize()},!1)}return M()(e,[{key:"updateSize",value:function(){this.threeRenderer.setSize(this.container.offsetWidth,this.container.offsetHeight),this.threeRenderer.setPixelRatio(1)}},{key:"render",value:function(e,t){this.threeRenderer.render(e,t)}}]),e}(),k=function(){function e(t,n){var i=this;_()(this,e),this.handleMouseDown=function(e){e.preventDefault(),e.stopPropagation();var t=e||window.event;"left"===(null==e.which?t.button<2?"left":"right":t.which<2?"left":"right")?(i.computeRollOvers(),E.emit("IM.mousePress"),document.addEventListener("mouseup",i.handleMouseUp,!1)):(E.emit("IM.mousePressRight"),document.addEventListener("mouseup",i.handleMouseUp,!1))},this.handleMouseUp=function(){E.emit("IM.mouseRelease"),document.removeEventListener("mouseup",i.handleMouseUp,!1)},this.updateDimension=function(){var e=i.renderer.domElement.getBoundingClientRect();i.W=e.width,i.H=e.height,i.L=e.left,i.T=e.top},this.onDocumentMouseMove=function(e){i.realMouse={x:e.clientX-i.L,y:e.clientY-i.T};var t=2*(e.clientX/i.W),n=2*(e.clientY/i.H);i.mouse={x:i.toPrecise(t-1),y:i.toPrecise(n-1)},E.emit("IM.mousemove",{mouse:i.mouse})},this.computeRollOvers=function(){if(e.interactiveObjects.length>0){i.raycaster.setFromCamera(i.mouse,i.camera);var t=i.raycaster.intersectObjects(e.interactiveObjects,!0);if(t.length>0){var n=t[0].object;if(n!==i.intersectObject){for(;!n.userData.action;)n=n.parent;i.intersectObject=n,n.userData.callback&&n.userData.callback()}}else null!==i.intersectObject&&(i.intersectObject=null)}},this.toPrecise=function(e){return Math.round(1e3*e)/1e3},this.renderer=t.threeRenderer,this.camera=n,this.mouse={x:0,y:0},this.smoothing=null,this.scrollDestination=0,this.scrollDelta=0,this.init()}return M()(e,[{key:"init",value:function(){this.raycaster=new b.Raycaster,this.updateDimension(),window.addEventListener("resize",this.updateDimension,!1),document.addEventListener("mousemove",this.onDocumentMouseMove,!1),document.addEventListener("mousedown",this.handleMouseDown,!1),document.addEventListener("contextmenu",function(e){return e.preventDefault(),e.stopPropagation(),!1},!1)}}],[{key:"addToInteraction",value:function(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;t.userData={action:n,param:i,callback:r},e.interactiveObjects.push(t)}}]),e}(),B=k;k.interactiveObjects=[];var G=n("fZjL"),H=n.n(G),V=n("b3Qd"),j=n.n(V),W=function(){function e(t,n){var i=this;if(_()(this,e),this.parseData=function(e){for(var t=0;t<e.length;t+=1){var n=e[t];i.addAssetToPreload(n)}},this.addAssetToPreload=function(t){var n=t.path.split(".").pop(),i=t.id,r={type:n,id:i,path:t.path,path2:t.path2,asset:null,loaded:!1};e.itemsToPreload[i]||(e.itemsToPreload[i]=r)},this.preloadAssets=function(){i.checkLoaded();var t={};try{H()(e.itemsToPreload).forEach(function(n){var r=e.itemsToPreload[n];if(!r.loaded){switch(r.type){case"jpg":case"png":r.asset=(new b.TextureLoader).load(r.path,function(){r.loaded=!0,i.preloadAssets()},function(){},function(){});break;case"dae":(new j.a).load(r.path,function(e){r.asset=e.scene,r.loaded=!0,i.preloadAssets()},i.onProgress,i.onError);break;case"mp4":i.createVideoAsset(n);break;case"mp3":case"ogg":var a=new P.Howl({src:[r.path,r.path2],onload:function(){r.asset=a,r.loaded=!0,I(n,a),"loop_intro"===n&&U("loop_intro",2e3),i.preloadAssets()}});break;case"font":(new b.FontLoader).load(r.path,function(e){r.asset=e,r.loaded=!0,i.preloadAssets()})}throw t}})}catch(e){if(e!==t)throw e}},this.createVideoAsset=function(t){var n=e.itemsToPreload[t],r=document.createElement("video");r.src=n.path,r.loop=!1,r.load(),r.addEventListener("loadeddata",function(){n.loaded=!0,i.preloadAssets()},!1),n.texture=new b.VideoTexture(r),n.texture.minFilter=b.LinearFilter,n.texture.magFilter=b.LinearFilter,n.texture.format=b.RGBFormat},this.checkLoaded=function(){var t=!0,n=0,r=0;H()(e.itemsToPreload).forEach(function(i){var a=e.itemsToPreload[i];t=t&&a.loaded,n+=1,a.loaded&&(r+=1)}),i.percent=Math.ceil(r/n*100),t&&(i.allAssetsLoaded=!0)},this.updatePercent=function(){i.outPercent-=(i.outPercent-i.percent)/4,i.$store.commit("setLoadedPercent",Math.ceil(i.outPercent)),E.emit("setLoadedPercent",Math.ceil(i.outPercent)),100===Math.ceil(i.outPercent)&&i.allAssetsLoaded&&(E.emit("intro.hideLoader"),i.$store.commit("setLoadedPercent",100),E.emit("setLoadedPercent",100),setTimeout(function(){i.$store.commit("setLoading",!1),E.emit("intro.showLogo")},200),clearInterval(i.uP),i.callback())},null!==e.instance)return e.instance;e.instance=this,this.percent=0,this.outPercent=0,this.callback=n,this.allAssetsLoaded=!1,this.$store=t,this.parseData(C.preload),this.preloadAssets(),this.uP=setInterval(this.updatePercent,100)}return M()(e,null,[{key:"getAsset",value:function(t){return!!e.itemsToPreload[t].loaded&&e.itemsToPreload[t].asset}}]),e}(),X=W;W.instance=null,W.itemsToPreload=[],W.itemsToWait=[];var Y=n("RpJ5"),q=n.n(Y),Q=n("doY3"),Z=n.n(Q),$=function e(t,n){var i=this;_()(this,e),this.init=function(){i.material=new b.ShaderMaterial({uniforms:{uIn:{type:"i",value:0},uOut:{type:"i",value:0},uTween:{type:"f",value:0},uTweenOut:{type:"f",value:1},uTime:{type:"f",value:0},uLineWidth:{type:"f",value:3}},vertexShader:Z.a,fragmentShader:q.a,transparent:!0,vertexColors:b.VertexColors}),i.material.extensions.derivatives=!0,setInterval(i.update,42)},this.show=function(){A.TweenMax.to(i.material.uniforms.uTween,3,{value:1,ease:A.Linear.easeNone,delay:1.5})},this.hide=function(){A.TweenMax.to(i.material.uniforms.uTweenOut,2,{value:3,ease:A.Linear.easeNone})},this.update=function(){i.time+=.01,i.material.uniforms.uTime.value=i.time},this.TTH=function(e){var t=e;return t=t.replace(/#pragma include\(THREE\.ShaderChunk.([A-z,0-9,_]*)\)/g,function(e,t){return""+b.ShaderChunk[t]})},this.destroy=function(){i.material.dispose()},this.material=null,this.time=0,this.color=t,this.over=n,this.init()},J=function e(t,n){var i=this;_()(this,e),this.init=function(){i.logoContainer=new b.Object3D,i.logoContainer.position.x=0,i.logoContainer.position.y=0,i.logoContainer.position.z=-400,i.scene.add(i.logoContainer),i.logoMaterial=new $(8817645,16723581),i.obj=X.getAsset("logo"),i.logo=i.obj.getObjectByName("Foosball"),i.logo.scale.set(25,25,25),i.logo.position.set(-27,70,0),i.logo.rotation.x=-Math.PI/2,i.logoContainer.add(i.logo),i.logo.material=i.logoMaterial.material,i.logo.geometry.addAttribute("center",new b.BufferAttribute(i.getFloat32ArrayCenters(i.logo.geometry),3)),i.logoContainer.add(i.logo),E.on("logo.goaway",i.goAway)},this.getFloat32ArrayCenters=function(e){for(var t=[new b.Vector3(1,0,0),new b.Vector3(0,1,0),new b.Vector3(0,0,1)],n=e.attributes.position,i=new Float32Array(3*n.count),r=0,a=n.count;r<a;r+=1)t[r%3].toArray(i,3*r);return i},this.show=function(){i.logoMaterial.show(),N("logo_intro",500),A.TweenMax.to(i.logoContainer.position,2,{z:1460,ease:A.Quint.easeInOut,onComplete:function(){i.$store.commit("setLogoScreen",!0)}})},this.goAway=function(){i.logoMaterial.hide(),A.TweenMax.to(i.logoContainer.position,3,{z:1850,ease:A.Quint.easeInOut,onComplete:function(){i.logoMaterial.destroy();for(var e=0;e<i.logo.children.length;e+=1)i.logo.children[e].geometry.dispose();i.logoContainer.remove(i.logo),i.scene.remove(i.logoContainer)}})},this.scene=t,this.$store=n,this.init()},K=n("xXiM"),ee=n.n(K),te=n("eUxE"),ne=n.n(te),ie=function e(t){var n=this;_()(this,e),this.init=function(){var e=b.UniformsUtils.merge([b.ShaderLib.lambert.uniforms,{diffuse:{value:new b.Color(3355443)}},{color:{value:new b.Color(2236962)}},{uTime:{value:0}},{uResolution:{value:[window.innerWidth,window.innerHeight]}},{colorA:{value:new b.Color(13059149)}},{colorB:{value:new b.Color(828)}}]);n.material=new b.ShaderMaterial({fragmentShader:n.TTH(ee.a),vertexShader:n.TTH(ne.a),uniforms:e,transparent:!0,opacity:1,lights:!0,fog:!0}),n.moveWorker=new Worker("./static/workers/groundMove.js"),n.moveWorker.onmessage=n.updatePlane,n.moveWorker.postMessage({cmd:"start"})},this.updatePlane=function(e){n.material.uniforms.uTime.value=e.data.time},this.TTH=function(e){var t=e;return t=t.replace(/#pragma include\(THREE\.ShaderChunk.([A-z,0-9,_]*)\)/g,function(e,t){return""+b.ShaderChunk[t]})},this.map=t,this.material=null,this.init()},re=n("qXdO"),ae=n.n(re),oe=n("taBD"),se=n.n(oe),ce=function e(t,n){var i=this;_()(this,e),this.init=function(){i.planeMat=new ie;var e=new b.PlaneGeometry(25e3,7500,1),t=b.UniformsUtils.merge([b.ShaderLib.phong.uniforms,{u_resolution:{value:new b.Vector2(window.innerWidth,window.innerHeight)}},{diffuse:{value:new b.Color(0)}},{colorA:{value:new b.Color(13970206)}},{colorB:{value:new b.Color(71477)}},{shininess:{value:.5}}]);i.skyMaterial=new b.ShaderMaterial({fragmentShader:i.TTH(ae.a),vertexShader:i.TTH(se.a),uniforms:t,lights:!0}),i.sky=new b.Mesh(e,i.skyMaterial),i.sky.position.z=-2580,i.sky.position.y=3400,i.sky.material.uniforms.colorA.value=new b.Color(0),i.sky.material.uniforms.colorB.value=new b.Color(0),i.planeMat.material.uniforms.colorA.value=new b.Color(0),i.planeMat.material.uniforms.colorB.value=new b.Color(0),i.scene.add(i.sky),i.planeLoader=new j.a,i.planeLoader.load("./static/models/terreno_04.dae",function(e){i.obj=e.scene;var t=i.obj.getObjectByName("terreno");t.material=i.planeMat.material,t.castShadow=!1,t.receiveShadow=!1,i.scene.add(t),i.$store.commit("planeReady",!0)}),i.planeLight=new b.PointLight(16777215,12),i.planeLight.position.set(0,1090,-1500),i.scene.add(i.planeLight),i.planeLight.distance=3e3,i.planeLight2=new b.PointLight(16777215,2),i.planeLight2.position.set(0,150,1600),i.scene.add(i.planeLight2),i.planeLight2.distance=2350,E.on("setLoadedPercent",i.sunGoUp),E.on("intro.nextstep",i.moveLight)},this.moveLight=function(){A.TweenMax.to(i.planeLight2,3,{intensity:12,ease:A.Quint.easeInOut}),A.TweenMax.to(i.planeLight2.position,3,{y:2090,z:200,ease:A.Quint.easeInOut})},this.sunGoUp=function(e){var t=e.detail,n=new b.Color(0),r=new b.Color(0);n.r=i.mainColor.r*t/100,n.g=i.mainColor.g*t/100,n.b=i.mainColor.b*t/100,r.r=i.subColor.r*t/100,r.g=i.subColor.g*t/100,r.b=i.subColor.b*t/100,i.sky.material.uniforms.colorA.value=n,i.planeMat.material.uniforms.colorA.value=n,i.sky.material.uniforms.colorB.value=r,i.planeMat.material.uniforms.colorB.value=r},this.sunSet=function(){A.TweenMax.to(i.mainColor,15,{r:1,g:.1,b:.1,onUpdate:function(){i.sky.material.uniforms.colorA.value=new b.Color(i.mainColor),i.planeMat.material.uniforms.colorA.value=new b.Color(i.mainColor)}})},this.offLights=function(){A.TweenMax.to(i.planeLight,3,{intensity:.3,delay:1.5})},this.onLights=function(){A.TweenMax.to(i.planeLight,3,{intensity:12})},this.TTH=function(e){var t=e;return t=t.replace(/#pragma include\(THREE\.ShaderChunk.([A-z,0-9,_]*)\)/g,function(e,t){return""+b.ShaderChunk[t]})},this.scene=t,this.$store=n,this.mainColor=new b.Color(13970206),this.subColor=new b.Color(71477),this.init()},le=n("n0/e"),ue=n("3fo+"),he=n.n(ue),de=n("Pa2d"),fe=n.n(de),pe=n("uEJM"),me=n.n(pe),ge=n("7/tV"),ve=n.n(ge),ye=function e(t,n){var i=this;_()(this,e),this.init=function(){var e=b.UniformsUtils.merge([b.ShaderLib.phong.uniforms,{diffuse:{value:new b.Color(10066329)}},{shininess:{value:80}},{emit:{value:.6}},{transition:{value:0}},{color1:{value:i.color1}},{color2:{value:i.color2}},{variance:{value:Math.random()}},{flatShading:{value:!0}}]);i.material=new b.ShaderMaterial({fragmentShader:i.TTH(me.a),vertexShader:i.TTH(ve.a),uniforms:e,lights:!0}),i.material.map=i.map},this.changeColor=function(e,t){A.TweenMax.isTweening(i)&&i.transition>.2?(i.material.uniforms.color1.value=i.color2,i.transition=0,A.TweenMax.killTweensOf(i)):i.material.uniforms.color1.value=i.color1,i.color2=e,i.material.uniforms.color2.value=i.color2,i.material.uniforms.variance.value=Math.random(),i.transition=0,A.TweenMax.killTweensOf(i),i.isTweened=!1,A.TweenMax.to(i,1.1,{transition:1,ease:A.Quad.easeOut,delay:t,onUpdate:function(){i.material.uniforms.transition.value=i.transition},onComplete:function(){i.material.uniforms.transition.value=0;var e=i.color1;i.color1=i.color2,i.color2=e,i.material.uniforms.color1.value=i.color1,i.material.uniforms.color2.value=i.color2,i.isTweened=!0}})},this.TTH=function(e){var t=e;return t=t.replace(/#pragma include\(THREE\.ShaderChunk.([A-z,0-9,_]*)\)/g,function(e,t){return""+b.ShaderChunk[t]})},this.material=null,this.time=0,this.transition=0,this.color1=t,this.color2=n,this.isTweened=!1,this.init()},xe=n("ZrmX"),_e=n.n(xe),be=n("OLpA"),we=n.n(be),Ee=function e(){var t=this;_()(this,e),this.init=function(){var e=b.UniformsUtils.merge([b.ShaderLib.lambert.uniforms,{diffuse:{value:new b.Color(16777215)}},{color:{value:new b.Color(16777215)}},{opacy:{value:0}},{py:{value:0}},{pz:{value:0}}]);t.material=new b.ShaderMaterial({fragmentShader:t.TTH(_e.a),vertexShader:t.TTH(we.a),uniforms:e,transparent:!0,opacity:1,lights:!0,fog:!0})},this.TTH=function(e){var t=e;return t=t.replace(/#pragma include\(THREE\.ShaderChunk.([A-z,0-9,_]*)\)/g,function(e,t){return""+b.ShaderChunk[t]})},this.material=null,this.init()},Te=function e(t,n,i,r,a){var o=this;_()(this,e),this.scrollEvent=function(e){if(Math.abs(e.timeStamp-o.lastCall)>40){var t=he()(e);E.emit("team.add",{offset:t.pixelY}),o.lastCall=e.timeStamp}},this.keyEvent=function(e){var t=e.keyCode?e.keyCode:e.which;o.$store.state.isTeamSelection&&(t===o.kkc[o.kkci]?(o.kkci===o.kkc.length-1&&E.emit("konami.found"),o.kkci+=1,E.emit("konami.key",o.kkci),37!==t&&39!==t&&37!==t&&39!==t&&66!==t&&65!==t||N("tick")):(o.kkci=0,E.emit("konami.key",o.kkci))),38===t?E.emit("team.next"):40===t&&E.emit("team.prev")},this.init=function(){E.on("team.select",o.teamScroll),window.addEventListener("keyup",o.keyEvent),document.addEventListener("mousewheel",o.scrollEvent),document.addEventListener("DOMMouseScroll",o.scrollEvent),o.teamsContainer=new b.Object3D,o.teamsContainer.position.x=0,o.teamsContainer.position.y=o.scrollStart,o.teamsContainer.position.z=400,o.scene.add(o.teamsContainer),o.letterMaterial=new b.MeshBasicMaterial({color:16777215,transparent:!0,opacity:.1}),o.letterMaterial=new Ee,o.teamRows=[],(new b.FontLoader).load("./static/fonts/AHAMONO_Regular.json",function(e){o.font=e;for(var t=0;t<o.teams.length;t+=1)o.createRow(t)}),o.obj=X.getAsset("player"),o.introPlayer=o.obj.getObjectByName("player"),o.introPlayer.receiveShadow=!1,o.introPlayer.castShadow=!1,o.introPlayer.scale.set(15,15,15);var e=o.introPlayer.getObjectByName("corpo"),t=o.introPlayer.getObjectByName("maglia"),n=o.introPlayer.getObjectByName("pantaloncini"),i=o.introPlayer.getObjectByName("calze"),r=o.introPlayer.getObjectByName("scarpe"),a=new b.MeshPhongMaterial({color:7909582,specular:16777215,emissive:7909582,emissiveIntensity:.6,shininess:35});o.tshirtMat=new ye(new b.Color(0),new b.Color(0)),o.shortsMat=new ye(new b.Color(0),new b.Color(0)),o.socksMat=new ye(new b.Color(0),new b.Color(0)),e.material=a,t.material=o.tshirtMat.material,n.material=o.shortsMat.material,i.material=o.socksMat.material,r.material=o.socksMat.material,o.introPlayer.position.y=-150,o.introPlayer.frustumCulled=!1,o.teamsContainer.add(o.introPlayer),o.introLight=new b.PointLight(16777215,0),o.introLight.position.set(0,150,300),o.introLight.name="pLight",o.teamsContainer.add(o.introLight),o.scrollWorker=new Worker("./static/workers/teamScroll.js"),o.scrollWorker.onmessage=o.moveListCallback,o.konami=new fe.a(function(){o.$store.state.isTeamSelection&&(N("coin"),E.off("team.select",o.teamScroll),E.off("IM.mousePress",o.selectHomeTeam),o.selectItaly())})},this.changeMuta=function(e){var t=o.selectedTeam%o.teams.length,n=e?o.teams[t].awaykit:o.teams[t].homekit,i=(new b.Color).setHex(n.shirt),r=(new b.Color).setHex(n.shorts),a=(new b.Color).setHex(n.socks),s=(new b.Color).setHex(n.themeColorLight),c=(new b.Color).setHex(n.themeColorDark);o.tshirtMat.changeColor(i,0),o.shortsMat.changeColor(r,.2),o.socksMat.changeColor(a,.4),o.awaySelection||o.tweenColor(s,c)},this.tweenColor=function(e,t){A.TweenMax.to(o.colorA,1,{r:e.r,g:e.g,b:e.b,onUpdate:function(){o.sky.material.uniforms.colorA.value=o.colorA,o.planeMat.material.uniforms.colorA.value=o.colorA}}),A.TweenMax.to(o.colorB,1,{r:t.r,g:t.g,b:t.b,onUpdate:function(){o.sky.material.uniforms.colorB.value=o.colorB,o.planeMat.material.uniforms.colorB.value=o.colorB}})},this.teamScroll=function(e){N("tick"),o.selectedTeam=e.detail.team+1e3*o.teams.length,o.changeMuta(),o.moveList()},this.autoScroll=function(){o.changeMuta(),o.moveList()},this.moveList=function(){o.scrollWorker.postMessage({scrollOffset:o.scrollOffset,selectedTeam:o.selectedTeam,scrollgap:o.scrollgap,teamsLength:o.teams.length})},this.moveListCallback=function(e){var t=e.data;o.scrollOffset=t.scrollOffset,o.introPlayer.rotation.y=t.introPlayerRotationY,o.row=o.teamRows[t.s],o.row.position.y=0;var n=o.row.getObjectByName("label").material;o.labelsTweening||(n.uniforms.opacy.value=t.matOpacity*o.globalLabelAlpha),n.uniforms.py.value=t.py,n.uniforms.pz.value=t.z},this.createRow=function(e){var t=o.teams[e].name,n=new b.Object3D;n.position.y=(-e+o.selectedTeam)*o.scrollgap;var i=new b.TextGeometry(t,{font:o.font,size:8,height:1e-4,curveSegments:10,bevelEnabled:!1});i.computeBoundingBox();var r=-.5*(i.boundingBox.max.x-i.boundingBox.min.x),a=new b.Mesh(i,o.letterMaterial.material.clone());a.castShadow=!1,a.position.x=r,a.frustumCulled=!1,a.name="label",n.add(a),n.name="row_"+t,n.frustumCulled=!1,o.teamRows.push(n),o.teamsContainer.add(n)},this.show=function(){var e={o:0};A.TweenMax.to(e,3,{o:.3,ease:A.Quint.easeInOut,onUpdate:function(){o.introLight.intensity=e.o}}),setTimeout(function(){o.introPlayer.position.y=200,A.TweenMax.to(o.introPlayer.position,1.2,{y:10,ease:A.Quint.easeInOut,onStart:function(){N("player_come",400),o.teamScroll({detail:{team:0}})}})},1800),A.TweenMax.to(o.teamsContainer.position,3,{z:1300,ease:A.Quint.easeInOut,onComplete:function(){E.emit("teamselection.show"),E.on("teamselection.next",o.selectHomeTeam)}})},this.selectItaly=function(){E.emit("konami.italy"),E.emit("konami.key",10),E.emit("team.hideNextButton"),E.off("IM.mousePress",o.selectHomeTeam),E.off("team.select",o.teamScroll),window.removeEventListener("keyup",o.keyEvent),document.removeEventListener("mousewheel",o.scrollEvent),document.removeEventListener("DOMMouseScroll",o.scrollEvent);var e=o.introPlayer.rotation.y;A.TweenMax.to(o.introPlayer.rotation,1,{y:e+2*Math.PI,ease:A.Quint.easeInOut}),F.loop_intro.fade(1,0,500),setTimeout(function(){F.inno.volume(1),F.inno.play(),F.inno.on("end",function(){F.loop_intro.fade(0,1,1500)})},300),E.emit("ball.shockEE",{screenX:window.innerWidth/2,screenY:window.innerHeight/2});for(var t=function(e){o.row=o.teamRows[e];var t=o.row.getObjectByName("label").material,n={o:t.uniforms.opacy.value};A.TweenMax.to(n,.8,{o:0,ease:A.Quint.easeIn,onUpdate:function(){t.uniforms.opacy.value=n.o},onComplete:function(){o.labelsTweening=!1}})},n=0;n<o.teamRows.length;n+=1)t(n);o.$store.commit("setUserTeamEE");var i=o.$store.state.userTeamObj.kit,r=(new b.Color).setHex(i.shirt),a=(new b.Color).setHex(i.shorts),s=(new b.Color).setHex(i.socks),c=(new b.Color).setHex(i.themeColorLight),l=(new b.Color).setHex(i.themeColorDark);o.tshirtMat.changeColor(r,0),o.shortsMat.changeColor(a,.2),o.socksMat.changeColor(s,.4),o.tweenColor(c,l),setTimeout(function(){o.homeTeam=o.teamsContainer.clone();for(var e=[],t=0;t<o.homeTeam.children.length;t+=1){var n=o.homeTeam.children[t];"row"===n.name.substr(0,3)&&e.push(n)}for(var i=0;i<e.length;i+=1)o.homeTeam.remove(e[i]);var r=o.letterMaterial.material.clone(),a=new b.TextGeometry("ITALY",{font:o.font,size:8,height:1e-4,curveSegments:10,bevelEnabled:!1});a.computeBoundingBox();var s=-.5*(a.boundingBox.max.x-a.boundingBox.min.x),c=new b.Mesh(a,r);c.position.x=s,c.name="label_italy",o.homeLabel=c,o.homeLabel.position.set(s,0,30),o.homeTeam.add(o.homeLabel),A.TweenMax.to(r.uniforms.opacy,.8,{value:1,ease:A.Quint.easeIn});for(var l=0;l<o.teamRows.length;l+=1)o.row=o.teamRows[l],o.row.getObjectByName("label").material.uniforms.opacy.value=0;var u=o.homeTeam.getObjectByName("corpo"),h=o.homeTeam.getObjectByName("maglia"),d=o.homeTeam.getObjectByName("pantaloncini"),f=o.homeTeam.getObjectByName("calze"),p=o.homeTeam.getObjectByName("scarpe");u.material=u.material.clone(),p.material=p.material.clone(),h.material=h.material.clone(),d.material=d.material.clone(),f.material=f.material.clone(),o.homePlayer=o.homeTeam.getObjectByName("player"),o.homeLight=o.homeTeam.getObjectByName("pLight").clone(),o.homeTeam.remove(o.homeTeam.getObjectByName("pLight")),o.homeTeam.add(o.homeLight),o.scene.add(o.homeTeam),o.globalLabelAlpha=0,o.moveList(),o.teamsContainer.position.x=40,o.teamsContainer.scale.set(.65,.65,.65),o.teamsContainer.rotation.y=-.3,o.introPlayer.position.y=150,o.selectedTeam=-5,o.scrollOffset=o.selectedTeam*o.scrollgap,E.emit("teamselection.hide"),o.awaySelection=!0,N("player_side"),A.TweenMax.to(o.homeTeam.position,1.6,{x:-40,ease:A.Quint.easeInOut}),A.TweenMax.to(o.homeTeam.scale,1.6,{x:.65,y:.65,z:.65,ease:A.Quint.easeInOut}),A.TweenMax.to(o.homeTeam.rotation,1.6,{y:.3,ease:A.Quint.easeInOut}),A.TweenMax.to(o.introPlayer.position,1.2,{y:10,ease:A.Quint.easeInOut,delay:.8,onStart:function(){o.teamScroll({detail:{team:o.selectedTeam}});var e=Math.floor(Math.random()*o.teams.length);o.teamScroll({detail:{team:e}})},onComplete:function(){o.startAutoSelection()}})},1300)},this.selectHomeTeam=function(){var e=o.selectedTeam%o.teams.length,t="row_"+o.teams[e].name;E.emit("team.hideNextButton"),E.off("teamselection.next",o.selectHomeTeam),E.off("team.select",o.teamScroll),window.removeEventListener("keyup",o.keyEvent),document.removeEventListener("mousewheel",o.scrollEvent),document.removeEventListener("DOMMouseScroll",o.scrollEvent);for(var n=function(t){o.row=o.teamRows[t];var n=o.row.getObjectByName("label").material;if(t!==e){var i={o:n.uniforms.opacy.value};A.TweenMax.to(i,.8,{o:0,ease:A.Quint.easeIn,onUpdate:function(){n.uniforms.opacy.value=i.o},onComplete:function(){o.labelsTweening=!1}})}else{var r={o:n.uniforms.opacy.value};A.TweenMax.to(r,.8,{o:1,ease:A.Quint.easeIn,onUpdate:function(){n.uniforms.opacy.value=r.o}})}},i=0;i<o.teamRows.length;i+=1)n(i);setTimeout(function(){E.emit("setUserTeam",e),E.emit("teamselection.hide"),o.awaySelection=!0,o.homeTeam=o.teamsContainer.clone();for(var n=[],i=0;i<o.homeTeam.children.length;i+=1){var r=o.homeTeam.children[i];"row"===r.name.substr(0,3)&&r.name!==t?n.push(r):r.name===t&&(r.getObjectByName("label").material=r.getObjectByName("label").material.clone(),o.homeLabel=r.getObjectByName("label"))}for(var a=0;a<n.length;a+=1)o.homeTeam.remove(n[a]);for(var s=0;s<o.teamRows.length;s+=1)o.row=o.teamRows[s],o.row.getObjectByName("label").material.uniforms.opacy.value=0;var c=o.homeTeam.getObjectByName("corpo"),l=o.homeTeam.getObjectByName("maglia"),u=o.homeTeam.getObjectByName("pantaloncini"),h=o.homeTeam.getObjectByName("calze"),d=o.homeTeam.getObjectByName("scarpe");c.material=c.material.clone(),d.material=d.material.clone(),l.material=l.material.clone(),u.material=u.material.clone(),h.material=h.material.clone(),o.homePlayer=o.homeTeam.getObjectByName("player"),o.homeLight=o.homeTeam.getObjectByName("pLight").clone(),o.homeTeam.remove(o.homeTeam.getObjectByName("pLight")),o.homeTeam.add(o.homeLight),o.scene.add(o.homeTeam),o.globalLabelAlpha=0,o.moveList(),N("player_side"),A.TweenMax.to(o.homeTeam.position,1.6,{x:-40,ease:A.Quint.easeInOut}),A.TweenMax.to(o.homeTeam.scale,1.6,{x:.65,y:.65,z:.65,ease:A.Quint.easeInOut}),A.TweenMax.to(o.homeTeam.rotation,1.6,{y:.3,ease:A.Quint.easeInOut}),o.teamsContainer.position.x=40,o.teamsContainer.scale.set(.65,.65,.65),o.teamsContainer.rotation.y=-.3,o.introPlayer.position.y=150,o.selectedTeam=-5,o.scrollOffset=o.selectedTeam*o.scrollgap,A.TweenMax.to(o.introPlayer.position,1.2,{y:10,ease:A.Quint.easeInOut,delay:.8,onStart:function(){o.teamScroll({detail:{team:o.selectedTeam}});var e=Math.floor(Math.random()*o.teams.length);o.teamScroll({detail:{team:e}})},onComplete:function(){o.startAutoSelection()}})},1e3)},this.startAutoSelection=function(){o.isRunning=!0,o.isEnded=!1,A.TweenMax.to(o,1,{globalLabelAlpha:1,ease:A.Quint.easeOut}),E.emit("timer.start"),E.on("timer.button.end",o.buttonStop),E.on("timer.end",o.selectAwayTeam),E.on("timer.stop",function(){o.isRunning=!1}),o.timeStart=120,setTimeout(o.loopChoose,o.timeStart)},this.buttonStop=function(){E.emit("timer.hide"),o.isRunning=!1,setTimeout(o.selectAwayTeam,1e3)},this.loopChoose=function(){o.isRunning||(o.timeStart*=1.2),o.isEnded||(o.selectedTeam+=1,o.autoScroll(),setTimeout(o.loopChoose,o.timeStart))},this.selectAwayTeam=function(){var e=o.selectedTeam%o.teams.length;o.$store.state.userTeam===e&&(o.selectedTeam+=1,o.autoScroll(),e=o.selectedTeam%o.teams.length),o.$store.state.userTeamObj.kit.colorFamily===o.teams[e].homekit.colorFamily&&(o.$store.commit("setCpuAwayShirt",!0),o.changeMuta(!0)),o.isEnded=!0,E.emit("setCpuTeam",e),o.labelsTweening=!0;for(var t=function(t){o.row=o.teamRows[t];var n=o.row.getObjectByName("label").material;if(t!==e){var i={o:n.uniforms.opacy.value};A.TweenMax.to(i,1,{o:0,ease:A.Quint.easeIn,onUpdate:function(){n.uniforms.opacy.value=i.o},onComplete:function(){o.labelsTweening=!1}})}else{o.row=o.teamRows[t],o.awayLabel=o.row.getObjectByName("label");var r={o:n.uniforms.opacy.value};A.TweenMax.to(r,1,{o:1,ease:A.Quint.easeIn,onUpdate:function(){n.uniforms.opacy.value=r.o}})}},n=0;n<o.teamRows.length;n+=1)t(n);setTimeout(o.awayTeamSelectorOut,1200)},this.awayTeamSelectorOut=function(){E.emit("teamawayselection.hide"),setTimeout(function(){E.emit("sideselection.show"),N("sxdx")},1e3),A.TweenMax.to([o.teamsContainer.position,o.homeTeam.position],1,{x:0,ease:A.Quint.easeInOut,delay:1}),A.TweenMax.to([o.teamsContainer.rotation,o.homeTeam.rotation],1,{y:0,ease:A.Quint.easeInOut,delay:1}),A.TweenMax.to(o.homePlayer.position,1,{x:-80,z:0,ease:A.Quint.easeInOut,delay:1}),A.TweenMax.to(o.introPlayer.position,1,{x:80,z:0,ease:A.Quint.easeInOut,delay:1});var e={o:1};A.TweenMax.to(e,1,{o:0,ease:A.Quint.easeIn,onUpdate:function(){o.homeLabel.material.uniforms.opacy.value=e.o,o.awayLabel.material.uniforms.opacy.value=e.o}}),E.on("side.switch",o.switchSide),E.on("intro.tutorial",o.exit)},this.switchSide=function(){N("sxdx",100),o.side=0===o.side?0:1,A.TweenMax.to(o.teamsContainer.rotation,1,{y:o.teamsContainer.rotation.y+Math.PI,ease:A.Quint.easeInOut}),A.TweenMax.to(o.homeTeam.rotation,1,{y:o.homeTeam.rotation.y+Math.PI,ease:A.Quint.easeInOut}),A.TweenMax.to(o.homePlayer.rotation,1.2,{y:o.homePlayer.rotation.y+Math.PI,ease:A.Quint.easeInOut,delay:.2}),A.TweenMax.to(o.introPlayer.rotation,1.2,{y:o.introPlayer.rotation.y+Math.PI,ease:A.Quint.easeInOut,delay:.2}),A.TweenMax.to(o.homeLight.position,1,{z:0===o.side?300:-300,ease:A.Quint.easeInOut}),A.TweenMax.to(o.homeLight.position,1,{z:0===o.side?300:-300,ease:A.Quint.easeInOut})},this.exit=function(){A.TweenMax.to([o.teamsContainer.position,o.homeTeam.position],1,{y:200,ease:A.Quint.easeIn,onComplete:function(){o.letterMaterial.material.dispose(),o.tshirtMat.material.dispose(),o.shortsMat.material.dispose(),o.socksMat.material.dispose(),o.tshirtMat=null,o.shortsMat=null,o.socksMat=null,o.destroy(o.teamsContainer),o.destroy(o.homePlayer),o.scene.remove(o.teamsContainer),o.scene.remove(o.homePlayer)}})},this.destroy=function(e){if(e.children.length>0)for(var t=0;t<e.children.length;t+=1)o.destroy(e.children[t]);else e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()},this.scene=t,this.$store=a,this.planeLight=n,this.sky=i,this.planeMat=r,this.teams=this.$store.state.teams,this.selectedTeam=1e3*this.teams.length-5,this.scrollgap=15,this.scrollOffset=this.selectedTeam*this.scrollgap,this.scrollStart=50,this.playerZOffset=0,this.colorA=new b.Color(0),this.colorB=new b.Color(0),this.lethargy=new le.Lethargy,this.awaySelection=!1,this.globalLabelAlpha=1,this.side=0,this.lastCall=0,this.labelsTweening=!1,this.kkc=[38,38,40,40,37,39,37,39,66,65],this.kkci=0,this.init()},Se=n("UB0+"),Me=function e(t){var n=this;_()(this,e),this.updatePhysics=function(){null!=n.world&&(n.$store.state.pauseGame||n.world.step())},this.dispose=function(){n.world.clear(),n.world=null},this.$store=t,this.world=new Se.f({timestep:.02,iterations:12,worldscale:100,info:!1,gravity:[0,-9.81,0]})},Ae=(n("n4ss"),n("Nm1z"),n("woOf")),Le=n.n(Ae),Ce=n("Ra0v");Ce.EffectComposer=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:Ce.LinearFilter,magFilter:Ce.LinearFilter,format:Ce.RGBAFormat,stencilBuffer:!1},i=e.getDrawingBufferSize();(t=new Ce.WebGLRenderTarget(i.width,i.height,n)).texture.name="EffectComposer.rt1"}this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===Ce.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),void 0===Ce.ShaderPass&&console.error("THREE.EffectComposer relies on THREE.ShaderPass"),this.copyPass=new Ce.ShaderPass(Ce.CopyShader)},Le()(Ce.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getDrawingBufferSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(e){var t=!1,n=void 0,i=void 0,r=this.passes.length;for(i=0;i<r;i++)if(!1!==(n=this.passes[i]).enabled){if(n.render(this.renderer,this.writeBuffer,this.readBuffer,e,t),n.needsSwap){if(t){var a=this.renderer.context;a.stencilFunc(a.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),a.stencilFunc(a.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==Ce.MaskPass&&(n instanceof Ce.MaskPass?t=!0:n instanceof Ce.ClearMaskPass&&(t=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getDrawingBufferSize();(e=this.renderTarget1.clone()).setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var n=0;n<this.passes.length;n++)this.passes[n].setSize(e,t)}}),Ce.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Le()(Ce.Pass.prototype,{setSize:function(e,t){},render:function(e,t,n,i,r){console.error("THREE.Pass: .render() must be implemented in derived pass.")}});var Pe=n("OvRC"),Re=n.n(Pe),Fe=n("Ra0v");Fe.RenderPass=function(e,t,n,i,r){Fe.Pass.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=void 0!==r?r:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},Fe.RenderPass.prototype=Le()(Re()(Fe.Pass.prototype),{constructor:Fe.RenderPass,render:function(e,t,n,i,r){var a,o,s=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(a=e.getClearColor().getHex(),o=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.render(this.scene,this.camera,this.renderToScreen?null:n,this.clear),this.clearColor&&e.setClearColor(a,o),this.scene.overrideMaterial=null,e.autoClear=s}});var Ie=n("Ra0v");Ie.ShaderPass=function(e,t){Ie.Pass.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof Ie.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=Ie.UniformsUtils.clone(e.uniforms),this.material=new Ie.ShaderMaterial({defines:Le()({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.camera=new Ie.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new Ie.Scene,this.quad=new Ie.Mesh(new Ie.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},Ie.ShaderPass.prototype=Le()(Re()(Ie.Pass.prototype),{constructor:Ie.ShaderPass,render:function(e,t,n,i,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}});var Ne=n("Ra0v");Ne.UnrealBloomPass=function(e,t,n,i){Ne.Pass.call(this),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=i,this.resolution=void 0!==e?new Ne.Vector2(e.x,e.y):new Ne.Vector2(256,256);var r={minFilter:Ne.LinearFilter,magFilter:Ne.LinearFilter,format:Ne.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var a=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2);this.renderTargetBright=new Ne.WebGLRenderTarget(a,o,r),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var s=0;s<this.nMips;s++){var c;(c=new Ne.WebGLRenderTarget(a,o,r)).texture.name="UnrealBloomPass.h"+s,c.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(c),(c=new Ne.WebGLRenderTarget(a,o,r)).texture.name="UnrealBloomPass.v"+s,c.texture.generateMipmaps=!1,this.renderTargetsVertical.push(c),a=Math.round(a/2),o=Math.round(o/2)}void 0===Ne.LuminosityHighPassShader&&console.error("THREE.UnrealBloomPass relies on THREE.LuminosityHighPassShader");var l=Ne.LuminosityHighPassShader;this.highPassUniforms=Ne.UniformsUtils.clone(l.uniforms),this.highPassUniforms.luminosityThreshold.value=i,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new Ne.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var u=[3,5,7,9,11];for(a=Math.round(this.resolution.x/2),o=Math.round(this.resolution.y/2),s=0;s<this.nMips;s++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(u[s])),this.separableBlurMaterials[s].uniforms.texSize.value=new Ne.Vector2(a,o),a=Math.round(a/2),o=Math.round(o/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new Ne.Vector3(1,1,1),new Ne.Vector3(1,1,1),new Ne.Vector3(1,1,1),new Ne.Vector3(1,1,1),new Ne.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===Ne.CopyShader&&console.error("THREE.BloomPass relies on THREE.CopyShader");var h=Ne.CopyShader;this.copyUniforms=Ne.UniformsUtils.clone(h.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new Ne.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,blending:Ne.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new Ne.Color,this.oldClearAlpha=1,this.camera=new Ne.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new Ne.Scene,this.basic=new Ne.MeshBasicMaterial,this.quad=new Ne.Mesh(new Ne.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},Ne.UnrealBloomPass.prototype=Le()(Re()(Ne.Pass.prototype),{constructor:Ne.UnrealBloomPass,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,t){var n=Math.round(e/2),i=Math.round(t/2);this.renderTargetBright.setSize(n,i);for(var r=0;r<this.nMips;r++)this.renderTargetsHorizontal[r].setSize(n,i),this.renderTargetsVertical[r].setSize(n,i),this.separableBlurMaterials[r].uniforms.texSize.value=new Ne.Vector2(n,i),n=Math.round(n/2),i=Math.round(i/2)},render:function(e,t,n,i,r){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var a=e.autoClear;e.autoClear=!1,e.setClearColor(new Ne.Color(0,0,0),0),r&&e.context.disable(e.context.STENCIL_TEST),this.renderToScreen&&(this.quad.material=this.basic,this.basic.map=n.texture,e.render(this.scene,this.camera,void 0,!0)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.quad.material=this.materialHighPassFilter,e.render(this.scene,this.camera,this.renderTargetBright,!0);for(var o=this.renderTargetBright,s=0;s<this.nMips;s++)this.quad.material=this.separableBlurMaterials[s],this.separableBlurMaterials[s].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[s].uniforms.direction.value=Ne.UnrealBloomPass.BlurDirectionX,e.render(this.scene,this.camera,this.renderTargetsHorizontal[s],!0),this.separableBlurMaterials[s].uniforms.colorTexture.value=this.renderTargetsHorizontal[s].texture,this.separableBlurMaterials[s].uniforms.direction.value=Ne.UnrealBloomPass.BlurDirectionY,e.render(this.scene,this.camera,this.renderTargetsVertical[s],!0),o=this.renderTargetsVertical[s];this.quad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.render(this.scene,this.camera,this.renderTargetsHorizontal[0],!0),this.quad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,r&&e.context.enable(e.context.STENCIL_TEST),this.renderToScreen?e.render(this.scene,this.camera,void 0,!1):e.render(this.scene,this.camera,n,!1),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=a},getSeperableBlurMaterial:function(e){return new Ne.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new Ne.Vector2(.5,.5)},direction:{value:new Ne.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>        \n        // -------------------------------------\n        //    MOTION BLUR\n        // -------------------------------------\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})},getCompositeMaterial:function(e){return new Ne.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),Ne.UnrealBloomPass.BlurDirectionX=new Ne.Vector2(1,0),Ne.UnrealBloomPass.BlurDirectionY=new Ne.Vector2(0,1);n("a8dF"),n("JbKV"),n("tgxQ");var Oe=function(){function e(t,n,i,r){var a=this;_()(this,e),this.shutDownBlur=function(){a.SWPass.renderToScreen=!0,a.MBlurPass.enabled=!1},this.updateBlur=function(e){a.MBlurPass.material.uniforms.intensity.value=e.detail.progress,a.MBlurPass.material.uniforms.multi.value=e.detail.multi},this.updateShaderVisibility=function(){a.quality<4?(a.SWPass.enabled=!0,a.FXAAPass.enabled=!1,a.BloomPass.enabled=!1,a.SWPass.renderToScreen=!0,a.FXAAPass.renderToScreen=!1,a.BloomPass.renderToScreen=!1,a.MBlurPass.renderToScreen=!1):a.quality<5?(a.FXAAPass.enabled=!0,a.SWPass.enabled=!0,a.BloomPass.enabled=!1,a.FXAAPass.renderToScreen=!1,a.BloomPass.renderToScreen=!1,a.SWPass.renderToScreen=!0,a.MBlurPass.renderToScreen=!1):(a.FXAAPass.enabled=!0,a.BloomPass.enabled=!0,a.SWPass.enabled=!0,a.MBlurPass.enabled=!0,a.FXAAPass.renderToScreen=!1,a.BloomPass.renderToScreen=!1,a.SWPass.renderToScreen=!1,a.MBlurPass.renderToScreen=!0)},this.shockWave=function(e){var t={value:0};a.SWPass.material.uniforms.uTime.value=t.value,a.SWPass.material.uniforms.mouse.value=a.toScreenCoords(new b.Vector2(e.detail.screenX,e.detail.screenY)),A.TweenMax.to(t,1.5,{value:.5,ease:A.Quint.easeOut,onUpdate:function(){a.SWPass.material.uniforms.uTime.value=t.value}})},this.shockWaveEE=function(e){var t={value:0};a.SWPass.material.uniforms.uTime.value=t.value,a.SWPass.material.uniforms.mouse.value=a.toScreenCoords(new b.Vector2(e.detail.screenX,e.detail.screenY)),A.TweenMax.to(t,2.5,{value:.5,delay:.4,ease:A.Quint.easeOut,onUpdate:function(){a.SWPass.material.uniforms.uTime.value=t.value}})},this.toScreenCoords=function(e){var t=2*(e.x/a.container.offsetWidth),n=2*(e.y/a.container.offsetHeight);return new b.Vector2(t-1,n-1)},this.render=function(e){a.composer.render(e)},this.updateSize=function(){a.FXAAPass.material.uniforms.resolution.value.x=1/a.container.offsetWidth,a.FXAAPass.material.uniforms.resolution.value.y=1/a.container.offsetHeight,a.SWPass.material.uniforms.resolution.value=new b.Vector2(a.container.offsetWidth,a.container.offsetHeight),a.BloomPass.resolution=new b.Vector2(a.container.offsetWidth,a.container.offsetHeight),a.composer.setSize(a.container.offsetWidth,a.container.offsetHeight)},this.tweenProp=function(e){A.TweenMax.to(a.BloomPass,1,{strength:e,delay:1})},this.renderer=t,this.scene=n,this.camera=i,this.container=r,this.mouse=new b.Vector2(0,0),this.uTime=0,this.quality=5,E.on("quality.change",function(e){a.quality=e.detail,a.updateShaderVisibility()}),window.addEventListener("resize",function(){return a.updateSize()},!1),this.init()}return M()(e,[{key:"init",value:function(){this.composer=new b.EffectComposer(this.renderer),this.composer.addPass(new b.RenderPass(this.scene,this.camera)),this.fxaa=b.FXAAShader,this.FXAAPass=new b.ShaderPass(this.fxaa),this.FXAAPass.material.uniforms.resolution.value.x=1/this.container.offsetWidth,this.FXAAPass.material.uniforms.resolution.value.y=1/this.container.offsetHeight,this.BloomPass=new b.UnrealBloomPass(new b.Vector2(this.container.offsetWidth,this.container.offsetHeight),1,.5,.95),this.SWave=b.ShockWave,this.SWPass=new b.ShaderPass(this.SWave),this.SWPass.material.uniforms.resolution.value=new b.Vector2(this.container.offsetWidth,this.container.offsetHeight),this.SWPass.material.uniforms.uTime.value=this.uTime,this.SWPass.material.uniforms.mouse.value=this.mouse,this.MBlur=b.MotionBlur,this.MBlurPass=new b.ShaderPass(this.MBlur),this.MBlurPass.material.uniforms.resolution.value=new b.Vector2(this.container.offsetWidth,this.container.offsetHeight),this.FXAAPass.renderToScreen=!1,this.BloomPass.renderToScreen=!1,this.SWPass.renderToScreen=!1,this.MBlurPass.renderToScreen=!0,this.composer.addPass(this.FXAAPass),this.composer.addPass(this.BloomPass),this.composer.addPass(this.SWPass),this.composer.addPass(this.MBlurPass),this.updateShaderVisibility(),E.on("ball.shock",this.shockWave),E.on("ball.shockEE",this.shockWaveEE),E.on("camera.progress",this.updateBlur)}}]),e}(),Ue=function e(){if(_()(this,e),null!==e.instance)return e.instance;e.instance=this};Ue.track=function(e,t){void 0!==Ue.statistics[e]?Ue.statistics[e].value+=void 0!==t?t:1:Ue.statistics[e]=void 0!==t?{value:t}:{value:1}},Ue.reset=function(){var e=Ue.statistics.restarted;Ue.statistics={},Ue.track("userClicks"),Ue.track("cpuClicks"),Ue.track("userTouches"),Ue.track("cpuTouches"),Ue.track("userStrongTouches"),Ue.track("cpuStrongTouches"),Ue.track("restarted",e)};var De=Ue;Ue.instance=null,Ue.statistics={};var ze=function e(t){if(_()(this,e),null!==e.instance)return e.instance;e.instance=this,e.$store=t};ze.add=function(e){ze.$store.commit("addPoints",e)},ze.reset=function(){ze.$store.commit("resetPoints")};var ke=ze;ze.instance=null,ze.$store=null;var Be=function e(t,n,i){var r=this;_()(this,e),this.init=function(){r.ballTexture=X.getAsset("ball"),r.glowTexture=X.getAsset("ball_glow"),r.bumpTexture=X.getAsset("ball_bump");var e=new b.SphereBufferGeometry(r.width,r.segments,r.segments);r.ballMaterial=new b.MeshPhongMaterial({color:16777215,specular:16777215,emissive:15724543,emissiveIntensity:1.6,shininess:35,emissiveMap:r.ballTexture,map:r.ballTexture,bumpMap:r.bumpTexture,bumpScale:.2}),r.mesh=new b.Mesh(e,r.ballMaterial),r.mesh.castShadow=!0,r.mesh.position.set("user"===r.$store.state.possess?r.pxLeft:r.pxRight,r.py,r.pz),r.scene.add(r.mesh),r.ballLight=new b.PointLight(16777215,1.8),r.ballLight.distance=250,r.ballLight.position.copy(r.mesh.position),r.ballLight.castShadow=!1;var t=[1.1,.1,.4,tt.ball,tt.all];r.body=r.world.add({name:"ball",type:"sphere",size:[r.width],pos:["user"===r.$store.state.possess?r.pxLeft:r.pxRight,r.py,r.pz],move:!0,config:t}),r.body.connectMesh(r.mesh),E.on("ball.kick",r.ballKick),E.on("ball.restart",r.restartBall),E.on("game.restart",r.resetBall),r.collided=!1},this.activateLight=function(){r.scene.add(r.ballLight)},this.resetBall=function(){r.body.resetPosition(0,-10,0),r.world.step(),r.body.isStatic=!0},this.restartBall=function(){N("sball"),r.body.resetPosition("user"===r.$store.state.possess?r.pxLeft:r.pxRight,r.py,r.pz),r.world.step(),r.body.isStatic=!1,r.isRestarting=!1,r.stopDetectGoals=!1},this.TTH=function(e){var t=e;return t=t.replace(/#pragma include\(THREE\.ShaderChunk.([A-z,0-9,_]*)\)/g,function(e,t){return""+b.ShaderChunk[t]})},this.ballKick=function(e){if(!r.collided){N("kick1",0,.2);var t=r.body.linearVelocity;Math.abs(t.x)>3||Math.abs(t.y)>3||Math.abs(t.z)>3?(r.collided=!0,ke.add(250),1===r.k?(r.k=2,N("kick1")):(r.k=1,N("kick2")),E.emit("ball.shock",{ballX:r.mesh.position.x,ballZ:r.mesh.position.z,ballY:r.mesh.position.y,screenX:r.translateToScreen(r.mesh.position.x+r.mesh.parent.position.x,r.mesh.position.y+r.mesh.parent.position.y,r.mesh.position.z+r.mesh.parent.position.z).x,screenY:r.translateToScreen(r.mesh.position.x+r.mesh.parent.position.x,r.mesh.position.y+r.mesh.parent.position.y,r.mesh.position.z+r.mesh.parent.position.z).y}),setTimeout(function(){r.collided=!1},600),e?r.$store.state.userSideLeft&&ke.add(250):r.$store.state.userSideLeft||ke.add(250),e?r.$store.state.userSideLeft?De.track("userStrongTouches"):De.track("cpuStrongTouches"):r.$store.state.userSideLeft?De.track("cpuStrongTouches"):De.track("userStrongTouches")):e?r.$store.state.userSideLeft&&ke.add(50):r.$store.state.userSideLeft||ke.add(50),e?r.$store.state.userSideLeft?De.track("userTouches"):De.track("cpuTouches"):r.$store.state.userSideLeft?De.track("cpuTouches"):De.track("userTouches")}},this.update=function(){if(!r.$store.state.pauseGame){var e=r.body.linearVelocity;if(r.ballMaterial.emissiveIntensity=.7+(Math.abs(e.x)+Math.abs(e.y)+Math.abs(e.z))/1,r.mesh.position.y<-11&&(r.isRestarting||(r.isRestarting=!0,setTimeout(function(){var e="user"===r.$store.state.possess?r.pxRight:r.pxLeft;E.emit("game.possess",e),r.resetBall(),r.restartBall()},250))),r.body.contactLink){var t=r.body.contactLink.body.name;t!==r.collisionObject&&(r.collisionObject=t,0!==t&&(-1!==t.indexOf("paddle")&&r.ballKick(-1!==t.indexOf("paddle_1")),-1!==t.indexOf("wall")&&(F.sponda.playing(R.sponda)||(R.sponda=F.sponda.play()))))}r.ballLight.position.copy(r.mesh.position),E.emit("ball.move",{ballX:r.mesh.position.x,ballZ:r.mesh.position.z,ballY:r.mesh.position.y,screenX:r.translateToScreen(r.mesh.position.x+r.mesh.parent.position.x,r.mesh.position.y+r.mesh.parent.position.y,r.mesh.position.z+r.mesh.parent.position.z).x,screenY:r.translateToScreen(r.mesh.position.x+r.mesh.parent.position.x,r.mesh.position.y+r.mesh.parent.position.y,r.mesh.position.z+r.mesh.parent.position.z).y}),r.stopDetectGoals||(r.mesh.position.z>r.goalLimitZUp&&r.mesh.position.z<r.goalLimitZDown&&r.mesh.position.x>r.goalLimitXRight&&r.mesh.position.y>0&&r.mesh.position.y<r.goalLimitY&&(r.stopDetectGoals=!0,r.setGoal(r.$store.state.userSideLeft?"user":"cpu")),r.mesh.position.z>r.goalLimitZUp&&r.mesh.position.z<r.goalLimitZDown&&r.mesh.position.x<r.goalLimitXLeft&&r.mesh.position.y>0&&r.mesh.position.y<r.goalLimitY&&(r.stopDetectGoals=!0,r.setGoal(r.$store.state.userSideLeft?"cpu":"user")),r.toPrecise(r.previousPosition.x)===r.toPrecise(r.mesh.position.x)?r.toPrecise(r.previousPosition.z)===r.toPrecise(r.mesh.position.z)&&(r.ballSteady+=1,r.ballSteady>300&&(r.ballSteady=0,r.resetBall(),r.restartBall())):(r.ballSteady=0,r.previousPosition.x=r.mesh.position.x,r.previousPosition.z=r.mesh.position.z),isNaN(r.mesh.position.x)&&isNaN(r.mesh.position.y)&&isNaN(r.mesh.position.z)&&(r.resetBall(),r.restartBall()))}},this.toPrecise=function(e){return Math.round(10*e)/10},this.translateToScreen=function(e,t,n){var i=new b.Vector3(e,t,n).project(rt.camera);return i.x=(i.x+1)/2*rt.renderer.threeRenderer.domElement.width,i.y=-(i.y-1)/2*rt.renderer.threeRenderer.domElement.height,i},this.setGoal=function(e){r.resetBall(),"user"===e?(ke.add(2e3+Math.round(200*Math.random())),N("goal_user"),E.emit("game.userGoal","user"),E.emit("game.possess",r.$store.state.userSideLeft?"user":"cpu")):(N("goal_cpu"),E.emit("game.cpuGoal","cpu"),E.emit("game.possess",r.$store.state.userSideLeft?"cpu":"user"))},this.dispose=function(){E.off("ball.kick",r.ballKick),E.off("ball.restart",r.restartBall),r.scene.remove(r.ballLight),r.ballMaterial.dispose(),r.mesh.geometry.dispose(),r.scene.remove(r.mesh)},this.scene=t,this.world=n,this.$store=i,this.pxLeft=-39,this.pxRight=39,this.py=120,this.pz=-170,this.goalLimitY=30,this.goalLimitZUp=-30,this.goalLimitZDown=30,this.goalLimitXRight=175,this.goalLimitXLeft=-175,this.width=7,this.segments=36,this.k=1,this.isRestarting=!0,this.collisionObject="",this.ballSteady=0,this.previousPosition={x:0,z:0},this.init(),this.update(),this.stopDetectGoals=!1},Ge=n("YV4a"),He=n.n(Ge),Ve=n("t2Dr"),je=n.n(Ve),We=function e(t,n,i,r){var a=this;_()(this,e),this.init=function(){var e=b.UniformsUtils.merge([b.ShaderLib.phong.uniforms,{diffuse:{value:new b.Color(2043970)}},{time:{value:0}},{redLightPositions:{value:a.lightsPositions.reds}},{blueLightPositions:{value:a.lightsPositions.blues}},{redColor:{value:a.redColor}},{blueColor:{value:a.blueColor}},{overlayColor:{value:new b.Color(3211008)}},{lightIntensity:{value:2}}]);a.lightReflectionMaterial=new b.ShaderMaterial({fragmentShader:a.TTH(He.a),vertexShader:a.TTH(je.a),uniforms:e,transparent:!0,opacity:1,lights:!0}),a.mesh.material=a.lightReflectionMaterial,a.mesh.position.set(a.px,a.py,a.pz);var t=[1,.4,.9,tt.walls,tt.ball];a.body=a.world.add({type:"box",size:[a.width,45,a.height],pos:[0,-21.5,0],move:!1,config:t})},this.TTH=function(e){var t=e;return t=t.replace(/#pragma include\(THREE\.ShaderChunk.([A-z,0-9,_]*)\)/g,function(e,t){return""+b.ShaderChunk[t]})},this.updateLights=function(e,t){if(void 0!==e){var n=e[0].map(function(e){return new b.Vector3(e.entity.x.x,8,e.entity.x.z+e.entity.yz.z)});a.lightReflectionMaterial.uniforms.redLightPositions.value=n;var i=e[1].map(function(e){return new b.Vector3(e.entity.x.x,8,e.entity.x.z+e.entity.yz.z)});a.lightReflectionMaterial.uniforms.blueLightPositions.value=i,a.lightReflectionMaterial.uniforms.redColor.value=new b.Color(t[0]),a.lightReflectionMaterial.uniforms.blueColor.value=new b.Color(t[1])}},this.dispose=function(){a.lightReflectionMaterial.dispose()},this.scene=t,this.world=n,this.mesh=i,this.overlayColor=r,this.px=0,this.py=0,this.pz=0,this.width=400,this.height=400,this.lightsPositions={reds:[[],[],[],[],[],[]],blues:[[],[],[],[],[],[]]},this.redColor=new b.Color(16737894),this.blueColor=new b.Color(6711039),this.init(),this.updateLights()},Xe=function e(t){var n=this;_()(this,e),this.init=function(){n.rows=[],n.rotating=[0,0,0],E.on("ball.move",n.update)},this.addRow=function(e,t){n.rows[t]=e},this.updatePlayersPositions=function(e,t,i){for(var r=99999,a=-1,o=n.rows[e],s=o.paddleBody,c=o.fix,l=0,u=0,h=0;h<o.barObj.children.length;h+=1){var d=o.barObj.children[h].position.z,f=o.barObj.position.x;if(Math.abs(d-t)<r){r=Math.abs(d-t);var p=n.$store.state.userSideLeft?f-i:i-f;Math.abs(p)<15&&p>0&&0===n.rotating[e]&&(n.rotating[e]=1,n.rull(e)),Math.abs(p)<25&&p<0&&0===n.rotating[e]&&(l=Math.abs(r)/r*20,n.rull(e,.7,1)),a=Math.abs(p)<n.intelligenceDepthView?h:-1}}if(u-=(u-l)/20,s.awake(),-1!==a){var m=(t-o.barObj.children[a].position.z)/100+u,g=Math.max(Math.min(m,n.limits[e]),-n.limits[e]);c.position.z-=(c.position.z-g)/n.intelligenceZ,s.position.z-=(s.position.z-g)/n.intelligenceZ}},this.rull=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;De.track("cpuClicks");var r=i;n.$store.state.userSideLeft&&(r*=-1);var a=n.intelligenceForce*t*r;n.rows[e].paddleBody.linearVelocity.set(0,0,0),n.rows[e].paddleBody.applyImpulse(new b.Vector3(0,0,0),new b.Vector3(a/100,0,0)),setTimeout(function(){n.rotating[e]=0},150)},this.update=function(e){if(!n.$store.state.pauseGame){var t=n.toPrecise(e.detail.ballX),i=n.toPrecise(e.detail.ballZ);if(n.rows.length>0){var r=0;r=n.$store.state.userSideLeft?t<n.rows[0].barObj.position.x+n.backRel?0:t<n.rows[1].barObj.position.x+n.backRel?1:2:t>n.rows[0].barObj.position.x-n.backRel?0:t>n.rows[1].barObj.position.x-n.backRel?1:2,n.updatePlayersPositions(r,i,t)}}},this.toPrecise=function(e){return Math.round(1e3*e)/1e3},this.decelerate=function(){!n.mouseIsDown&&n.rows.length>0&&(Math.abs(n.rows[0].paddleBody.angularVelocity.z)>0&&(n.rows[0].paddleBody.angularVelocity.z/=1.15),Math.abs(n.rows[1].paddleBody.angularVelocity.z)>0&&(n.rows[1].paddleBody.angularVelocity.z/=1.15),Math.abs(n.rows[2].paddleBody.angularVelocity.z)>0&&(n.rows[2].paddleBody.angularVelocity.z/=1.15))},this.dispose=function(){E.off("ball.move",n.update)},this.$store=t;var i=this.$store.state.cpuTeamObj;this.intelligenceZ=7+i.difficulty/4,this.intelligenceForce=.65-i.difficulty/1e3,this.intelligenceDepthView=75-i.difficulty/10,this.limits=[.35,.65,.35],this.backRel=10,this.init()},Ye=function e(t,n){var i=this;_()(this,e),this.init=function(){i.rows=[],i.mouseIsDown=!1,E.on("IM.mousemove",i.updatePlayersPositions),E.on("IM.mouseRelease",i.release),E.on("IM.mousePress",i.rullforward),E.on("IM.mousePressRight",i.rullreverse)},this.addRow=function(e,t){i.rows[t]=e},this.updatePlayersPositions=function(e){i.rows.length>0&&(i.yo=e.detail.mouse.y)},this.updatePaddles=function(){i.positionPaddle(0,1.6*i.yo*3),i.positionPaddle(1,1.8*i.yo*3),i.positionPaddle(2,1.6*i.yo*3)},this.positionPaddle=function(e,t){var n=Math.max(Math.min(t,i.limits[e]),-i.limits[e]);i.rows[e].fix.position.z=n,i.rows[e].fix.updatePosition(1/30),i.rows[e].paddleBody.awake()},this.release=function(){i.mouseIsDown=!1},this.rull=function(e){De.track("userClicks"),i.$store.state.isEndingScreen||i.$store.state.pauseGame||N("srull",0,.6),i.mouseIsDown=!0;var t=-1.4*e;i.rows[0].paddleBody.applyImpulse(new b.Vector3(0,0,0),new b.Vector3(t/100,0,0)),i.rows[1].paddleBody.applyImpulse(new b.Vector3(0,0,0),new b.Vector3(t/100,0,0));var n=i.rows[2].paddleBody.getPosition();i.rows[2].paddleBody.applyImpulse(new b.Vector3(0,0,n.z/100),new b.Vector3(t/100,0,0))},this.rullforward=function(){i.rull(i.$store.state.userSideLeft?-1:1)},this.rullreverse=function(){i.rull(i.$store.state.userSideLeft?1:-1)},this.decelerate=function(){!i.mouseIsDown&&i.rows.length>0&&(Math.abs(i.rows[0].paddleBody.angularVelocity.z)>0&&(i.rows[0].paddleBody.angularVelocity.z/=1.2),Math.abs(i.rows[1].paddleBody.angularVelocity.z)>0&&(i.rows[1].paddleBody.angularVelocity.z/=1.2),Math.abs(i.rows[2].paddleBody.angularVelocity.z)>0&&(i.rows[2].paddleBody.angularVelocity.z/=1.2))},this.dispose=function(){E.off("IM.mousemove",i.updatePlayersPositions),E.off("IM.mouseRelease",i.release),E.off("IM.mousePress",i.rullforward),E.off("IM.mousePressRight",i.rullreverse)},this.world=t,this.$store=n,this.limits=[.55,.85,.65],this.init()},qe=function e(t){var n=this;_()(this,e),this.init=function(){},this.resetTimer=function(){n.time=n.$store.state.time,n.startTimer()},this.startTimer=function(){0!==n.time||n.$store.state.isInGoldenGoal?n.$store.state.pauseGame||n.$store.state.isInGoldenGoal||n.$store.state.isGoalAnimation||(setTimeout(n.startTimer,1e3),n.time-=1,E.emit("game.updateTime",n.time)):n.$store.state.userGoal===n.$store.state.cpuGoal?(n.$store.commit("setInGame",!1),n.$store.commit("setInGoldenGoal",!0),E.emit("game.pauseGame",!0),E.emit("game.goldengoal"),E.on("game.userGoal",n.endGoldenGoal),E.on("game.cpuGoal",n.endGoldenGoal)):(E.emit("game.pauseGame",!0),E.emit("game.endGame",!0))},this.endGoldenGoal=function(e){E.emit("game.pauseGame",!0),E.emit("game.endGame",!0)},this.$store=t,this.time=this.$store.state.time,this.init(),E.on("game.goalAnimationFinished",this.startTimer),E.on("game.restart",this.resetTimer),E.on("game.startTimer",this.startTimer)},Qe=n("JbgM"),Ze=n.n(Qe),$e=n("u9tI"),Je=n.n($e),Ke=function e(t,n,i,r){var a=this;_()(this,e),this.updateColors=function(){a.material&&(a.material.uniforms.colorTeamA.value=a.colorLeft,a.material.uniforms.colorTeamB.value=a.colorRight)},this.init=function(){var e=b.UniformsUtils.merge([b.ShaderLib.phong.uniforms,{diffuse:{value:new b.Color(16777215)}},{map:{value:a.map}},{uTime:{value:0}},{force:{value:a.force}},{colorTeamA:{value:a.colorLeft}},{colorTeamB:{value:a.colorRight}},{goalColorA:{value:a.colorLeft}},{goalColorB:{value:a.colorRight}},{currentEffect:{value:a.currentEffect}},{exitEffect:{value:a.exitEffect}},{nextEffect:{value:a.nextEffect}},{trans:{value:a.trans}}]);a.material=new b.ShaderMaterial({fragmentShader:a.TTH(Ze.a),vertexShader:a.TTH(Je.a),uniforms:e,map:a.map,lights:!0,transparent:!1,opacity:1}),a.material.uniforms.map.value=a.map,a.material.map=a.map},this.switchEffect=function(e,t,n){a.nextEffect=e,a.exitEffect=a.currentEffect,a.material.uniforms.exitEffect.value=a.exitEffect,a.material.uniforms.nextEffect.value=a.nextEffect,a.material.uniforms.goalColorA.value=(new b.Color).setHex(t),a.material.uniforms.goalColorB.value=(new b.Color).setHex(n),A.TweenMax.to(a,1,{trans:1,onUpdate:function(){a.material.uniforms.trans.value=a.trans},onComplete:function(){a.exitEffect=0,a.currentEffect=a.nextEffect,a.nextEffect=0,a.trans=0,a.material.uniforms.currentEffect.value=a.currentEffect,a.material.uniforms.exitEffect.value=a.exitEffect,a.material.uniforms.nextEffect.value=a.nextEffect,a.material.uniforms.trans.value=a.trans}})},this.update=function(){a.time+=.05,a.material.uniforms.uTime.value=a.time},this.TTH=function(e){var t=e;return t=t.replace(/#pragma include\(THREE\.ShaderChunk.([A-z,0-9,_]*)\)/g,function(e,t){return""+b.ShaderChunk[t]})},this.map=t,this.time=0,this.force=r,this.exitEffect=0,this.currentEffect=3,this.nextEffect=0,this.trans=0,this.material=null,this.colorLeft=(new b.Color).setHex(n),this.colorRight=(new b.Color).setHex(i),E.on("colors.update",this.updateColors),this.updateColors(),this.init()},et=function(){function e(t,n,i,r){var a=this;_()(this,e),this.autoFX=function(e){var t="user"===e.detail?a.$store.state.userTeamObj:a.$store.state.cpuTeamObj,n=t.kit.themeColorLight,i=t.kit.themeColorDark,r=Math.floor(5*Math.random()+4);a.neonMaterial.switchEffect(r,n,i),a.stadiumMaterial.switchEffect(r,n,i)},this.hideFX=function(){a.neonMaterial.switchEffect(3),a.stadiumMaterial.switchEffect(3)},this.updateColors=function(){var e=!a.$store.state.userSideLeft,t=a.$store.state.userTeamObj,n=a.$store.state.cpuTeamObj;a.dataLeft=e?t:n,a.dataRight=e?n:t;var i=a.dataLeft.kit,r=a.dataRight.kit;a.teamLightColors=[(new b.Color).setHex(i.shadowColor).getHex(),(new b.Color).setHex(r.shadowColor).getHex()],a.teamLeft_shirtsMaterial.color=(new b.Color).setHex(i.shirt),a.teamLeft_shirtsMaterial.emissive=(new b.Color).setHex(i.shirt),a.teamLeft_shirtsMaterial.emissiveIntensity=.5,a.teamRight_shirtsMaterial.color=(new b.Color).setHex(r.shirt),a.teamRight_shirtsMaterial.emissive=(new b.Color).setHex(r.shirt),a.teamRight_shirtsMaterial.emissiveIntensity=.5,a.teamLeft_shortsMaterial.color=(new b.Color).setHex(i.shorts),a.teamLeft_shortsMaterial.emissive=(new b.Color).setHex(i.shorts),a.teamLeft_shortsMaterial.emissiveIntensity=.5,a.teamRight_shortsMaterial.color=(new b.Color).setHex(r.shorts),a.teamRight_shortsMaterial.emissive=(new b.Color).setHex(r.shorts),a.teamRight_shortsMaterial.emissiveIntensity=.5,a.teamLeft_socksMaterial.color=(new b.Color).setHex(i.socks),a.teamLeft_socksMaterial.emissive=(new b.Color).setHex(i.socks),a.teamLeft_socksMaterial.emissiveIntensity=.5,a.teamRight_socksMaterial.color=(new b.Color).setHex(r.socks),a.teamRight_socksMaterial.emissive=(new b.Color).setHex(r.socks),a.teamRight_socksMaterial.emissiveIntensity=.5},this.onError=function(){},this.onProgress=function(){},this.positionObject=function(e){var t=e,n=new b.Vector3(t.position.x,t.position.y,t.position.z);t.position.set(n.x,n.y,n.z),C.shadow.enabled&&(t.receiveShadow=!1,t.castShadow=!1),a.gameContainer.add(t)},this.playFX=function(){a.gamePlane.playFX()},this.activateBall=function(){a.ball.activateLight(),a.gameController.startTimer()},this.update=function(){a.time+=.05,a.neonMaterial&&(a.neonMaterial.material.uniforms.uTime.value=a.time),a.stadiumMaterial&&(a.stadiumMaterial.material.uniforms.uTime.value=a.time),a.gamePlane&&a.gamePlane.updateLights(a.playersPositions,a.teamLightColors),a.ball&&a.ball.update(),a.playersController&&(a.playersController.updatePaddles(),a.playersController.decelerate()),a.aiController&&a.aiController.decelerate()},this.dispose=function(){E.off("colors.update",a.updateColors),E.off("game.started",a.activateBall),E.off("game.userGoal",a.autoFX),E.off("game.cpuGoal",a.autoFX),E.off("goal.exit",a.hideFX),a.gamePlane.dispose(),a.ball.dispose(),a.playersController.dispose(),a.aiController.dispose(),a.gameController.dispose(),a.teamLeft_shirtsMaterial.dispose(),a.teamRight_shirtsMaterial.dispose(),a.teamLeft_shortsMaterial.dispose(),a.teamRight_shortsMaterial.dispose(),a.teamLeft_socksMaterial.dispose(),a.teamRight_socksMaterial.dispose(),a.corpoMaterial.dispose(),a.neonMaterial.material.dispose(),a.stadiumMaterial.material.dispose(),a.scene.remove(a.gameContainer)},this.scene=t,this.world=i,this.$store=r,this.gameContainer=new b.Object3D,this.gameContainer.position.y=-78,this.gameContainer.position.z=-1493.436,this.scene.add(this.gameContainer),this.modelLoader=new j.a(n),this.helpersLoader=new j.a(n),this.homeTeamPlayers=[],this.awayTeamPlayers=[],this.ball=null,this.obj=null,this.WS=100,this.homeTeamInRotation=!1,this.awayTeamInRotation=!1,this.ready=!1,this.teamLeft_shirtsMaterial=new b.MeshPhongMaterial,this.teamRight_shirtsMaterial=new b.MeshPhongMaterial,this.teamLeft_shortsMaterial=new b.MeshPhongMaterial,this.teamRight_shortsMaterial=new b.MeshPhongMaterial,this.teamLeft_socksMaterial=new b.MeshPhongMaterial,this.teamRight_socksMaterial=new b.MeshPhongMaterial,this.corpoMaterial=new b.MeshPhongMaterial({color:7909582,specular:16777215,emissive:7909582,emissiveIntensity:.6,shininess:35}),this.updateColors(),E.on("colors.update",this.updateColors),E.on("game.started",this.activateBall),this.load(),E.on("game.userGoal",this.autoFX),E.on("game.cpuGoal",this.autoFX),E.on("goal.exit",this.hideFX)}return M()(e,[{key:"load",value:function(){for(this.obj=X.getAsset("pool"),this.leftColor="0xff0000",this.rightColor="0x0000ff",this.neonTexture=X.getAsset("neon"),this.neonMaterial=new Ke(this.neonTexture,this.dataLeft.kit.shadowColor,this.dataRight.kit.shadowColor,2),this.neon=this.obj.getObjectByName("neon_bordocampo"),this.neon.material=this.neonMaterial.material,this.asteMaterial=new b.MeshPhongMaterial({color:2043970,specular:14606046,shininess:100}),this.aste=this.obj.getObjectByName("aste"),this.aste.material=this.asteMaterial,this.asteFondoMaterial=new b.MeshPhongMaterial({color:10066329,specular:16777215,shininess:100}),this.asteFondo=this.obj.getObjectByName("aste_fondo"),this.asteFondo.material=this.asteFondoMaterial,this.planeLight=new b.PointLight(16777215,.2),this.planeLight.position.set(0,500,0),this.gameContainer.add(this.planeLight),this.blocco_unico=this.obj.getObjectByName("blocco_unico"),this.stadiumTexture=X.getAsset("poolbaked"),this.stadiumMaterial=new Ke(this.stadiumTexture,this.dataLeft.kit.shadowColor,this.dataRight.kit.shadowColor,2),this.blocco_unico.material=this.stadiumMaterial.material,this.time=0,this.piano_di_gioco=this.obj.getObjectByName("piano_di_gioco"),this.gamePlane=new We(this.scene,this.world,this.piano_di_gioco,this.$store.state.userTeamObj.kit.themeColorLight);this.obj.children.length>0;)this.positionObject(this.obj.children[0]);this.ball=new Be(this.gameContainer,this.world,this.$store),this.playersController=new Ye(this.world,this.$store),this.aiController=new Xe(this.$store),this.gameController=new qe(this.$store),this.helpers=X.getAsset("utilities");for(var t=1;t<40;t+=1){var n=this.helpers.getObjectByName("pPlane"+t);if(n&&(38!==t||39!==t)){var i=[1,.4,.9,e.walls,e.ball],r="wall";t>=26&&t<=31&&(r="basePlane"),this.world.add({type:"box",name:r+"_"+t,size:[n.scale.x,n.scale.y,n.scale.z],pos:[n.position.x,n.position.y,n.position.z],rot:[180*n.rotation.x/Math.PI,180*n.rotation.y/Math.PI,180*n.rotation.z/Math.PI],config:i}).connectMesh(n)}}this.playersPositions=[[],[]],this.homeTeamLocator=[[1,2,3],[10,11],[12]],this.awayTeamLocator=[[7,8,9],[4,5],[6]],this.rows=[this.homeTeamLocator,this.awayTeamLocator];for(var a=this.helpers.getObjectByName("player_block").getObjectByName("blocks_03_player_block02"),o=(new b.Box3).setFromObject(a),s=.7*Math.abs(o.max.x-o.min.x),c=Math.abs(o.max.y-o.min.y),l=1.5*Math.abs(o.max.z-o.min.z),u=.7*Math.abs(o.max.x-o.min.x),h=Math.abs(o.max.y-o.min.y),d=1.3*Math.abs(o.max.z-o.min.z),f=this.helpers.getObjectByName("player01"),p=0;p<2;p+=1)for(var m=0;m<this.rows[p].length;m+=1){var g=!1;0===p^!this.$store.state.userSideLeft||(g=!0);var v="_"+p+m,y=new b.Object3D;this.gameContainer.add(y);var x=this.helpers.getObjectByName("locator"+this.rows[p][m][0]);y.position.x=x.position.x,y.position.y=x.position.y;var _=new Se.c(new Se.e(y.position.x/this.WS,y.position.y/this.WS,y.position.z/this.WS));_.name="paddle"+v,_.type=Se.a;for(var w=this.world.add({name:"fix"+v,size:[1,1,1],pos:[y.position.x,y.position.y,y.position.z],density:1e-4,move:!1,kinematic:!0,allowSleep:!1}),E=0;E<this.rows[p][m].length;E+=1){var T=this.helpers.getObjectByName("locator"+this.rows[p][m][E]),S=f.clone();S.rotation.y=0===p?-Math.PI/2:Math.PI/2,S.getObjectByName("blocks_03_maglia").material=0===p?this.teamLeft_shirtsMaterial:this.teamRight_shirtsMaterial,S.getObjectByName("blocks_03_pantaloncini").material=0===p?this.teamLeft_shortsMaterial:this.teamRight_shortsMaterial,S.getObjectByName("blocks_03_calze").material=0===p?this.teamLeft_socksMaterial:this.teamRight_socksMaterial,S.getObjectByName("blocks_03_scarpe").material=0===p?this.teamLeft_socksMaterial:this.teamRight_socksMaterial,S.getObjectByName("blocks_03_corpo").material=this.corpoMaterial,S.position.z=T.position.z,S.position.y=9,y.add(S);var M=T.position.z/this.WS,A=new Se.d;A.restitution=.5,A.density=2/this.rows[p][m].length,A.relativePosition=new Se.e(0,0,M),A.belongsTo=e.paddles,A.collidesWith=e.ball;var L=new Se.b(A,(g?s:u)/this.WS,(g?c:h)/this.WS,(g?l:d)/this.WS);_.addShape(L);var C={entity:{x:y.position,yz:S.position}};this.playersPositions[p].push(C)}_.setupMass(Se.a),_.connectMesh(y),this.world.addRigidBody(_),this.world.add({type:"jointHinge",body1:"fix"+v,body2:"paddle"+v,pos1:[0,0,0],pos2:[0,9,0],axe1:[0,0,1],axe2:[0,0,1],allowCollision:!1});var P={barObj:y,fix:w,paddleBody:_};g?this.playersController.addRow(P,m):this.aiController.addRow(P,m)}this.ready=!0}}]),e}(),tt=et;et.ball=1,et.walls=2,et.paddles=4,et.all=4294967295;var nt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_()(this,e),this.check=function(){i.fps=[],i.loop=0,i.active=!0,i.debug&&(i.running.innerHTML="Check...")},this.buildInterface=function(){document.getElementById("performanceMeter")&&document.body.removeChild(document.getElementById("performanceMeter")),i.domElement=document.createElement("div"),i.domElement.id="performanceMeter",i.lfps=document.createElement("div"),i.lext=document.createElement("div"),i.perf=document.createElement("div"),i.running=document.createElement("div"),i.domElement.appendChild(i.lfps),i.domElement.appendChild(i.lext),i.domElement.appendChild(i.perf),i.domElement.appendChild(i.running),i.running.innerHTML="Stopped",document.body.appendChild(i.domElement);var e="\n      display: inline-block;\n      min-width: 40px;\n    ";i.balls="\n      display: inline-block;\n      width: 5px;\n      height: 5px;\n      border: 1px solid #fff;\n      border-radius: 5px;\n      margin: 0px;\n    ",i.filled="\n      background-color: #fff;\n    ",i.numberStyle="\n      color: #ffff00;\n      font-size: 10px;\n      font-wheight: bold;\n    ",i.lfps.style=e,i.lext.style=e,i.perf.style=e,i.running.style="\n      width: 40px;\n      display: inline-block;\n      text-align: right;\n    ",i.domElement.style="\n      position: fixed;\n      z-index: 9999999;\n      background-color: #333333;\n      width: 40;\n      height: 40;\n      padding: 6px;\n      bottom: 30px;\n      color: #ffffff;\n      font-family: Arial;\n      font-size: 8px;\n      padding-left: 14px;\n    "},this.begin=function(){if(i.active&&(i.loop+=1,!(i.loop<i.every))){var e=performance.now();i.fps.push(e-i.ts),i.ts=e}},this.end=function(){if(i.active&&!(i.loop<i.every)){i.loop=0;var e=performance.now()-i.ts;i.ext.push(e),i.ext.length>i.quality&&(i.checkPerformance(),i.fps=[],i.loop=0)}},this.checkPerformance=function(){var e=i.fps.reduce(function(e,t){return e+t})/i.fps.length,t=1e3*i.every/e;i.currentFps=Math.round(t);var n=i.ext.reduce(function(e,t){return e+t})/i.ext.length;i.currentExt=Math.round(n);var r=0;if(r=i.currentFps<30?1:i.currentFps<45?2:i.currentFps<50?3:i.currentFps<55?4:5,i.qualityLevel!==r?(i.accuracy=1,i.qualityLevel=r):i.accuracy+=1,i.accuracy>i.accuracyLimit&&(i.onPerformanceChange(i.qualityLevel),i.active=!1,i.debug&&(i.running.innerHTML="Stopped")),i.debug){var a='\n        <div style="'+i.balls+" "+(i.qualityLevel>0?i.filled:"")+' margin-left: 4px;"></div>\n        <div style="'+i.balls+" "+(i.qualityLevel>1?i.filled:"")+'"></div>\n        <div style="'+i.balls+" "+(i.qualityLevel>2?i.filled:"")+'"></div>\n        <div style="'+i.balls+" "+(i.qualityLevel>3?i.filled:"")+'"></div>\n        <div style="'+i.balls+" "+(i.qualityLevel>4?i.filled:"")+'"></div>\n      ';i.lfps.innerHTML='FPS: <span style="'+i.numberStyle+'">'+i.currentFps+"<span>",i.lext.innerHTML='EXT: <span style="'+i.numberStyle+'">'+i.currentExt+"<span>",i.perf.innerHTML="Quality: "+a}},this.debug=a,this.active=!1,this.loop=0,this.ts=0,this.every=t,this.quality=n,this.fps=[],this.ext=[],this.currentFps=60,this.currentExt=0,this.qualityLevel=0,this.accuracy=0,this.accuracyLimit=r,this.onPerformanceChange=function(){},a&&this.buildInterface()},it=function e(t,n){var i=this;_()(this,e),this.testFunc=function(){i.introTeams=new Te(i.scene,i.intro.planeLight,i.intro.sky,i.intro.planeMat,i.$store),i.showTeamSelection()},this.showIntroLogo=function(){i.composer.tweenProp(3.2),i.introLogo=new J(i.scene,i.$store),i.introLogo.show(),setTimeout(function(){i.camera.introCamGotoStep(1),i.perf.check()},1500),i.introTeams=new Te(i.scene,i.intro.planeLight,i.intro.sky,i.intro.planeMat,i.$store),E.on("intro.nextstep",i.showTeamSelection)},this.showTeamSelection=function(){E.off("intro.nextstep",i.showTeamSelection),i.camera.introCamGotoStep(2),i.composer.tweenProp(.5),i.introTeams.show(),i.perf.check(),E.on("intro.tutorial",i.showTutorial)},this.showTutorial=function(){E.on("intro.stadium",function(){i.startGame()}),i.camera.introCamGotoStep(2,-250,function(){E.emit("tutorial.show")})},this.startGame=function(){i.intro.offLights(),i.composer.tweenProp(.5),N("menu_stadio"),O("loop_intro",5e3),U("base",5e3,1e3),i.camera.introCamGotoStep(3,0,function(){i.gameReady=!0,i.perf.check(),i.composer.shutDownBlur(),E.emit("game.countdown")}),i.oimo=new Me(i.$store),i.pool=new tt(i.scene,i.manager,i.oimo.world,i.$store)},this.TTH=function(e){var t=e;return t=t.replace(/#pragma include\(THREE\.ShaderChunk.([A-z,0-9,_]*)\)/g,function(e,t){return""+b.ShaderChunk[t]})},this.render=function(){i.perf.begin(),i.camera.update(),i.pool&&i.pool.ready&&(i.pool.update(),i.oimo&&i.gameReady&&i.oimo.updatePhysics()),i.quality>2?i.composer.render(i.clock.getDelta()):i.renderer.render(i.scene,i.camera.threeCamera),i.perf.end(),requestAnimationFrame(i.render)},this.container=t,this.$store=n,this.gameReady=!1,this.quality=5,window.THREE=b,this.VI=new T(this.$store),this.st=new De,De.track("userClicks"),De.track("cpuClicks"),De.track("userTouches"),De.track("cpuTouches"),De.track("userStrongTouches"),De.track("cpuStrongTouches"),this.sc=new ke(this.$store),this.perf=new nt(10,20,20,!1),this.perf.check(),this.perf.onPerformanceChange=function(e){i.quality=e,E.emit("quality.change",e)},window.addEventListener("resize",function(){return i.perf.check()},!1),this.clock=new b.Clock,this.scene=new b.Scene,this.scene.fog=new b.FogExp2(C.fog.color,C.fog.near),window.scene=this.scene,document.scene=this.scene,window.devicePixelRatio&&(C.dpr=window.devicePixelRatio),this.renderer=new z(this.scene,this.container),e.renderer=this.renderer,this.camera=new D(this.renderer.threeRenderer,this.$store),e.camera=this.camera.threeCamera,this.composer=new Oe(this.renderer.threeRenderer,this.scene,this.camera.threeCamera,this.container),this.interactionManager=new B(this.renderer,this.camera.threeCamera),this.intro=new ce(this.scene,this.$store),E.on("intro.showLogo",this.showIntroLogo),this.render()},rt=it;it.godLight=null,it.camera=null,it.renderer=null;n("qKrd")(b);var at={name:"ThreeScene",data:function(){return{istest:!1}},mounted:function(){this.checkIfAvaiable()},methods:{checkIfAvaiable:function(){y.webgl?(this.aqms=new rt(this.$refs.appContainer,this.$store),this.asxLoader=new X(this.$store,function(){})):y.addGetWebGLMessage()}}},ot={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{ref:"appContainer",attrs:{id:"appContainer"}})},staticRenderFns:[]};var st=n("VU/8")(at,ot,!1,function(e){n("3Vsr")},"data-v-0aee5c08",null).exports,ct={name:"Element3D",props:{action:{default:function(){},type:Function},perspective:{default:70,type:Number}},components:{},mounted:function(){this.xr=0,this.yr=0,this.el=this.$refs.el,this.moving=this.$refs.moving,this.el.addEventListener("mousemove",this.updatePosition),this.e3DMoveWorker=new Worker("./static/workers/e3DMoveWorker.js"),this.e3DMoveWorker.onmessage=this.update3D},destroyed:function(){this.e3DMoveWorker.terminate(),this.el.removeEventListener("mousemove",this.updatePosition)},methods:{doAction:function(){N("click"),E.emit("mouse.out"),this.action()},updatePosition:function(e){this.e3DMoveWorker.postMessage({offsetX:e.offsetX,offsetY:e.offsetY,perspective:this.perspective,offsetWidth:this.el.offsetWidth,offsetHeight:this.el.offsetHeight})},update3D:function(e){this.moving.style.transform=e.data.style}}},lt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"el",staticClass:"container3D",on:{click:this.doAction}},[t("div",{ref:"moving"},[t("div",{staticClass:"eicon"},[this._t("icon")],2),this._v(" "),t("div",{staticClass:"elabel"},[this._t("label")],2)])])},staticRenderFns:[]};var ut=n("VU/8")(ct,lt,!1,function(e){n("gQkG")},"data-v-6377ffcd",null).exports,ht={name:"ScoreTab",computed:v()({},Object(r.b)({score:function(e){return e.score},userGoal:function(e){return e.userGoal},cpuGoal:function(e){return e.cpuGoal},time:function(e){return e.time},pauseGame:function(e){return e.pauseGame},endGame:function(e){return e.endGame},userSideLeft:function(e){return e.userSideLeft},userTeamObj:function(e){return e.userTeamObj},cpuTeamObj:function(e){return e.cpuTeamObj},isInGoldenGoal:function(e){return e.isInGoldenGoal},isGoalAnimation:function(e){return e.isGoalAnimation}})),components:{Element3D:ut},data:function(){return{leftVisible:!1,centerVisible:!1,rightVisible:!1,entered:!1}},created:function(){E.on("game.updateTime",this.checkTime)},mounted:function(){var e=this;setTimeout(function(){e.leftVisible=!0},50),setTimeout(function(){e.centerVisible=!0},750),setTimeout(function(){e.rightVisible=!0},50),setTimeout(function(){e.entered=!0},900)},methods:{togglePause:function(){E.emit("game.togglePause"),this.$store.commit("setPauseGame",!this.pauseGame)},checkTime:function(){this.time%60<=10&&Math.floor(this.time/60)<1&&N("countdown")},resume:function(){this.$store.commit("setPauseGame",!1),E.emit("game.startTimer")},restart:function(){E.emit("game.restart")},exit:function(){var e=this;E.emit("game.exit"),O("base",1e3,0),this.$store.commit("setEndingScreen",!0),setTimeout(function(){e.$router.go("/")},1100)}}},dt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",class:{isPaused:e.pauseGame,isEnded:e.endGame}},[n("div",{staticClass:"scoreContainer",class:{isPaused:e.pauseGame}},[n("div",{staticClass:"score scoreLeft",class:{leftVisible:e.leftVisible}},[n("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[n("div",{key:e.userSideLeft?e.userGoal:e.cpuGoal,staticClass:"number"},[e._v("\n          "+e._s(e.userSideLeft?e.userGoal<10?e.userGoal:" "+e.userGoal:e.cpuGoal<10?e.cpuGoal:" "+e.cpuGoal)+"\n        ")])]),e._v(" "),n("div",{staticClass:"team"},[e._v(e._s(e.userSideLeft?e.userTeamObj.slug:e.cpuTeamObj.slug))])],1),e._v(" "),n("div",{staticClass:"time",class:{centerVisible:e.centerVisible}},[n("div",{staticClass:"timerNumbers",class:{last:Math.floor(e.time/60)<1&&e.time%60<=10,goldenGoal:e.isInGoldenGoal}},[e._v("\n        "+e._s(e.isInGoldenGoal?"GOLDEN GOAL":(Math.floor(e.time/60)>=1?Math.floor(e.time/60)+":":"")+("0"+e.time%60).substr(-2,2))+"\n      ")])]),e._v(" "),n("div",{staticClass:"score scoreRight",class:{rightVisible:e.rightVisible}},[n("div",{staticClass:"team"},[e._v(e._s(e.userSideLeft?e.cpuTeamObj.slug:e.userTeamObj.slug))]),e._v(" "),n("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[n("div",{key:e.userSideLeft?e.cpuGoal:e.userGoal,staticClass:"number"},[e._v("\n          "+e._s(e.userSideLeft?e.cpuGoal<10?e.cpuGoal:" "+e.cpuGoal:e.userGoal<10?e.userGoal:" "+e.userGoal)+"\n        ")])])],1)]),e._v(" "),e.pauseGame||e.isGoalAnimation?e._e():n("div",{staticClass:"pauseButtonRight"},[n("Element3D",{staticClass:"pause",class:{entered:e.entered},attrs:{action:e.togglePause,perspective:50}},[n("img",{attrs:{slot:"icon",src:"./static/imgs/pause.svg"},slot:"icon"}),e._v(" "),n("div",{staticClass:"label",attrs:{slot:"label"},slot:"label"},[e._v("PAUSE")])])],1),e._v(" "),n("div",{staticClass:"points"},[e._v(e._s(e.score.toLocaleString("it")))]),e._v(" "),n("div",{ref:"el",staticClass:"buttons",class:{isPaused:e.pauseGame}},[n("div",{staticClass:"buttonsContainer"},[n("div",{staticClass:"pauseBtn",on:{click:e.resume}},[e._v("RESUME")]),e._v(" "),n("div",{staticClass:"pauseBtn",on:{click:e.restart}},[e._v("RESTART")]),e._v(" "),n("div",{staticClass:"pauseBtn",on:{click:e.exit}},[e._v("EXIT")])])])])},staticRenderFns:[]};var ft=n("VU/8")(ht,dt,!1,function(e){n("HiP1")},"data-v-737eb086",null).exports,pt=n("Iwrh"),mt=n.n(pt),gt=n("mtWM"),vt=n.n(gt),yt=n("uWy6"),xt={name:"ChartAndShare",data:function(){return{imageSRC:"",showSocial:!1}},computed:v()({},Object(r.b)({endGame:function(e){return e.endGame},pauseGame:function(e){return e.pauseGame},userSideLeft:function(e){return e.userSideLeft},userTeamObj:function(e){return e.userTeamObj},cpuTeamObj:function(e){return e.cpuTeamObj}})),props:["listData","user"],components:{},mounted:function(){var e=this.$props.user;this.hash=(e.userTeamScore>e.cpuTeamScore?"ok":"ko")+"&"+e.userTeam+"&"+e.userTeam+"&"+e.userTeamScore+"&"+e.cpuTeam+"&"+e.cpuTeamScore,this.imageSRC=yt.API_BASE_URL+yt.API.GET_SHARE_IMAGE+window.btoa(this.hash),this.SA=this.$refs.scrollArea,this.UI=this.$refs["item"+this.$props.user.id][0],this.UIOver=this.$refs.userItem,this.topPosition=this.UI.offsetTop,this.bottomPosition=this.UI.offsetTop+this.UI.offsetHeight,this.SA.scrollTop=this.topPosition-(this.SA.offsetHeight-this.UI.offsetHeight)/2+20,this.updateScrollPosition(),this.SA.addEventListener("scroll",this.updateScrollPosition)},methods:{showTab:function(e){var t=document.getElementsByClassName("tab");t[0==e?1:0].classList.remove("active"),t[e].classList.add("active");var n=document.getElementsByClassName("control");n[0==e?1:0].classList.remove("active"),n[e].classList.add("active"),this.showSocial=1==e},updateScrollPosition:function(){var e=this.SA.scrollTop,t=e+this.SA.offsetHeight;this.SA.offsetHeight,this.UI.offsetHeight;e>this.topPosition?(this.UIOver.style.visibility="visible",this.UIOver.style.bottom="initial",this.UIOver.style.top="98px"):t<this.bottomPosition?(this.UIOver.style.visibility="visible",this.UIOver.style.bottom="0",this.UIOver.style.top="initial"):this.UIOver.style.visibility="hidden"},shareOnFacebook:function(){E.emit("share.facebook"),window.shareOnFacebook(window.btoa(this.hash),this.$props.user.userTeam,this.$props.user.cpuTeam)},shareOnTwitter:function(){E.emit("share.twitter"),window.shareOnTwitter(window.btoa(this.hash),this.$props.user.userTeam,this.$props.user.cpuTeam)},exit:function(){var e=this;E.emit("game.exit"),O("base",1e3,0),this.$store.commit("setEndingScreen",!0),setTimeout(function(){e.$router.go("/")},1100)}}},_t={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",class:{isEnded:e.endGame}},[n("div",{staticClass:"wrapper"},[n("div",{staticClass:"tabContainer"},[n("div",{staticClass:"tabs"},[n("div",{staticClass:"tab active"},[e._m(0),e._v(" "),n("div",{ref:"scrollArea",staticClass:"tabChartContent"},e._l(e.listData,function(t,i){return n("div",{key:i,ref:"item"+t.id,refInFor:!0,staticClass:"row",class:{active:t.id===e.user.id}},[n("div",{staticClass:"position"},[e._v(e._s(t.position))]),e._v(" "),n("div",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),n("div",{staticClass:"score"},[n("div",{staticClass:"result"},[e._v(e._s(t.userTeam)+" "),n("strong",[e._v(e._s(t.userTeamScore))]),e._v(" - "+e._s(t.cpuTeam)+" "),n("strong",[e._v(e._s(t.cpuTeamScore))])]),e._v(" "),n("span",[e._v(e._s(t.score.toLocaleString("it")))])])])})),e._v(" "),n("div",{ref:"userItem",staticClass:"row active user"},[n("div",{staticClass:"position"},[e._v(e._s(e.user.position))]),e._v(" "),n("div",{staticClass:"name"},[e._v(e._s(e.user.name))]),e._v(" "),n("div",{staticClass:"score"},[n("div",{staticClass:"result"},[e._v(e._s(e.user.userTeam)+" "),n("strong",[e._v(e._s(e.user.userTeamScore))]),e._v(" - "+e._s(e.user.cpuTeam)+" "),n("strong",[e._v(e._s(e.user.cpuTeamScore))])]),e._v(" "),n("span",[e._v(e._s(e.user.score.toLocaleString("it")))])])])]),e._v(" "),n("div",{staticClass:"tab"},[n("div",{staticClass:"tabShareContainer"},[n("img",{attrs:{src:e.imageSRC}})])])])]),e._v(" "),n("div",{staticClass:"controlsContainer"},[n("div",{staticClass:"controls"},[n("a",{staticClass:"control active",on:{click:function(t){e.showTab(0)}}},[e._v("RANKING")]),e._v(" "),n("a",{staticClass:"control",on:{click:function(t){e.showTab(1)}}},[e._v("SHARE")]),e._v(" "),n("a",{staticClass:"control",on:{click:e.exit}},[e._v("EXIT")])]),e._v(" "),n("div",{staticClass:"share"},[n("a",{class:{showSocial:e.showSocial},on:{click:e.shareOnFacebook}},[n("img",{staticClass:"fb",attrs:{src:"./static/imgs/fb.svg"}})]),e._v(" "),n("a",{class:{showSocial:e.showSocial},on:{click:e.shareOnTwitter}},[n("img",{staticClass:"tw",attrs:{src:"./static/imgs/tw.svg"}})])])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"tabChartHeader"},[t("div",[this._v("POSITION ")]),this._v(" "),t("div",[this._v("NAME")]),this._v(" "),t("div",[this._v("   SCORE")])])}]};var bt=n("VU/8")(xt,_t,!1,function(e){n("h8p8")},"data-v-2f9d5985",null).exports,wt={name:"EndGame",data:function(){return{isSubmitting:!1,listData:null,user:null,resultVisible:!1,scoreVisible:!1,vsVisible:!1,enterNameVisible:!1,inputVisible:!1,entered:!1}},computed:v()({},Object(r.b)({userGoal:function(e){return e.userGoal},cpuGoal:function(e){return e.cpuGoal},endGame:function(e){return e.endGame},userSideLeft:function(e){return e.userSideLeft},userTeamObj:function(e){return e.userTeamObj},cpuTeamObj:function(e){return e.cpuTeamObj},userDataSubmitted:function(e){return e.userDataSubmitted}})),components:{Element3D:ut,ChartAndShare:bt},mounted:function(){var e=this;E.emit("game.finishGame");var t=this.userGoal>this.cpuGoal?"youwin":"youlose";this.youwinlose=mt.a.loadAnimation({container:this.$refs.youwinlose,renderer:"svg",loop:!0,autoplay:!0,path:"./static/animations/"+t+".json"}),this.$refs.input&&this.$refs.input.focus(),setTimeout(function(){e.resultVisible=!0},450),setTimeout(function(){e.scoreVisible=!0},150),setTimeout(function(){e.vsVisible=!0},350),setTimeout(function(){e.enterNameVisible=!0},700),setTimeout(function(){e.inputVisible=!0},1100)},methods:{focus:function(){this.$refs.input.focus()},keyDelete:function(){this.$refs.input.value.length>2?this.entered=!0:this.entered=!1},keymonitor:function(e){e.preventDefault();var t=this.$refs.input;if(3===t.value.length&&13===e.keyCode&&this.submitData(),t.value.length>2)return!1;var n=String.fromCharCode(e.keyCode);if(!/[^ ]/gi.test(n))return!1;t.value+=n,t.value.length>2?this.entered=!0:this.entered=!1},submitData:function(){var e=this;this.$refs.input.value.length<3||this.isSubmitting||(this.isSubmitting=!0,setTimeout(function(){e.resultVisible=!1},450),setTimeout(function(){e.scoreVisible=!1;var t={name:e.$refs.input.value,restarted:De.statistics.restarted,score:e.$store.state.score,userTeam:e.$store.state.userTeamObj.slug,userTeamScore:e.$store.state.userGoal,cpuTeam:e.$store.state.cpuTeamObj.slug,cpuTeamScore:e.$store.state.cpuGoal,userClicks:De.statistics.userClicks.value,cpuClicks:De.statistics.cpuClicks.value,userTouches:De.statistics.userTouches.value,cpuTouches:De.statistics.cpuTouches.value,userStrongTouches:De.statistics.userStrongTouches.value,cpuStrongTouches:De.statistics.cpuStrongTouches.value},n={method:"post",url:yt.API_BASE_URL+yt.API.SAVE_USER,data:t};vt()(n).then(function(t){console.log("response: ",t),e.listData=t.data.list,e.user=t.data.user,e.$store.commit("setUserDataSubmitted",!0)}).catch(function(t){console.log("error",t),e.isSubmitting=!1,e.resultVisible=!0,e.scoreVisible=!0,e.vsVisible=!0,e.enterNameVisible=!0,e.inputVisible=!0,e.$store.commit("setUserDataSubmitted",!1)})},700),setTimeout(function(){e.vsVisible=!1},400),setTimeout(function(){e.enterNameVisible=!1},250),setTimeout(function(){e.inputVisible=!1},50))}}},Et={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container",class:{isEnded:e.endGame,isScores:e.userDataSubmitted}},[e.userDataSubmitted?e._e():n("div",{staticClass:"wrapper"},[n("div",{staticClass:"recap",class:{resultVisible:e.resultVisible}},[n("div",{ref:"youwinlose"})]),e._v(" "),n("div",{staticClass:"scoreboard"},[n("div",{staticClass:"score"},[n("div",{staticClass:"number",class:{scoreVisible:e.scoreVisible}},[e._v("\n          "+e._s(e.userSideLeft?e.userGoal<10?e.userGoal:" "+e.userGoal:e.cpuGoal<10?e.cpuGoal:" "+e.cpuGoal)+"\n        ")]),e._v(" "),n("div",{staticClass:"team",class:{scoreVisible:e.scoreVisible}},[e._v(e._s(e.userSideLeft?e.userTeamObj.slug:e.cpuTeamObj.slug))])]),e._v(" "),n("div",{staticClass:"versus",class:{vsVisible:e.vsVisible}},[e._v("VS")]),e._v(" "),n("div",{staticClass:"score"},[n("div",{staticClass:"team",class:{scoreVisible:e.scoreVisible}},[e._v(e._s(e.userSideLeft?e.cpuTeamObj.slug:e.userTeamObj.slug))]),e._v(" "),n("div",{staticClass:"number",class:{scoreVisible:e.scoreVisible}},[e._v("\n          "+e._s(e.userSideLeft?e.cpuGoal<10?e.cpuGoal:" "+e.cpuGoal:e.userGoal<10?e.userGoal:" "+e.userGoal)+"\n        ")])])]),e._v(" "),n("div",{staticClass:"info",class:{enterNameVisible:e.enterNameVisible}},[e._v("ENTER YOUR NAME")]),e._v(" "),n("div",{staticClass:"register",class:{inputVisible:e.inputVisible}},[n("input",{ref:"input",attrs:{type:"text",maxlength:"3",spellcheck:"false"},on:{click:e.focus,keypress:e.keymonitor,keyup:function(t){return"button"in t||!e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete"])?e.keyDelete(t):null}}}),e._v(" "),n("Element3D",{ref:"next",staticClass:"next",class:{entered:e.entered},attrs:{action:e.submitData}},[n("img",{attrs:{slot:"icon",src:"./static/imgs/next.svg"},slot:"icon"}),e._v(" "),n("div",{staticClass:"label",attrs:{slot:"label"},slot:"label"},[e._v("CONTINUE")])])],1)]),e._v(" "),e.userDataSubmitted?n("div",{staticClass:"wrapper"},[n("ChartAndShare",{attrs:{user:e.user,listData:e.listData}})],1):e._e()])},staticRenderFns:[]};var Tt=n("VU/8")(wt,Et,!1,function(e){n("wtU2")},"data-v-678f0c70",null).exports,St={name:"TeamSelectionScroll",computed:Object(r.b)({teams:function(e){return e.teams}}),data:function(){return{entered:!1}},components:{Element3D:ut},mounted:function(){var e=this;setTimeout(function(){e.entered=!0},10),this.selectedTeam=0,this.normSelTeam=this.selectedTeam%this.teams.length,this.selectedTeamMouse=0,this.mouseSmoother=200,this.pointerOffset=7,this.limiter=!1,E.on("team.next",this.next),E.on("team.prev",this.prev),E.on("team.add",this.goto),E.on("team.hideNextButton",function(){e.entered=!1})},methods:{goto:function(e){var t=e.detail.offset;this.selectedTeamMouse+=t;var n=Math.round(this.selectedTeamMouse/this.mouseSmoother);this.selectedTeam!==n&&(this.selectedTeam=n,this.doMove())},prev:function(){this.selectedTeam=this.selectedTeam-1+2,this.selectedTeamMouse=this.selectedTeam*this.mouseSmoother,this.doMove()},next:function(){this.selectedTeam-=1,this.selectedTeamMouse=this.selectedTeam*this.mouseSmoother,this.doMove()},mouseOver:function(e){this.selectedTeam=parseInt(e.target.attributes.index.value,10),this.selectedTeamMouse=this.selectedTeam*this.mouseSmoother,this.doMove()},doMove:function(){E.emit("team.select",{team:this.selectedTeam})},selectHomeTeam:function(){E.emit("teamselection.next")}}},Mt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"nextContainer"},[t("Element3D",{staticClass:"next",class:{entered:this.entered},attrs:{perspective:50,action:this.selectHomeTeam}},[t("img",{attrs:{slot:"icon",src:"./static/imgs/next.svg"},slot:"icon"}),this._v(" "),t("div",{staticClass:"label",attrs:{slot:"label"},slot:"label"},[this._v("NEXT")])])],1)},staticRenderFns:[]};var At=n("VU/8")(St,Mt,!1,function(e){n("kmks")},"data-v-1f8089c2",null).exports,Lt={name:"Logo",data:function(){return{entered:!1}},mounted:function(){var e=this;setTimeout(function(){e.entered=!0},3400)},computed:v()({},Object(r.b)({pauseGame:function(e){return e.pauseGame},isInGame:function(e){return e.isInGame},endGame:function(e){return e.endGame}})),methods:{logoClick:function(){var e=this;this.isInGame&&!this.endGame?(E.emit("game.togglePause"),this.pauseGame?this.$store.commit("setPauseGame",!1):this.$store.commit("setPauseGame",!0)):(E.emit("game.exit"),O("base",1e3,0),this.$store.commit("setEndingScreen",!0),setTimeout(function(){e.$router.go("/")},1100))}}},Ct={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"logoContainer",class:{entered:this.entered},on:{click:this.logoClick}},[this._v("\n    FWC"),t("span",[this._v("-")]),this._v("18\n  ")])},staticRenderFns:[]};var Pt=n("VU/8")(Lt,Ct,!1,function(e){n("9Pf6")},"data-v-5384aef2",null).exports,Rt=n("JNbM"),Ft=n.n(Rt),It={name:"AudioControls",data:function(){return{isActive:!0,bars:24}},mounted:function(){this.ctx=this.$refs.canvas.getContext("2d");var e=this.$refs.canvas.getBoundingClientRect(),t=Math.round(e.left+e.width/2),n=Math.round(e.top+e.height/2);this.center={x:t,y:n},this.audioMulti=1,this.i=0,this.startAudioWiz()},methods:{over:function(){E.emit("mouse.over",this.center)},out:function(){E.emit("mouse.out")},startAudioWiz:function(){this.AUI=setInterval(this.updateAudioWiz,20)},updateAudioWiz:function(){this.i-=1,this.ctx.clearRect(0,0,24,20);for(var e=0;e<this.bars;e++){var t=Math.sin(e/this.bars*Math.PI),n=2*(Math.sin((this.i+e)/5)+1)*this.audioMulti;this.ctx.fillStyle="#ffffff",this.ctx.fillRect(e,n,1,1*t)}},toggleAudio:function(){var e,t=this;this.isActive?(e={v:P.Howler.volume()},A.TweenMax.to(e,1,{v:0,onUpdate:function(){P.Howler.volume(e.v)}}),A.TweenMax.to(this,.5,{audioMulti:0,onComplete:function(){clearInterval(t.AUI)}}),this.isActive=!1):(this.startAudioWiz(),function(){var e={v:P.Howler.volume()};A.TweenMax.to(e,1,{v:1,onUpdate:function(){P.Howler.volume(e.v)}})}(),A.TweenMax.to(this,.5,{audioMulti:1}),this.isActive=!0)}}},Nt={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"audioContainer"},[t("div",{staticClass:"audioButton",class:{selected:this.isActive},on:{click:this.toggleAudio,mouseover:this.over,mouseout:this.out}},[t("canvas",{ref:"canvas",attrs:{width:"24",height:"20"}})])])},staticRenderFns:[]};var Ot={name:"Footer",data:function(){return{entered:!1,skip:!0,kci:0,exit:!1}},components:{AudioControls:n("VU/8")(It,Nt,!1,function(e){n("fZZ/")},"data-v-4a88863e",null).exports},computed:Object(r.b)({isTutorial:function(e){return e.isTutorial}}),mounted:function(){var e=this;this.logo=new Ft.a(this.$refs.aqlogo,{width:90,height:80,padding:30,backgroundColor:"rgba(0, 0, 0, 0)",foregroundColor:"rgba(255, 255, 255, 1)",fract:3,interaction:"mouse",highPerformance:!0,AA:2}),setTimeout(function(){e.entered=!0},3700),E.on("konami.key",this.kc)},methods:{goToAquest:function(){window.open("https://www.aquest.it/","_blank")},skipTutorial:function(){this.skip&&(this.skip=!1,E.emit("tutorial.clearTime"))},kc:function(e){var t=this;this.kci=e.detail,10===this.kci&&setTimeout(function(){t.exit=!0},500)}}},Ut={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"footerContainer"},[n("div",{staticClass:"credits",class:{entered:e.entered},on:{click:e.goToAquest}},[n("div",{staticClass:"label"},[e._v("POWERED BY")]),n("div",{ref:"aqlogo",staticClass:"aqlogo"})]),e._v(" "),n("div",{staticClass:"konamiCode",class:{exit:e.exit}},[n("div",{staticClass:"konamiSymbol",class:{active:e.kci>0}},[e._m(0)]),e._v(" "),n("div",{staticClass:"konamiSymbol",class:{active:e.kci>1}},[e._m(1)]),e._v(" "),n("div",{staticClass:"konamiSymbol",class:{active:e.kci>2}},[e._m(2)]),e._v(" "),n("div",{staticClass:"konamiSymbol",class:{active:e.kci>3}},[e._m(3)]),e._v(" "),n("div",{staticClass:"konamiSymbol",class:{active:e.kci>4}},[e._m(4)]),e._v(" "),n("div",{staticClass:"konamiSymbol",class:{active:e.kci>5}},[e._m(5)]),e._v(" "),n("div",{staticClass:"konamiSymbol",class:{active:e.kci>6}},[e._m(6)]),e._v(" "),n("div",{staticClass:"konamiSymbol",class:{active:e.kci>7}},[e._m(7)]),e._v(" "),n("div",{staticClass:"konamiSymbol",class:{active:e.kci>8}},[e._m(8)]),e._v(" "),n("div",{staticClass:"konamiSymbol",class:{active:e.kci>9}},[e._m(9)])]),e._v(" "),e.isTutorial?n("div",{staticClass:"skipTutorial",on:{click:e.skipTutorial}},[e._v("SKIP")]):e._e(),e._v(" "),n("div",{staticClass:"audio"})])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image"},[t("img",{attrs:{src:"./static/imgs/arrow.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image"},[t("img",{attrs:{src:"./static/imgs/arrow.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image"},[t("img",{attrs:{src:"./static/imgs/arrow.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image"},[t("img",{attrs:{src:"./static/imgs/arrow.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image"},[t("img",{attrs:{src:"./static/imgs/arrow.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image"},[t("img",{attrs:{src:"./static/imgs/arrow.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image"},[t("img",{attrs:{src:"./static/imgs/arrow.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image"},[t("img",{attrs:{src:"./static/imgs/arrow.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image"},[t("img",{attrs:{src:"./static/imgs/B.png"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"image"},[t("img",{attrs:{src:"./static/imgs/A.png"}})])}]};var Dt=n("VU/8")(Ot,Ut,!1,function(e){n("Fq68")},"data-v-2713603d",null).exports,zt={name:"Loading",data:function(){return{entered:!1,leaving:!1}},computed:Object(r.b)({percentLoaded:function(e){return e.percentLoaded}}),components:{},mounted:function(){var e=this;setTimeout(function(){e.entered=!0},100),E.on("intro.hideLoader",this.hideLoading)},methods:{hideLoading:function(){this.leaving=!0}}},kt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loadingContainer"},[n("span",{class:{entered:e.entered,leaving:e.leaving}},[e._v(e._s(e.percentLoaded))]),e._v(" "),n("div",{staticClass:"disclaimer",class:{entered:e.entered,leaving:e.leaving}},[e._v("\n       Requires a modern browser."),n("br"),e._v("Built for Firefox or Chrome. It may work on other browsers.\n     ")])])},staticRenderFns:[]};var Bt=n("VU/8")(zt,kt,!1,function(e){n("KA/m")},"data-v-7421feb7",null).exports,Gt={name:"Btn",props:{action:{default:function(){},type:Function}},components:{}},Ht={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{on:{click:this.action}},[this._t("default")],2)},staticRenderFns:[]};var Vt=n("VU/8")(Gt,Ht,!1,function(e){n("iU3H")},"data-v-4e19594e",null).exports,jt={name:"IntroLogo",computed:Object(r.b)({percentLoaded:function(e){return e.percentLoaded}}),data:function(){return{animationStarted:!1,entered:!1,enteredLogo:!1,leavingLogo:!1}},components:{Element3D:ut,Btn:Vt},mounted:function(){var e=this;this.titleAnimation=mt.a.loadAnimation({container:this.$refs.title,renderer:"svg",loop:!1,autoplay:!0,path:"./static/animations/title.json"}),this.titleAnimation.onEnterFrame=function(){e.animationStarted||(e.animationStarted=!0,e.titleAnimation.onEnterFrame=void 0)},this.enteredLogo=!0,setTimeout(function(){e.entered=!0},1200)},methods:{nextStep:function(){var e=this;this.leavingLogo=!0,this.entered=!1,setTimeout(function(){E.emit("intro.nextstep"),E.emit("logo.goaway"),e.$store.commit("setLogoScreen",!1)},400)}}},Wt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"introLogoContainer"},[n("div",{ref:"title",staticClass:"upper",class:{updated:e.animationStarted,enteredLogo:e.enteredLogo,leavingLogo:e.leavingLogo}}),e._v(" "),n("Element3D",{staticClass:"lower",class:{entered:e.entered},attrs:{action:e.nextStep,perspective:200}},[n("img",{attrs:{slot:"icon",src:"./static/imgs/start.svg"},slot:"icon"}),e._v(" "),n("div",{staticClass:"label",attrs:{slot:"label"},slot:"label"},[e._v("\n      START\n    ")])])],1)},staticRenderFns:[]};var Xt=n("VU/8")(jt,Wt,!1,function(e){n("ojRf")},"data-v-28997acb",null).exports,Yt={name:"AwayTeamSelection",data:function(){return{time:10,dashArray:"0,439.8229",entered:!1,enteredStopButton:!1,leaving:!1}},computed:Object(r.b)({userTeamObj:function(e){return e.userTeamObj}}),components:{Element3D:ut},created:function(){var e=this;E.on("timer.start",this.startTimer),E.on("timer.hide",function(){clearInterval(e.t)})},mounted:function(){var e=this;setTimeout(function(){e.entered=!0},1750),setTimeout(function(){e.enteredStopButton=!0},2e3)},methods:{startTimer:function(){N("countdown"),this.t=setInterval(this.decrement,1e3)},decrement:function(){var e=this;N("countdown"),this.time-=1;var t=43.98229*(10-this.time);this.dashArray=t+",439.8229",1===this.time&&E.emit("timer.stop"),0===this.time&&(E.emit("timer.end"),clearInterval(this.t),setTimeout(function(){e.entered=!1},1e3),setTimeout(function(){e.enteredStopButton=!1},1100))},stopTimer:function(){var e=this;E.emit("timer.button.end"),this.dashArray="439.8229,439.8229",this.time=0,setTimeout(function(){e.leaving=!0},1200),setTimeout(function(){e.enteredStopButton=!1},1600)}}},qt={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"awayContainer"},[n("div",{staticClass:"vs",class:{entered:e.entered,leaving:e.leaving}},[n("svg",{staticClass:"circle-chart",attrs:{viewbox:"0 0 140 140",width:"146",height:"146",xmlns:"http://www.w3.org/2000/svg"}},[n("circle",{attrs:{stroke:"#ffffff","stroke-width":"2",fill:"none",cx:"73",cy:"73",r:"70"}}),e._v(" "),n("circle",{staticClass:"circle-chart__circle",attrs:{stroke:"#f6265c","stroke-width":"2","stroke-dasharray":e.dashArray,"stroke-linecap":"round",fill:"none",cx:"73",cy:"73",r:"70"}})]),e._v("\n      VS\n    ")]),e._v(" "),n("div",{staticClass:"timerContainer",class:{entered:e.entered,leaving:e.leaving}},[n("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[n("div",{key:e.time,staticClass:"timer"},[e._v(e._s(("0"+e.time).substr(-2,2)))])])],1),e._v(" "),n("Element3D",{staticClass:"pause",class:{entered:e.enteredStopButton},attrs:{action:e.stopTimer,perspective:70}},[n("img",{attrs:{slot:"icon",src:"./static/imgs/pause.svg"},slot:"icon"}),e._v(" "),n("div",{staticClass:"label",attrs:{slot:"label"},slot:"label"},[e._v("STOP ME NOW")])])],1)},staticRenderFns:[]};var Qt=n("VU/8")(Yt,qt,!1,function(e){n("zn7v")},"data-v-5db87033",null).exports,Zt={name:"AwayTeamSelection",data:function(){return{time:10,entered:!1,leaving:!1,isLeftSelection:!0,dashArrayLeft:"439.8229,439.8229",dashArrayRight:"0,439.8229"}},computed:v()({},Object(r.b)({userSideLeft:function(e){return e.userSideLeft},teams:function(e){return e.teams},userTeamObj:function(e){return e.userTeamObj}})),components:{Element3D:ut},created:function(){E.on("timer.start",this.startTimer)},mounted:function(){var e=this;this.elL=this.$refs.elL,this.elR=this.$refs.elR,this.updateCenters(),window.addEventListener("resize",this.updateCenters),setTimeout(function(){e.entered=!0},100)},methods:{updateCenters:function(){var e=this.elL.getBoundingClientRect(),t=Math.round(e.left+e.width/2),n=Math.round(e.top+e.height/2);this.centerLeft={x:t,y:n};var i=this.elR.getBoundingClientRect(),r=Math.round(i.left+i.width/2),a=Math.round(i.top+i.height/2);this.centerRight={x:r,y:a}},sideLeft:function(){this.userSideLeft||this.switchSide()},sideRight:function(){this.userSideLeft&&this.switchSide()},switchSide:function(){E.emit("side.switch"),this.dashArrayRight=this.isLeftSelection?"439.8229,439.8229":"0,439.8229",this.dashArrayLeft=this.isLeftSelection?"0,439.8229":"439.8229,439.8229",this.isLeftSelection=!this.isLeftSelection},gotoNext:function(){var e=this;this.leaving=!0,E.emit("intro.tutorial"),setTimeout(function(){e.$store.commit("setSideSelection",!1)},900)}}},$t={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sidesContainer"},[n("div",{staticClass:"sideContent"},[n("div",{staticClass:"selectlabel",class:{entered:e.entered,leaving:e.leaving}},[e._v("SELECT SIDE")]),e._v(" "),n("div",{staticClass:"homeTeam",class:{entered:e.entered,leaving:e.leaving}},[e._v(e._s(e.userTeamObj.name))]),e._v(" "),n("div",{staticClass:"lower"},[n("div",{ref:"elL",staticClass:"left",class:{active:e.userSideLeft,entered:e.entered,leaving:e.leaving},on:{click:e.sideLeft}},[n("svg",{staticClass:"circle-chart",attrs:{viewbox:"0 0 140 140",width:"146",height:"146",xmlns:"http://www.w3.org/2000/svg"}},[n("circle",{attrs:{stroke:"#ffffff","stroke-width":"2",fill:"none",cx:"73",cy:"73",r:"70"}}),e._v(" "),n("circle",{staticClass:"circle-chart__circle",attrs:{stroke:"#f6265c","stroke-width":"2","stroke-dasharray":e.dashArrayLeft,"stroke-linecap":"round",fill:"none",cx:"73",cy:"73",r:"70"}})]),e._v(" "),n("span",[e._v("L")])]),e._v(" "),n("div",{staticClass:"center"},[n("div",{staticClass:"lineSx",class:{active:e.userSideLeft,entered:e.entered,leaving:e.leaving}}),n("div",{staticClass:"lineDx",class:{active:!e.userSideLeft,entered:e.entered,leaving:e.leaving}})]),e._v(" "),n("div",{ref:"elR",staticClass:"right",class:{active:!e.userSideLeft,entered:e.entered,leaving:e.leaving},on:{click:e.sideRight}},[n("svg",{staticClass:"circle-chart",attrs:{viewbox:"0 0 140 140",width:"146",height:"146",xmlns:"http://www.w3.org/2000/svg"}},[n("circle",{attrs:{stroke:"#ffffff","stroke-width":"2",fill:"none",cx:"73",cy:"73",r:"70"}}),e._v(" "),n("circle",{staticClass:"circle-chart__circle",attrs:{stroke:"#f6265c","stroke-width":"2","stroke-dasharray":e.dashArrayRight,"stroke-linecap":"round",fill:"none",cx:"73",cy:"73",r:"70"}})]),e._v(" "),n("span",[e._v("R")])])]),e._v(" "),n("Element3D",{staticClass:"next",class:{entered:e.entered,leaving:e.leaving},attrs:{action:e.gotoNext,perspective:60}},[n("img",{attrs:{slot:"icon",src:"./static/imgs/next.svg"},slot:"icon"}),e._v(" "),n("div",{staticClass:"label",attrs:{slot:"label"},slot:"label"},[e._v("NEXT")])])],1)])},staticRenderFns:[]};var Jt=n("VU/8")(Zt,$t,!1,function(e){n("qykQ")},"data-v-3a7769da",null).exports,Kt={name:"MouseCursor",computed:v()({},Object(r.b)({mouseVisible:function(e){return e.mouseVisible},pauseGame:function(e){return e.pauseGame},overHeader:function(e){return e.overHeader}})),mounted:function(){this.mc=this.$refs.mc,this.x=0,this.y=0,this.mx=0,this.my=0,this.mvel=0,this.lerp=1.2,this.magnet=null,E.on("IM.mousemove",this.updatePosition),this.mouseWorker=new Worker("./static/workers/mouseMove.js"),this.mouseWorker.onmessage=this.mouseUpdate,this.mouseWorker.postMessage({cmd:"start"})},methods:{updatePosition:function(e){var t=e.detail.mouse;this.x=(t.x+1)/2*window.innerWidth,this.y=(t.y+1)/2*window.innerHeight,this.y<150&&!this.overHeader&&this.$store.commit("setOverHeader",!0),this.y>150&&this.overHeader&&this.$store.commit("setOverHeader",!1),this.mouseWorker.postMessage({cmd:"update",x:this.x,y:this.y})},mouseUpdate:function(e){var t=e.data;this.mc.style.left=t.styleLeft,this.mc.style.top=t.styleTop,this.mc.style.transform=t.styleTransform}}},en={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mousePointerContainer",class:{overHeader:this.overHeader,inGame:!this.pauseGame}},[t("div",{ref:"mc",staticClass:"cursor"})])},staticRenderFns:[]};var tn=n("VU/8")(Kt,en,!1,function(e){n("eG+8")},"data-v-11a8439f",null).exports,nn={name:"Tutorial",computed:v()({},Object(r.b)({userSideLeft:function(e){return e.userSideLeft},userTeamObj:function(e){return e.userTeamObj},cpuTeamObj:function(e){return e.cpuTeamObj}})),components:{},data:function(){return{time:10,dashArray:"0,439.8229",stopTimer:!1,entered:!1,leaving:!1}},created:function(){this.startTimer()},mounted:function(){var e=this;mt.a.loadAnimation({container:this.$refs.t1,renderer:"svg",loop:!0,autoplay:!0,path:"./static/animations/tutorial1.json"}),mt.a.loadAnimation({container:this.$refs.t2,renderer:"svg",loop:!0,autoplay:!0,path:"./static/animations/tutorial2.json"}),mt.a.loadAnimation({container:this.$refs.t3,renderer:"svg",loop:!0,autoplay:!0,path:"./static/animations/tutorial3.json"}),E.on("tutorial.clearTime",this.clearTime),setTimeout(function(){e.entered=!0},50)},methods:{nextStep:function(){},startTimer:function(){N("countdown"),this.t=setInterval(this.decrement,1e3)},decrement:function(){var e=this;if(!this.stopTimer){N("countdown"),this.time-=1;var t=43.98229*(10-this.time);this.dashArray=t+",439.8229",-1===this.time&&(this.leaving=!0,setTimeout(function(){clearInterval(e.t),E.emit("intro.stadium")},500))}},clearTime:function(){var e=this;this.stopTimer=!0,this.time=0,this.dashArray="439.8229,439.8229",setTimeout(function(){e.leaving=!0},1300),setTimeout(function(){clearInterval(e.t),E.emit("intro.stadium")},1700)}}},rn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tutorialContainer"},[n("div",{staticClass:"timerContainer",class:{entered:e.entered,leaving:e.leaving}},[n("transition",{attrs:{name:"fade-fast",mode:"out-in"}},[n("div",{key:e.time,staticClass:"timer"},[e._v(e._s(("0"+e.time).substr(-2,2)))])])],1),e._v(" "),n("div",{staticClass:"upper"},[n("div",{staticClass:"team",class:{entered:e.entered,leaving:e.leaving}},[e._v(" "+e._s(e.userSideLeft?e.userTeamObj.slug:e.cpuTeamObj.slug))]),e._v(" "),n("div",{staticClass:"vs",class:{entered:e.entered,leaving:e.leaving}},[n("svg",{staticClass:"circle-chart",attrs:{viewbox:"0 0 140 140",width:"146",height:"146",xmlns:"http://www.w3.org/2000/svg"}},[n("circle",{attrs:{stroke:"#ffffff","stroke-width":"2",fill:"none",cx:"73",cy:"73",r:"70"}}),e._v(" "),n("circle",{staticClass:"circle-chart__circle",attrs:{stroke:"#f6265c","stroke-width":"2","stroke-dasharray":e.dashArray,"stroke-linecap":"round",fill:"none",cx:"73",cy:"73",r:"70"}})]),e._v("\n       VS")]),e._v(" "),n("div",{staticClass:"team",class:{entered:e.entered,leaving:e.leaving}},[e._v(e._s(e.userSideLeft?e.cpuTeamObj.slug:e.userTeamObj.slug))])]),e._v(" "),n("div",{staticClass:"lower",class:{entered:e.entered,leaving:e.leaving}},[n("div",{ref:"t1",staticClass:"animations"}),e._v(" "),n("div",{ref:"t2",staticClass:"animations"}),e._v(" "),n("div",{ref:"t3",staticClass:"animations"})])])},staticRenderFns:[]};var an=n("VU/8")(nn,rn,!1,function(e){n("kNxh")},"data-v-407a95e2",null).exports,on={name:"Goals",data:function(){return{isGoal:!0}},mounted:function(){var e=this;this.goalAnimation=[mt.a.loadAnimation({container:this.$refs.goal0,renderer:"svg",loop:!1,autoplay:!1,path:"./static/animations/goal.json"}),mt.a.loadAnimation({container:this.$refs.goal1,renderer:"svg",loop:!1,autoplay:!1,path:"./static/animations/yeah.json"}),mt.a.loadAnimation({container:this.$refs.goal2,renderer:"svg",loop:!1,autoplay:!1,path:"./static/animations/damn.json"}),mt.a.loadAnimation({container:this.$refs.goal3,renderer:"svg",loop:!1,autoplay:!1,path:"./static/animations/fuck.json"})],this.ani=0,E.on("game.userGoal",function(){e.doAnimation("user")}),E.on("game.cpuGoal",function(){e.doAnimation("cpu")}),E.on("goal.exit",this.hideAnimation)},methods:{doAnimation:function(e){this.ani="user"===e?Math.random()>.5?0:1:Math.random()>.5?2:3,this.goalAnimation[this.ani].goToAndStop(0),this.goalAnimation[this.ani].play()},hideAnimation:function(){}}},sn={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"goalContainer"},[t("div",{ref:"goal0",staticClass:"goal"}),this._v(" "),t("div",{ref:"goal1",staticClass:"goal"}),this._v(" "),t("div",{ref:"goal2",staticClass:"goal"}),this._v(" "),t("div",{ref:"goal3",staticClass:"goal"})])},staticRenderFns:[]};var cn=n("VU/8")(on,sn,!1,function(e){n("D55v")},"data-v-93c0b306",null).exports,ln={name:"Countdown",data:function(){return{isCountdown:!0}},mounted:function(){this.ready=this.$refs.ready,this.go=this.$refs.go,this.golden=this.$refs.golden,E.on("game.countdown",this.startAnimation),E.on("game.goldengoal",this.startGGAnimation),this.readyGo=mt.a.loadAnimation({container:this.$refs.readygo,renderer:"svg",loop:!1,autoplay:!1,path:"./static/animations/readygo.json"}),this.golden=mt.a.loadAnimation({container:this.$refs.golden,renderer:"svg",loop:!1,autoplay:!1,path:"./static/animations/golden.json"})},methods:{startAnimation:function(){var e=this;this.readyGo.goToAndStop(0),this.readyGo.onComplete=function(){e.$store.commit("setPauseGame",!1),E.emit("game.kickoff"),E.emit("game.started"),E.emit("ball.restart")},this.readyGo.play()},startGGAnimation:function(){var e=this;this.golden.goToAndStop(0),this.golden.onComplete=function(){e.$store.commit("setPauseGame",!1),E.emit("game.started"),E.emit("ball.restart")},this.golden.play()}}},un={render:function(){var e=this.$createElement,t=this._self._c||e;return this.isCountdown?t("div",{staticClass:"countdownContainer"},[t("div",{staticClass:"countdown"},[t("div",{ref:"readygo"}),this._v(" "),t("div",{ref:"golden"})])]):this._e()},staticRenderFns:[]};var hn=n("VU/8")(ln,un,!1,function(e){n("9LDw")},"data-v-a38e511e",null).exports,dn={name:"CookieBar",data:function(){return{cookieAccepted:!1}},components:{},created:function(){null!==this.readCookie("aqfw18_cookie_policy")&&(this.cookieAccepted=!0)},methods:{hideCookieBar:function(){this.createCookie("aqfw18_cookie_policy","accettato",2),this.cookieAccepted=!0},createCookie:function(e,t,n){if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3);var r="; expires="+i.toGMTString()}else r="";document.cookie=e+"="+t+r+"; path=/"},readCookie:function(e){for(var t=e+"=",n=document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null},eraseCookie:function(e){createCookie(e,"",-1)}}},fn={render:function(){var e=this.$createElement,t=this._self._c||e;return t("transition",{attrs:{name:"fade"}},[this.cookieAccepted?this._e():t("div",{staticClass:"cookieContainer"},[t("div",{staticClass:"bar"},[this._v("\n      This site uses cookies to improve the user experience.\n      "),t("a",{attrs:{href:"/privacy",target:"_blank"}},[this._v("Learn More")]),this._v(" "),t("a",{on:{click:this.hideCookieBar}},[this._v("Accept")])])])])},staticRenderFns:[]};var pn=n("VU/8")(dn,fn,!1,function(e){n("4JYt")},"data-v-6bd8b0ec",null).exports,mn={render:function(){var e=this.$createElement,t=this._self._c||e;return t("transition",{attrs:{name:"fade"}},[t("div",{staticClass:"outContainer"})])},staticRenderFns:[]};var gn=n("VU/8")({name:"OutScreen"},mn,!1,function(e){n("XIRv")},"data-v-d4a3a062",null).exports,vn={name:"Overlay",data:function(){return{}},computed:Object(r.b)({isReady:function(e){return e.isReady},loading:function(e){return e.loading},isInGame:function(e){return e.isInGame},isEndingScreen:function(e){return e.isEndingScreen},pauseGame:function(e){return e.pauseGame},endGame:function(e){return e.endGame},percentLoaded:function(e){return e.percentLoaded},isLogoScreen:function(e){return e.isLogoScreen},isTeamSelection:function(e){return e.isTeamSelection},isAwaySelection:function(e){return e.isAwaySelection},isSideSelection:function(e){return e.isSideSelection},isTutorial:function(e){return e.isTutorial},userSideLeft:function(e){return e.userSideLeft},teams:function(e){return e.teams}}),components:{ScoreTab:ft,EndGame:Tt,ChartAndShare:bt,TeamSelectionScroll:At,Logo:Pt,Footer:Dt,Loading:Bt,IntroLogo:Xt,AwayTeamSelection:Qt,SideSelection:Jt,Tutorial:an,MouseCursor:tn,Goals:cn,Countdown:hn,CookieBar:pn,OutScreen:gn},created:function(){var e=this;E.on("teamselection.show",function(){e.$store.commit("setTeamSelection",!0)}),E.on("teamselection.hide",function(){e.$store.commit("setTeamSelection",!1),e.$store.commit("setAwaySelection",!0)}),E.on("teamawayselection.hide",function(){e.$store.commit("setAwaySelection",!1)}),E.on("teamawayselection.show",function(){e.$store.commit("setAwaySelection",!0)}),E.on("sideselection.show",function(){e.$store.commit("setSideSelection",!0)}),E.on("sideselection.hide",function(){e.$store.commit("setSideSelection",!1)}),E.on("side.switch",function(){e.$store.commit("setUserSideLeft",!e.userSideLeft)}),E.on("setUserTeam",function(t){e.$store.commit("setUserTeam",t.detail)}),E.on("setCpuTeam",function(t){e.$store.commit("setCpuTeam",t.detail)}),E.on("tutorial.show",function(){e.$store.commit("setTutorial",!0)}),E.on("intro.stadium",function(){e.$store.commit("setTutorial",!1)}),E.on("game.started",function(){e.$store.commit("setInGame",!0)}),E.on("game.restart",function(){e.$store.commit("setInGoldenGoal",!1),e.$store.commit("setPauseGame",!0),e.$store.commit("setInGame",!1),e.$store.commit("resetTime"),e.$store.commit("resetUserGoal"),e.$store.commit("resetCpuGoal"),e.$store.commit("updateRestartKey"),De.track("game.restart"),ke.reset(),E.emit("game.countdown")})}},yn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"overlayContainer"},[e.isReady&&!e.loading?n("Logo"):e._e(),e._v(" "),e.isReady&&e.isInGame?n("ScoreTab"):e._e(),e._v(" "),e.isReady&&e.endGame?n("EndGame"):e._e(),e._v(" "),e.isTeamSelection?n("TeamSelectionScroll"):e._e(),e._v(" "),e.isAwaySelection?n("AwayTeamSelection"):e._e(),e._v(" "),e.isSideSelection?n("SideSelection"):e._e(),e._v(" "),e.isTutorial?n("Tutorial"):e._e(),e._v(" "),e.isReady&&!e.loading?n("Footer"):e._e(),e._v(" "),e.isReady&&e.loading?n("Loading"):e._e(),e._v(" "),e.isLogoScreen?n("IntroLogo"):e._e(),e._v(" "),e.pauseGame||e.endGame?e._e():n("Goals"),e._v(" "),n("Countdown"),e._v(" "),n("CookieBar"),e._v(" "),n("MouseCursor"),e._v(" "),e.isEndingScreen?n("OutScreen"):e._e()],1)},staticRenderFns:[]};var xn=n("VU/8")(vn,yn,!1,function(e){n("dmr9")},"data-v-b85f9434",null).exports,_n={name:"MainContainer",data:function(){return{}},computed:v()({},Object(r.b)({isMobile:function(e){return e.isMobile}})),components:{ThreeScene:st,Overlay:xn,MouseCursor:tn,Logo:Pt},created:function(){this.ed=new E,E.on("intro.nextstep",function(){window.gtag("event","start_game")}),E.on("timer.button.end",function(){window.gtag("event","stop_selection_cpu_team")}),E.on("side.switch",function(){window.gtag("event","switch_side")}),E.on("tutorial.clearTime",function(){window.gtag("event","skip_tutorial")}),E.on("game.kickoff",function(){window.gtag("event","game_start")}),E.on("game.finishGame",function(){window.gtag("event","game_end")}),E.on("game.togglePause",function(){window.gtag("event","toggle_pause")}),E.on("game.restart",function(){window.gtag("event","game_restart")}),E.on("game.exit",function(){window.gtag("event","game_exit")}),E.on("share.facebook",function(){window.gtag("event","share_facebook")}),E.on("share.twitter",function(){window.gtag("event","share_twitter")}),E.on("konami.italy",function(){window.gtag("event","konami_italy")})},mounted:function(){this.$refs.aqlogo&&(this.logo=new Ft.a(this.$refs.aqlogo,{width:90,height:80,padding:30,backgroundColor:"rgba(0, 0, 0, 0)",foregroundColor:"rgba(255, 255, 255, 1)",fract:3,interaction:"mouse",highPerformance:!0,AA:2}))},methods:{viewStats:function(){this.$router.push("/fwcstats")}}},bn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[e.isMobile?e._e():n("div",{staticClass:"container"},[n("ThreeScene"),e._v(" "),n("div",{attrs:{id:"info"}}),e._v(" "),n("Overlay"),e._v(" "),n("div",{staticClass:"vignette"})],1),e._v(" "),e.isMobile?n("div",{staticClass:"mobileContainer"},[n("Logo",{staticClass:"mobileLogo"}),e._v(" "),e._m(0),e._v(" "),n("div",{staticClass:"buttonStats",on:{click:e.viewStats}},[e._v("VIEW STATS")]),e._v(" "),n("div",{staticClass:"mobileFooter"},[n("div",{staticClass:"label"},[e._v("POWERED BY")]),e._v(" "),n("div",{ref:"aqlogo",staticClass:"logo"})])],1):e._e()])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"mobileLabel"},[t("h1",[this._v("Hey buddy")]),this._v(" "),t("p",[this._v("this game is too wild to be played on your phone!")]),this._v(" "),t("p",[this._v("Try it on your computer and let’s have some fun!")])])}]};var wn=n("VU/8")(_n,bn,!1,function(e){n("scys")},"data-v-7604d454",null).exports,En={name:"PrivacyOverlay",data:function(){return{}},components:{Logo:Pt,Footer:Dt,MouseCursor:tn},created:function(){}},Tn={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"overlayContainer"},[t("Logo"),this._v(" "),t("Footer"),this._v(" "),t("MouseCursor")],1)},staticRenderFns:[]};var Sn={name:"PrivacyContainer",data:function(){return{}},components:{PrivacyOverlay:n("VU/8")(En,Tn,!1,function(e){n("ca9b")},"data-v-38c2603a",null).exports},created:function(){this.ed=new E},mounted:function(){},methods:{}},Mn={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container"},[t("PrivacyOverlay"),this._v(" "),this._m(0)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"privacyContainer"},[n("br"),e._v(" "),n("h1",[e._v("Privacy policy")]),n("br"),e._v(" "),n("br"),e._v("\nLatest update 25 May 2018"),n("br"),e._v(" "),n("br"),e._v("\nThis page describes the administrative arrangements used on the foosballworldcup18.com site for processing the personal data of the users who consult the site. The present notice is provided, including pursuant to Article 13 of Legislative Decree no. 196/2003 (as amended), solely for the site foosballworldcup18.com and not for other websites which users may consult via links available on the present site."),n("br"),e._v(" "),n("br"),e._v(" "),n("h2",[e._v('"CONTROLLER"')]),e._v("\nConsultation of this site may result in data relating to identified or identifiable persons being processed."),n("br"),e._v('\nThe data processing "Controller" is AQuest S.r.l. - Via F. Garofoli, 233 - 37057 - San Giovanni Lupatoto (VR) VAT ID 02552210235.'),n("br"),e._v(" "),n("br"),e._v(" "),n("h2",[e._v("LOCATION OF DATA PROCESSING")]),e._v("\nProcessing will be carried out electronically and manually using methods and tools designed to ensure maximum security and confidentiality by specifically appointed persons in compliance with the provisions of Articles 31 et seq. of Legislative Decree 196/03. The personal data obtained from forms on the site will be archived at the Microsoft Azure (Northern Europe) datacentre and processed on the Controller's premises exclusively by appropriately trained technical office staff appointed to carry out processing."),n("br"),e._v("\nNo data arising from the web service is disclosed or distributed to third parties except for the purpose of providing requested services or for promotional and marketing activities closely connected to AQuest. "),n("br"),e._v("\nSome data could be transferred to foreign countries, including outside the EU. You can obtain further detailed information about the processing of personal data for each service or contact us at the following address: gdpr@aquest.it"),n("br"),e._v(" "),n("br"),e._v(" "),n("h2",[e._v("PROCESSING ARRANGEMENTS AND SECURITY OF INFORMATION")]),e._v("\nPersonal data will be retained for no longer than required for the purposes for which the data were collected and subsequently processed, and in any event for no longer than 15 years unless anonymised."),n("br"),e._v("\nThe Controller makes no use of automated processes, including profiling, to achieve the purposes set out in the present notice."),n("br"),e._v("\nWe do everything possible to ensure the security of your data. We carry out a series of technical, administrative and physical checks to ensure your data stay confidential and secure. In compliance with the applicable rules, specific security measures are taken to prevent data loss, illegal or improper use and unauthorised access. For any information relating to security, contact gdpr@aquest.it"),n("br"),e._v(" "),n("br"),e._v(" "),n("br"),e._v(" "),n("h2",[e._v("TYPES OF DATA PROCESSED")]),e._v(" "),n("h3",[e._v("Browsing data")]),n("br"),e._v("\nIn the course of normal operation, the computer systems and software routines used for operating this website obtain some personal data, the transmission of which is inherent to the use of Internet communications protocols."),n("br"),e._v("\nThis is not information which is collected for the purpose of being associated with identified data subjects, but by its very nature could, by processing and association with data held by third parties, allow users to be identified. "),n("br"),e._v("\nThis category of data includes the IP addresses or domain names of the computers used by users connecting to the site, the URI (Uniform Resource Identifier) addresses of the requested resources, the timing of the request, the method used to submit the request to the server, the size of the file obtained in response, the numerical code indicating the status of the response given by the server (success, error, etc.) and other parameters associated with the user's operating system and computing environment."),n("br"),e._v("\nThese data are used for the sole purpose of obtaining anonymous statistical usage information about the site and to monitor its proper functioning and they are deleted immediately after processing. The data could be used to establish liability in the event of cybercrime causing damage to the site, but web contact data are otherwise stored for no longer than seven days. "),n("br"),e._v(" "),n("br"),e._v(" "),n("h3",[e._v("Data voluntarily supplied by the user")]),n("br"),e._v("\nSending electronic mail optionally, explicitly and voluntarily to the addresses shown on this site means that the sender's address together with any other input personal data which are required to respond to the request are obtained."),n("br"),e._v("\nRegistration for our newsletter means that the user's email address will automatically be included in a contact list to which email messages may be sent containing information, including of a commercial and promotional nature, which will always solely relate to Aquest srl."),n("br"),e._v("\nWe use MailChimp as our newsletter service; this archive might be located outside the EU. MailChimp, like any newsletter management platform, provides the Controller with information about who opens the newsletters and clicks on links in order to improve communication between AQuest and its users."),n("br"),e._v(" "),n("br"),e._v(" "),n("h3",[e._v("Cookies")]),n("br"),e._v("\nCookies. What are cookies?"),n("br"),e._v("\nCookies are small text files saved to the computer or device during browsing which allow information about online activity to be collected. They have an expiry date, after which they are removed; some are deleted immediately on completion of a session."),n("br"),e._v("\nWhat are they for?"),n("br"),e._v("\nCookies allow us to personalise your browsing and suit it to your preferences. They also allow us to understand how to improve our site to make it even more enjoyable and easier to consult. "),n("br"),e._v("\nWhat kind of cookies do we use?"),n("br"),e._v("\nTechnical cookies: these are essential to the functioning of the website. This type of cookies allows you to browse the site properly, see objects and benefit from services."),n("br"),e._v("\nNo personal data about users is obtained by the site in this connection."),n("br"),e._v("\nNo use is made of cookies to transmit information of a personal nature, nor is any use made of any kind of persistent cookies, i.e. user tracking systems."),n("br"),e._v("\nNo cookies?"),n("br"),e._v("\nExplanations about how to manage, check and remove cookies from your device, depending on the browser you use:"),n("br"),e._v("\nInternet Explorer (http://support.microsoft.com/gp/cookies/en)"),n("br"),e._v("\nMozilla Firefox (http://support.mozilla.com/en-US/kb/Cookies)"),n("br"),e._v("\nGoogle Chrome (http://www.google.com/support/chrome/bin/answer.py?hl=en&answer=95647))"),n("br"),e._v("\nSafari (http://support.apple.com/kb/PH5042)"),n("br"),e._v("\nOpera (http://www.opera.com/browser/tutorials/security/privacy/)"),n("br"),e._v(" "),n("br"),e._v(" "),n("br"),e._v(" "),n("h2",[e._v("OPTIONAL NATURE OF DATA PROVISION")]),e._v("\nOther than as specified for browsing data, the user is free to supply the personal data mentioned in request forms to AQuest or otherwise indicated in contacts with the office to request the dispatch of the newsletter, information material or other messages."),n("br"),e._v("\nFailure to provide such data may mean it is impossible to obtain what has been requested. "),n("br"),e._v(" "),n("br"),e._v(" "),n("h2",[e._v("PURPOSES OF PROCESSING")]),e._v("\nThe personal data supplied will be processed by AQuest in accordance with the provisions of the Italian Civil Code for administrative purposes relating to contractual requirements and for consequent compliance with the resultant legal and contractual obligations, as well as for efficiently managing commercial relationships and compiling statistics, maintaining contact with users and sending email messages."),n("br"),e._v(" "),n("br"),e._v("\nProcessing of the data is thus necessary in order to allow the company to meet its obligations towards users, to comply with the obligations set out in legislation, regulations or EU rules and to exercise its rights in a judicial setting."),n("br"),e._v("\nSuch purposes include:"),n("br"),e._v("\n●\tobtaining and managing product and/or service enquiries and related administrative and taxation tasks;"),n("br"),e._v("\n●\tobtaining unsolicited applications;"),n("br"),e._v("\n●\tsending commercial/promotional/informative communications by post, telephone, SMS, fax or email, as well as via optional registration for mailing lists and newsletters."),n("br"),e._v(" "),n("br"),e._v(" "),n("h2",[e._v("RIGHTS OF DATA SUBJECTS")]),e._v("\nPursuant to Article 7 of Legislative Decree 196/2003 and Articles 15 to 22 of Regulation (EU) 2016/679, the data subject can at any time exercise the right:"),n("br"),e._v("\nto request confirmation of the existence or otherwise of his/her personal data;"),n("br"),e._v("\nto obtain information about the purposes of processing, the categories of personal data, the recipients or categories of recipients to whom the personal data have been or will be disclosed and, when possible, the period of storage;"),n("br"),e._v("\nto obtain rectification or erasure of personal data; "),n("br"),e._v("\nto obtain restriction of processing;"),n("br"),e._v("\nto obtain data portability, namely to receive the personal data from a Controller in a structured, commonly used and machine-readable format and to transmit those data to another Controller without hindrance, "),n("br"),e._v("\nto object to processing at any time, including for direct marketing purposes;"),n("br"),e._v("\nto object to an automated decision-making process relating to natural persons, including profiling;"),n("br"),e._v("\nto request from the Controller access to and rectification or erasure of personal data or restriction of processing concerning him/her or to object to processing as well as the right to data portability; "),n("br"),e._v("\nto withdraw consent at any time, without affecting the lawfulness of processing based on consent before its withdrawal; "),n("br"),e._v("\nto lodge a complaint with a supervisory authority."),n("br"),e._v(" "),n("br"),e._v(" "),n("h3",[e._v("Requests should be submitted:")]),n("br"),e._v("\n-\tvia email to the address: gdpr@aquest.it"),n("br"),e._v("\n-\tor by post to AQuest S.r.l. - Via F. Garofoli, 233 - 37057 - San Giovanni Lupatoto (VR)"),n("br")])}]};var An=n("VU/8")(Sn,Mn,!1,function(e){n("ws33")},"data-v-87ece8ec",null).exports,Ln={name:"Numbers",props:{ccdata:{default:function(){},type:Object},active:{default:!1,type:Boolean},exit:{default:!1,type:Boolean}},methods:{toKK:function(e){return function(e){if(e>999999){var t=e.toLocaleString("it-IT");return t.substr(0,t.length-6)+"M"}if(e>9999){var n=e.toLocaleString("it-IT");return n.substr(0,n.length-4)+"K"}if(e>999){var i=e.toLocaleString("it-IT");return i.substr(0,i.length-2)+"K"}return e.toLocaleString("it-IT")}(e)}}},Cn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row",class:{show:e.active}},[n("div",{staticClass:"slider title big",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.ccdata.label))]),e._v(" "),n("div",{staticClass:"slider number big",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.toKK(e.ccdata.total)))])]),e._v(" "),n("div",{staticClass:"row",class:{show:e.active}},[n("div",{staticClass:"slider title",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.ccdata.label)+" USER")]),e._v(" "),n("div",{staticClass:"slider number",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.toKK(e.ccdata.user)))])]),e._v(" "),n("div",{staticClass:"row",class:{show:e.active}},[n("div",{staticClass:"slider title",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.ccdata.label)+" CPU")]),e._v(" "),n("div",{staticClass:"slider number",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.toKK(e.ccdata.cpu)))])])])},staticRenderFns:[]};var Pn=n("VU/8")(Ln,Cn,!1,function(e){n("KPc5")},"data-v-5112f31d",null).exports,Rn={name:"Team",data:function(){return{}},props:{ccdata:{default:function(){},type:Object},active:{default:!1,type:Boolean},exit:{default:!1,type:Boolean}}},Fn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"imageContainer"},[n("div",{staticClass:"image",class:{show:e.active&&!e.exit,exit:e.exit}},[n("img",{attrs:{src:"./static/stats/players/"+e.ccdata.slug+".png"}})])]),e._v(" "),n("div",{staticClass:"scaler title",class:{show:e.active&&!e.exit,exit:e.exit,big:"big"===e.ccdata.titleFirst},domProps:{innerHTML:e._s("big"===e.ccdata.titleFirst?e.ccdata.labelBig:e.ccdata.label)}}),e._v(" "),n("div",{staticClass:"scaler title",class:{show:e.active&&!e.exit,exit:e.exit,big:"small"===e.ccdata.titleFirst},domProps:{innerHTML:e._s("small"===e.ccdata.titleFirst?e.ccdata.labelBig:e.ccdata.label)}}),e._v(" "),n("div",{staticClass:"scaler ndata",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.ccdata.data)+e._s(e.ccdata.isPercent?"%":""))]),e._v(" "),n("div",{staticClass:"scaler slug",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.ccdata.slug))])])},staticRenderFns:[]};var In=n("VU/8")(Rn,Fn,!1,function(e){n("BMwM")},"data-v-0d4c5d49",null).exports,Nn=n("ui4q"),On=n.n(Nn),Un={name:"GMap",props:{places:{default:function(){return[]},type:Array},active:{default:!1,type:Boolean},exit:{default:!1,type:Boolean}},mounted:function(){var e=this,t=this.$refs.threeCanvas,n=[];this.$props.places.map(function(e,t){t<100&&n.push({id:t,lat:e.lat+"°N",lon:e.lon+"°E"})});var i=new On.a;i.init({element:t,data:n,baseAssetsPath:"./static/lib/assets/images/"}),window.addEventListener("resize",function(){i.resize(e.$refs.mapContainer.offsetWidth,.85*e.$refs.mapContainer.offsetHeight)}),i.resize(this.$refs.mapContainer.offsetWidth,.85*this.$refs.mapContainer.offsetHeight)}},Dn={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"mapContainer",staticClass:"map"},[t("canvas",{ref:"threeCanvas"})])},staticRenderFns:[]};var zn={name:"Maps",data:function(){return{current:0,states:{}}},components:{GMap:n("VU/8")(Un,Dn,!1,function(e){n("PiTl")},"data-v-6c6ea073",null).exports},props:{ccdata:{default:function(){},type:Object},active:{default:!1,type:Boolean},exit:{default:!1,type:Boolean},isPortrait:{default:!1,type:Boolean}},mounted:function(){this.states={Afghanistan:"AFG","ALA\tAland Islands":"ALA",Albania:"ALB",Algeria:"DZA","American Samoa":"ASM",Andorra:"AND",Angola:"AGO",Anguilla:"AIA",Antarctica:"ATA","Antigua and Barbuda":"ATG",Argentina:"ARG",Armenia:"ARM",Aruba:"ABW",Australia:"AUS",Austria:"AUT",Azerbaijan:"AZE",Bahamas:"BHS",Bahrain:"BHR",Bangladesh:"BGD",Barbados:"BRB",Belarus:"BLR",Belgium:"BEL",Belize:"BLZ",Benin:"BEN",Bermuda:"BMU",Bhutan:"BTN",Bolivia:"BOL","Bosnia and Herzegovina":"BIH",Botswana:"BWA","Bouvet Island":"BVT",Brazil:"BRA","British Virgin Islands":"VGB","British Indian Ocean Territory":"IOT","Brunei Darussalam":"BRN",Bulgaria:"BGR","Burkina Faso":"BFA",Burundi:"BDI",Cambodia:"KHM",Cameroon:"CMR",Canada:"CAN","Cape Verde":"CPV","Cayman Islands":"CYM","Central African Republic":"CAF",Chad:"TCD",Chile:"CHL",China:"CHN","Hong Kong, SAR China":"HKG","Macao, SAR China":"MAC","Christmas Island":"CXR","Cocos (Keeling) Islands":"CCK",Colombia:"COL",Comoros:"COM","Congo (Brazzaville)":"COG","Congo, (Kinshasa)":"COD","Cook Islands":"COK","Costa Rica":"CRI","Côte d'Ivoire":"CIV",Croatia:"HRV",Cuba:"CUB",Cyprus:"CYP","Czech Republic":"CZE",Denmark:"DNK",Djibouti:"DJI",Dominica:"DMA","Dominican Republic":"DOM",Ecuador:"ECU",Egypt:"EGY","El Salvador":"SLV","Equatorial Guinea":"GNQ",Eritrea:"ERI",Estonia:"EST",Ethiopia:"ETH","Falkland Islands (Malvinas)":"FLK","Faroe Islands":"FRO",Fiji:"FJI",Finland:"FIN",France:"FRA","French Guiana":"GUF","French Polynesia":"PYF","French Southern Territories":"ATF",Gabon:"GAB",Gambia:"GMB",Georgia:"GEO",Germany:"DEU",Ghana:"GHA",Gibraltar:"GIB",Greece:"GRC",Greenland:"GRL",Grenada:"GRD",Guadeloupe:"GLP",Guam:"GUM",Guatemala:"GTM",Guernsey:"GGY",Guinea:"GIN","Guinea-Bissau":"GNB",Guyana:"GUY",Haiti:"HTI","Heard and Mcdonald Islands":"HMD","Holy See (Vatican City State)":"VAT",Honduras:"HND",Hungary:"HUN",Iceland:"ISL",India:"IND",Indonesia:"IDN","Iran, Islamic Republic of":"IRN",Iraq:"IRQ",Ireland:"IRL","Isle of Man":"IMN",Israel:"ISR",Italy:"ITA",Jamaica:"JAM",Japan:"JPN",Jersey:"JEY",Jordan:"JOR",Kazakhstan:"KAZ",Kenya:"KEN",Kiribati:"KIR","Korea (North)":"PRK","Korea (South)":"KOR",Kuwait:"KWT",Kyrgyzstan:"KGZ","Lao PDR":"LAO",Latvia:"LVA",Lebanon:"LBN",Lesotho:"LSO",Liberia:"LBR",Libya:"LBY",Liechtenstein:"LIE",Lithuania:"LTU",Luxembourg:"LUX","Macedonia, Republic of":"MKD",Madagascar:"MDG",Malawi:"MWI",Malaysia:"MYS",Maldives:"MDV",Mali:"MLI",Malta:"MLT","Marshall Islands":"MHL",Martinique:"MTQ",Mauritania:"MRT",Mauritius:"MUS",Mayotte:"MYT",Mexico:"MEX","Micronesia, Federated States of":"FSM",Moldova:"MDA",Monaco:"MCO",Mongolia:"MNG",Montenegro:"MNE",Montserrat:"MSR",Morocco:"MAR",Mozambique:"MOZ",Myanmar:"MMR",Namibia:"NAM",Nauru:"NRU",Nepal:"NPL",Netherlands:"NLD","Netherlands Antilles":"ANT","New Caledonia":"NCL","New Zealand":"NZL",Nicaragua:"NIC",Niger:"NER",Nigeria:"NGA",Niue:"NIU","Norfolk Island":"NFK","Northern Mariana Islands":"MNP",Norway:"NOR",Oman:"OMN",Pakistan:"PAK",Palau:"PLW","Palestinian Territory":"PSE",Panama:"PAN","Papua New Guinea":"PNG",Paraguay:"PRY",Peru:"PER",Philippines:"PHL",Pitcairn:"PCN",Poland:"POL",Portugal:"PRT","Puerto Rico":"PRI",Qatar:"QAT","Réunion":"REU",Romania:"ROU","Russian Federation":"RUS",Rwanda:"RWA","Saint-Barthélemy":"BLM","Saint Helena":"SHN","Saint Kitts and Nevis":"KNA","Saint Lucia":"LCA","Saint-Martin (French part)":"MAF","Saint Pierre and Miquelon":"SPM","Saint Vincent and Grenadines":"VCT",Samoa:"WSM","San Marino":"SMR","Sao Tome and Principe":"STP","Saudi Arabia":"SAU",Senegal:"SEN",Serbia:"SRB",Seychelles:"SYC","Sierra Leone":"SLE",Singapore:"SGP",Slovakia:"SVK",Slovenia:"SVN","Solomon Islands":"SLB",Somalia:"SOM","South Africa":"ZAF","South Georgia and the South Sandwich Islands":"SGS","South Sudan":"SSD",Spain:"ESP","Sri Lanka":"LKA",Sudan:"SDN",Suriname:"SUR","Svalbard and Jan Mayen Islands":"SJM",Swaziland:"SWZ",Sweden:"SWE",Switzerland:"CHE","Syrian Arab Republic (Syria)":"SYR","Taiwan, Republic of China":"TWN",Tajikistan:"TJK","Tanzania, United Republic of":"TZA",Thailand:"THA","Timor-Leste":"TLS",Togo:"TGO",Tokelau:"TKL",Tonga:"TON","Trinidad and Tobago":"TTO",Tunisia:"TUN",Turkey:"TUR",Turkmenistan:"TKM","Turks and Caicos Islands":"TCA",Tuvalu:"TUV",Uganda:"UGA",Ukraine:"UKR","United Arab Emirates":"ARE","United Kingdom":"GBR","United States of America":"USA","US Minor Outlying Islands":"UMI",Uruguay:"URY",Uzbekistan:"UZB",Vanuatu:"VUT","Venezuela (Bolivarian Republic)":"VEN","Viet Nam":"VNM","Virgin Islands, US":"VIR","Wallis and Futuna Islands":"WLF","Western Sahara":"ESH",Yemen:"YEM",Zambia:"ZMB","Zimbabwe\t":"ZWE"},setInterval(this.slideContent,this.$props.ccdata.internalTimer)},methods:{slideContent:function(){this.current+=1,this.current>this.$props.ccdata.ranks.length-1&&(this.current=0)}}},kn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"slider title big",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.ccdata.labelBig))]),e._v(" "),n("div",{staticClass:"slider title",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.ccdata.label))]),e._v(" "),n("div",{staticClass:"slider ranks",class:{show:e.active&&!e.exit,exit:e.exit}},e._l(e.ccdata.ranks,function(t,i){return n("div",{key:i,staticClass:"item",class:{active:i===e.current}},[n("div",{staticClass:"slug"},[e._v("\n          "+e._s(e.states[t.slug])+"\n        ")]),e._v(" "),n("div",{staticClass:"position"},[e._v("\n          "+e._s(i+1)+e._s(0===i?"ST":1===i?"ND":"RD")+"\n        ")]),e._v(" "),n("div",{staticClass:"data"},[e._v("\n          "+e._s(t.data)+"%\n        ")])])})),e._v(" "),n("GMap",{staticClass:"gmap",class:{show:e.active&&!e.exit,exit:e.exit,portrait:e.isPortrait},attrs:{places:e.ccdata.locations,active:e.active,exit:e.exit}})],1)},staticRenderFns:[]};var Bn=n("VU/8")(zn,kn,!1,function(e){n("bFui")},"data-v-1f0e9ad8",null).exports,Gn={name:"Scores",data:function(){return{}},props:{ccdata:{default:function(){},type:Object},active:{default:!1,type:Boolean},exit:{default:!1,type:Boolean}},methods:{toDot:function(e){return function(e){return e.toLocaleString("it-IT")}(e)}}},Hn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"row",class:{show:e.active}},[n("div",{staticClass:"slider title big",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.ccdata.labelBig))]),e._v(" "),n("div",{staticClass:"slider title",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.ccdata.label))])]),e._v(" "),n("div",{staticClass:"row",class:{show:e.active}},[n("div",{staticClass:"slider name big",class:{show:e.active&&!e.exit,exit:e.exit}},[n("span",{staticClass:"position"},[e._v("01")]),e._v(e._s(e.ccdata[0].name))]),e._v(" "),n("div",{staticClass:"slider number big",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.toDot(e.ccdata[0].data)))])]),e._v(" "),n("div",{staticClass:"row",class:{show:e.active}},[n("div",{staticClass:"slider name",class:{show:e.active&&!e.exit,exit:e.exit}},[n("span",{staticClass:"position"},[e._v("02")]),e._v(e._s(e.ccdata[1].name))]),e._v(" "),n("div",{staticClass:"slider number",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.toDot(e.ccdata[1].data)))])]),e._v(" "),n("div",{staticClass:"row",class:{show:e.active}},[n("div",{staticClass:"slider name",class:{show:e.active&&!e.exit,exit:e.exit}},[n("span",{staticClass:"position"},[e._v("03")]),e._v(e._s(e.ccdata[2].name))]),e._v(" "),n("div",{staticClass:"slider number",class:{show:e.active&&!e.exit,exit:e.exit}},[e._v(e._s(e.toDot(e.ccdata[2].data)))])])])},staticRenderFns:[]};var Vn=n("VU/8")(Gn,Hn,!1,function(e){n("s7lq")},"data-v-2b007fbc",null).exports,jn={name:"Carousel",data:function(){return{current:0,exiting:!1}},props:{cdata:{default:function(){return[]},type:Array},timer:{default:5e3,type:Number},isPortrait:{default:!1,type:Boolean}},computed:v()({},Object(r.b)({})),components:{Numbers:Pn,Team:In,Maps:Bn,Scores:Vn},created:function(){},mounted:function(){this.$props.isPortrait||setTimeout(this.outSlide,10)},methods:{swipeLeft:function(){var e=this;this.exiting=!0,setTimeout(function(){e.exiting=!1,e.current+=1,e.current>e.$props.cdata.length-1&&(e.current=0)},350)},swipeRight:function(){var e=this;this.exiting=!0,setTimeout(function(){e.exiting=!1,e.current-=1,e.current<0&&(e.current=e.$props.cdata.length-1)},350)},switchSlide:function(){this.exiting=!1,this.current+=1,this.current>this.$props.cdata.length-1&&(this.current=0),setTimeout(this.outSlide,this.timer)},outSlide:function(){this.exiting=!0,setTimeout(this.switchSlide,500)}}},Wn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"carousel"},[n("div",{directives:[{name:"touch",rawName:"v-touch:swipe.left",value:e.swipeLeft,expression:"swipeLeft",arg:"swipe",modifiers:{left:!0}},{name:"touch",rawName:"v-touch:swipe.right",value:e.swipeRight,expression:"swipeRight",arg:"swipe",modifiers:{right:!0}}],staticClass:"content"},e._l(e.cdata,function(t,i){return n("div",{key:i,staticClass:"slide",class:{active:i===e.current,portrait:e.isPortrait}},[n(t.component,{tag:"component",class:{portrait:e.isPortrait},attrs:{ccdata:t,active:i===e.current,exit:i===e.current&&e.exiting,isPortrait:e.isPortrait}})],1)})),e._v(" "),n("div",{staticClass:"footer"},e._l(e.cdata,function(t,i){return n("div",{key:i,staticClass:"point",class:{active:i===e.current}})}))])},staticRenderFns:[]};var Xn=n("VU/8")(jn,Wn,!1,function(e){n("YDhG")},"data-v-4e44902d",null).exports,Yn={name:"StatsContainer",data:function(){return{goals:{},shots:{},rotations:{},topselectedteam:{},lessselectedteam:{},topscoreteam:{},lessscoreteam:{},worldplayers:{},scores:{}}},computed:v()({},Object(r.b)({})),components:{Carousel:Xn},created:function(){},mounted:function(){var e=this;setInterval(this.updateStats,3e5),this.updateStats();var t=/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor),n=/Safari/.test(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor);this.rx=0,this.G=9.80665,this.G*=n?1:t?-1:1,window.DeviceMotionEvent&&window.addEventListener("devicemotion",function(t){e.rx-=(e.rx-t.accelerationIncludingGravity.x)/4,e.$refs.mobile&&(e.$refs.mobile.style.transform="rotateZ("+(-e.rx/e.G*90+90)+"deg)")})},methods:{updateStats:function(){var e=this;vt()({method:"GET",url:"https://foosballworldcup18.aquest.it/api/v1/users/stats"}).then(function(t){e.updateStatsData(t.data)}).catch(function(e){})},updateStatsData:function(e){this.goals=v()({component:"Numbers",label:"GOALS"},e.goals),this.shots=v()({component:"Numbers",label:"SHOTS"},e.shots),this.rotations=v()({component:"Numbers",label:"ROLLS"},e.rotations),this.topselectedteam=v()({component:"Team",isPercent:!0,titleFirst:"big",labelBig:"MOST",label:"SELECTED TEAM"},e.topSelectedTeam),this.lessselectedteam=v()({component:"Team",isPercent:!0,titleFirst:"big",labelBig:"LESS",label:"SELECTED TEAM"},e.lessSelectedTeam),this.topscoreteam=v()({component:"Team",isPercent:!1,titleFirst:"small",labelBig:"GOALS",label:"TEAM WITH MORE"},e.topScoreTeam),this.lessscoreteam=v()({component:"Team",isPercent:!1,titleFirst:"small",labelBig:"GOALS",label:"TEAM WITH LESS"},e.lessScoreTeam),this.worldplayers=v()({component:"Maps",labelBig:"PLAYERS",label:"AROUND THE WORLD",internalTimer:2e3},e.worldPlayers),this.scores=v()({component:"Scores",labelBig:"SCORES",label:"IN THE WORLD"},e.scores)}}},qn={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"wrapper"},[n("div",{staticClass:"containerLandscape"},[n("div",{staticClass:"column"},[n("Carousel",{staticClass:"first",attrs:{timer:5e3,cdata:[e.goals,e.shots,e.rotations]}})],1),e._v(" "),n("div",{staticClass:"column"},[n("Carousel",{attrs:{timer:6e3,cdata:[e.topselectedteam,e.lessselectedteam,e.topscoreteam,e.lessscoreteam]}})],1),e._v(" "),n("div",{staticClass:"column"},[n("Carousel",{staticClass:"last",attrs:{timer:1e4,cdata:[e.worldplayers,e.scores]}})],1)]),e._v(" "),n("div",{staticClass:"containerPortrait"},[n("Carousel",{staticClass:"portrait",attrs:{timer:5e3,cdata:[e.topselectedteam,e.lessselectedteam,e.topscoreteam,e.lessscoreteam,e.goals,e.shots,e.rotations,e.worldplayers,e.scores],isPortrait:!0}})],1),e._v(" "),n("div",{staticClass:"alertRotate"},[n("div",{staticClass:"mobile"},[n("img",{ref:"mobile",attrs:{src:"./static/imgs/mobile.svg",alt:"mobile",width:"70"}})]),e._v(" "),n("div",{staticClass:"message"},[e._v("Please rotate your device")])])])},staticRenderFns:[]};var Qn=n("VU/8")(Yn,qn,!1,function(e){n("sMpC")},"data-v-04bb1a95",null).exports;i.a.use(m.a);var Zn=new m.a({mode:"history",routes:[{path:"/privacy",name:"PrivacyContainer",component:An},{path:"/fwcstats",name:"StatsContainer",component:Qn},{path:"*",name:"MainContainer",component:wn}]});i.a.config.productionTip=!1,i.a.use(r.a),i.a.use(o.a),/android|webos|iphone|ipad|ipod|blackberry/i.test(navigator.userAgent.toLowerCase())&&p.commit("setMobile",!0),new i.a({store:p,el:"#app",router:Zn,components:{App:c},template:"<App/>"})},Nm1z:function(e,t,n){n("Ra0v").MotionBlur={uniforms:{tDiffuse:{value:null},resolution:{value:null},intensity:{value:0},multi:{value:1}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n  ",fragmentShader:"\n\n    // -------------------------------------\n    //    MOTION BLUR\n    // -------------------------------------\n\n    #define quality 10\n    #define PI 3.14159\n    #define E 2.71828\n\n    uniform sampler2D tDiffuse;\n    uniform vec2 resolution;\n    uniform float intensity;\n    uniform float multi;\n    varying vec2 vUv;\n\n    void main() {\n      float x = intensity * PI;\n      float div = exp( x / 2. );\n      float inten = sin(x) / div * E * 0.71;\n      \n      float d = 1. - distance(vUv, vec2(0.5)) * inten * 6. * multi;\n\t    vec2 dir = atan(vUv - vec2(0.5), vec2(0.5)) / 2. * inten;\n      float offsetX = (d * sin(dir.x) / 6.) * inten;\n      float offsetY = (d * sin(dir.y) / 6.) * inten;\n      vec3 color = vec3(0.);\n\t\t\tcolor += texture2D(tDiffuse, vec2(vUv.x + offsetX, vUv.y + offsetY)).rgb * 0.2;\n\t\t\tcolor += texture2D(tDiffuse, vec2(vUv.x + offsetX * 1.01, vUv.y + offsetY * 1.01)).rgb * 0.2;\n\t\t\tcolor += texture2D(tDiffuse, vec2(vUv.x + offsetX * 1.03, vUv.y + offsetY * 1.03)).rgb * 0.2;\n\t\t\tcolor += texture2D(tDiffuse, vec2(vUv.x + offsetX * 1.05, vUv.y + offsetY * 1.05)).rgb * 0.2;\n\t\t\tcolor += texture2D(tDiffuse, vec2(vUv.x + offsetX * 1.07, vUv.y + offsetY * 1.07)).rgb * 0.2;\n      gl_FragColor = vec4(color.rgb,1.0);\n    }\n  "}},OLpA:function(e,t){e.exports="#define GLSLIFY 1\nvarying vec3 vViewPosition;\nuniform float py;\nuniform float pz;\n\n#pragma include(THREE.ShaderChunk.common)\n#pragma include(THREE.ShaderChunk.uv_pars_vertex)\n#pragma include(THREE.ShaderChunk.uv2_pars_vertex)\n#pragma include(THREE.ShaderChunk.envmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.color_pars_vertex)\n#pragma include(THREE.ShaderChunk.fog_pars_vertex)\n#pragma include(THREE.ShaderChunk.morphtarget_pars_vertex)\n#pragma include(THREE.ShaderChunk.skinning_pars_vertex)\n#pragma include(THREE.ShaderChunk.logdepthbuf_pars_vertex)\n#pragma include(THREE.ShaderChunk.clipping_planes_pars_vertex)\n\nvoid main() {\n\n\t#pragma include(THREE.ShaderChunk.uv_vertex)\n\t#pragma include(THREE.ShaderChunk.uv2_vertex)\n\t#pragma include(THREE.ShaderChunk.color_vertex)\n\t#pragma include(THREE.ShaderChunk.skinbase_vertex)\n\n\t#ifdef USE_ENVMAP\n\n\t#pragma include(THREE.ShaderChunk.beginnormal_vertex)\n\t#pragma include(THREE.ShaderChunk.morphnormal_vertex)\n\t#pragma include(THREE.ShaderChunk.skinnormal_vertex)\n\t#pragma include(THREE.ShaderChunk.defaultnormal_vertex)\n\n\t#endif\n\n\t#pragma include(THREE.ShaderChunk.begin_vertex)\n\t#pragma include(THREE.ShaderChunk.morphtarget_vertex)\n\t#pragma include(THREE.ShaderChunk.skinning_vertex)\n\t#pragma include(THREE.ShaderChunk.project_vertex)\n\t#pragma include(THREE.ShaderChunk.logdepthbuf_vertex)\n\n\tvec3 newPosition = vec3(position.x, position.y + py / 1.2, position.z + pz);\n\n  vec4 newMvPosition = modelViewMatrix * vec4( newPosition, 1.0 );\n  vViewPosition = - newMvPosition.xyz;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );\n\n\t#pragma include(THREE.ShaderChunk.worldpos_vertex)\n\t#pragma include(THREE.ShaderChunk.clipping_planes_vertex)\n\t#pragma include(THREE.ShaderChunk.envmap_vertex)\n\t#pragma include(THREE.ShaderChunk.fog_vertex)\n\n}\n"},PiTl:function(e,t){},Ra0v:function(e,t,n){"use strict";function i(){}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"WebGLRenderTargetCube",function(){return sn}),n.d(t,"WebGLRenderTarget",function(){return on}),n.d(t,"WebGLRenderer",function(){return zr}),n.d(t,"ShaderLib",function(){return _n}),n.d(t,"UniformsLib",function(){return xn}),n.d(t,"UniformsUtils",function(){return mn}),n.d(t,"ShaderChunk",function(){return pn}),n.d(t,"FogExp2",function(){return kr}),n.d(t,"Fog",function(){return Br}),n.d(t,"Scene",function(){return Gr}),n.d(t,"Sprite",function(){return Vr}),n.d(t,"LOD",function(){return jr}),n.d(t,"SkinnedMesh",function(){return Yr}),n.d(t,"Skeleton",function(){return Wr}),n.d(t,"Bone",function(){return Xr}),n.d(t,"Mesh",function(){return mi}),n.d(t,"LineSegments",function(){return Zr}),n.d(t,"LineLoop",function(){return $r}),n.d(t,"Line",function(){return Qr}),n.d(t,"Points",function(){return Kr}),n.d(t,"Group",function(){return ea}),n.d(t,"VideoTexture",function(){return ta}),n.d(t,"DataTexture",function(){return cn}),n.d(t,"CompressedTexture",function(){return na}),n.d(t,"CubeTexture",function(){return vi}),n.d(t,"CanvasTexture",function(){return Rr}),n.d(t,"DepthTexture",function(){return ia}),n.d(t,"Texture",function(){return rn}),n.d(t,"CompressedTextureLoader",function(){return Ro}),n.d(t,"DataTextureLoader",function(){return Fo}),n.d(t,"CubeTextureLoader",function(){return No}),n.d(t,"TextureLoader",function(){return Oo}),n.d(t,"ObjectLoader",function(){return ks}),n.d(t,"MaterialLoader",function(){return Cs}),n.d(t,"BufferGeometryLoader",function(){return Ps}),n.d(t,"DefaultLoadingManager",function(){return Lo}),n.d(t,"LoadingManager",function(){return Ao}),n.d(t,"JSONLoader",function(){return zs}),n.d(t,"ImageLoader",function(){return Io}),n.d(t,"ImageBitmapLoader",function(){return js}),n.d(t,"FontLoader",function(){return qs}),n.d(t,"FileLoader",function(){return Po}),n.d(t,"Loader",function(){return Us}),n.d(t,"LoaderUtils",function(){return Ds}),n.d(t,"Cache",function(){return Mo}),n.d(t,"AudioLoader",function(){return oc}),n.d(t,"SpotLightShadow",function(){return cs}),n.d(t,"SpotLight",function(){return ls}),n.d(t,"PointLight",function(){return us}),n.d(t,"RectAreaLight",function(){return ps}),n.d(t,"HemisphereLight",function(){return os}),n.d(t,"DirectionalLightShadow",function(){return hs}),n.d(t,"DirectionalLight",function(){return ds}),n.d(t,"AmbientLight",function(){return fs}),n.d(t,"LightShadow",function(){return ss}),n.d(t,"Light",function(){return as}),n.d(t,"StereoCamera",function(){return sc}),n.d(t,"PerspectiveCamera",function(){return Or}),n.d(t,"OrthographicCamera",function(){return Rn}),n.d(t,"CubeCamera",function(){return cc}),n.d(t,"ArrayCamera",function(){return Ur}),n.d(t,"Camera",function(){return Pn}),n.d(t,"AudioListener",function(){return lc}),n.d(t,"PositionalAudio",function(){return hc}),n.d(t,"AudioContext",function(){return ac}),n.d(t,"AudioAnalyser",function(){return dc}),n.d(t,"Audio",function(){return uc}),n.d(t,"VectorKeyframeTrack",function(){return As}),n.d(t,"StringKeyframeTrack",function(){return ms}),n.d(t,"QuaternionKeyframeTrack",function(){return xs}),n.d(t,"NumberKeyframeTrack",function(){return bs}),n.d(t,"ColorKeyframeTrack",function(){return _s}),n.d(t,"BooleanKeyframeTrack",function(){return gs}),n.d(t,"PropertyMixer",function(){return fc}),n.d(t,"PropertyBinding",function(){return Lc}),n.d(t,"KeyframeTrack",function(){return Ms}),n.d(t,"AnimationUtils",function(){return Ss}),n.d(t,"AnimationObjectGroup",function(){return Cc}),n.d(t,"AnimationMixer",function(){return Rc}),n.d(t,"AnimationClip",function(){return Ls}),n.d(t,"Uniform",function(){return Fc}),n.d(t,"InstancedBufferGeometry",function(){return Ic}),n.d(t,"BufferGeometry",function(){return Zn}),n.d(t,"Geometry",function(){return Un}),n.d(t,"InterleavedBufferAttribute",function(){return Nc}),n.d(t,"InstancedInterleavedBuffer",function(){return Uc}),n.d(t,"InterleavedBuffer",function(){return Oc}),n.d(t,"InstancedBufferAttribute",function(){return Dc}),n.d(t,"Face3",function(){return Fn}),n.d(t,"Object3D",function(){return Cn}),n.d(t,"Raycaster",function(){return zc}),n.d(t,"Layers",function(){return En}),n.d(t,"EventDispatcher",function(){return i}),n.d(t,"Clock",function(){return Gc}),n.d(t,"QuaternionLinearInterpolant",function(){return ys}),n.d(t,"LinearInterpolant",function(){return Es}),n.d(t,"DiscreteInterpolant",function(){return Ts}),n.d(t,"CubicInterpolant",function(){return ws}),n.d(t,"Interpolant",function(){return vs}),n.d(t,"Triangle",function(){return pi}),n.d(t,"Math",function(){return jt}),n.d(t,"Spherical",function(){return Hc}),n.d(t,"Cylindrical",function(){return Vc}),n.d(t,"Plane",function(){return hn}),n.d(t,"Frustum",function(){return dn}),n.d(t,"Sphere",function(){return un}),n.d(t,"Ray",function(){return di}),n.d(t,"Matrix4",function(){return Xt}),n.d(t,"Matrix3",function(){return Qt}),n.d(t,"Box3",function(){return ln}),n.d(t,"Box2",function(){return jc}),n.d(t,"Line3",function(){return fi}),n.d(t,"Euler",function(){return wn}),n.d(t,"Vector4",function(){return an}),n.d(t,"Vector3",function(){return qt}),n.d(t,"Vector2",function(){return Wt}),n.d(t,"Quaternion",function(){return Yt}),n.d(t,"Color",function(){return vn}),n.d(t,"ImmediateRenderObject",function(){return Wc}),n.d(t,"VertexNormalsHelper",function(){return Xc}),n.d(t,"SpotLightHelper",function(){return Yc}),n.d(t,"SkeletonHelper",function(){return qc}),n.d(t,"PointLightHelper",function(){return Qc}),n.d(t,"RectAreaLightHelper",function(){return Zc}),n.d(t,"HemisphereLightHelper",function(){return $c}),n.d(t,"GridHelper",function(){return Jc}),n.d(t,"PolarGridHelper",function(){return Kc}),n.d(t,"FaceNormalsHelper",function(){return el}),n.d(t,"DirectionalLightHelper",function(){return tl}),n.d(t,"CameraHelper",function(){return nl}),n.d(t,"BoxHelper",function(){return il}),n.d(t,"Box3Helper",function(){return rl}),n.d(t,"PlaneHelper",function(){return al}),n.d(t,"ArrowHelper",function(){return ol}),n.d(t,"AxesHelper",function(){return sl}),n.d(t,"Shape",function(){return rs}),n.d(t,"Path",function(){return is}),n.d(t,"ShapePath",function(){return Ws}),n.d(t,"Font",function(){return Xs}),n.d(t,"CurvePath",function(){return ns}),n.d(t,"Curve",function(){return Uo}),n.d(t,"ShapeUtils",function(){return Wa}),n.d(t,"WebGLUtils",function(){return Nr}),n.d(t,"WireframeGeometry",function(){return ra}),n.d(t,"ParametricGeometry",function(){return aa}),n.d(t,"ParametricBufferGeometry",function(){return oa}),n.d(t,"TetrahedronGeometry",function(){return la}),n.d(t,"TetrahedronBufferGeometry",function(){return ua}),n.d(t,"OctahedronGeometry",function(){return ha}),n.d(t,"OctahedronBufferGeometry",function(){return da}),n.d(t,"IcosahedronGeometry",function(){return fa}),n.d(t,"IcosahedronBufferGeometry",function(){return pa}),n.d(t,"DodecahedronGeometry",function(){return ma}),n.d(t,"DodecahedronBufferGeometry",function(){return ga}),n.d(t,"PolyhedronGeometry",function(){return sa}),n.d(t,"PolyhedronBufferGeometry",function(){return ca}),n.d(t,"TubeGeometry",function(){return va}),n.d(t,"TubeBufferGeometry",function(){return ya}),n.d(t,"TorusKnotGeometry",function(){return xa}),n.d(t,"TorusKnotBufferGeometry",function(){return _a}),n.d(t,"TorusGeometry",function(){return ba}),n.d(t,"TorusBufferGeometry",function(){return wa}),n.d(t,"TextGeometry",function(){return Za}),n.d(t,"TextBufferGeometry",function(){return $a}),n.d(t,"SphereGeometry",function(){return Ja}),n.d(t,"SphereBufferGeometry",function(){return Ka}),n.d(t,"RingGeometry",function(){return eo}),n.d(t,"RingBufferGeometry",function(){return to}),n.d(t,"PlaneGeometry",function(){return Kn}),n.d(t,"PlaneBufferGeometry",function(){return ei}),n.d(t,"LatheGeometry",function(){return no}),n.d(t,"LatheBufferGeometry",function(){return io}),n.d(t,"ShapeGeometry",function(){return ro}),n.d(t,"ShapeBufferGeometry",function(){return ao}),n.d(t,"ExtrudeGeometry",function(){return qa}),n.d(t,"ExtrudeBufferGeometry",function(){return Qa}),n.d(t,"EdgesGeometry",function(){return so}),n.d(t,"ConeGeometry",function(){return uo}),n.d(t,"ConeBufferGeometry",function(){return ho}),n.d(t,"CylinderGeometry",function(){return co}),n.d(t,"CylinderBufferGeometry",function(){return lo}),n.d(t,"CircleGeometry",function(){return fo}),n.d(t,"CircleBufferGeometry",function(){return po}),n.d(t,"BoxGeometry",function(){return $n}),n.d(t,"BoxBufferGeometry",function(){return Jn}),n.d(t,"ShadowMaterial",function(){return go}),n.d(t,"SpriteMaterial",function(){return Hr}),n.d(t,"RawShaderMaterial",function(){return vo}),n.d(t,"ShaderMaterial",function(){return hi}),n.d(t,"PointsMaterial",function(){return Jr}),n.d(t,"MeshPhysicalMaterial",function(){return xo}),n.d(t,"MeshStandardMaterial",function(){return yo}),n.d(t,"MeshPhongMaterial",function(){return _o}),n.d(t,"MeshToonMaterial",function(){return bo}),n.d(t,"MeshNormalMaterial",function(){return wo}),n.d(t,"MeshLambertMaterial",function(){return Eo}),n.d(t,"MeshDepthMaterial",function(){return Lr}),n.d(t,"MeshDistanceMaterial",function(){return Cr}),n.d(t,"MeshBasicMaterial",function(){return ui}),n.d(t,"LineDashedMaterial",function(){return To}),n.d(t,"LineBasicMaterial",function(){return qr}),n.d(t,"Material",function(){return li}),n.d(t,"Float64BufferAttribute",function(){return Xn}),n.d(t,"Float32BufferAttribute",function(){return Wn}),n.d(t,"Uint32BufferAttribute",function(){return jn}),n.d(t,"Int32BufferAttribute",function(){return Vn}),n.d(t,"Uint16BufferAttribute",function(){return Hn}),n.d(t,"Int16BufferAttribute",function(){return Gn}),n.d(t,"Uint8ClampedBufferAttribute",function(){return Bn}),n.d(t,"Uint8BufferAttribute",function(){return kn}),n.d(t,"Int8BufferAttribute",function(){return zn}),n.d(t,"BufferAttribute",function(){return Dn}),n.d(t,"ArcCurve",function(){return zo}),n.d(t,"CatmullRomCurve3",function(){return jo}),n.d(t,"CubicBezierCurve",function(){return qo}),n.d(t,"CubicBezierCurve3",function(){return Qo}),n.d(t,"EllipseCurve",function(){return Do}),n.d(t,"LineCurve",function(){return Zo}),n.d(t,"LineCurve3",function(){return $o}),n.d(t,"QuadraticBezierCurve",function(){return Jo}),n.d(t,"QuadraticBezierCurve3",function(){return Ko}),n.d(t,"SplineCurve",function(){return es}),n.d(t,"REVISION",function(){return f}),n.d(t,"MOUSE",function(){return p}),n.d(t,"CullFaceNone",function(){return m}),n.d(t,"CullFaceBack",function(){return g}),n.d(t,"CullFaceFront",function(){return v}),n.d(t,"CullFaceFrontBack",function(){return y}),n.d(t,"FrontFaceDirectionCW",function(){return x}),n.d(t,"FrontFaceDirectionCCW",function(){return _}),n.d(t,"BasicShadowMap",function(){return b}),n.d(t,"PCFShadowMap",function(){return w}),n.d(t,"PCFSoftShadowMap",function(){return E}),n.d(t,"FrontSide",function(){return T}),n.d(t,"BackSide",function(){return S}),n.d(t,"DoubleSide",function(){return M}),n.d(t,"FlatShading",function(){return A}),n.d(t,"SmoothShading",function(){return L}),n.d(t,"NoColors",function(){return C}),n.d(t,"FaceColors",function(){return P}),n.d(t,"VertexColors",function(){return R}),n.d(t,"NoBlending",function(){return F}),n.d(t,"NormalBlending",function(){return I}),n.d(t,"AdditiveBlending",function(){return N}),n.d(t,"SubtractiveBlending",function(){return O}),n.d(t,"MultiplyBlending",function(){return U}),n.d(t,"CustomBlending",function(){return D}),n.d(t,"AddEquation",function(){return z}),n.d(t,"SubtractEquation",function(){return k}),n.d(t,"ReverseSubtractEquation",function(){return B}),n.d(t,"MinEquation",function(){return G}),n.d(t,"MaxEquation",function(){return H}),n.d(t,"ZeroFactor",function(){return V}),n.d(t,"OneFactor",function(){return j}),n.d(t,"SrcColorFactor",function(){return W}),n.d(t,"OneMinusSrcColorFactor",function(){return X}),n.d(t,"SrcAlphaFactor",function(){return Y}),n.d(t,"OneMinusSrcAlphaFactor",function(){return q}),n.d(t,"DstAlphaFactor",function(){return Q}),n.d(t,"OneMinusDstAlphaFactor",function(){return Z}),n.d(t,"DstColorFactor",function(){return $}),n.d(t,"OneMinusDstColorFactor",function(){return J}),n.d(t,"SrcAlphaSaturateFactor",function(){return K}),n.d(t,"NeverDepth",function(){return ee}),n.d(t,"AlwaysDepth",function(){return te}),n.d(t,"LessDepth",function(){return ne}),n.d(t,"LessEqualDepth",function(){return ie}),n.d(t,"EqualDepth",function(){return re}),n.d(t,"GreaterEqualDepth",function(){return ae}),n.d(t,"GreaterDepth",function(){return oe}),n.d(t,"NotEqualDepth",function(){return se}),n.d(t,"MultiplyOperation",function(){return ce}),n.d(t,"MixOperation",function(){return le}),n.d(t,"AddOperation",function(){return ue}),n.d(t,"NoToneMapping",function(){return he}),n.d(t,"LinearToneMapping",function(){return de}),n.d(t,"ReinhardToneMapping",function(){return fe}),n.d(t,"Uncharted2ToneMapping",function(){return pe}),n.d(t,"CineonToneMapping",function(){return me}),n.d(t,"UVMapping",function(){return ge}),n.d(t,"CubeReflectionMapping",function(){return ve}),n.d(t,"CubeRefractionMapping",function(){return ye}),n.d(t,"EquirectangularReflectionMapping",function(){return xe}),n.d(t,"EquirectangularRefractionMapping",function(){return _e}),n.d(t,"SphericalReflectionMapping",function(){return be}),n.d(t,"CubeUVReflectionMapping",function(){return we}),n.d(t,"CubeUVRefractionMapping",function(){return Ee}),n.d(t,"RepeatWrapping",function(){return Te}),n.d(t,"ClampToEdgeWrapping",function(){return Se}),n.d(t,"MirroredRepeatWrapping",function(){return Me}),n.d(t,"NearestFilter",function(){return Ae}),n.d(t,"NearestMipMapNearestFilter",function(){return Le}),n.d(t,"NearestMipMapLinearFilter",function(){return Ce}),n.d(t,"LinearFilter",function(){return Pe}),n.d(t,"LinearMipMapNearestFilter",function(){return Re}),n.d(t,"LinearMipMapLinearFilter",function(){return Fe}),n.d(t,"UnsignedByteType",function(){return Ie}),n.d(t,"ByteType",function(){return Ne}),n.d(t,"ShortType",function(){return Oe}),n.d(t,"UnsignedShortType",function(){return Ue}),n.d(t,"IntType",function(){return De}),n.d(t,"UnsignedIntType",function(){return ze}),n.d(t,"FloatType",function(){return ke}),n.d(t,"HalfFloatType",function(){return Be}),n.d(t,"UnsignedShort4444Type",function(){return Ge}),n.d(t,"UnsignedShort5551Type",function(){return He}),n.d(t,"UnsignedShort565Type",function(){return Ve}),n.d(t,"UnsignedInt248Type",function(){return je}),n.d(t,"AlphaFormat",function(){return We}),n.d(t,"RGBFormat",function(){return Xe}),n.d(t,"RGBAFormat",function(){return Ye}),n.d(t,"LuminanceFormat",function(){return qe}),n.d(t,"LuminanceAlphaFormat",function(){return Qe}),n.d(t,"RGBEFormat",function(){return Ze}),n.d(t,"DepthFormat",function(){return $e}),n.d(t,"DepthStencilFormat",function(){return Je}),n.d(t,"RGB_S3TC_DXT1_Format",function(){return Ke}),n.d(t,"RGBA_S3TC_DXT1_Format",function(){return et}),n.d(t,"RGBA_S3TC_DXT3_Format",function(){return tt}),n.d(t,"RGBA_S3TC_DXT5_Format",function(){return nt}),n.d(t,"RGB_PVRTC_4BPPV1_Format",function(){return it}),n.d(t,"RGB_PVRTC_2BPPV1_Format",function(){return rt}),n.d(t,"RGBA_PVRTC_4BPPV1_Format",function(){return at}),n.d(t,"RGBA_PVRTC_2BPPV1_Format",function(){return ot}),n.d(t,"RGB_ETC1_Format",function(){return st}),n.d(t,"RGBA_ASTC_4x4_Format",function(){return ct}),n.d(t,"RGBA_ASTC_5x4_Format",function(){return lt}),n.d(t,"RGBA_ASTC_5x5_Format",function(){return ut}),n.d(t,"RGBA_ASTC_6x5_Format",function(){return ht}),n.d(t,"RGBA_ASTC_6x6_Format",function(){return dt}),n.d(t,"RGBA_ASTC_8x5_Format",function(){return ft}),n.d(t,"RGBA_ASTC_8x6_Format",function(){return pt}),n.d(t,"RGBA_ASTC_8x8_Format",function(){return mt}),n.d(t,"RGBA_ASTC_10x5_Format",function(){return gt}),n.d(t,"RGBA_ASTC_10x6_Format",function(){return vt}),n.d(t,"RGBA_ASTC_10x8_Format",function(){return yt}),n.d(t,"RGBA_ASTC_10x10_Format",function(){return xt}),n.d(t,"RGBA_ASTC_12x10_Format",function(){return _t}),n.d(t,"RGBA_ASTC_12x12_Format",function(){return bt}),n.d(t,"LoopOnce",function(){return wt}),n.d(t,"LoopRepeat",function(){return Et}),n.d(t,"LoopPingPong",function(){return Tt}),n.d(t,"InterpolateDiscrete",function(){return St}),n.d(t,"InterpolateLinear",function(){return Mt}),n.d(t,"InterpolateSmooth",function(){return At}),n.d(t,"ZeroCurvatureEnding",function(){return Lt}),n.d(t,"ZeroSlopeEnding",function(){return Ct}),n.d(t,"WrapAroundEnding",function(){return Pt}),n.d(t,"TrianglesDrawMode",function(){return Rt}),n.d(t,"TriangleStripDrawMode",function(){return Ft}),n.d(t,"TriangleFanDrawMode",function(){return It}),n.d(t,"LinearEncoding",function(){return Nt}),n.d(t,"sRGBEncoding",function(){return Ot}),n.d(t,"GammaEncoding",function(){return Ut}),n.d(t,"RGBEEncoding",function(){return Dt}),n.d(t,"LogLuvEncoding",function(){return zt}),n.d(t,"RGBM7Encoding",function(){return kt}),n.d(t,"RGBM16Encoding",function(){return Bt}),n.d(t,"RGBDEncoding",function(){return Gt}),n.d(t,"BasicDepthPacking",function(){return Ht}),n.d(t,"RGBADepthPacking",function(){return Vt}),n.d(t,"CubeGeometry",function(){return $n}),n.d(t,"Face4",function(){return cl}),n.d(t,"LineStrip",function(){return ll}),n.d(t,"LinePieces",function(){return ul}),n.d(t,"MeshFaceMaterial",function(){return hl}),n.d(t,"MultiMaterial",function(){return dl}),n.d(t,"PointCloud",function(){return fl}),n.d(t,"Particle",function(){return pl}),n.d(t,"ParticleSystem",function(){return ml}),n.d(t,"PointCloudMaterial",function(){return gl}),n.d(t,"ParticleBasicMaterial",function(){return vl}),n.d(t,"ParticleSystemMaterial",function(){return yl}),n.d(t,"Vertex",function(){return xl}),n.d(t,"DynamicBufferAttribute",function(){return _l}),n.d(t,"Int8Attribute",function(){return bl}),n.d(t,"Uint8Attribute",function(){return wl}),n.d(t,"Uint8ClampedAttribute",function(){return El}),n.d(t,"Int16Attribute",function(){return Tl}),n.d(t,"Uint16Attribute",function(){return Sl}),n.d(t,"Int32Attribute",function(){return Ml}),n.d(t,"Uint32Attribute",function(){return Al}),n.d(t,"Float32Attribute",function(){return Ll}),n.d(t,"Float64Attribute",function(){return Cl}),n.d(t,"ClosedSplineCurve3",function(){return Pl}),n.d(t,"SplineCurve3",function(){return Rl}),n.d(t,"Spline",function(){return Fl}),n.d(t,"AxisHelper",function(){return Il}),n.d(t,"BoundingBoxHelper",function(){return Nl}),n.d(t,"EdgesHelper",function(){return Ol}),n.d(t,"WireframeHelper",function(){return Ul}),n.d(t,"XHRLoader",function(){return Dl}),n.d(t,"BinaryTextureLoader",function(){return zl}),n.d(t,"GeometryUtils",function(){return kl}),n.d(t,"ImageUtils",function(){return Bl}),n.d(t,"Projector",function(){return Gl}),n.d(t,"CanvasRenderer",function(){return Hl}),n.d(t,"SceneUtils",function(){return Vl}),n.d(t,"LensFlare",function(){return jl}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),"name"in Function.prototype==!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}),Object.assign(i.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;for(var n=t.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,e)}}}});var r,a,o,s,c,l,u,h,d,f="91dev",p={LEFT:0,MIDDLE:1,RIGHT:2},m=0,g=1,v=2,y=3,x=0,_=1,b=0,w=1,E=2,T=0,S=1,M=2,A=1,L=2,C=0,P=1,R=2,F=0,I=1,N=2,O=3,U=4,D=5,z=100,k=101,B=102,G=103,H=104,V=200,j=201,W=202,X=203,Y=204,q=205,Q=206,Z=207,$=208,J=209,K=210,ee=0,te=1,ne=2,ie=3,re=4,ae=5,oe=6,se=7,ce=0,le=1,ue=2,he=0,de=1,fe=2,pe=3,me=4,ge=300,ve=301,ye=302,xe=303,_e=304,be=305,we=306,Ee=307,Te=1e3,Se=1001,Me=1002,Ae=1003,Le=1004,Ce=1005,Pe=1006,Re=1007,Fe=1008,Ie=1009,Ne=1010,Oe=1011,Ue=1012,De=1013,ze=1014,ke=1015,Be=1016,Ge=1017,He=1018,Ve=1019,je=1020,We=1021,Xe=1022,Ye=1023,qe=1024,Qe=1025,Ze=Ye,$e=1026,Je=1027,Ke=33776,et=33777,tt=33778,nt=33779,it=35840,rt=35841,at=35842,ot=35843,st=36196,ct=37808,lt=37809,ut=37810,ht=37811,dt=37812,ft=37813,pt=37814,mt=37815,gt=37816,vt=37817,yt=37818,xt=37819,_t=37820,bt=37821,wt=2200,Et=2201,Tt=2202,St=2300,Mt=2301,At=2302,Lt=2400,Ct=2401,Pt=2402,Rt=0,Ft=1,It=2,Nt=3e3,Ot=3001,Ut=3007,Dt=3002,zt=3003,kt=3004,Bt=3005,Gt=3006,Ht=3200,Vt=3201,jt={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;t<256;t++)e[t]=(t<16?"0":"")+t.toString(16).toUpperCase();return function(){var t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&n]+e[n>>8&255]+"-"+e[n>>16&15|64]+e[n>>24&255]+"-"+e[63&i|128]+e[i>>8&255]+"-"+e[i>>16&255]+e[i>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]}}(),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*jt.DEG2RAD},radToDeg:function(e){return e*jt.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};function Wt(e,t){this.x=e||0,this.y=t||0}function Xt(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function Yt(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}function qt(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}function Qt(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(Wt.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(Wt.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:(r=new Wt,a=new Wt,function(e,t){return r.set(e,e),a.set(t,t),this.clamp(r,a)}),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}}),Object.assign(Xt.prototype,{isMatrix4:!0,set:function(e,t,n,i,r,a,o,s,c,l,u,h,d,f,p,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=c,g[6]=l,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Xt).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:(h=new qt,function(e){var t=this.elements,n=e.elements,i=1/h.setFromMatrixColumn(e,0).length(),r=1/h.setFromMatrixColumn(e,1).length(),a=1/h.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,this}),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),c=Math.sin(i),l=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){var h=a*l,d=a*u,f=o*l,p=o*u;t[0]=s*l,t[4]=-s*u,t[8]=c,t[1]=d+f*c,t[5]=h-p*c,t[9]=-o*s,t[2]=p-h*c,t[6]=f+d*c,t[10]=a*s}else if("YXZ"===e.order){var m=s*l,g=s*u,v=c*l,y=c*u;t[0]=m+y*o,t[4]=v*o-g,t[8]=a*c,t[1]=a*u,t[5]=a*l,t[9]=-o,t[2]=g*o-v,t[6]=y+m*o,t[10]=a*s}else if("ZXY"===e.order){m=s*l,g=s*u,v=c*l,y=c*u;t[0]=m-y*o,t[4]=-a*u,t[8]=v+g*o,t[1]=g+v*o,t[5]=a*l,t[9]=y-m*o,t[2]=-a*c,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){h=a*l,d=a*u,f=o*l,p=o*u;t[0]=s*l,t[4]=f*c-d,t[8]=h*c+p,t[1]=s*u,t[5]=p*c+h,t[9]=d*c-f,t[2]=-c,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var x=a*s,_=a*c,b=o*s,w=o*c;t[0]=s*l,t[4]=w-x*u,t[8]=b*u+_,t[1]=u,t[5]=a*l,t[9]=-o*l,t[2]=-c*l,t[6]=_*u+b,t[10]=x-w*u}else if("XZY"===e.order){x=a*s,_=a*c,b=o*s,w=o*c;t[0]=s*l,t[4]=-u,t[8]=c*l,t[1]=x*u+w,t[5]=a*l,t[9]=_*u-b,t[2]=b*u-_,t[6]=o*l,t[10]=w*u+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e._x,i=e._y,r=e._z,a=e._w,o=n+n,s=i+i,c=r+r,l=n*o,u=n*s,h=n*c,d=i*s,f=i*c,p=r*c,m=a*o,g=a*s,v=a*c;return t[0]=1-(d+p),t[4]=u-v,t[8]=h+g,t[1]=u+v,t[5]=1-(l+p),t[9]=f-m,t[2]=h-g,t[6]=f+m,t[10]=1-(l+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:(c=new qt,l=new qt,u=new qt,function(e,t,n){var i=this.elements;return u.subVectors(e,t),0===u.lengthSq()&&(u.z=1),u.normalize(),c.crossVectors(n,u),0===c.lengthSq()&&(1===Math.abs(n.z)?u.x+=1e-4:u.z+=1e-4,u.normalize(),c.crossVectors(n,u)),c.normalize(),l.crossVectors(u,c),i[0]=c.x,i[4]=l.x,i[8]=u.x,i[1]=c.y,i[5]=l.y,i[9]=u.y,i[2]=c.z,i[6]=l.z,i[10]=u.z,this}),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],s=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],_=n[15],b=i[0],w=i[4],E=i[8],T=i[12],S=i[1],M=i[5],A=i[9],L=i[13],C=i[2],P=i[6],R=i[10],F=i[14],I=i[3],N=i[7],O=i[11],U=i[15];return r[0]=a*b+o*S+s*C+c*I,r[4]=a*w+o*M+s*P+c*N,r[8]=a*E+o*A+s*R+c*O,r[12]=a*T+o*L+s*F+c*U,r[1]=l*b+u*S+h*C+d*I,r[5]=l*w+u*M+h*P+d*N,r[9]=l*E+u*A+h*R+d*O,r[13]=l*T+u*L+h*F+d*U,r[2]=f*b+p*S+m*C+g*I,r[6]=f*w+p*M+m*P+g*N,r[10]=f*E+p*A+m*R+g*O,r[14]=f*T+p*L+m*F+g*U,r[3]=v*b+y*S+x*C+_*I,r[7]=v*w+y*M+x*P+_*N,r[11]=v*E+y*A+x*R+_*O,r[15]=v*T+y*L+x*F+_*U,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new qt;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],c=e[13],l=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*s*u-i*c*u-r*o*h+n*c*h+i*o*d-n*s*d)+e[7]*(+t*s*d-t*c*h+r*a*h-i*a*d+i*c*l-r*s*l)+e[11]*(+t*c*u-t*o*d-r*a*u+n*a*d+r*o*l-n*c*l)+e[15]*(-i*o*l-t*s*u+t*o*h+i*a*u-n*a*h+n*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],a=i[1],o=i[2],s=i[3],c=i[4],l=i[5],u=i[6],h=i[7],d=i[8],f=i[9],p=i[10],m=i[11],g=i[12],v=i[13],y=i[14],x=i[15],_=f*y*h-v*p*h+v*u*m-l*y*m-f*u*x+l*p*x,b=g*p*h-d*y*h-g*u*m+c*y*m+d*u*x-c*p*x,w=d*v*h-g*f*h+g*l*m-c*v*m-d*l*x+c*f*x,E=g*f*u-d*v*u-g*l*p+c*v*p+d*l*y-c*f*y,T=r*_+a*b+o*w+s*E;if(0===T){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(S);return console.warn(S),this.identity()}var M=1/T;return n[0]=_*M,n[1]=(v*p*s-f*y*s-v*o*m+a*y*m+f*o*x-a*p*x)*M,n[2]=(l*y*s-v*u*s+v*o*h-a*y*h-l*o*x+a*u*x)*M,n[3]=(f*u*s-l*p*s-f*o*h+a*p*h+l*o*m-a*u*m)*M,n[4]=b*M,n[5]=(d*y*s-g*p*s+g*o*m-r*y*m-d*o*x+r*p*x)*M,n[6]=(g*u*s-c*y*s-g*o*h+r*y*h+c*o*x-r*u*x)*M,n[7]=(c*p*s-d*u*s+d*o*h-r*p*h-c*o*m+r*u*m)*M,n[8]=w*M,n[9]=(g*f*s-d*v*s-g*a*m+r*v*m+d*a*x-r*f*x)*M,n[10]=(c*v*s-g*l*s+g*a*h-r*v*h-c*a*x+r*l*x)*M,n[11]=(d*l*s-c*f*s-d*a*h+r*f*h+c*a*m-r*l*m)*M,n[12]=E*M,n[13]=(d*v*o-g*f*o+g*a*p-r*v*p-d*a*y+r*f*y)*M,n[14]=(g*l*o-c*v*o-g*a*u+r*v*u+c*a*y-r*l*y)*M,n[15]=(c*f*o-d*l*o+d*a*u-r*f*u-c*a*p+r*l*p)*M,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,s=e.z,c=r*a,l=r*o;return this.set(c*a+n,c*o-i*s,c*s+i*o,0,c*o+i*s,l*o+n,l*s-i*a,0,c*s-i*o,l*s+i*a,r*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:(o=new qt,s=new Xt,function(e,t,n){var i=this.elements,r=o.set(i[0],i[1],i[2]).length(),a=o.set(i[4],i[5],i[6]).length(),c=o.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],s.copy(this);var l=1/r,u=1/a,h=1/c;return s.elements[0]*=l,s.elements[1]*=l,s.elements[2]*=l,s.elements[4]*=u,s.elements[5]*=u,s.elements[6]*=u,s.elements[8]*=h,s.elements[9]*=h,s.elements[10]*=h,t.setFromRotationMatrix(s),n.x=r,n.y=a,n.z=c,this}),makePerspective:function(e,t,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*r/(t-e),c=2*r/(n-i),l=(t+e)/(t-e),u=(n+i)/(n-i),h=-(a+r)/(a-r),d=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=c,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,i,r,a){var o=this.elements,s=1/(t-e),c=1/(n-i),l=1/(a-r),u=(t+e)*s,h=(n+i)*c,d=(a+r)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}),Object.assign(Yt,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,a,o){var s=n[i+0],c=n[i+1],l=n[i+2],u=n[i+3],h=r[a+0],d=r[a+1],f=r[a+2],p=r[a+3];if(u!==p||s!==h||c!==d||l!==f){var m=1-o,g=s*h+c*d+l*f+u*p,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var x=Math.sqrt(y),_=Math.atan2(x,g*v);m=Math.sin(m*_)/x,o=Math.sin(o*_)/x}var b=o*v;if(s=s*m+h*b,c=c*m+d*b,l=l*m+f*b,u=u*m+p*b,m===1-o){var w=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=w,c*=w,l*=w,u*=w}}e[t]=s,e[t+1]=c,e[t+2]=l,e[t+3]=u}}),Object.defineProperties(Yt.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(Yt.prototype,{set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=e._x,i=e._y,r=e._z,a=e.order,o=Math.cos,s=Math.sin,c=o(n/2),l=o(i/2),u=o(r/2),h=s(n/2),d=s(i/2),f=s(r/2);return"XYZ"===a?(this._x=h*l*u+c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u-h*d*f):"YXZ"===a?(this._x=h*l*u+c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u+h*d*f):"ZXY"===a?(this._x=h*l*u-c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u-h*d*f):"ZYX"===a?(this._x=h*l*u-c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u+h*d*f):"YZX"===a?(this._x=h*l*u+c*d*f,this._y=c*d*u+h*l*f,this._z=c*l*f-h*d*u,this._w=c*l*u-h*d*f):"XZY"===a&&(this._x=h*l*u-c*d*f,this._y=c*d*u-h*l*f,this._z=c*l*f+h*d*u,this._w=c*l*u+h*d*f),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],a=n[8],o=n[1],s=n[5],c=n[9],l=n[2],u=n[6],h=n[10],d=i+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(u-c)*t,this._y=(a-l)*t,this._z=(o-r)*t):i>s&&i>h?(t=2*Math.sqrt(1+i-s-h),this._w=(u-c)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(a+l)/t):s>h?(t=2*Math.sqrt(1+s-i-h),this._w=(a-l)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(c+u)/t):(t=2*Math.sqrt(1+h-i-s),this._w=(o-r)/t,this._x=(a+l)/t,this._y=(c+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new qt;return function(n,i){return void 0===t&&(t=new qt),(e=n.dot(i)+1)<1e-6?(e=0,Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y)):t.crossVectors(n,i),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,s=t._y,c=t._z,l=t._w;return this._x=n*l+a*o+i*c-r*s,this._y=i*l+a*s+r*o-n*c,this._z=r*l+a*c+n*s-i*o,this._w=a*l-n*o-i*s-r*c,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var c=Math.atan2(s,o),l=Math.sin((1-t)*c)/s,u=Math.sin(t*c)/s;return this._w=a*l+this._w*u,this._x=n*l+this._x*u,this._y=i*l+this._y*u,this._z=r*l+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(qt.prototype,{isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:(d=new Yt,function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(d.setFromEuler(e))}),applyAxisAngle:function(){var e=new Yt;return function(t,n){return this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements,a=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*a,this},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,s=e.w,c=s*t+a*i-o*n,l=s*n+o*t-r*i,u=s*i+r*n-a*t,h=-r*t-a*n-o*i;return this.x=c*s+h*-r+l*-o-u*-a,this.y=l*s+h*-a+u*-r-c*-o,this.z=u*s+h*-o+c*-a-l*-r,this},project:function(){var e=new Xt;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new Xt;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new qt,t=new qt;return function(n,i){return e.set(n,n,n),t.set(i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new qt;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new qt;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(jt.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){var t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(Qt.prototype,{isMatrix3:!0,set:function(e,t,n,i,r,a,o,s,c){var l=this.elements;return l[0]=e,l[1]=i,l[2]=o,l[3]=t,l[4]=r,l[5]=s,l[6]=n,l[7]=a,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var e=new qt;return function(t){for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix3(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[3],s=n[6],c=n[1],l=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=i[0],m=i[3],g=i[6],v=i[1],y=i[4],x=i[7],_=i[2],b=i[5],w=i[8];return r[0]=a*p+o*v+s*_,r[3]=a*m+o*y+s*b,r[6]=a*g+o*x+s*w,r[1]=c*p+l*v+u*_,r[4]=c*m+l*y+u*b,r[7]=c*g+l*x+u*w,r[2]=h*p+d*v+f*_,r[5]=h*m+d*y+f*b,r[8]=h*g+d*x+f*w,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8];return t*a*l-t*o*c-n*r*l+n*o*s+i*r*c-i*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=e.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],c=n[4],l=n[5],u=n[6],h=n[7],d=n[8],f=d*c-l*h,p=l*u-d*s,m=h*s-c*u,g=r*f+a*p+o*m;if(0===g){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return i[0]=f*y,i[1]=(o*h-d*a)*y,i[2]=(l*a-o*c)*y,i[3]=p*y,i[4]=(d*r-o*u)*y,i[5]=(o*s-l*r)*y,i[6]=m*y,i[7]=(a*u-h*r)*y,i[8]=(c*r-a*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,n,i,r,a,o){var s=Math.cos(r),c=Math.sin(r);this.set(n*s,n*c,-n*(s*a+c*o)+a+e,-i*c,i*s,-i*(-c*a+s*o)+o+t,0,0,1)},scale:function(e,t){var n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=t,n[4]*=t,n[7]*=t,this},rotate:function(e){var t=Math.cos(e),n=Math.sin(e),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],c=i[4],l=i[7];return i[0]=t*r+n*s,i[3]=t*a+n*c,i[6]=t*o+n*l,i[1]=-n*r+t*s,i[4]=-n*a+t*c,i[7]=-n*o+t*l,this},translate:function(e,t){var n=this.elements;return n[0]+=e*n[2],n[3]+=e*n[5],n[6]+=e*n[8],n[1]+=t*n[2],n[4]+=t*n[5],n[7]+=t*n[8],this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}});var Zt,$t,Jt,Kt,en,tn,nn=0;function rn(e,t,n,i,r,a,o,s,c,l){Object.defineProperty(this,"id",{value:nn++}),this.uuid=jt.generateUUID(),this.name="",this.image=void 0!==e?e:rn.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:rn.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Se,this.wrapT=void 0!==i?i:Se,this.magFilter=void 0!==r?r:Pe,this.minFilter=void 0!==a?a:Fe,this.anisotropy=void 0!==c?c:1,this.format=void 0!==o?o:Ye,this.type=void 0!==s?s:Ie,this.offset=new Wt(0,0),this.repeat=new Wt(1,1),this.center=new Wt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Qt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==l?l:Nt,this.version=0,this.onUpdate=null}function an(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}function on(e,t,n){this.width=e,this.height=t,this.scissor=new an(0,0,e,t),this.scissorTest=!1,this.viewport=new an(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=Pe),this.texture=new rn(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function sn(e,t,n){on.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}function cn(e,t,n,i,r,a,o,s,c,l,u,h){rn.call(this,null,a,o,s,c,l,i,r,u,h),this.image={data:e,width:t,height:n},this.magFilter=void 0!==c?c:Ae,this.minFilter=void 0!==l?l:Ae,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function ln(e,t){this.min=void 0!==e?e:new qt(1/0,1/0,1/0),this.max=void 0!==t?t:new qt(-1/0,-1/0,-1/0)}function un(e,t){this.center=void 0!==e?e:new qt,this.radius=void 0!==t?t:0}function hn(e,t){this.normal=void 0!==e?e:new qt(1,0,0),this.constant=void 0!==t?t:0}function dn(e,t,n,i,r,a){this.planes=[void 0!==e?e:new hn,void 0!==t?t:new hn,void 0!==n?n:new hn,void 0!==i?i:new hn,void 0!==r?r:new hn,void 0!==a?a:new hn]}rn.DEFAULT_IMAGE=void 0,rn.DEFAULT_MAPPING=ge,rn.prototype=Object.assign(Object.create(i.prototype),{constructor:rn,isTexture:!0,clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=jt.generateUUID()),t||void 0!==e.images[i.uuid]||(e.images[i.uuid]={uuid:i.uuid,url:function(e){var t;if(e instanceof HTMLCanvasElement)t=e;else{(t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height;var n=t.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height)}return t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(i)}),n.image=i.uuid}return t||(e.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===ge){if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Te:e.x=e.x-Math.floor(e.x);break;case Se:e.x=e.x<0?0:1;break;case Me:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Te:e.y=e.y-Math.floor(e.y);break;case Se:e.y=e.y<0?0:1;break;case Me:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(rn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(an.prototype,{isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,a=e.elements,o=a[0],s=a[4],c=a[8],l=a[1],u=a[5],h=a[9],d=a[2],f=a[6],p=a[10];if(Math.abs(s-l)<.01&&Math.abs(c-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+d)<.1&&Math.abs(h+f)<.1&&Math.abs(o+u+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(o+1)/2,g=(u+1)/2,v=(p+1)/2,y=(s+l)/4,x=(c+d)/4,_=(h+f)/4;return m>g&&m>v?m<.01?(n=0,i=.707106781,r=.707106781):(i=y/(n=Math.sqrt(m)),r=x/n):g>v?g<.01?(n=.707106781,i=0,r=.707106781):(n=y/(i=Math.sqrt(g)),r=_/i):v<.01?(n=.707106781,i=.707106781,r=0):(n=x/(r=Math.sqrt(v)),i=_/r),this.set(n,i,r,t),this}var b=Math.sqrt((f-h)*(f-h)+(c-d)*(c-d)+(l-s)*(l-s));return Math.abs(b)<.001&&(b=1),this.x=(f-h)/b,this.y=(c-d)/b,this.z=(l-s)/b,this.w=Math.acos((o+u+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(n,i){return void 0===e&&(e=new an,t=new an),e.set(n,n,n,n),t.set(i,i,i,i),this.clamp(e,t)}}(),clampLength:function(e,t){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),on.prototype=Object.assign(Object.create(i.prototype),{constructor:on,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),sn.prototype=Object.create(on.prototype),sn.prototype.constructor=sn,sn.prototype.isWebGLRenderTargetCube=!0,cn.prototype=Object.create(rn.prototype),cn.prototype.constructor=cn,cn.prototype.isDataTexture=!0,Object.assign(ln.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,c=e.length;s<c;s+=3){var l=e[s],u=e[s+1],h=e[s+2];l<t&&(t=l),u<n&&(n=u),h<i&&(i=h),l>r&&(r=l),u>a&&(a=u),h>o&&(o=h)}return this.min.set(t,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,c=e.count;s<c;s++){var l=e.getX(s),u=e.getY(s),h=e.getZ(s);l<t&&(t=l),u<n&&(n=u),h<i&&(i=h),l>r&&(r=l),u>a&&(a=u),h>o&&(o=h)}return this.min.set(t,n,i),this.max.set(r,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new qt;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new qt),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new qt),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e,t,n,i=new qt;function r(r){var a=r.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(t=0,n=o.length;t<n;t++)i.copy(o[t]),i.applyMatrix4(r.matrixWorld),e.expandByPoint(i)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(t=0,n=s.count;t<n;t++)i.fromBufferAttribute(s,t).applyMatrix4(r.matrixWorld),e.expandByPoint(i)}}return function(t){return e=this,t.updateMatrixWorld(!0),t.traverse(r),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new qt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:($t=new qt,function(e){return this.clampPoint(e.center,$t),$t.distanceToSquared(e.center)<=e.radius*e.radius}),intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},intersectsTriangle:function(){var e=new qt,t=new qt,n=new qt,i=new qt,r=new qt,a=new qt,o=new qt,s=new qt,c=new qt,l=new qt;function u(i){var r,a;for(r=0,a=i.length-3;r<=a;r+=3){o.fromArray(i,r);var s=c.x*Math.abs(o.x)+c.y*Math.abs(o.y)+c.z*Math.abs(o.z),l=e.dot(o),u=t.dot(o),h=n.dot(o);if(Math.max(-Math.max(l,u,h),Math.min(l,u,h))>s)return!1}return!0}return function(o){if(this.isEmpty())return!1;this.getCenter(s),c.subVectors(this.max,s),e.subVectors(o.a,s),t.subVectors(o.b,s),n.subVectors(o.c,s),i.subVectors(t,e),r.subVectors(n,t),a.subVectors(e,n);var h=[0,-i.z,i.y,0,-r.z,r.y,0,-a.z,a.y,i.z,0,-i.x,r.z,0,-r.x,a.z,0,-a.x,-i.y,i.x,0,-r.y,r.x,0,-a.y,a.x,0];return!!u(h)&&(!!u(h=[1,0,0,0,1,0,0,0,1])&&(l.crossVectors(i,r),u(h=[l.x,l.y,l.z])))}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new qt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new qt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new qt;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new un),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(Zt=[new qt,new qt,new qt,new qt,new qt,new qt,new qt,new qt],function(e){return this.isEmpty()?this:(Zt[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Zt[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Zt[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Zt[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Zt[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Zt[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Zt[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Zt[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Zt),this)}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(un.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:(Jt=new ln,function(e,t){var n=this.center;void 0!==t?n.copy(t):Jt.setFromPoints(e).getCenter(n);for(var i=0,r=0,a=e.length;r<a;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new qt),t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new ln),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(hn.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new qt,t=new qt;return function(n,i,r){var a=e.subVectors(r,i).cross(t.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(a,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new qt),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new qt;return function(t,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new qt);var i=t.delta(e),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?n.copy(t.start):void 0;var a=-(t.start.dot(this.normal)+this.constant)/r;return a<0||a>1?void 0:n.copy(i).multiplyScalar(a).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new qt),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new qt,t=new Qt;return function(n,i){var r=i||t.getNormalMatrix(n),a=this.coplanarPoint(e).applyMatrix4(n),o=this.normal.applyMatrix3(r).normalize();return this.constant=-a.dot(o),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(dn.prototype,{set:function(e,t,n,i,r,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],c=n[5],l=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(o-i,u-s,p-h,y-m).normalize(),t[1].setComponents(o+i,u+s,p+h,y+m).normalize(),t[2].setComponents(o+r,u+c,p+d,y+g).normalize(),t[3].setComponents(o-r,u-c,p-d,y-g).normalize(),t[4].setComponents(o-a,u-l,p-f,y-v).normalize(),t[5].setComponents(o+a,u+l,p+f,y+v).normalize(),this},intersectsObject:(tn=new un,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),tn.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(tn)}),intersectsSprite:function(){var e=new un;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:(Kt=new qt,en=new qt,function(e){for(var t=this.planes,n=0;n<6;n++){var i=t[n];Kt.x=i.normal.x>0?e.min.x:e.max.x,en.x=i.normal.x>0?e.max.x:e.min.x,Kt.y=i.normal.y>0?e.min.y:e.max.y,en.y=i.normal.y>0?e.max.y:e.min.y,Kt.z=i.normal.z>0?e.min.z:e.max.z,en.z=i.normal.z>0?e.max.z:e.min.z;var r=i.distanceToPoint(Kt),a=i.distanceToPoint(en);if(r<0&&a<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}});var fn,pn={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},mn={merge:function(e){for(var t={},n=0;n<e.length;n++){var i=this.clone(e[n]);for(var r in i)t[r]=i[r]}return t},clone:function(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}},gn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function vn(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}Object.assign(vn.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,i){if(t=jt.euclideanModulo(t,1),n=jt.clamp(n,0,1),i=jt.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,a=2*i-r;this.r=e(a,r,t+1/3),this.g=e(a,r,t),this.b=e(a,r,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,c=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(o,s,c)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var l,u=(l=n[1]).length;if(3===u)return this.r=parseInt(l.charAt(0)+l.charAt(0),16)/255,this.g=parseInt(l.charAt(1)+l.charAt(1),16)/255,this.b=parseInt(l.charAt(2)+l.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(l.charAt(0)+l.charAt(1),16)/255,this.g=parseInt(l.charAt(2)+l.charAt(3),16)/255,this.b=parseInt(l.charAt(4)+l.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(l=gn[e])?this.setHex(l):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,n,i=this.r,r=this.g,a=this.b,o=Math.max(i,r,a),s=Math.min(i,r,a),c=(s+o)/2;if(s===o)t=0,n=0;else{var l=o-s;switch(n=c<=.5?l/(o+s):l/(2-o-s),o){case i:t=(r-a)/l+(r<a?6:0);break;case r:t=(a-i)/l+2;break;case a:t=(i-r)/l+4}t/=6}return e.h=t,e.s=n,e.l=c,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:(fn={},function(e,t,n){return this.getHSL(fn),fn.h+=e,fn.s+=t,fn.l+=n,this.setHSL(fn.h,fn.s,fn.l),this}),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var yn,xn={common:{diffuse:{value:new vn(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Qt},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Wt(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new vn(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new vn(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new Qt}}},_n={basic:{uniforms:mn.merge([xn.common,xn.specularmap,xn.envmap,xn.aomap,xn.lightmap,xn.fog]),vertexShader:pn.meshbasic_vert,fragmentShader:pn.meshbasic_frag},lambert:{uniforms:mn.merge([xn.common,xn.specularmap,xn.envmap,xn.aomap,xn.lightmap,xn.emissivemap,xn.fog,xn.lights,{emissive:{value:new vn(0)}}]),vertexShader:pn.meshlambert_vert,fragmentShader:pn.meshlambert_frag},phong:{uniforms:mn.merge([xn.common,xn.specularmap,xn.envmap,xn.aomap,xn.lightmap,xn.emissivemap,xn.bumpmap,xn.normalmap,xn.displacementmap,xn.gradientmap,xn.fog,xn.lights,{emissive:{value:new vn(0)},specular:{value:new vn(1118481)},shininess:{value:30}}]),vertexShader:pn.meshphong_vert,fragmentShader:pn.meshphong_frag},standard:{uniforms:mn.merge([xn.common,xn.envmap,xn.aomap,xn.lightmap,xn.emissivemap,xn.bumpmap,xn.normalmap,xn.displacementmap,xn.roughnessmap,xn.metalnessmap,xn.fog,xn.lights,{emissive:{value:new vn(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:pn.meshphysical_vert,fragmentShader:pn.meshphysical_frag},points:{uniforms:mn.merge([xn.points,xn.fog]),vertexShader:pn.points_vert,fragmentShader:pn.points_frag},dashed:{uniforms:mn.merge([xn.common,xn.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:pn.linedashed_vert,fragmentShader:pn.linedashed_frag},depth:{uniforms:mn.merge([xn.common,xn.displacementmap]),vertexShader:pn.depth_vert,fragmentShader:pn.depth_frag},normal:{uniforms:mn.merge([xn.common,xn.bumpmap,xn.normalmap,xn.displacementmap,{opacity:{value:1}}]),vertexShader:pn.normal_vert,fragmentShader:pn.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:pn.cube_vert,fragmentShader:pn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:pn.equirect_vert,fragmentShader:pn.equirect_frag},distanceRGBA:{uniforms:mn.merge([xn.common,xn.displacementmap,{referencePosition:{value:new qt},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:pn.distanceRGBA_vert,fragmentShader:pn.distanceRGBA_frag},shadow:{uniforms:mn.merge([xn.lights,xn.fog,{color:{value:new vn(0)},opacity:{value:1}}]),vertexShader:pn.shadow_vert,fragmentShader:pn.shadow_frag}};function bn(e){var t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=t.get(n);i&&(e.deleteBuffer(i.buffer),t.delete(n))},update:function(n,i){n.isInterleavedBufferAttribute&&(n=n.data);var r=t.get(n);void 0===r?t.set(n,function(t,n){var i=t.array,r=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,a=e.createBuffer();e.bindBuffer(n,a),e.bufferData(n,i,r),t.onUploadCallback();var o=e.FLOAT;return i instanceof Float32Array?o=e.FLOAT:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?o=e.UNSIGNED_SHORT:i instanceof Int16Array?o=e.SHORT:i instanceof Uint32Array?o=e.UNSIGNED_INT:i instanceof Int32Array?o=e.INT:i instanceof Int8Array?o=e.BYTE:i instanceof Uint8Array&&(o=e.UNSIGNED_BYTE),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}(n,i)):r.version<n.version&&(function(t,n,i){var r=n.array,a=n.updateRange;e.bindBuffer(i,t),!1===n.dynamic?e.bufferData(i,r,e.STATIC_DRAW):-1===a.count?e.bufferSubData(i,0,r):0===a.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,a.offset*r.BYTES_PER_ELEMENT,r.subarray(a.offset,a.offset+a.count)),a.count=-1)}(r.buffer,n,i),r.version=n.version)}}}function wn(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||wn.DefaultOrder}function En(){this.mask=1}_n.physical={uniforms:mn.merge([_n.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:pn.meshphysical_vert,fragmentShader:pn.meshphysical_frag},wn.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],wn.DefaultOrder="XYZ",Object.defineProperties(wn.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(wn.prototype,{isEuler:!0,set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=jt.clamp,r=e.elements,a=r[0],o=r[4],s=r[8],c=r[1],l=r[5],u=r[9],h=r[2],d=r[6],f=r[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(d,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,f),this._z=Math.atan2(c,l)):(this._y=Math.atan2(-h,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(c,a))):"ZYX"===t?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,f),this._z=Math.atan2(c,a)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(i(c,-1,1)),Math.abs(c)<.99999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,f))):"XZY"===t?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(d,l),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-u,f),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new Xt;return function(t,n,i){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,n,i)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(yn=new Yt,function(e){return yn.setFromEuler(this),this.setFromQuaternion(yn,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new qt(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(En.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask|=1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!=(this.mask&e.mask)}});var Tn,Sn,Mn,An,Ln=0;function Cn(){Object.defineProperty(this,"id",{value:Ln++}),this.uuid=jt.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Cn.DefaultUp.clone();var e=new qt,t=new wn,n=new Yt,i=new qt(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:i},modelViewMatrix:{value:new Xt},normalMatrix:{value:new Qt}}),this.matrix=new Xt,this.matrixWorld=new Xt,this.matrixAutoUpdate=Cn.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new En,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function Pn(){Cn.call(this),this.type="Camera",this.matrixWorldInverse=new Xt,this.projectionMatrix=new Xt}function Rn(e,t,n,i,r,a){Pn.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Fn(e,t,n,i,r,a){this.a=e,this.b=t,this.c=n,this.normal=i&&i.isVector3?i:new qt,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new vn,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}Cn.DefaultUp=new qt(0,1,0),Cn.DefaultMatrixAutoUpdate=!0,Cn.prototype=Object.assign(Object.create(i.prototype),{constructor:Cn,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(An=new Yt,function(e,t){return An.setFromAxisAngle(e,t),this.quaternion.multiply(An),this}),rotateOnWorldAxis:function(){var e=new Yt;return function(t,n){return e.setFromAxisAngle(t,n),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new qt(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new qt(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new qt(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new qt;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new qt(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new qt(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new qt(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(Mn=new Xt,function(e){return e.applyMatrix4(Mn.getInverse(this.matrixWorld))}),lookAt:function(){var e=new Xt,t=new qt;return function(n,i,r){n.isVector3?t.copy(n):t.set(n,i,r),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var n=this.children.indexOf(e);return-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new qt),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(Tn=new qt,Sn=new qt,function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),e=new Yt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(Tn,e,Sn),e}),getWorldScale:function(){var e=new qt,t=new Yt;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new qt),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,n),n}}(),getWorldDirection:function(){var e=new Yt;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new qt),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.matrix=this.matrix.toArray(),void 0!==this.geometry){i.geometry=r(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,c=o.length;s<c;s++){var l=o[s];r(e.shapes,l)}else r(e.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){var u=[];for(s=0,c=this.material.length;s<c;s++)u.push(r(e.materials,this.material[s]));i.material=u}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(e).object)}if(t){var h=m(e.geometries),d=m(e.materials),f=m(e.textures),p=m(e.images);o=m(e.shapes);h.length>0&&(n.geometries=h),d.length>0&&(n.materials=d),f.length>0&&(n.textures=f),p.length>0&&(n.images=p),o.length>0&&(n.shapes=o)}return n.object=i,n;function m(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}}),Pn.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Pn,isCamera:!0,copy:function(e,t){return Cn.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new Yt;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new qt),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){Cn.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Rn.prototype=Object.assign(Object.create(Pn.prototype),{constructor:Rn,isOrthographicCamera:!0,copy:function(e,t){return Pn.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,a=n+e,o=i+t,s=i-t;if(null!==this.view&&this.view.enabled){var c=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;a=(r+=u*(this.view.offsetX/c))+u*(this.view.width/c),s=(o-=h*(this.view.offsetY/l))-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far)},toJSON:function(e){var t=Cn.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(Fn.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var In,Nn,On=0;function Un(){Object.defineProperty(this,"id",{value:On+=2}),this.uuid=jt.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Dn(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function zn(e,t,n){Dn.call(this,new Int8Array(e),t,n)}function kn(e,t,n){Dn.call(this,new Uint8Array(e),t,n)}function Bn(e,t,n){Dn.call(this,new Uint8ClampedArray(e),t,n)}function Gn(e,t,n){Dn.call(this,new Int16Array(e),t,n)}function Hn(e,t,n){Dn.call(this,new Uint16Array(e),t,n)}function Vn(e,t,n){Dn.call(this,new Int32Array(e),t,n)}function jn(e,t,n){Dn.call(this,new Uint32Array(e),t,n)}function Wn(e,t,n){Dn.call(this,new Float32Array(e),t,n)}function Xn(e,t,n){Dn.call(this,new Float64Array(e),t,n)}function Yn(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function qn(e){if(0===e.length)return-1/0;for(var t=e[0],n=1,i=e.length;n<i;++n)e[n]>t&&(t=e[n]);return t}Un.prototype=Object.assign(Object.create(i.prototype),{constructor:Un,isGeometry:!0,applyMatrix:function(e){for(var t=(new Qt).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(e)}for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var a=0,o=r.vertexNormals.length;a<o;a++)r.vertexNormals[a].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var e=new Xt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Xt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Xt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Xt;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new Xt;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:(Nn=new Cn,function(e){Nn.lookAt(e),Nn.updateMatrix(),this.applyMatrix(Nn.matrix)}),fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,i=e.attributes,r=i.position.array,a=void 0!==i.normal?i.normal.array:void 0,o=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,c=void 0!==i.uv2?i.uv2.array:void 0;void 0!==c&&(this.faceVertexUvs[1]=[]);for(var l=[],u=[],h=[],d=0,f=0;d<r.length;d+=3,f+=2)t.vertices.push(new qt(r[d],r[d+1],r[d+2])),void 0!==a&&l.push(new qt(a[d],a[d+1],a[d+2])),void 0!==o&&t.colors.push(new vn(o[d],o[d+1],o[d+2])),void 0!==s&&u.push(new Wt(s[f],s[f+1])),void 0!==c&&h.push(new Wt(c[f],c[f+1]));function p(e,n,i,r){var d=new Fn(e,n,i,void 0!==a?[l[e].clone(),l[n].clone(),l[i].clone()]:[],void 0!==o?[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()]:[],r);t.faces.push(d),void 0!==s&&t.faceVertexUvs[0].push([u[e].clone(),u[n].clone(),u[i].clone()]),void 0!==c&&t.faceVertexUvs[1].push([h[e].clone(),h[n].clone(),h[i].clone()])}var m=e.groups;if(m.length>0)for(d=0;d<m.length;d++)for(var g=m[d],v=g.start,y=(f=v,v+g.count);f<y;f+=3)void 0!==n?p(n[f],n[f+1],n[f+2],g.materialIndex):p(f,f+1,f+2,g.materialIndex);else if(void 0!==n)for(d=0;d<n.length;d+=3)p(n[d],n[d+1],n[d+2]);else for(d=0;d<r.length/3;d+=3)p(d,d+1,d+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:(In=new qt,function(){return this.computeBoundingBox(),this.boundingBox.getCenter(In).negate(),this.translate(In.x,In.y,In.z),this}),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new Xt;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new qt,t=new qt,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i,r,a,o;for(void 0===e&&(e=!0),o=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)o[t]=new qt;if(e){var s,c,l,u=new qt,h=new qt;for(i=0,r=this.faces.length;i<r;i++)a=this.faces[i],s=this.vertices[a.a],c=this.vertices[a.b],l=this.vertices[a.c],u.subVectors(l,c),h.subVectors(s,c),u.cross(h),o[a.a].add(u),o[a.b].add(u),o[a.c].add(u)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o[(a=this.faces[i]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,n=this.vertices.length;t<n;t++)o[t].normalize();for(i=0,r=this.faces.length;i<r;i++){var d=(a=this.faces[i]).vertexNormals;3===d.length?(d[0].copy(o[a.a]),d[1].copy(o[a.b]),d[2].copy(o[a.c])):(d[0]=o[a.a].clone(),d[1]=o[a.b].clone(),d[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(n=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var a=new Un;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)c=new qt,l={a:new qt,b:new qt,c:new qt},o.push(c),s.push(l)}var c,l,u=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],c=u.faceNormals[n],l=u.vertexNormals[n],c.copy(r.normal),l.a.copy(r.vertexNormals[0]),l.b.copy(r.vertexNormals[1]),l.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ln),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new un),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(e&&e.isGeometry){var i,r=this.vertices.length,a=this.vertices,o=e.vertices,s=this.faces,c=e.faces,l=this.faceVertexUvs[0],u=e.faceVertexUvs[0],h=this.colors,d=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new Qt).getNormalMatrix(t));for(var f=0,p=o.length;f<p;f++){var m=o[f].clone();void 0!==t&&m.applyMatrix4(t),a.push(m)}for(f=0,p=d.length;f<p;f++)h.push(d[f].clone());for(f=0,p=c.length;f<p;f++){var g,v,y,x=c[f],_=x.vertexNormals,b=x.vertexColors;(g=new Fn(x.a+r,x.b+r,x.c+r)).normal.copy(x.normal),void 0!==i&&g.normal.applyMatrix3(i).normalize();for(var w=0,E=_.length;w<E;w++)v=_[w].clone(),void 0!==i&&v.applyMatrix3(i).normalize(),g.vertexNormals.push(v);g.color.copy(x.color);for(w=0,E=b.length;w<E;w++)y=b[w],g.vertexColors.push(y.clone());g.materialIndex=x.materialIndex+n,s.push(g)}for(f=0,p=u.length;f<p;f++){var T=u[f],S=[];if(void 0!==T){for(w=0,E=T.length;w<E;w++)S.push(T[w].clone());l.push(S)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,i,r,a,o,s,c={},l=[],u=[],h=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],void 0===c[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(c[t]=n,l.push(this.vertices[n]),u[n]=l.length-1):u[n]=u[c[t]];var d=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=u[r.a],r.b=u[r.b],r.c=u[r.c],a=[r.a,r.b,r.c];for(var f=0;f<3;f++)if(a[f]===a[(f+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var p=d[n];for(this.faces.splice(p,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(p,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},setFromPoints:function(e){this.vertices=[];for(var t=0,n=e.length;t<n;t++){var i=e[t];this.vertices.push(new qt(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===t&&(i=[]),o&&o.length===t&&(r=[]);for(n=0;n<t;n++){var s=e[n]._id;i&&i.push(a[s]),r&&r.push(o[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];i.push(a.x,a.y,a.z)}var o=[],s=[],c={},l=[],u={},h=[],d={};for(r=0;r<this.faces.length;r++){var f=this.faces[r],p=void 0!==this.faceVertexUvs[0][r],m=f.normal.length()>0,g=f.vertexNormals.length>0,v=1!==f.color.r||1!==f.color.g||1!==f.color.b,y=f.vertexColors.length>0,x=0;if(x=E(x=E(x=E(x=E(x=E(x=E(x=E(x=E(x,0,0),1,!0),2,!1),3,p),4,m),5,g),6,v),7,y),o.push(x),o.push(f.a,f.b,f.c),o.push(f.materialIndex),p){var _=this.faceVertexUvs[0][r];o.push(M(_[0]),M(_[1]),M(_[2]))}if(m&&o.push(T(f.normal)),g){var b=f.vertexNormals;o.push(T(b[0]),T(b[1]),T(b[2]))}if(v&&o.push(S(f.color)),y){var w=f.vertexColors;o.push(S(w[0]),S(w[1]),S(w[2]))}}function E(e,t,n){return n?e|1<<t:e&~(1<<t)}function T(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]?c[t]:(c[t]=s.length/3,s.push(e.x,e.y,e.z),c[t])}function S(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]?u[t]:(u[t]=l.length,l.push(e.getHex()),u[t])}function M(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/2,h.push(e.x,e.y),d[t])}return e.data={},e.data.vertices=i,e.data.normals=s,l.length>0&&(e.data.colors=l),h.length>0&&(e.data.uvs=[h]),e.data.faces=o,e},clone:function(){return(new Un).copy(this)},copy:function(e){var t,n,i,r,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var c=e.colors;for(t=0,n=c.length;t<n;t++)this.colors.push(c[t].clone());var l=e.faces;for(t=0,n=l.length;t<n;t++)this.faces.push(l[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var u=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=u.length;i<r;i++){var h=u[i],d=[];for(a=0,o=h.length;a<o;a++){var f=h[a];d.push(f.clone())}this.faceVertexUvs[t].push(d)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var m={};if(m.name=p[t].name,void 0!==p[t].vertices)for(m.vertices=[],i=0,r=p[t].vertices.length;i<r;i++)m.vertices.push(p[t].vertices[i].clone());if(void 0!==p[t].normals)for(m.normals=[],i=0,r=p[t].normals.length;i<r;i++)m.normals.push(p[t].normals[i].clone());this.morphTargets.push(m)}var g=e.morphNormals;for(t=0,n=g.length;t<n;t++){var v={};if(void 0!==g[t].vertexNormals)for(v.vertexNormals=[],i=0,r=g[t].vertexNormals.length;i<r;i++){var y=g[t].vertexNormals[i],x={};x.a=y.a.clone(),x.b=y.b.clone(),x.c=y.c.clone(),v.vertexNormals.push(x)}if(void 0!==g[t].faceNormals)for(v.faceNormals=[],i=0,r=g[t].faceNormals.length;i<r;i++)v.faceNormals.push(g[t].faceNormals[i].clone());this.morphNormals.push(v)}var _=e.skinWeights;for(t=0,n=_.length;t<n;t++)this.skinWeights.push(_[t].clone());var b=e.skinIndices;for(t=0,n=b.length;t<n;t++)this.skinIndices.push(b[t].clone());var w=e.lineDistances;for(t=0,n=w.length;t<n;t++)this.lineDistances.push(w[t]);var E=e.boundingBox;null!==E&&(this.boundingBox=E.clone());var T=e.boundingSphere;return null!==T&&(this.boundingSphere=T.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Dn.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Dn.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new vn),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new Wt),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),a=new qt),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new an),t[n++]=a.x,t[n++]=a.y,t[n++]=a.z,t[n++]=a.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),zn.prototype=Object.create(Dn.prototype),zn.prototype.constructor=zn,kn.prototype=Object.create(Dn.prototype),kn.prototype.constructor=kn,Bn.prototype=Object.create(Dn.prototype),Bn.prototype.constructor=Bn,Gn.prototype=Object.create(Dn.prototype),Gn.prototype.constructor=Gn,Hn.prototype=Object.create(Dn.prototype),Hn.prototype.constructor=Hn,Vn.prototype=Object.create(Dn.prototype),Vn.prototype.constructor=Vn,jn.prototype=Object.create(Dn.prototype),jn.prototype.constructor=jn,Wn.prototype=Object.create(Dn.prototype),Wn.prototype.constructor=Wn,Xn.prototype=Object.create(Dn.prototype),Xn.prototype.constructor=Xn,Object.assign(Yn.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,a=0;a<r.length;a++){var o=r[a];o.materialIndex!==i&&(i=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,n.push(t)),t={start:3*a,materialIndex:i})}void 0!==t&&(t.count=3*a-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,i=e.vertices,r=e.faceVertexUvs,a=r[0]&&r[0].length>0,o=r[1]&&r[1].length>0,s=e.morphTargets,c=s.length;if(c>0){t=[];for(var l=0;l<c;l++)t[l]=[];this.morphTargets.position=t}var u,h=e.morphNormals,d=h.length;if(d>0){u=[];for(l=0;l<d;l++)u[l]=[];this.morphTargets.normal=u}var f=e.skinIndices,p=e.skinWeights,m=f.length===i.length,g=p.length===i.length;for(l=0;l<n.length;l++){var v=n[l];this.vertices.push(i[v.a],i[v.b],i[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var x=v.normal;this.normals.push(x,x,x)}var _,b=v.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var w=v.color;this.colors.push(w,w,w)}if(!0===a)void 0!==(_=r[0][l])?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",l),this.uvs.push(new Wt,new Wt,new Wt));if(!0===o)void 0!==(_=r[1][l])?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",l),this.uvs2.push(new Wt,new Wt,new Wt));for(var E=0;E<c;E++){var T=s[E].vertices;t[E].push(T[v.a],T[v.b],T[v.c])}for(E=0;E<d;E++){var S=h[E].vertexNormals[l];u[E].push(S.a,S.b,S.c)}m&&this.skinIndices.push(f[v.a],f[v.b],f[v.c]),g&&this.skinWeights.push(p[v.a],p[v.b],p[v.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var Qn=1;function Zn(){Object.defineProperty(this,"id",{value:Qn+=2}),this.uuid=jt.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function $n(e,t,n,i,r,a){Un.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new Jn(e,t,n,i,r,a)),this.mergeVertices()}function Jn(e,t,n,i,r,a){Zn.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};var o=this;e=e||1,t=t||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1;var s=[],c=[],l=[],u=[],h=0,d=0;function f(e,t,n,i,r,a,f,p,m,g,v){var y,x,_=a/m,b=f/g,w=a/2,E=f/2,T=p/2,S=m+1,M=g+1,A=0,L=0,C=new qt;for(x=0;x<M;x++){var P=x*b-E;for(y=0;y<S;y++){var R=y*_-w;C[e]=R*i,C[t]=P*r,C[n]=T,c.push(C.x,C.y,C.z),C[e]=0,C[t]=0,C[n]=p>0?1:-1,l.push(C.x,C.y,C.z),u.push(y/m),u.push(1-x/g),A+=1}}for(x=0;x<g;x++)for(y=0;y<m;y++){var F=h+y+S*x,I=h+y+S*(x+1),N=h+(y+1)+S*(x+1),O=h+(y+1)+S*x;s.push(F,I,O),s.push(I,N,O),L+=6}o.addGroup(d,L,v),d+=L,h+=A}f("z","y","x",-1,-1,n,t,e,a=Math.floor(a)||1,r,0),f("z","y","x",1,-1,n,t,-e,a,r,1),f("x","z","y",1,1,e,n,t,i,a,2),f("x","z","y",1,-1,e,n,-t,i,a,3),f("x","y","z",1,-1,e,t,n,i,r,4),f("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(s),this.addAttribute("position",new Wn(c,3)),this.addAttribute("normal",new Wn(l,3)),this.addAttribute("uv",new Wn(u,2))}function Kn(e,t,n,i){Un.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new ei(e,t,n,i)),this.mergeVertices()}function ei(e,t,n,i){Zn.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};var r,a,o=(e=e||1)/2,s=(t=t||1)/2,c=Math.floor(n)||1,l=Math.floor(i)||1,u=c+1,h=l+1,d=e/c,f=t/l,p=[],m=[],g=[],v=[];for(a=0;a<h;a++){var y=a*f-s;for(r=0;r<u;r++){var x=r*d-o;m.push(x,-y,0),g.push(0,0,1),v.push(r/c),v.push(1-a/l)}}for(a=0;a<l;a++)for(r=0;r<c;r++){var _=r+u*a,b=r+u*(a+1),w=r+1+u*(a+1),E=r+1+u*a;p.push(_,b,E),p.push(b,w,E)}this.setIndex(p),this.addAttribute("position",new Wn(m,3)),this.addAttribute("normal",new Wn(g,3)),this.addAttribute("uv",new Wn(v,2))}Zn.prototype=Object.assign(Object.create(i.prototype),{constructor:Zn,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(qn(e)>65535?jn:Hn)(e,1):this.index=e},addAttribute:function(e,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new Dn(arguments[1],arguments[2])))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new Qt).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new Xt;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new Xt;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new Xt;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new Xt;return function(t,n,i){return e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e=new Xt;return function(t,n,i){return e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(){var e=new Cn;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new qt;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new Wn(3*t.vertices.length,3),i=new Wn(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new Wn(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new Wn(t,3)),this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new Yn).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new Dn(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var n=new Float32Array(3*e.normals.length);this.addAttribute("normal",new Dn(n,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var i=new Float32Array(3*e.colors.length);this.addAttribute("color",new Dn(i,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var r=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new Dn(r,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var a=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new Dn(a,2).copyVector2sArray(e.uvs2))}for(var o in this.groups=e.groups,e.morphTargets){for(var s=[],c=e.morphTargets[o],l=0,u=c.length;l<u;l++){var h=c[l],d=new Wn(3*h.length,3);s.push(d.copyVector3sArray(h))}this.morphAttributes[o]=s}if(e.skinIndices.length>0){var f=new Wn(4*e.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var p=new Wn(4*e.skinWeights.length,4);this.addAttribute("skinWeight",p.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ln);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new ln,t=new qt;return function(){null===this.boundingSphere&&(this.boundingSphere=new un);var n=this.attributes.position;if(n){var i=this.boundingSphere.center;e.setFromBufferAttribute(n),e.getCenter(i);for(var r=0,a=0,o=n.count;a<o;a++)t.x=n.getX(a),t.y=n.getY(a),t.z=n.getZ(a),r=Math.max(r,i.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new Dn(new Float32Array(i.length),3));else for(var r=t.normal.array,a=0,o=r.length;a<o;a++)r[a]=0;var s,c,l,u=t.normal.array,h=new qt,d=new qt,f=new qt,p=new qt,m=new qt;if(e){var g=e.array;0===n.length&&this.addGroup(0,g.length);for(var v=0,y=n.length;v<y;++v){var x=n[v],_=x.start;for(a=_,o=_+x.count;a<o;a+=3)s=3*g[a+0],c=3*g[a+1],l=3*g[a+2],h.fromArray(i,s),d.fromArray(i,c),f.fromArray(i,l),p.subVectors(f,d),m.subVectors(h,d),p.cross(m),u[s]+=p.x,u[s+1]+=p.y,u[s+2]+=p.z,u[c]+=p.x,u[c+1]+=p.y,u[c+2]+=p.z,u[l]+=p.x,u[l+1]+=p.y,u[l+2]+=p.z}}else for(a=0,o=i.length;a<o;a+=9)h.fromArray(i,a),d.fromArray(i,a+3),f.fromArray(i,a+6),p.subVectors(f,d),m.subVectors(h,d),p.cross(m),u[a]=p.x,u[a+1]=p.y,u[a+2]=p.z,u[a+3]=p.x,u[a+4]=p.y,u[a+5]=p.z,u[a+6]=p.x,u[a+7]=p.y,u[a+8]=p.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i].array,a=e.attributes[i],o=a.array,s=0,c=a.itemSize*t;s<o.length;s++,c++)r[c]=o[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new qt;return function(){for(var t=this.attributes.normal,n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.normalize(),t.setXYZ(n,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Zn,t=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],a=r.array,o=r.itemSize,s=new a.constructor(t.length*o),c=0,l=0,u=0,h=t.length;u<h;u++){c=t[u]*o;for(var d=0;d<o;d++)s[l++]=a[c++]}e.addAttribute(i,new Dn(s,o))}var f=this.groups;for(u=0,h=f.length;u<h;u++){var p=f[u];e.addGroup(p.start,p.count,p.materialIndex)}return e},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);e.data.index={type:i.array.constructor.name,array:r}}var a=this.attributes;for(var n in a){var o=a[n];r=Array.prototype.slice.call(o.array);e.data.attributes[n]={itemSize:o.itemSize,type:o.array.constructor.name,array:r,normalized:o.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return(new Zn).copy(this)},copy:function(e){var t,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var c=[],l=s[t];for(n=0,i=l.length;n<i;n++)c.push(l[n].clone());this.morphAttributes[t]=c}var u=e.groups;for(n=0,i=u.length;n<i;n++){var h=u[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),$n.prototype=Object.create(Un.prototype),$n.prototype.constructor=$n,Jn.prototype=Object.create(Zn.prototype),Jn.prototype.constructor=Jn,Kn.prototype=Object.create(Un.prototype),Kn.prototype.constructor=Kn,ei.prototype=Object.create(Zn.prototype),ei.prototype.constructor=ei;var ti,ni,ii,ri,ai,oi,si,ci=0;function li(){Object.defineProperty(this,"id",{value:ci++}),this.uuid=jt.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=I,this.side=T,this.flatShading=!1,this.vertexColors=C,this.opacity=1,this.transparent=!1,this.blendSrc=Y,this.blendDst=q,this.blendEquation=z,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=ie,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function ui(e){li.call(this),this.type="MeshBasicMaterial",this.color=new vn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ce,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}function hi(e){li.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function di(e,t){this.origin=void 0!==e?e:new qt,this.direction=void 0!==t?t:new qt}function fi(e,t){this.start=void 0!==e?e:new qt,this.end=void 0!==t?t:new qt}function pi(e,t,n){this.a=void 0!==e?e:new qt,this.b=void 0!==t?t:new qt,this.c=void 0!==n?n:new qt}function mi(e,t){Cn.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new Zn,this.material=void 0!==t?t:new ui({color:16777215*Math.random()}),this.drawMode=Rt,this.updateMorphTargets()}function gi(e,t){return Math.abs(t[1])-Math.abs(e[1])}function vi(e,t,n,i,r,a,o,s,c,l){e=void 0!==e?e:[],t=void 0!==t?t:ve,rn.call(this,e,t,n,i,r,a,o,s,c,l),this.flipY=!1}li.prototype=Object.assign(Object.create(i.prototype),{constructor:li,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n)if("shading"!==t){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===A;else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==I&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==T&&(n.side=this.side),this.vertexColors!==C&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t){var r=i(e.textures),a=i(e.images);r.length>0&&(n.textures=r),a.length>0&&(n.images=a)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),ui.prototype=Object.create(li.prototype),ui.prototype.constructor=ui,ui.prototype.isMeshBasicMaterial=!0,ui.prototype.copy=function(e){return li.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},hi.prototype=Object.create(li.prototype),hi.prototype.constructor=hi,hi.prototype.isShaderMaterial=!0,hi.prototype.copy=function(e){return li.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=mn.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},hi.prototype.toJSON=function(e){var t=li.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(di.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new qt),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new qt;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new qt),t.subVectors(e,this.origin);var n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new qt;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(ni=new qt,ii=new qt,ri=new qt,function(e,t,n,i){ni.copy(e).add(t).multiplyScalar(.5),ii.copy(t).sub(e).normalize(),ri.copy(this.origin).sub(ni);var r,a,o,s,c=.5*e.distanceTo(t),l=-this.direction.dot(ii),u=ri.dot(this.direction),h=-ri.dot(ii),d=ri.lengthSq(),f=Math.abs(1-l*l);if(f>0)if(a=l*u-h,s=c*f,(r=l*h-u)>=0)if(a>=-s)if(a<=s){var p=1/f;o=(r*=p)*(r+l*(a*=p)+2*u)+a*(l*r+a+2*h)+d}else a=c,o=-(r=Math.max(0,-(l*a+u)))*r+a*(a+2*h)+d;else a=-c,o=-(r=Math.max(0,-(l*a+u)))*r+a*(a+2*h)+d;else a<=-s?o=-(r=Math.max(0,-(-l*c+u)))*r+(a=r>0?-c:Math.min(Math.max(-c,-h),c))*(a+2*h)+d:a<=s?(r=0,o=(a=Math.min(Math.max(-c,-h),c))*(a+2*h)+d):o=-(r=Math.max(0,-(l*c+u)))*r+(a=r>0?c:Math.min(Math.max(-c,-h),c))*(a+2*h)+d;else a=l>0?-c:c,o=-(r=Math.max(0,-(l*a+u)))*r+a*(a+2*h)+d;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(ii).multiplyScalar(a).add(ni),o}),intersectSphere:function(){var e=new qt;return function(t,n){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),r=e.dot(e)-i*i,a=t.radius*t.radius;if(r>a)return null;var o=Math.sqrt(a-r),s=i-o,c=i+o;return s<0&&c<0?null:s<0?this.at(c,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,a,o,s,c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),l>=0?(r=(e.min.y-h.y)*l,a=(e.max.y-h.y)*l):(r=(e.max.y-h.y)*l,a=(e.min.y-h.y)*l),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),u>=0?(o=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(o=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||o>i?null:((o>n||n!=n)&&(n=o),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:(ti=new qt,function(e){return null!==this.intersectBox(e,ti)}),intersectTriangle:function(){var e=new qt,t=new qt,n=new qt,i=new qt;return function(r,a,o,s,c){t.subVectors(a,r),n.subVectors(o,r),i.crossVectors(t,n);var l,u=this.direction.dot(i);if(u>0){if(s)return null;l=1}else{if(!(u<0))return null;l=-1,u=-u}e.subVectors(this.origin,r);var h=l*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var d=l*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>u)return null;var f=-l*e.dot(i);return f<0?null:this.at(f/u,c)}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(fi.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new qt),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new qt),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new qt),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(ai=new qt,oi=new qt,function(e,t){ai.subVectors(e,this.start),oi.subVectors(this.end,this.start);var n=oi.dot(oi),i=oi.dot(ai)/n;return t&&(i=jt.clamp(i,0,1)),i}),closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new qt),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(pi,{normal:(si=new qt,function(e,t,n,i){void 0===i&&(console.warn("THREE.Triangle: .normal() target is now required"),i=new qt),i.subVectors(n,t),si.subVectors(e,t),i.cross(si);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}),barycoordFromPoint:function(){var e=new qt,t=new qt,n=new qt;return function(i,r,a,o,s){e.subVectors(o,r),t.subVectors(a,r),n.subVectors(i,r);var c=e.dot(e),l=e.dot(t),u=e.dot(n),h=t.dot(t),d=t.dot(n),f=c*h-l*l;if(void 0===s&&(console.warn("THREE.Triangle: .barycoordFromPoint() target is now required"),s=new qt),0===f)return s.set(-2,-1,-1);var p=1/f,m=(h*u-l*d)*p,g=(c*d-l*u)*p;return s.set(1-m-g,g,m)}}(),containsPoint:function(){var e=new qt;return function(t,n,i,r){return pi.barycoordFromPoint(t,n,i,r,e),e.x>=0&&e.y>=0&&e.x+e.y<=1}}()}),Object.assign(pi.prototype,{set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new qt,t=new qt;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .midpoint() target is now required"),e=new qt),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return pi.normal(this.a,this.b,this.c,e)},plane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .plane() target is now required"),e=new qt),e.setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return pi.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return pi.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new hn,t=[new fi,new fi,new fi],n=new qt,i=new qt;return function(r,a){void 0===a&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),a=new qt);var o=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(r,n),!0===this.containsPoint(n))a.copy(n);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var s=0;s<t.length;s++){t[s].closestPointToPoint(n,!0,i);var c=n.distanceToSquared(i);c<o&&(o=c,a.copy(i))}}return a}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),mi.prototype=Object.assign(Object.create(Cn.prototype),{constructor:mi,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return Cn.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e,t,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,a=Object.keys(r);if(a.length>0){var o=r[a[0]];if(void 0!==o)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=o.length;e<t;e++)n=o[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}else{var s=i.morphTargets;if(void 0!==s&&s.length>0)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=s.length;e<t;e++)n=s[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}},raycast:function(){var e=new Xt,t=new di,n=new un,i=new qt,r=new qt,a=new qt,o=new qt,s=new qt,c=new qt,l=new Wt,u=new Wt,h=new Wt,d=new qt,f=new qt,p=new qt;function m(e,t,n,i,r,a,o){return pi.barycoordFromPoint(e,t,n,i,d),r.multiplyScalar(d.x),a.multiplyScalar(d.y),o.multiplyScalar(d.z),r.add(a).add(o),r.clone()}function g(e,t,n,i,r,a,o,s){if(null===(t.side===S?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,t.side!==M,s)))return null;p.copy(s),p.applyMatrix4(e.matrixWorld);var c=n.ray.origin.distanceTo(p);return c<n.near||c>n.far?null:{distance:c,point:p.clone(),object:e}}function v(e,t,n,o,s,c,d,p){i.fromBufferAttribute(o,c),r.fromBufferAttribute(o,d),a.fromBufferAttribute(o,p);var v=g(e,e.material,t,n,i,r,a,f);if(v){s&&(l.fromBufferAttribute(s,c),u.fromBufferAttribute(s,d),h.fromBufferAttribute(s,p),v.uv=m(f,i,r,a,l,u,h));var y=new Fn(c,d,p);pi.normal(i,r,a,y.normal),v.face=y,v.faceIndex=c}return v}return function(d,p){var y,x=this.geometry,_=this.material,b=this.matrixWorld;if(void 0!==_&&(null===x.boundingSphere&&x.computeBoundingSphere(),n.copy(x.boundingSphere),n.applyMatrix4(b),!1!==d.ray.intersectsSphere(n)&&(e.getInverse(b),t.copy(d.ray).applyMatrix4(e),null===x.boundingBox||!1!==t.intersectsBox(x.boundingBox))))if(x.isBufferGeometry){var w,E,T,S,M,A=x.index,L=x.attributes.position,C=x.attributes.uv;if(null!==A)for(S=0,M=A.count;S<M;S+=3)w=A.getX(S),E=A.getX(S+1),T=A.getX(S+2),(y=v(this,d,t,L,C,w,E,T))&&(y.faceIndex=Math.floor(S/3),p.push(y));else if(void 0!==L)for(S=0,M=L.count;S<M;S+=3)(y=v(this,d,t,L,C,w=S,E=S+1,T=S+2))&&(y.index=w,p.push(y))}else if(x.isGeometry){var P,R,F,I,N=Array.isArray(_),O=x.vertices,U=x.faces,D=x.faceVertexUvs[0];D.length>0&&(I=D);for(var z=0,k=U.length;z<k;z++){var B=U[z],G=N?_[B.materialIndex]:_;if(void 0!==G){if(P=O[B.a],R=O[B.b],F=O[B.c],!0===G.morphTargets){var H=x.morphTargets,V=this.morphTargetInfluences;i.set(0,0,0),r.set(0,0,0),a.set(0,0,0);for(var j=0,W=H.length;j<W;j++){var X=V[j];if(0!==X){var Y=H[j].vertices;i.addScaledVector(o.subVectors(Y[B.a],P),X),r.addScaledVector(s.subVectors(Y[B.b],R),X),a.addScaledVector(c.subVectors(Y[B.c],F),X)}}i.add(P),r.add(R),a.add(F),P=i,R=r,F=a}if(y=g(this,G,d,t,P,R,F,f)){if(I&&I[z]){var q=I[z];l.copy(q[0]),u.copy(q[1]),h.copy(q[2]),y.uv=m(f,P,R,F,l,u,h)}y.face=B,y.faceIndex=z,p.push(y)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),vi.prototype=Object.create(rn.prototype),vi.prototype.constructor=vi,vi.prototype.isCubeTexture=!0,Object.defineProperty(vi.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var yi=new rn,xi=new vi;function _i(){this.seq=[],this.map={}}var bi=[],wi=[],Ei=new Float32Array(16),Ti=new Float32Array(9);function Si(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,a=bi[r];if(void 0===a&&(a=new Float32Array(r),bi[r]=a),0!==t){i.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function Mi(e,t){var n=wi[t];void 0===n&&(n=new Int32Array(t),wi[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocTextureUnit();return n}function Ai(e,t){e.uniform1f(this.addr,t)}function Li(e,t){e.uniform1i(this.addr,t)}function Ci(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function Pi(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function Ri(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function Fi(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function Ii(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(Ti.set(t.elements),e.uniformMatrix3fv(this.addr,!1,Ti))}function Ni(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(Ei.set(t.elements),e.uniformMatrix4fv(this.addr,!1,Ei))}function Oi(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTexture2D(t||yi,i)}function Ui(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTextureCube(t||xi,i)}function Di(e,t){e.uniform2iv(this.addr,t)}function zi(e,t){e.uniform3iv(this.addr,t)}function ki(e,t){e.uniform4iv(this.addr,t)}function Bi(e,t){e.uniform1fv(this.addr,t)}function Gi(e,t){e.uniform1iv(this.addr,t)}function Hi(e,t){e.uniform2fv(this.addr,Si(t,this.size,2))}function Vi(e,t){e.uniform3fv(this.addr,Si(t,this.size,3))}function ji(e,t){e.uniform4fv(this.addr,Si(t,this.size,4))}function Wi(e,t){e.uniformMatrix2fv(this.addr,!1,Si(t,this.size,4))}function Xi(e,t){e.uniformMatrix3fv(this.addr,!1,Si(t,this.size,9))}function Yi(e,t){e.uniformMatrix4fv(this.addr,!1,Si(t,this.size,16))}function qi(e,t,n){var i=t.length,r=Mi(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTexture2D(t[a]||yi,r[a])}function Qi(e,t,n){var i=t.length,r=Mi(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTextureCube(t[a]||xi,r[a])}function Zi(e,t,n){this.id=e,this.addr=n,this.setValue=function(e){switch(e){case 5126:return Ai;case 35664:return Ci;case 35665:return Pi;case 35666:return Ri;case 35674:return Fi;case 35675:return Ii;case 35676:return Ni;case 35678:case 36198:return Oi;case 35680:return Ui;case 5124:case 35670:return Li;case 35667:case 35671:return Di;case 35668:case 35672:return zi;case 35669:case 35673:return ki}}(t.type)}function $i(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Bi;case 35664:return Hi;case 35665:return Vi;case 35666:return ji;case 35674:return Wi;case 35675:return Xi;case 35676:return Yi;case 35678:return qi;case 35680:return Qi;case 5124:case 35670:return Gi;case 35667:case 35671:return Di;case 35668:case 35672:return zi;case 35669:case 35673:return ki}}(t.type)}function Ji(e){this.id=e,_i.call(this)}Ji.prototype.setValue=function(e,t){for(var n=this.seq,i=0,r=n.length;i!==r;++i){var a=n[i];a.setValue(e,t[a.id])}};var Ki=/([\w\d_]+)(\])?(\[|\.)?/g;function er(e,t){e.seq.push(t),e.map[t.id]=t}function tr(e,t,n){var i=e.name,r=i.length;for(Ki.lastIndex=0;;){var a=Ki.exec(i),o=Ki.lastIndex,s=a[1],c="]"===a[2],l=a[3];if(c&&(s|=0),void 0===l||"["===l&&o+2===r){er(n,void 0===l?new Zi(s,e,t):new $i(s,e,t));break}var u=n.map[s];void 0===u&&er(n,u=new Ji(s)),n=u}}function nr(e,t,n){_i.call(this),this.renderer=n;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<i;++r){var a=e.getActiveUniform(t,r),o=a.name;tr(a,e.getUniformLocation(t,o),this)}}function ir(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),!1===e.getShaderParameter(i,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),i}nr.prototype.setValue=function(e,t,n){var i=this.map[t];void 0!==i&&i.setValue(e,n,this.renderer)},nr.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},nr.upload=function(e,t,n,i){for(var r=0,a=t.length;r!==a;++r){var o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}},nr.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var a=e[i];a.id in t&&n.push(a)}return n};var rr=0;function ar(e){switch(e){case Nt:return["Linear","( value )"];case Ot:return["sRGB","( value )"];case Dt:return["RGBE","( value )"];case kt:return["RGBM","( value, 7.0 )"];case Bt:return["RGBM","( value, 16.0 )"];case Gt:return["RGBD","( value, 256.0 )"];case Ut:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function or(e,t){var n=ar(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function sr(e){return""!==e}function cr(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function lr(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function ur(e){return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(e,t){var n=pn[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return ur(n)})}function hr(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,i){for(var r="",a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[ i \]/g,"[ "+a+" ]");return r})}function dr(e,t,n,i,r,a){var o=e.context,s=i.defines,c=r.vertexShader,l=r.fragmentShader,u="SHADOWMAP_TYPE_BASIC";a.shadowMapType===w?u="SHADOWMAP_TYPE_PCF":a.shadowMapType===E&&(u="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",d="ENVMAP_MODE_REFLECTION",f="ENVMAP_BLENDING_MULTIPLY";if(a.envMap){switch(i.envMap.mapping){case ve:case ye:h="ENVMAP_TYPE_CUBE";break;case we:case Ee:h="ENVMAP_TYPE_CUBE_UV";break;case xe:case _e:h="ENVMAP_TYPE_EQUIREC";break;case be:h="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case ye:case _e:d="ENVMAP_MODE_REFRACTION"}switch(i.combine){case ce:f="ENVMAP_BLENDING_MULTIPLY";break;case le:f="ENVMAP_BLENDING_MIX";break;case ue:f="ENVMAP_BLENDING_ADD"}}var p,m,g,v,y,x=e.gammaFactor>0?e.gammaFactor:1,_=function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(sr).join("\n")}(i.extensions,a,t),b=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(s),T=o.createProgram();i.isRawShaderMaterial?((p=[b].filter(sr).join("\n")).length>0&&(p+="\n"),(m=[_,b].filter(sr).join("\n")).length>0&&(m+="\n")):(p=["precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,b,a.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+x,"#define MAX_BONES "+a.maxBones,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+d:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.displacementMap&&a.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.flatShading?"#define FLAT_SHADED":"",a.skinning?"#define USE_SKINNING":"",a.useVertexTexture?"#define BONE_TEXTURE":"",a.morphTargets?"#define USE_MORPHTARGETS":"",a.morphNormals&&!1===a.flatShading?"#define USE_MORPHNORMALS":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+u:"",a.sizeAttenuation?"#define USE_SIZEATTENUATION":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(sr).join("\n"),m=[_,"precision "+a.precision+" float;","precision "+a.precision+" int;","#define SHADER_NAME "+r.name,b,a.alphaTest?"#define ALPHATEST "+a.alphaTest:"","#define GAMMA_FACTOR "+x,a.useFog&&a.fog?"#define USE_FOG":"",a.useFog&&a.fogExp?"#define FOG_EXP2":"",a.map?"#define USE_MAP":"",a.envMap?"#define USE_ENVMAP":"",a.envMap?"#define "+h:"",a.envMap?"#define "+d:"",a.envMap?"#define "+f:"",a.lightMap?"#define USE_LIGHTMAP":"",a.aoMap?"#define USE_AOMAP":"",a.emissiveMap?"#define USE_EMISSIVEMAP":"",a.bumpMap?"#define USE_BUMPMAP":"",a.normalMap?"#define USE_NORMALMAP":"",a.specularMap?"#define USE_SPECULARMAP":"",a.roughnessMap?"#define USE_ROUGHNESSMAP":"",a.metalnessMap?"#define USE_METALNESSMAP":"",a.alphaMap?"#define USE_ALPHAMAP":"",a.vertexColors?"#define USE_COLOR":"",a.gradientMap?"#define USE_GRADIENTMAP":"",a.flatShading?"#define FLAT_SHADED":"",a.doubleSided?"#define DOUBLE_SIDED":"",a.flipSided?"#define FLIP_SIDED":"",a.shadowMapEnabled?"#define USE_SHADOWMAP":"",a.shadowMapEnabled?"#define "+u:"",a.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",a.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",a.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",a.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",a.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",a.toneMapping!==he?"#define TONE_MAPPING":"",a.toneMapping!==he?pn.tonemapping_pars_fragment:"",a.toneMapping!==he?function(e,t){var n;switch(t){case de:n="Linear";break;case fe:n="Reinhard";break;case pe:n="Uncharted2";break;case me:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",a.toneMapping):"",a.dithering?"#define DITHERING":"",a.outputEncoding||a.mapEncoding||a.envMapEncoding||a.emissiveMapEncoding?pn.encodings_pars_fragment:"",a.mapEncoding?or("mapTexelToLinear",a.mapEncoding):"",a.envMapEncoding?or("envMapTexelToLinear",a.envMapEncoding):"",a.emissiveMapEncoding?or("emissiveMapTexelToLinear",a.emissiveMapEncoding):"",a.outputEncoding?(g="linearToOutputTexel",v=a.outputEncoding,y=ar(v),"vec4 "+g+"( vec4 value ) { return LinearTo"+y[0]+y[1]+"; }"):"",a.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(sr).join("\n")),c=lr(c=cr(c=ur(c),a),a),l=lr(l=cr(l=ur(l),a),a);var S=p+(c=hr(c)),M=m+(l=hr(l)),A=ir(o,o.VERTEX_SHADER,S),L=ir(o,o.FRAGMENT_SHADER,M);o.attachShader(T,A),o.attachShader(T,L),void 0!==i.index0AttributeName?o.bindAttribLocation(T,0,i.index0AttributeName):!0===a.morphTargets&&o.bindAttribLocation(T,0,"position"),o.linkProgram(T);var C,P,R=o.getProgramInfoLog(T).trim(),F=o.getShaderInfoLog(A).trim(),I=o.getShaderInfoLog(L).trim(),N=!0,O=!0;return!1===o.getProgramParameter(T,o.LINK_STATUS)?(N=!1,console.error("THREE.WebGLProgram: shader error: ",o.getError(),"gl.VALIDATE_STATUS",o.getProgramParameter(T,o.VALIDATE_STATUS),"gl.getProgramInfoLog",R,F,I)):""!==R?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",R):""!==F&&""!==I||(O=!1),O&&(this.diagnostics={runnable:N,material:i,programLog:R,vertexShader:{log:F,prefix:p},fragmentShader:{log:I,prefix:m}}),o.deleteShader(A),o.deleteShader(L),this.getUniforms=function(){return void 0===C&&(C=new nr(o,T,e)),C},this.getAttributes=function(){return void 0===P&&(P=function(e,t){for(var n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=0;r<i;r++){var a=e.getActiveAttrib(t,r).name;n[a]=e.getAttribLocation(t,a)}return n}(o,T)),P},this.destroy=function(){o.deleteProgram(T),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=rr++,this.code=n,this.usedTimes=1,this.program=T,this.vertexShader=A,this.fragmentShader=L,this}function fr(e,t,n){var i=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},a=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function o(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=Nt,n===Nt&&t&&(n=Ut),n}this.getParameters=function(t,i,a,s,c,l,u){var h=r[t.type],d=u.isSkinnedMesh?function(e){var t=e.skeleton.bones;if(n.floatVertexTextures)return 1024;var i=n.maxVertexUniforms,r=Math.floor((i-20)/4),a=Math.min(r,t.length);return a<t.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+t.length+" bones. This GPU supports "+a+"."),0):a}(u):0,f=n.precision;null!==t.precision&&(f=n.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",f,"instead.");var p=e.getRenderTarget();return{shaderID:h,precision:f,supportsVertexTextures:n.vertexTextures,outputEncoding:o(p?p.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:o(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:o(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===we||t.envMap.mapping===Ee),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:o(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:t.skinning&&d>0,maxBones:d,useVertexTexture:n.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:c,numClipIntersection:l,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&a.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===M,flipSided:t.side===S,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)i.push(r),i.push(t.defines[r]);for(var o=0;o<a.length;o++)i.push(n[a[o]]);return i.push(t.onBeforeCompile.toString()),i.push(e.gammaOutput),i.join()},this.acquireProgram=function(n,r,a,o){for(var s,c=0,l=i.length;c<l;c++){var u=i[c];if(u.code===o){++(s=u).usedTimes;break}}return void 0===s&&(s=new dr(e,t,o,n,r,a),i.push(s)),s},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=i.indexOf(e);i[t]=i[i.length-1],i.pop(),e.destroy()}},this.programs=i}function pr(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function mr(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function gr(){var e={};return{get:function(t,n){var i=t.id+","+n.id,r=e[i];return void 0===r&&(r=new function(){var e=[],t=0,n=[],i=[];return{opaque:n,transparent:i,init:function(){t=0,n.length=0,i.length=0},push:function(r,a,o,s,c){var l=e[t];void 0===l?(l={id:r.id,object:r,geometry:a,material:o,program:o.program,renderOrder:r.renderOrder,z:s,group:c},e[t]=l):(l.id=r.id,l.object=r,l.geometry=a,l.material=o,l.program=o.program,l.renderOrder=r.renderOrder,l.z=s,l.group=c),(!0===o.transparent?i:n).push(l),t++},sort:function(){n.length>1&&n.sort(pr),i.length>1&&i.sort(mr)}}},e[i]=r),r},dispose:function(){e={}}}}var vr,yr,xr,_r,br,wr,Er,Tr,Sr=0;function Mr(){var e=new function(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new qt,color:new vn,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Wt};break;case"SpotLight":n={position:new qt,direction:new qt,color:new vn,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Wt};break;case"PointLight":n={position:new qt,color:new vn,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Wt,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new qt,skyColor:new vn,groundColor:new vn};break;case"RectAreaLight":n={color:new vn,position:new qt,halfWidth:new qt,halfHeight:new qt}}return e[t.id]=n,n}}},t={id:Sr++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=new qt,i=new Xt,r=new Xt;return{setup:function(a,o,s){for(var c=0,l=0,u=0,h=0,d=0,f=0,p=0,m=0,g=s.matrixWorldInverse,v=0,y=a.length;v<y;v++){var x=a[v],_=x.color,b=x.intensity,w=x.distance,E=x.shadow&&x.shadow.map?x.shadow.map.texture:null;if(x.isAmbientLight)c+=_.r*b,l+=_.g*b,u+=_.b*b;else if(x.isDirectionalLight){if((S=e.get(x)).color.copy(x.color).multiplyScalar(x.intensity),S.direction.setFromMatrixPosition(x.matrixWorld),n.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(g),S.shadow=x.castShadow,x.castShadow){var T=x.shadow;S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize}t.directionalShadowMap[h]=E,t.directionalShadowMatrix[h]=x.shadow.matrix,t.directional[h]=S,h++}else if(x.isSpotLight)(S=e.get(x)).position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(g),S.color.copy(_).multiplyScalar(b),S.distance=w,S.direction.setFromMatrixPosition(x.matrixWorld),n.setFromMatrixPosition(x.target.matrixWorld),S.direction.sub(n),S.direction.transformDirection(g),S.coneCos=Math.cos(x.angle),S.penumbraCos=Math.cos(x.angle*(1-x.penumbra)),S.decay=0===x.distance?0:x.decay,S.shadow=x.castShadow,x.castShadow&&(T=x.shadow,S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize),t.spotShadowMap[f]=E,t.spotShadowMatrix[f]=x.shadow.matrix,t.spot[f]=S,f++;else if(x.isRectAreaLight)(S=e.get(x)).color.copy(_).multiplyScalar(b),S.position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(g),r.identity(),i.copy(x.matrixWorld),i.premultiply(g),r.extractRotation(i),S.halfWidth.set(.5*x.width,0,0),S.halfHeight.set(0,.5*x.height,0),S.halfWidth.applyMatrix4(r),S.halfHeight.applyMatrix4(r),t.rectArea[p]=S,p++;else if(x.isPointLight)(S=e.get(x)).position.setFromMatrixPosition(x.matrixWorld),S.position.applyMatrix4(g),S.color.copy(x.color).multiplyScalar(x.intensity),S.distance=x.distance,S.decay=0===x.distance?0:x.decay,S.shadow=x.castShadow,x.castShadow&&(T=x.shadow,S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize,S.shadowCameraNear=T.camera.near,S.shadowCameraFar=T.camera.far),t.pointShadowMap[d]=E,t.pointShadowMatrix[d]=x.shadow.matrix,t.point[d]=S,d++;else if(x.isHemisphereLight){var S;(S=e.get(x)).direction.setFromMatrixPosition(x.matrixWorld),S.direction.transformDirection(g),S.direction.normalize(),S.skyColor.copy(x.color).multiplyScalar(b),S.groundColor.copy(x.groundColor).multiplyScalar(b),t.hemi[m]=S,m++}}t.ambient[0]=c,t.ambient[1]=l,t.ambient[2]=u,t.directional.length=h,t.spot.length=f,t.rectArea.length=p,t.point.length=d,t.hemi.length=m,t.hash=t.id+","+h+","+d+","+f+","+p+","+m+","+o.length},state:t}}function Ar(){var e={};return{get:function(t,n){var i=t.id+","+n.id,r=e[i];return void 0===r&&(r=new function(){var e=new Mr,t=[],n=[],i=[];return{init:function(){t.length=0,n.length=0,i.length=0},state:{lightsArray:t,shadowsArray:n,spritesArray:i,lights:e},setupLights:function(i){e.setup(t,n,i)},pushLight:function(e){t.push(e)},pushShadow:function(e){n.push(e)},pushSprite:function(e){i.push(e)}}},e[i]=r),r},dispose:function(){e={}}}}function Lr(e){li.call(this),this.type="MeshDepthMaterial",this.depthPacking=Ht,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}function Cr(e){li.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new qt,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Pr(e,t,n){for(var i=new dn,r=new Xt,a=new Wt,o=new Wt(n,n),s=new qt,c=new qt,l=1,u=2,h=1+(l|u),d=new Array(h),f=new Array(h),p={},m={0:S,1:T,2:M},g=[new qt(1,0,0),new qt(-1,0,0),new qt(0,0,1),new qt(0,0,-1),new qt(0,1,0),new qt(0,-1,0)],v=[new qt(0,1,0),new qt(0,1,0),new qt(0,1,0),new qt(0,1,0),new qt(0,0,1),new qt(0,0,-1)],y=[new an,new an,new an,new an,new an,new an],x=0;x!==h;++x){var _=0!=(x&l),b=0!=(x&u),E=new Lr({depthPacking:Vt,morphTargets:_,skinning:b});d[x]=E;var A=new Cr({morphTargets:_,skinning:b});f[x]=A}var L=this;function C(t,n,i,r,a,o){var s=t.geometry,c=null,h=d,g=t.customDepthMaterial;if(i&&(h=f,g=t.customDistanceMaterial),g)c=g;else{var v=!1;n.morphTargets&&(s&&s.isBufferGeometry?v=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(v=s.morphTargets&&s.morphTargets.length>0)),t.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var y=t.isSkinnedMesh&&n.skinning,x=0;v&&(x|=l),y&&(x|=u),c=h[x]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var _=c.uuid,b=n.uuid,w=p[_];void 0===w&&(w={},p[_]=w);var E=w[b];void 0===E&&(E=c.clone(),w[b]=E),c=E}return c.visible=n.visible,c.wireframe=n.wireframe,c.side=null!=n.shadowSide?n.shadowSide:m[n.side],c.clipShadows=n.clipShadows,c.clippingPlanes=n.clippingPlanes,c.clipIntersection=n.clipIntersection,c.wireframeLinewidth=n.wireframeLinewidth,c.linewidth=n.linewidth,i&&c.isMeshDistanceMaterial&&(c.referencePosition.copy(r),c.nearDistance=a,c.farDistance=o),c}function P(n,r,a,o){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var s=t.update(n),l=n.material;if(Array.isArray(l))for(var u=s.groups,h=0,d=u.length;h<d;h++){var f=u[h],p=l[f.materialIndex];if(p&&p.visible){var m=C(n,p,o,c,a.near,a.far);e.renderBufferDirect(a,null,s,m,n,f)}}else if(l.visible){m=C(n,l,o,c,a.near,a.far);e.renderBufferDirect(a,null,s,m,n,null)}}for(var g=n.children,v=0,y=g.length;v<y;v++)P(g[v],r,a,o)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=w,this.render=function(t,n,l){if(!1!==L.enabled&&(!1!==L.autoUpdate||!1!==L.needsUpdate)&&0!==t.length){var u,h=e.context,d=e.state;d.disable(h.BLEND),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(var f=0,p=t.length;f<p;f++){var m=t[f],x=m.shadow,_=m&&m.isPointLight;if(void 0!==x){var b=x.camera;if(a.copy(x.mapSize),a.min(o),_){var w=a.x,E=a.y;y[0].set(2*w,E,w,E),y[1].set(0,E,w,E),y[2].set(3*w,E,w,E),y[3].set(w,E,w,E),y[4].set(3*w,0,w,E),y[5].set(w,0,w,E),a.x*=4,a.y*=2}if(null===x.map){var T={minFilter:Ae,magFilter:Ae,format:Ye};x.map=new on(a.x,a.y,T),x.map.texture.name=m.name+".shadowMap",b.updateProjectionMatrix()}x.isSpotLightShadow&&x.update(m);var S=x.map,M=x.matrix;c.setFromMatrixPosition(m.matrixWorld),b.position.copy(c),_?(u=6,M.makeTranslation(-c.x,-c.y,-c.z)):(u=1,s.setFromMatrixPosition(m.target.matrixWorld),b.lookAt(s),b.updateMatrixWorld(),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(b.projectionMatrix),M.multiply(b.matrixWorldInverse)),e.setRenderTarget(S),e.clear();for(var A=0;A<u;A++){if(_){s.copy(b.position),s.add(g[A]),b.up.copy(v[A]),b.lookAt(s),b.updateMatrixWorld();var C=y[A];d.viewport(C)}r.multiplyMatrices(b.projectionMatrix,b.matrixWorldInverse),i.setFromMatrix(r),P(n,l,b,_)}}else console.warn("THREE.WebGLShadowMap:",m,"has no shadow.")}L.needsUpdate=!1}}}function Rr(e,t,n,i,r,a,o,s,c){rn.call(this,e,t,n,i,r,a,o,s,c),this.needsUpdate=!0}function Fr(e,t,n,i,r){var a,o,s,c,l,u,h=new qt,d=new Yt,f=new qt;function p(){var e=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),n=new Uint16Array([0,1,2,0,2,3]);a=t.createBuffer(),o=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,a),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW),s=function(){var e=t.createProgram(),n=t.createShader(t.VERTEX_SHADER),i=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(n,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),t.shaderSource(i,["precision "+r.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),t.compileShader(n),t.compileShader(i),t.attachShader(e,n),t.attachShader(e,i),t.linkProgram(e),e}(),c={position:t.getAttribLocation(s,"position"),uv:t.getAttribLocation(s,"uv")},l={uvOffset:t.getUniformLocation(s,"uvOffset"),uvScale:t.getUniformLocation(s,"uvScale"),rotation:t.getUniformLocation(s,"rotation"),center:t.getUniformLocation(s,"center"),scale:t.getUniformLocation(s,"scale"),color:t.getUniformLocation(s,"color"),map:t.getUniformLocation(s,"map"),opacity:t.getUniformLocation(s,"opacity"),modelViewMatrix:t.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:t.getUniformLocation(s,"projectionMatrix"),fogType:t.getUniformLocation(s,"fogType"),fogDensity:t.getUniformLocation(s,"fogDensity"),fogNear:t.getUniformLocation(s,"fogNear"),fogFar:t.getUniformLocation(s,"fogFar"),fogColor:t.getUniformLocation(s,"fogColor"),fogDepth:t.getUniformLocation(s,"fogDepth"),alphaTest:t.getUniformLocation(s,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var h=i.getContext("2d");h.fillStyle="white",h.fillRect(0,0,8,8),u=new Rr(i)}function m(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(r,g,v){if(0!==r.length){void 0===s&&p(),n.useProgram(s),n.initAttributes(),n.enableAttribute(c.position),n.enableAttribute(c.uv),n.disableUnusedAttributes(),n.disable(t.CULL_FACE),n.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,a),t.vertexAttribPointer(c.position,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(c.uv,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.uniformMatrix4fv(l.projectionMatrix,!1,v.projectionMatrix.elements),n.activeTexture(t.TEXTURE0),t.uniform1i(l.map,0);var y=0,x=0,_=g.fog;_?(t.uniform3f(l.fogColor,_.color.r,_.color.g,_.color.b),_.isFog?(t.uniform1f(l.fogNear,_.near),t.uniform1f(l.fogFar,_.far),t.uniform1i(l.fogType,1),y=1,x=1):_.isFogExp2&&(t.uniform1f(l.fogDensity,_.density),t.uniform1i(l.fogType,2),y=2,x=2)):(t.uniform1i(l.fogType,0),y=0,x=0);for(var b=0,w=r.length;b<w;b++){(S=r[b]).modelViewMatrix.multiplyMatrices(v.matrixWorldInverse,S.matrixWorld),S.z=-S.modelViewMatrix.elements[14]}r.sort(m);var E=[],T=[];for(b=0,w=r.length;b<w;b++){var S,M=(S=r[b]).material;if(!1!==M.visible){S.onBeforeRender(e,g,v,void 0,M,void 0),t.uniform1f(l.alphaTest,M.alphaTest),t.uniformMatrix4fv(l.modelViewMatrix,!1,S.modelViewMatrix.elements),S.matrixWorld.decompose(h,d,f),E[0]=f.x,E[1]=f.y,T[0]=S.center.x-.5,T[1]=S.center.y-.5;var A=0;g.fog&&M.fog&&(A=x),y!==A&&(t.uniform1i(l.fogType,A),y=A),null!==M.map?(t.uniform2f(l.uvOffset,M.map.offset.x,M.map.offset.y),t.uniform2f(l.uvScale,M.map.repeat.x,M.map.repeat.y)):(t.uniform2f(l.uvOffset,0,0),t.uniform2f(l.uvScale,1,1)),t.uniform1f(l.opacity,M.opacity),t.uniform3f(l.color,M.color.r,M.color.g,M.color.b),t.uniform1f(l.rotation,M.rotation),t.uniform2fv(l.center,T),t.uniform2fv(l.scale,E),n.setBlending(M.blending,M.blendEquation,M.blendSrc,M.blendDst,M.blendEquationAlpha,M.blendSrcAlpha,M.blendDstAlpha,M.premultipliedAlpha),n.buffers.depth.setTest(M.depthTest),n.buffers.depth.setMask(M.depthWrite),n.buffers.color.setMask(M.colorWrite),i.setTexture2D(M.map||u,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),S.onAfterRender(e,g,v,void 0,M,void 0)}}n.enable(t.CULL_FACE),n.reset()}}}function Ir(e,t,n,i,r,a,o){var s,c="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,l={};function u(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=Math.floor(e.width*n),i.height=Math.floor(e.height*n),i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height,e),i}return e}function h(e){return jt.isPowerOfTwo(e.width)&&jt.isPowerOfTwo(e.height)}function d(e,t){return e.generateMipmaps&&t&&e.minFilter!==Ae&&e.minFilter!==Pe}function f(t,n,r,a){e.generateMipmap(t),i.get(n).__maxMipLevel=Math.log2(Math.max(r,a))}function p(t){return t===Ae||t===Le||t===Ce?e.NEAREST:e.LINEAR}function m(t){var n=t.target;n.removeEventListener("dispose",m),function(t){var n=i.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}i.remove(t)}(n),n.isVideoTexture&&delete l[n.id],o.memory.textures--}function g(t){var n=t.target;n.removeEventListener("dispose",g),function(t){var n=i.get(t),r=i.get(t.texture);if(!t)return;void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var a=0;a<6;a++)e.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[a]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(t.texture),i.remove(t)}(n),o.memory.textures--}function v(t,p){var g=i.get(t);if(t.isVideoTexture&&function(e){var t=e.id,n=o.render.frame;l[t]!==n&&(l[t]=n,e.update())}(t),t.version>0&&g.__version!==t.version){var v=t.image;if(void 0===v)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==v.complete)return void function(t,i,l){void 0===t.__webglInit&&(t.__webglInit=!0,i.addEventListener("dispose",m),t.__webglTexture=e.createTexture(),o.memory.textures++);n.activeTexture(e.TEXTURE0+l),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,i.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,i.unpackAlignment);var p=u(i.image,r.maxTextureSize);(function(e){return e.wrapS!==Se||e.wrapT!==Se||e.minFilter!==Ae&&e.minFilter!==Pe})(i)&&!1===h(p)&&(p=function(e){return e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof ImageBitmap?(void 0===s&&(s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),s.width=jt.floorPowerOfTwo(e.width),s.height=jt.floorPowerOfTwo(e.height),s.getContext("2d").drawImage(e,0,0,s.width,s.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+s.width+"x"+s.height,e),s):e}(p));var g=h(p),v=a.convert(i.format),x=a.convert(i.type);y(e.TEXTURE_2D,i,g);var _,b=i.mipmaps;if(i.isDepthTexture){var w=e.DEPTH_COMPONENT;if(i.type===ke){if(!c)throw new Error("Float Depth Texture only supported in WebGL2.0");w=e.DEPTH_COMPONENT32F}else c&&(w=e.DEPTH_COMPONENT16);i.format===$e&&w===e.DEPTH_COMPONENT&&i.type!==Ue&&i.type!==ze&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Ue,x=a.convert(i.type)),i.format===Je&&(w=e.DEPTH_STENCIL,i.type!==je&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=je,x=a.convert(i.type))),n.texImage2D(e.TEXTURE_2D,0,w,p.width,p.height,0,v,x,null)}else if(i.isDataTexture)if(b.length>0&&g){for(var E=0,T=b.length;E<T;E++)_=b[E],n.texImage2D(e.TEXTURE_2D,E,v,_.width,_.height,0,v,x,_.data);i.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(e.TEXTURE_2D,0,v,p.width,p.height,0,v,x,p.data),t.__maxMipLevel=0;else if(i.isCompressedTexture){for(var E=0,T=b.length;E<T;E++)_=b[E],i.format!==Ye&&i.format!==Xe?n.getCompressedTextureFormats().indexOf(v)>-1?n.compressedTexImage2D(e.TEXTURE_2D,E,v,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,E,v,_.width,_.height,0,v,x,_.data);t.__maxMipLevel=b.length-1}else if(b.length>0&&g){for(var E=0,T=b.length;E<T;E++)_=b[E],n.texImage2D(e.TEXTURE_2D,E,v,v,x,_);i.generateMipmaps=!1,t.__maxMipLevel=b.length-1}else n.texImage2D(e.TEXTURE_2D,0,v,v,x,p),t.__maxMipLevel=0;d(i,g)&&f(e.TEXTURE_2D,i,p.width,p.height);t.__version=i.version,i.onUpdate&&i.onUpdate(i)}(g,t,p);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+p),n.bindTexture(e.TEXTURE_2D,g.__webglTexture)}function y(n,o,s){var c;if(s?(e.texParameteri(n,e.TEXTURE_WRAP_S,a.convert(o.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,a.convert(o.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,a.convert(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,a.convert(o.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),o.wrapS===Se&&o.wrapT===Se||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",o),e.texParameteri(n,e.TEXTURE_MAG_FILTER,p(o.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,p(o.minFilter)),o.minFilter!==Ae&&o.minFilter!==Pe&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",o)),c=t.get("EXT_texture_filter_anisotropic")){if(o.type===ke&&null===t.get("OES_texture_float_linear"))return;if(o.type===Be&&null===t.get("OES_texture_half_float_linear"))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(e.texParameterf(n,c.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function x(t,r,o,s){var c=a.convert(r.texture.format),l=a.convert(r.texture.type);n.texImage2D(s,0,c,r.width,r.height,0,c,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,o,s,i.get(r.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function _(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function b(t){var n=i.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),v(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===$e)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0);else{if(n.depthTexture.format!==Je)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=e.createRenderbuffer(),_(n.__webglDepthbuffer[a],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),_(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}this.setTexture2D=v,this.setTextureCube=function(t,s){var c=i.get(t);if(6===t.image.length)if(t.version>0&&c.__version!==t.version){c.__image__webglTextureCube||(t.addEventListener("dispose",m),c.__image__webglTextureCube=e.createTexture(),o.memory.textures++),n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var l=t&&t.isCompressedTexture,p=t.image[0]&&t.image[0].isDataTexture,g=[],v=0;v<6;v++)g[v]=l||p?p?t.image[v].image:t.image[v]:u(t.image[v],r.maxCubemapSize);var x=g[0],_=h(x),b=a.convert(t.format),w=a.convert(t.type);for(y(e.TEXTURE_CUBE_MAP,t,_),v=0;v<6;v++)if(l)for(var E,T=g[v].mipmaps,S=0,M=T.length;S<M;S++)E=T[S],t.format!==Ye&&t.format!==Xe?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,S,b,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,S,b,E.width,E.height,0,b,w,E.data);else p?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,g[v].width,g[v].height,0,b,w,g[v].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,b,w,g[v]);c.__maxMipLevel=l?T.length-1:0,d(t,_)&&f(e.TEXTURE_CUBE_MAP,t,x.width,x.height),c.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+s),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,r){n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_CUBE_MAP,i.get(t).__webglTexture)},this.setupRenderTarget=function(t){var r=i.get(t),a=i.get(t.texture);t.addEventListener("dispose",g),a.__webglTexture=e.createTexture(),o.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,c=h(t);if(s){r.__webglFramebuffer=[];for(var l=0;l<6;l++)r.__webglFramebuffer[l]=e.createFramebuffer()}else r.__webglFramebuffer=e.createFramebuffer();if(s){for(n.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture),y(e.TEXTURE_CUBE_MAP,t.texture,c),l=0;l<6;l++)x(r.__webglFramebuffer[l],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+l);d(t.texture,c)&&f(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,a.__webglTexture),y(e.TEXTURE_2D,t.texture,c),x(r.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),d(t.texture,c)&&f(e.TEXTURE_2D,t.texture,t.width,t.height),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&b(t)},this.updateRenderTargetMipmap=function(t){var r=t.texture;if(d(r,h(t))){var a=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=i.get(r).__webglTexture;n.bindTexture(a,o),f(a,r,t.width,t.height),n.bindTexture(a,null)}}}function Nr(e,t){return{convert:function(n){var i;if(n===Te)return e.REPEAT;if(n===Se)return e.CLAMP_TO_EDGE;if(n===Me)return e.MIRRORED_REPEAT;if(n===Ae)return e.NEAREST;if(n===Le)return e.NEAREST_MIPMAP_NEAREST;if(n===Ce)return e.NEAREST_MIPMAP_LINEAR;if(n===Pe)return e.LINEAR;if(n===Re)return e.LINEAR_MIPMAP_NEAREST;if(n===Fe)return e.LINEAR_MIPMAP_LINEAR;if(n===Ie)return e.UNSIGNED_BYTE;if(n===Ge)return e.UNSIGNED_SHORT_4_4_4_4;if(n===He)return e.UNSIGNED_SHORT_5_5_5_1;if(n===Ve)return e.UNSIGNED_SHORT_5_6_5;if(n===Ne)return e.BYTE;if(n===Oe)return e.SHORT;if(n===Ue)return e.UNSIGNED_SHORT;if(n===De)return e.INT;if(n===ze)return e.UNSIGNED_INT;if(n===ke)return e.FLOAT;if(n===Be&&null!==(i=t.get("OES_texture_half_float")))return i.HALF_FLOAT_OES;if(n===We)return e.ALPHA;if(n===Xe)return e.RGB;if(n===Ye)return e.RGBA;if(n===qe)return e.LUMINANCE;if(n===Qe)return e.LUMINANCE_ALPHA;if(n===$e)return e.DEPTH_COMPONENT;if(n===Je)return e.DEPTH_STENCIL;if(n===z)return e.FUNC_ADD;if(n===k)return e.FUNC_SUBTRACT;if(n===B)return e.FUNC_REVERSE_SUBTRACT;if(n===V)return e.ZERO;if(n===j)return e.ONE;if(n===W)return e.SRC_COLOR;if(n===X)return e.ONE_MINUS_SRC_COLOR;if(n===Y)return e.SRC_ALPHA;if(n===q)return e.ONE_MINUS_SRC_ALPHA;if(n===Q)return e.DST_ALPHA;if(n===Z)return e.ONE_MINUS_DST_ALPHA;if(n===$)return e.DST_COLOR;if(n===J)return e.ONE_MINUS_DST_COLOR;if(n===K)return e.SRC_ALPHA_SATURATE;if((n===Ke||n===et||n===tt||n===nt)&&null!==(i=t.get("WEBGL_compressed_texture_s3tc"))){if(n===Ke)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===et)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===tt)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===nt)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((n===it||n===rt||n===at||n===ot)&&null!==(i=t.get("WEBGL_compressed_texture_pvrtc"))){if(n===it)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===rt)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===at)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===ot)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===st&&null!==(i=t.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((n===ct||n===lt||n===ut||n===ht||n===dt||n===ft||n===pt||n===mt||n===gt||n===vt||n===yt||n===xt||n===_t||n===bt)&&null!==(i=t.get("WEBGL_compressed_texture_astc")))return n;if((n===G||n===H)&&null!==(i=t.get("EXT_blend_minmax"))){if(n===G)return i.MIN_EXT;if(n===H)return i.MAX_EXT}return n===je&&null!==(i=t.get("WEBGL_depth_texture"))?i.UNSIGNED_INT_24_8_WEBGL:0}}}function Or(e,t,n,i){Pn.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Ur(e){Or.call(this),this.cameras=e||[]}function Dr(e){var t=this,n=null,i=null,r=null,a=new Xt,o=new Xt;"undefined"!=typeof window&&"VRFrameData"in window&&(i=new window.VRFrameData);var s=new Xt,c=new Or;c.bounds=new an(0,0,.5,1),c.layers.enable(1);var l=new Or;l.bounds=new an(.5,0,.5,1),l.layers.enable(2);var u,h,d=new Ur([c,l]);function f(){if(null!==n&&n.isPresenting){var i=n.getEyeParameters("left"),r=i.renderWidth,a=i.renderHeight;h=e.getPixelRatio(),u=e.getSize(),e.setDrawingBufferSize(2*r,a,1)}else t.enabled&&e.setDrawingBufferSize(u.width,u.height,h)}d.layers.enable(1),d.layers.enable(2),"undefined"!=typeof window&&window.addEventListener("vrdisplaypresentchange",f,!1),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return n},this.setDevice=function(e){void 0!==e&&(n=e)},this.setPoseTarget=function(e){void 0!==e&&(r=e)},this.getCamera=function(e){if(null===n)return e;n.depthNear=e.near,n.depthFar=e.far,n.getFrameData(i);var u=i.pose,h=null!==r?r:e;null!==u.position?h.position.fromArray(u.position):h.position.set(0,0,0),null!==u.orientation&&h.quaternion.fromArray(u.orientation);var f=n.stageParameters;if(f?a.fromArray(f.sittingToStandingTransform):a.makeTranslation(0,t.userHeight,0),h.position.applyMatrix4(a),h.updateMatrixWorld(),!1===n.isPresenting)return e;c.near=e.near,l.near=e.near,c.far=e.far,l.far=e.far,d.matrixWorld.copy(e.matrixWorld),d.matrixWorldInverse.copy(e.matrixWorldInverse),c.matrixWorldInverse.fromArray(i.leftViewMatrix),l.matrixWorldInverse.fromArray(i.rightViewMatrix),o.getInverse(a),c.matrixWorldInverse.multiply(o),l.matrixWorldInverse.multiply(o);var p=h.parent;null!==p&&(s.getInverse(p.matrixWorld),c.matrixWorldInverse.multiply(s),l.matrixWorldInverse.multiply(s)),c.matrixWorld.getInverse(c.matrixWorldInverse),l.matrixWorld.getInverse(l.matrixWorldInverse),c.projectionMatrix.fromArray(i.leftProjectionMatrix),l.projectionMatrix.fromArray(i.rightProjectionMatrix),d.projectionMatrix.copy(c.projectionMatrix);var m=n.getLayers();if(m.length){var g=m[0];null!==g.leftBounds&&4===g.leftBounds.length&&c.bounds.fromArray(g.leftBounds),null!==g.rightBounds&&4===g.rightBounds.length&&l.bounds.fromArray(g.rightBounds)}return d},this.getStandingMatrix=function(){return a},this.submitFrame=function(){n&&n.isPresenting&&n.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",f)}}function zr(e){console.log("THREE.WebGLRenderer",f);var t=void 0!==(e=e||{}).canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==e.context?e.context:null,i=void 0!==e.alpha&&e.alpha,r=void 0===e.depth||e.depth,a=void 0===e.stencil||e.stencil,o=void 0!==e.antialias&&e.antialias,s=void 0===e.premultipliedAlpha||e.premultipliedAlpha,c=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",u=null,h=null;this.domElement=t,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=de,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var d,p,y,x,_,b,w,E,T,A,L,P,R,z,k,B,G,H,V,j=this,W=!1,X=null,Y=null,q=-1,Q="",Z=null,$=null,J=new an,K=new an,ce=null,le=0,ue=t.width,he=t.height,fe=1,pe=new an(0,0,ue,he),me=new an(0,0,ue,he),ge=!1,ve=new dn,ye=new function(){var e=this,t=null,n=0,i=!1,r=!1,a=new hn,o=new Qt,s={value:null,needsUpdate:!1};function c(){s.value!==t&&(s.value=t,s.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function l(t,n,i,r){var c=null!==t?t.length:0,l=null;if(0!==c){if(l=s.value,!0!==r||null===l){var u=i+4*c,h=n.matrixWorldInverse;o.getNormalMatrix(h),(null===l||l.length<u)&&(l=new Float32Array(u));for(var d=0,f=i;d!==c;++d,f+=4)a.copy(t[d]).applyMatrix4(h,o),a.normal.toArray(l,f),l[f+3]=a.constant}s.value=l,s.needsUpdate=!0}return e.numPlanes=c,l}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(e,r,a){var o=0!==e.length||r||0!==n||i;return i=r,t=l(e,a,0),n=e.length,o},this.beginShadows=function(){r=!0,l(null)},this.endShadows=function(){r=!1,c()},this.setState=function(e,a,o,u,h,d){if(!i||null===e||0===e.length||r&&!o)r?l(null):c();else{var f=r?0:n,p=4*f,m=h.clippingState||null;s.value=m,m=l(e,u,p,d);for(var g=0;g!==p;++g)m[g]=t[g];h.clippingState=m,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=f}}},xe=!1,_e=!1,be=new Xt,we=new qt;function Ee(){return null===X?fe:1}try{var Te={alpha:i,depth:r,stencil:a,antialias:o,premultipliedAlpha:s,preserveDrawingBuffer:c,powerPreference:l};if(t.addEventListener("webglcontextlost",Le,!1),t.addEventListener("webglcontextrestored",Ce,!1),null===(d=n||t.getContext("webgl",Te)||t.getContext("experimental-webgl",Te)))throw null!==t.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===d.getShaderPrecisionFormat&&(d.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(e){console.error("THREE.WebGLRenderer: "+e.message)}function Se(){(p=new function(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=e.getExtension("WEBGL_compressed_texture_etc1");break;default:i=e.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=i,i}}}(d)).get("WEBGL_depth_texture"),p.get("OES_texture_float"),p.get("OES_texture_float_linear"),p.get("OES_texture_half_float"),p.get("OES_texture_half_float_linear"),p.get("OES_standard_derivatives"),p.get("OES_element_index_uint"),p.get("ANGLE_instanced_arrays"),V=new Nr(d,p),y=new function(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a=void 0!==n.precision?n.precision:"highp",o=r(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);var s=!0===n.logarithmicDepthBuffer,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_TEXTURE_SIZE),h=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),f=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),p=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),g=l>0,v=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:s,maxTextures:c,maxVertexTextures:l,maxTextureSize:u,maxCubemapSize:h,maxAttributes:d,maxVertexUniforms:f,maxVaryings:p,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v}}(d,p,e),(x=new function(e,t,n){var i=new function(){var t=!1,n=new an,i=null,r=new an(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,a,o,s){!0===s&&(t*=o,i*=o,a*=o),n.set(t,i,a,o),!1===r.equals(n)&&(e.clearColor(t,i,a,o),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},r=new function(){var t=!1,n=null,i=null,r=null;return{setTest:function(t){t?Y(e.DEPTH_TEST):q(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){if(t)switch(t){case ee:e.depthFunc(e.NEVER);break;case te:e.depthFunc(e.ALWAYS);break;case ne:e.depthFunc(e.LESS);break;case ie:e.depthFunc(e.LEQUAL);break;case re:e.depthFunc(e.EQUAL);break;case ae:e.depthFunc(e.GEQUAL);break;case oe:e.depthFunc(e.GREATER);break;case se:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},a=new function(){var t=!1,n=null,i=null,r=null,a=null,o=null,s=null,c=null,l=null;return{setTest:function(t){t?Y(e.STENCIL_TEST):q(e.STENCIL_TEST)},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,o){i===t&&r===n&&a===o||(e.stencilFunc(t,n,o),i=t,r=n,a=o)},setOp:function(t,n,i){o===t&&s===n&&c===i||(e.stencilOp(t,n,i),o=t,s=n,c=i)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,o=null,s=null,c=null,l=null}}},o=e.getParameter(e.MAX_VERTEX_ATTRIBS),s=new Uint8Array(o),c=new Uint8Array(o),l=new Uint8Array(o),u={},h=null,d=null,f=null,p=null,y=null,x=null,_=null,b=null,w=null,E=!1,T=null,A=null,L=null,C=null,P=null,R=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),z=!1,k=0,B=e.getParameter(e.VERSION);-1!==B.indexOf("WebGL")?(k=parseFloat(/^WebGL\ ([0-9])/.exec(B)[1]),z=k>=1):-1!==B.indexOf("OpenGL ES")&&(k=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(B)[1]),z=k>=2);var G=null,H={},V=new an,j=new an;function W(t,n,i){var r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var o=0;o<i;o++)e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r);return a}var X={};function Y(t){!0!==u[t]&&(e.enable(t),u[t]=!0)}function q(t){!1!==u[t]&&(e.disable(t),u[t]=!1)}function Q(t,i,r,a,o,s,c,l){if(t!==F?Y(e.BLEND):q(e.BLEND),t!==D){if(t!==f||l!==E)switch(t){case N:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case O:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case U:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:l?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}p=null,y=null,x=null,_=null,b=null,w=null}else o=o||i,s=s||r,c=c||a,i===p&&o===_||(e.blendEquationSeparate(n.convert(i),n.convert(o)),p=i,_=o),r===y&&a===x&&s===b&&c===w||(e.blendFuncSeparate(n.convert(r),n.convert(a),n.convert(s),n.convert(c)),y=r,x=a,b=s,w=c);f=t,E=l}function Z(t){T!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),T=t)}function $(t){t!==m?(Y(e.CULL_FACE),t!==A&&(t===g?e.cullFace(e.BACK):t===v?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):q(e.CULL_FACE),A=t}function J(t,n,i){t?(Y(e.POLYGON_OFFSET_FILL),C===n&&P===i||(e.polygonOffset(n,i),C=n,P=i)):q(e.POLYGON_OFFSET_FILL)}function K(t){void 0===t&&(t=e.TEXTURE0+R-1),G!==t&&(e.activeTexture(t),G=t)}return X[e.TEXTURE_2D]=W(e.TEXTURE_2D,e.TEXTURE_2D,1),X[e.TEXTURE_CUBE_MAP]=W(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),i.setClear(0,0,0,1),r.setClear(1),a.setClear(0),Y(e.DEPTH_TEST),r.setFunc(ie),Z(!1),$(g),Y(e.CULL_FACE),Y(e.BLEND),Q(I),{buffers:{color:i,depth:r,stencil:a},initAttributes:function(){for(var e=0,t=s.length;e<t;e++)s[e]=0},enableAttribute:function(n){s[n]=1,0===c[n]&&(e.enableVertexAttribArray(n),c[n]=1),0!==l[n]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),l[n]=0)},enableAttributeAndDivisor:function(n,i){s[n]=1,0===c[n]&&(e.enableVertexAttribArray(n),c[n]=1),l[n]!==i&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,i),l[n]=i)},disableUnusedAttributes:function(){for(var t=0,n=c.length;t!==n;++t)c[t]!==s[t]&&(e.disableVertexAttribArray(t),c[t]=0)},enable:Y,disable:q,getCompressedTextureFormats:function(){if(null===h&&(h=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)h.push(n[i]);return h},useProgram:function(t){return d!==t&&(e.useProgram(t),d=t,!0)},setBlending:Q,setMaterial:function(t,n){t.side===M?q(e.CULL_FACE):Y(e.CULL_FACE);var a=t.side===S;n&&(a=!a),Z(a),!0===t.transparent?Q(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):Q(F),r.setFunc(t.depthFunc),r.setTest(t.depthTest),r.setMask(t.depthWrite),i.setMask(t.colorWrite),J(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:Z,setCullFace:$,setLineWidth:function(t){t!==L&&(z&&e.lineWidth(t),L=t)},setPolygonOffset:J,setScissorTest:function(t){t?Y(e.SCISSOR_TEST):q(e.SCISSOR_TEST)},activeTexture:K,bindTexture:function(t,n){null===G&&K();var i=H[G];void 0===i&&(i={type:void 0,texture:void 0},H[G]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||X[t]),i.type=t,i.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===V.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),V.copy(t))},viewport:function(t){!1===j.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),j.copy(t))},reset:function(){for(var t=0;t<c.length;t++)1===c[t]&&(e.disableVertexAttribArray(t),c[t]=0);u={},h=null,G=null,H={},d=null,f=null,T=null,A=null,i.reset(),r.reset(),a.reset()}}}(d,p,V)).scissor(K.copy(me).multiplyScalar(fe)),x.viewport(J.copy(pe).multiplyScalar(fe)),_=new function(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,i,r){switch(r=r||1,t.calls++,i){case e.TRIANGLES:t.triangles+=r*(n/3);break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=r*(n-2);break;case e.LINES:t.lines+=r*(n/2);break;case e.LINE_STRIP:t.lines+=r*(n-1);break;case e.LINE_LOOP:t.lines+=r*n;break;case e.POINTS:t.points+=r*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",i)}}}}(d),b=new function(){var e=new WeakMap;return{get:function(t){var n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}},w=new Ir(d,p,x,b,y,V,_),E=new bn(d),T=new function(e,t,n){var i={},r={};function a(e){var o=e.target,s=i[o.id];for(var c in null!==s.index&&t.remove(s.index),s.attributes)t.remove(s.attributes[c]);o.removeEventListener("dispose",a),delete i[o.id];var l=r[o.id];l&&(t.remove(l),delete r[o.id]),(l=r[s.id])&&(t.remove(l),delete r[s.id]),n.memory.geometries--}return{get:function(e,t){var r=i[t.id];return r||(t.addEventListener("dispose",a),t.isBufferGeometry?r=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new Zn).setFromObject(e)),r=t._bufferGeometry),i[t.id]=r,n.memory.geometries++,r)},update:function(n){var i=n.index,r=n.attributes;for(var a in null!==i&&t.update(i,e.ELEMENT_ARRAY_BUFFER),r)t.update(r[a],e.ARRAY_BUFFER);var o=n.morphAttributes;for(var a in o)for(var s=o[a],c=0,l=s.length;c<l;c++)t.update(s[c],e.ARRAY_BUFFER)},getWireframeAttribute:function(n){var i=r[n.id];if(i)return i;var a,o=[],s=n.index,c=n.attributes;if(null!==s)for(var l=0,u=(a=s.array).length;l<u;l+=3){var h=a[l+0],d=a[l+1],f=a[l+2];o.push(h,d,d,f,f,h)}else for(l=0,u=(a=c.position.array).length/3-1;l<u;l+=3)h=l+0,d=l+1,f=l+2,o.push(h,d,d,f,f,h);return i=new(qn(o)>65535?jn:Hn)(o,1),t.update(i,e.ELEMENT_ARRAY_BUFFER),r[n.id]=i,i}}}(d,E,_),A=new function(e,t){var n={};return{update:function(i){var r=t.render.frame,a=i.geometry,o=e.get(i,a);return n[o.id]!==r&&(a.isGeometry&&o.updateFromObject(i),e.update(o),n[o.id]=r),o},dispose:function(){n={}}}}(T,_),k=new function(e){var t={},n=new Float32Array(8);return{update:function(i,r,a,o){var s=i.morphTargetInfluences,c=s.length,l=t[r.id];if(void 0===l){l=[];for(var u=0;u<c;u++)l[u]=[u,0];t[r.id]=l}var h=a.morphTargets&&r.morphAttributes.position,d=a.morphNormals&&r.morphAttributes.normal;for(u=0;u<c;u++)0!==(f=l[u])[1]&&(h&&r.removeAttribute("morphTarget"+u),d&&r.removeAttribute("morphNormal"+u));for(u=0;u<c;u++)(f=l[u])[0]=u,f[1]=s[u];for(l.sort(gi),u=0;u<8;u++){var f;if(f=l[u]){var p=f[0],m=f[1];if(m){h&&r.addAttribute("morphTarget"+u,h[p]),d&&r.addAttribute("morphNormal"+u,d[p]),n[u]=m;continue}}n[u]=0}o.getUniforms().setValue(e,"morphTargetInfluences",n)}}}(d),L=new fr(j,p,y),P=new gr,R=new Ar,z=new function(e,t,n,i){var r,a,o,s=new vn(0),c=0;function l(e,n){t.buffers.color.setClear(e.r,e.g,e.b,n,i)}return{getClearColor:function(){return s},setClearColor:function(e,t){s.set(e),l(s,c=void 0!==t?t:1)},getClearAlpha:function(){return c},setClearAlpha:function(e){l(s,c=e)},render:function(t,i,u,h){var d=i.background;null===d?l(s,c):d&&d.isColor&&(l(d,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),d&&d.isCubeTexture?(void 0===o&&((o=new mi(new Jn(1,1,1),new hi({uniforms:_n.cube.uniforms,vertexShader:_n.cube.vertexShader,fragmentShader:_n.cube.fragmentShader,side:S,depthTest:!0,depthWrite:!1,fog:!1}))).geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},n.update(o.geometry)),o.material.uniforms.tCube.value=d,t.push(o,o.geometry,o.material,0,null)):d&&d.isTexture&&(void 0===r&&(r=new Rn(-1,1,1,-1,0,1),a=new mi(new ei(2,2),new ui({depthTest:!1,depthWrite:!1,fog:!1})),n.update(a.geometry)),a.material.map=d,e.renderBufferDirect(r,null,a.geometry,a.material,a,null))}}}(j,x,T,s),B=new function(e,t,n){var i;this.setMode=function(e){i=e},this.render=function(t,r){e.drawArrays(i,t,r),n.update(r,i)},this.renderInstances=function(e,r,a){var o=t.get("ANGLE_instanced_arrays");if(null!==o){var s=e.attributes.position;s.isInterleavedBufferAttribute?(a=s.data.count,o.drawArraysInstancedANGLE(i,0,a,e.maxInstancedCount)):o.drawArraysInstancedANGLE(i,r,a,e.maxInstancedCount),n.update(a,i,e.maxInstancedCount)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}(d,p,_),G=new function(e,t,n){var i,r,a;this.setMode=function(e){i=e},this.setIndex=function(e){r=e.type,a=e.bytesPerElement},this.render=function(t,o){e.drawElements(i,o,r,t*a),n.update(o,i)},this.renderInstances=function(e,o,s){var c=t.get("ANGLE_instanced_arrays");null!==c?(c.drawElementsInstancedANGLE(i,s,r,o*a,e.maxInstancedCount),n.update(s,i,e.maxInstancedCount)):console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}(d,p,_),H=new Fr(j,d,x,w,y),_.programs=L.programs,j.context=d,j.capabilities=y,j.extensions=p,j.properties=b,j.renderLists=P,j.state=x,j.info=_}Se();var Me=new Dr(j);this.vr=Me;var Ae=new Pr(j,A,y.maxTextureSize);function Le(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),W=!0}function Ce(){console.log("THREE.WebGLRenderer: Context Restored."),W=!1,Se()}function Pe(e){var t=e.target;t.removeEventListener("dispose",Pe),function(e){Re(e),b.remove(e)}(t)}function Re(e){var t=b.get(e).program;e.program=void 0,void 0!==t&&L.releaseProgram(t)}this.shadowMap=Ae,this.getContext=function(){return d},this.getContextAttributes=function(){return d.getContextAttributes()},this.forceContextLoss=function(){var e=p.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=p.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return fe},this.setPixelRatio=function(e){void 0!==e&&(fe=e,this.setSize(ue,he,!1))},this.getSize=function(){return{width:ue,height:he}},this.setSize=function(e,n,i){var r=Me.getDevice();r&&r.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(ue=e,he=n,t.width=e*fe,t.height=n*fe,!1!==i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(){return{width:ue*fe,height:he*fe}},this.setDrawingBufferSize=function(e,n,i){ue=e,he=n,fe=i,t.width=e*i,t.height=n*i,this.setViewport(0,0,e,n)},this.getCurrentViewport=function(){return J},this.setViewport=function(e,t,n,i){pe.set(e,he-t-i,n,i),x.viewport(J.copy(pe).multiplyScalar(fe))},this.setScissor=function(e,t,n,i){me.set(e,he-t-i,n,i),x.scissor(K.copy(me).multiplyScalar(fe))},this.setScissorTest=function(e){x.setScissorTest(ge=e)},this.getClearColor=function(){return z.getClearColor()},this.setClearColor=function(){z.setClearColor.apply(z,arguments)},this.getClearAlpha=function(){return z.getClearAlpha()},this.setClearAlpha=function(){z.setClearAlpha.apply(z,arguments)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=d.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=d.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=d.STENCIL_BUFFER_BIT),d.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,i){this.setRenderTarget(e),this.clear(t,n,i)},this.dispose=function(){t.removeEventListener("webglcontextlost",Le,!1),t.removeEventListener("webglcontextrestored",Ce,!1),P.dispose(),R.dispose(),b.dispose(),A.dispose(),Me.dispose(),Ue()},this.renderBufferImmediate=function(e,t,n){x.initAttributes();var i=b.get(e);e.hasPositions&&!i.position&&(i.position=d.createBuffer()),e.hasNormals&&!i.normal&&(i.normal=d.createBuffer()),e.hasUvs&&!i.uv&&(i.uv=d.createBuffer()),e.hasColors&&!i.color&&(i.color=d.createBuffer());var r=t.getAttributes();if(e.hasPositions&&(d.bindBuffer(d.ARRAY_BUFFER,i.position),d.bufferData(d.ARRAY_BUFFER,e.positionArray,d.DYNAMIC_DRAW),x.enableAttribute(r.position),d.vertexAttribPointer(r.position,3,d.FLOAT,!1,0,0)),e.hasNormals){if(d.bindBuffer(d.ARRAY_BUFFER,i.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&!0===n.flatShading)for(var a=0,o=3*e.count;a<o;a+=9){var s=e.normalArray,c=(s[a+0]+s[a+3]+s[a+6])/3,l=(s[a+1]+s[a+4]+s[a+7])/3,u=(s[a+2]+s[a+5]+s[a+8])/3;s[a+0]=c,s[a+1]=l,s[a+2]=u,s[a+3]=c,s[a+4]=l,s[a+5]=u,s[a+6]=c,s[a+7]=l,s[a+8]=u}d.bufferData(d.ARRAY_BUFFER,e.normalArray,d.DYNAMIC_DRAW),x.enableAttribute(r.normal),d.vertexAttribPointer(r.normal,3,d.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(d.bindBuffer(d.ARRAY_BUFFER,i.uv),d.bufferData(d.ARRAY_BUFFER,e.uvArray,d.DYNAMIC_DRAW),x.enableAttribute(r.uv),d.vertexAttribPointer(r.uv,2,d.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==C&&(d.bindBuffer(d.ARRAY_BUFFER,i.color),d.bufferData(d.ARRAY_BUFFER,e.colorArray,d.DYNAMIC_DRAW),x.enableAttribute(r.color),d.vertexAttribPointer(r.color,3,d.FLOAT,!1,0,0)),x.disableUnusedAttributes(),d.drawArrays(d.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,i,r,a){var o=r.isMesh&&r.matrixWorld.determinant()<0;x.setMaterial(i,o);var s=je(e,t,i,r),c=n.id+"_"+s.id+"_"+(!0===i.wireframe),l=!1;c!==Q&&(Q=c,l=!0),r.morphTargetInfluences&&(k.update(r,n,i,s),l=!0);var u,h=n.index,f=n.attributes.position,m=1;!0===i.wireframe&&(h=T.getWireframeAttribute(n),m=2);var g=B;null!==h&&(u=E.get(h),(g=G).setIndex(u)),l&&(!function(e,t,n,i){if(n&&n.isInstancedBufferGeometry&&null===p.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===i&&(i=0);x.initAttributes();var r=n.attributes,a=t.getAttributes(),o=e.defaultAttributeValues;for(var s in a){var c=a[s];if(c>=0){var l=r[s];if(void 0!==l){var u=l.normalized,h=l.itemSize,f=E.get(l);if(void 0===f)continue;var m=f.buffer,g=f.type,v=f.bytesPerElement;if(l.isInterleavedBufferAttribute){var y=l.data,_=y.stride,b=l.offset;y&&y.isInstancedInterleavedBuffer?(x.enableAttributeAndDivisor(c,y.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=y.meshPerAttribute*y.count)):x.enableAttribute(c),d.bindBuffer(d.ARRAY_BUFFER,m),d.vertexAttribPointer(c,h,g,u,_*v,(i*_+b)*v)}else l.isInstancedBufferAttribute?(x.enableAttributeAndDivisor(c,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):x.enableAttribute(c),d.bindBuffer(d.ARRAY_BUFFER,m),d.vertexAttribPointer(c,h,g,u,0,i*h*v)}else if(void 0!==o){var w=o[s];if(void 0!==w)switch(w.length){case 2:d.vertexAttrib2fv(c,w);break;case 3:d.vertexAttrib3fv(c,w);break;case 4:d.vertexAttrib4fv(c,w);break;default:d.vertexAttrib1fv(c,w)}}}}x.disableUnusedAttributes()}(i,s,n),null!==h&&d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,u.buffer));var v=1/0;null!==h?v=h.count:void 0!==f&&(v=f.count);var y=n.drawRange.start*m,_=n.drawRange.count*m,b=null!==a?a.start*m:0,w=null!==a?a.count*m:1/0,S=Math.max(y,b),M=Math.min(v,y+_,b+w)-1,A=Math.max(0,M-S+1);if(0!==A){if(r.isMesh)if(!0===i.wireframe)x.setLineWidth(i.wireframeLinewidth*Ee()),g.setMode(d.LINES);else switch(r.drawMode){case Rt:g.setMode(d.TRIANGLES);break;case Ft:g.setMode(d.TRIANGLE_STRIP);break;case It:g.setMode(d.TRIANGLE_FAN)}else if(r.isLine){var L=i.linewidth;void 0===L&&(L=1),x.setLineWidth(L*Ee()),r.isLineSegments?g.setMode(d.LINES):r.isLineLoop?g.setMode(d.LINE_LOOP):g.setMode(d.LINE_STRIP)}else r.isPoints&&g.setMode(d.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&g.renderInstances(n,S,A):g.render(S,A)}},this.compile=function(e,t){(h=R.get(e,t)).init(),e.traverse(function(e){e.isLight&&(h.pushLight(e),e.castShadow&&h.pushShadow(e))}),h.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var n=0;n<t.material.length;n++)Ve(t.material[n],e.fog,t);else Ve(t.material,e.fog,t)})};var Fe,Ne=!1,Oe=null;function Ue(){Ne=!1}function De(){var e=Me.getDevice();e&&e.isPresenting?e.requestAnimationFrame(ze):window.requestAnimationFrame(ze)}function ze(e){!1!==Ne&&(Oe(e),De())}function Ge(e,t,n,i){for(var r=0,a=e.length;r<a;r++){var o=e[r],s=o.object,c=o.geometry,l=void 0===i?o.material:i,u=o.group;if(n.isArrayCamera){$=n;for(var h=n.cameras,d=0,f=h.length;d<f;d++){var p=h[d];if(s.layers.test(p.layers)){var m=p.bounds,g=m.x*ue,v=m.y*he,y=m.z*ue,_=m.w*he;x.viewport(J.set(g,v,y,_).multiplyScalar(fe)),He(s,t,p,c,l,u)}}}else $=null,He(s,t,n,c,l,u)}}function He(e,t,n,i,r,a){if(e.onBeforeRender(j,t,n,i,r,a),h=R.get(t,$||n),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var o=e.isMesh&&e.matrixWorld.determinant()<0;x.setMaterial(r,o);var s=je(n,t.fog,r,e);Q="",function(e,t,n){e.render(function(e){j.renderBufferImmediate(e,t,n)})}(e,s,r)}else j.renderBufferDirect(n,t.fog,i,r,e,a);e.onAfterRender(j,t,n,i,r,a),h=R.get(t,$||n)}function Ve(e,t,n){var i=b.get(e),r=h.state.lights,a=h.state.shadowsArray,o=L.getParameters(e,r.state,a,t,ye.numPlanes,ye.numIntersection,n),s=L.getProgramCode(e,o),c=i.program,l=!0;if(void 0===c)e.addEventListener("dispose",Pe);else if(c.code!==s)Re(e);else if(i.lightsHash!==r.state.hash)b.update(e,"lightsHash",r.state.hash),l=!1;else{if(void 0!==o.shaderID)return;l=!1}if(l){if(o.shaderID){var u=_n[o.shaderID];i.shader={name:e.type,uniforms:mn.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}}else i.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.onBeforeCompile(i.shader,j),c=L.acquireProgram(e,i.shader,o,s),i.program=c,e.program=c}var d=c.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var f=0;f<j.maxMorphTargets;f++)d["morphTarget"+f]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals){e.numSupportedMorphNormals=0;for(f=0;f<j.maxMorphNormals;f++)d["morphNormal"+f]>=0&&e.numSupportedMorphNormals++}var p=i.shader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=ye.numPlanes,i.numIntersection=ye.numIntersection,p.clippingPlanes=ye.uniform),i.fog=t,i.lightsHash=r.state.hash,e.lights&&(p.ambientLightColor.value=r.state.ambient,p.directionalLights.value=r.state.directional,p.spotLights.value=r.state.spot,p.rectAreaLights.value=r.state.rectArea,p.pointLights.value=r.state.point,p.hemisphereLights.value=r.state.hemi,p.directionalShadowMap.value=r.state.directionalShadowMap,p.directionalShadowMatrix.value=r.state.directionalShadowMatrix,p.spotShadowMap.value=r.state.spotShadowMap,p.spotShadowMatrix.value=r.state.spotShadowMatrix,p.pointShadowMap.value=r.state.pointShadowMap,p.pointShadowMatrix.value=r.state.pointShadowMatrix);var m=i.program.getUniforms(),g=nr.seqWithValue(m.seq,p);i.uniformsList=g}function je(e,t,n,i){le=0;var r=b.get(n),a=h.state.lights;if(xe&&(_e||e!==Z)){var o=e===Z&&n.id===q;ye.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,e,r,o)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==t?n.needsUpdate=!0:n.lights&&r.lightsHash!==a.state.hash?n.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===ye.numPlanes&&r.numIntersection===ye.numIntersection||(n.needsUpdate=!0)),n.needsUpdate&&(Ve(n,t,i),n.needsUpdate=!1);var s,c,l=!1,u=!1,f=!1,p=r.program,m=p.getUniforms(),g=r.shader.uniforms;if(x.useProgram(p.program)&&(l=!0,u=!0,f=!0),n.id!==q&&(q=n.id,u=!0),l||e!==Z){if(m.setValue(d,"projectionMatrix",e.projectionMatrix),y.logarithmicDepthBuffer&&m.setValue(d,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),Z!==($||e)&&(Z=$||e,u=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var v=m.map.cameraPosition;void 0!==v&&v.setValue(d,we.setFromMatrixPosition(e.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&m.setValue(d,"viewMatrix",e.matrixWorldInverse)}if(n.skinning){m.setOptional(d,i,"bindMatrix"),m.setOptional(d,i,"bindMatrixInverse");var _=i.skeleton;if(_){var w=_.bones;if(y.floatVertexTextures){if(void 0===_.boneTexture){var E=Math.sqrt(4*w.length);E=jt.ceilPowerOfTwo(E),E=Math.max(E,4);var T=new Float32Array(E*E*4);T.set(_.boneMatrices);var S=new cn(T,E,E,Ye,ke);S.needsUpdate=!0,_.boneMatrices=T,_.boneTexture=S,_.boneTextureSize=E}m.setValue(d,"boneTexture",_.boneTexture),m.setValue(d,"boneTextureSize",_.boneTextureSize)}else m.setOptional(d,_,"boneMatrices")}}return u&&(m.setValue(d,"toneMappingExposure",j.toneMappingExposure),m.setValue(d,"toneMappingWhitePoint",j.toneMappingWhitePoint),n.lights&&(c=f,(s=g).ambientLightColor.needsUpdate=c,s.directionalLights.needsUpdate=c,s.pointLights.needsUpdate=c,s.spotLights.needsUpdate=c,s.rectAreaLights.needsUpdate=c,s.hemisphereLights.needsUpdate=c),t&&n.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(g,t),n.isMeshBasicMaterial?We(g,n):n.isMeshLambertMaterial?(We(g,n),function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(g,n)):n.isMeshPhongMaterial?(We(g,n),n.isMeshToonMaterial?function(e,t){Xe(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(g,n):Xe(g,n)):n.isMeshStandardMaterial?(We(g,n),n.isMeshPhysicalMaterial?function(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,qe(e,t)}(g,n):qe(g,n)):n.isMeshDepthMaterial?(We(g,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(g,n)):n.isMeshDistanceMaterial?(We(g,n),function(e,t){t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias);e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(g,n)):n.isMeshNormalMaterial?(We(g,n),function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale);t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(g,n)):n.isLineBasicMaterial?(function(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}(g,n),n.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(g,n)):n.isPointsMaterial?function(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*fe,e.scale.value=.5*he,e.map.value=t.map,null!==t.map){if(!0===t.map.matrixAutoUpdate){var n=t.map.offset,i=t.map.repeat,r=t.map.rotation,a=t.map.center;t.map.matrix.setUvTransform(n.x,n.y,i.x,i.y,r,a.x,a.y)}e.uvTransform.value.copy(t.map.matrix)}}(g,n):n.isShadowMaterial&&(g.color.value=n.color,g.opacity.value=n.opacity),void 0!==g.ltc_1&&(g.ltc_1.value=xn.LTC_1),void 0!==g.ltc_2&&(g.ltc_2.value=xn.LTC_2),nr.upload(d,r.uniformsList,g,j)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(nr.upload(d,r.uniformsList,g,j),n.uniformsNeedUpdate=!1),m.setValue(d,"modelViewMatrix",i.modelViewMatrix),m.setValue(d,"normalMatrix",i.normalMatrix),m.setValue(d,"modelMatrix",i.matrixWorld),p}function We(e,t){var n;if(e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=b.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap),void 0!==n){if(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate){var i=n.offset,r=n.repeat,a=n.rotation,o=n.center;n.matrix.setUvTransform(i.x,i.y,r.x,r.y,a,o.x,o.y)}e.uvTransform.value.copy(n.matrix)}}function Xe(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function qe(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}this.animate=function(e){null!==(Oe=e)?Ne||(De(),Ne=!0):Ue()},this.render=function(e,t,n,i){if(t&&t.isCamera){if(!W){Q="",q=-1,Z=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Me.enabled&&(t=Me.getCamera(t)),(h=R.get(e,t)).init(),e.onBeforeRender(j,e,t,n),be.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ve.setFromMatrix(be),_e=this.localClippingEnabled,xe=ye.init(this.clippingPlanes,_e,t),(u=P.get(e,t)).init(),function e(t,n,i){if(!1===t.visible)return;var r=t.layers.test(n.layers);if(r)if(t.isLight)h.pushLight(t),t.castShadow&&h.pushShadow(t);else if(t.isSprite)t.frustumCulled&&!ve.intersectsSprite(t)||h.pushSprite(t);else if(t.isImmediateRenderObject)i&&we.setFromMatrixPosition(t.matrixWorld).applyMatrix4(be),u.push(t,null,t.material,we.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||ve.intersectsObject(t))){i&&we.setFromMatrixPosition(t.matrixWorld).applyMatrix4(be);var a=A.update(t),o=t.material;if(Array.isArray(o))for(var s=a.groups,c=0,l=s.length;c<l;c++){var d=s[c],f=o[d.materialIndex];f&&f.visible&&u.push(t,a,f,we.z,d)}else o.visible&&u.push(t,a,o,we.z,null)}var p=t.children;for(var c=0,l=p.length;c<l;c++)e(p[c],n,i)}(e,t,j.sortObjects),!0===j.sortObjects&&u.sort(),xe&&ye.beginShadows();var r=h.state.shadowsArray;Ae.render(r,e,t),h.setupLights(t),xe&&ye.endShadows(),this.info.autoReset&&this.info.reset(),void 0===n&&(n=null),this.setRenderTarget(n),z.render(u,e,t,i);var a=u.opaque,o=u.transparent;if(e.overrideMaterial){var s=e.overrideMaterial;a.length&&Ge(a,e,t,s),o.length&&Ge(o,e,t,s)}else a.length&&Ge(a,e,t),o.length&&Ge(o,e,t);var c=h.state.spritesArray;H.render(c,e,t),n&&w.updateRenderTargetMipmap(n),x.buffers.depth.setTest(!0),x.buffers.depth.setMask(!0),x.buffers.color.setMask(!0),x.setPolygonOffset(!1),e.onAfterRender(j,e,t),Me.enabled&&Me.submitFrame(),u=null,h=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=le;return e>=y.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+y.maxTextures),le+=1,e},this.setTexture2D=(Fe=!1,function(e,t){e&&e.isWebGLRenderTarget&&(Fe||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Fe=!0),e=e.texture),w.setTexture2D(e,t)}),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),w.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?w.setTextureCube(t,n):w.setTextureCubeDynamic(t,n)}}(),this.getRenderTarget=function(){return X},this.setRenderTarget=function(e){X=e,e&&void 0===b.get(e).__webglFramebuffer&&w.setupRenderTarget(e);var t=null,n=!1;if(e){var i=b.get(e).__webglFramebuffer;e.isWebGLRenderTargetCube?(t=i[e.activeCubeFace],n=!0):t=i,J.copy(e.viewport),K.copy(e.scissor),ce=e.scissorTest}else J.copy(pe).multiplyScalar(fe),K.copy(me).multiplyScalar(fe),ce=ge;if(Y!==t&&(d.bindFramebuffer(d.FRAMEBUFFER,t),Y=t),x.viewport(J),x.scissor(K),x.setScissorTest(ce),n){var r=b.get(e.texture);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,i,r,a){if(e&&e.isWebGLRenderTarget){var o=b.get(e).__webglFramebuffer;if(o){var s=!1;o!==Y&&(d.bindFramebuffer(d.FRAMEBUFFER,o),s=!0);try{var c=e.texture,l=c.format,u=c.type;if(l!==Ye&&V.convert(l)!==d.getParameter(d.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(u===Ie||V.convert(u)===d.getParameter(d.IMPLEMENTATION_COLOR_READ_TYPE)||u===ke&&(p.get("OES_texture_float")||p.get("WEBGL_color_buffer_float"))||u===Be&&p.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");d.checkFramebufferStatus(d.FRAMEBUFFER)===d.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&d.readPixels(t,n,i,r,V.convert(l),V.convert(u),a):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{s&&d.bindFramebuffer(d.FRAMEBUFFER,Y)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,n){var i=t.image.width,r=t.image.height,a=V.convert(t.format);this.setTexture2D(t,0),d.copyTexImage2D(d.TEXTURE_2D,n||0,a,e.x,e.y,i,r,0)},this.copyTextureToTexture=function(e,t,n,i){var r=t.image.width,a=t.image.height,o=V.convert(n.format),s=V.convert(n.type),c=t.isDataTexture?t.image.data:t.image;this.setTexture2D(n,0),d.texSubImage2D(d.TEXTURE_2D,i||0,e.x,e.y,r,a,o,s,c)}}function kr(e,t){this.name="",this.color=new vn(e),this.density=void 0!==t?t:25e-5}function Br(e,t,n){this.name="",this.color=new vn(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}function Gr(){Cn.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Hr(e){li.call(this),this.type="SpriteMaterial",this.color=new vn(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}function Vr(e){Cn.call(this),this.type="Sprite",this.material=void 0!==e?e:new Hr,this.center=new Wt(.5,.5)}function jr(){Cn.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Wr(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Xt)}}function Xr(){Cn.call(this),this.type="Bone"}function Yr(e,t){mi.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Xt,this.bindMatrixInverse=new Xt;var n=new Wr(this.initBones());this.bind(n,this.matrixWorld),this.normalizeSkinWeights()}function qr(e){li.call(this),this.type="LineBasicMaterial",this.color=new vn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}function Qr(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Zr(e,t);Cn.call(this),this.type="Line",this.geometry=void 0!==e?e:new Zn,this.material=void 0!==t?t:new qr({color:16777215*Math.random()})}function Zr(e,t){Qr.call(this,e,t),this.type="LineSegments"}function $r(e,t){Qr.call(this,e,t),this.type="LineLoop"}function Jr(e){li.call(this),this.type="PointsMaterial",this.color=new vn(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function Kr(e,t){Cn.call(this),this.type="Points",this.geometry=void 0!==e?e:new Zn,this.material=void 0!==t?t:new Jr({color:16777215*Math.random()})}function ea(){Cn.call(this),this.type="Group"}function ta(e,t,n,i,r,a,o,s,c){rn.call(this,e,t,n,i,r,a,o,s,c),this.generateMipmaps=!1}function na(e,t,n,i,r,a,o,s,c,l,u,h){rn.call(this,null,a,o,s,c,l,i,r,u,h),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}function ia(e,t,n,i,r,a,o,s,c,l){if((l=void 0!==l?l:$e)!==$e&&l!==Je)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===$e&&(n=Ue),void 0===n&&l===Je&&(n=je),rn.call(this,null,i,r,a,o,s,l,n,c),this.image={width:e,height:t},this.magFilter=void 0!==o?o:Ae,this.minFilter=void 0!==s?s:Ae,this.flipY=!1,this.generateMipmaps=!1}function ra(e){Zn.call(this),this.type="WireframeGeometry";var t,n,i,r,a,o,s,c,l,u,h=[],d=[0,0],f={},p=["a","b","c"];if(e&&e.isGeometry){var m=e.faces;for(t=0,i=m.length;t<i;t++){var g=m[t];for(n=0;n<3;n++)s=g[p[n]],c=g[p[(n+1)%3]],d[0]=Math.min(s,c),d[1]=Math.max(s,c),void 0===f[l=d[0]+","+d[1]]&&(f[l]={index1:d[0],index2:d[1]})}for(l in f)o=f[l],u=e.vertices[o.index1],h.push(u.x,u.y,u.z),u=e.vertices[o.index2],h.push(u.x,u.y,u.z)}else if(e&&e.isBufferGeometry){var v,y,x,_,b,w,E;if(u=new qt,null!==e.index){for(v=e.attributes.position,y=e.index,0===(x=e.groups).length&&(x=[{start:0,count:y.count,materialIndex:0}]),r=0,a=x.length;r<a;++r)for(t=b=(_=x[r]).start,i=b+_.count;t<i;t+=3)for(n=0;n<3;n++)s=y.getX(t+n),c=y.getX(t+(n+1)%3),d[0]=Math.min(s,c),d[1]=Math.max(s,c),void 0===f[l=d[0]+","+d[1]]&&(f[l]={index1:d[0],index2:d[1]});for(l in f)o=f[l],u.fromBufferAttribute(v,o.index1),h.push(u.x,u.y,u.z),u.fromBufferAttribute(v,o.index2),h.push(u.x,u.y,u.z)}else for(t=0,i=(v=e.attributes.position).count/3;t<i;t++)for(n=0;n<3;n++)w=3*t+n,u.fromBufferAttribute(v,w),h.push(u.x,u.y,u.z),E=3*t+(n+1)%3,u.fromBufferAttribute(v,E),h.push(u.x,u.y,u.z)}this.addAttribute("position",new Wn(h,3))}function aa(e,t,n){Un.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new oa(e,t,n)),this.mergeVertices()}function oa(e,t,n){Zn.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i,r,a=[],o=[],s=[],c=[],l=new qt,u=new qt,h=new qt,d=new qt,f=new qt,p=t+1;for(i=0;i<=n;i++){var m=i/n;for(r=0;r<=t;r++){var g=r/t;u=e(g,m,u),o.push(u.x,u.y,u.z),g-1e-5>=0?(h=e(g-1e-5,m,h),d.subVectors(u,h)):(h=e(g+1e-5,m,h),d.subVectors(h,u)),m-1e-5>=0?(h=e(g,m-1e-5,h),f.subVectors(u,h)):(h=e(g,m+1e-5,h),f.subVectors(h,u)),l.crossVectors(d,f).normalize(),s.push(l.x,l.y,l.z),c.push(g,m)}}for(i=0;i<n;i++)for(r=0;r<t;r++){var v=i*p+r,y=i*p+r+1,x=(i+1)*p+r+1,_=(i+1)*p+r;a.push(v,y,_),a.push(y,x,_)}this.setIndex(a),this.addAttribute("position",new Wn(o,3)),this.addAttribute("normal",new Wn(s,3)),this.addAttribute("uv",new Wn(c,2))}function sa(e,t,n,i){Un.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},this.fromBufferGeometry(new ca(e,t,n,i)),this.mergeVertices()}function ca(e,t,n,i){Zn.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;var r=[],a=[];function o(e,t,n,i){var r,a,o=Math.pow(2,i),c=[];for(r=0;r<=o;r++){c[r]=[];var l=e.clone().lerp(n,r/o),u=t.clone().lerp(n,r/o),h=o-r;for(a=0;a<=h;a++)c[r][a]=0===a&&r===o?l:l.clone().lerp(u,a/h)}for(r=0;r<o;r++)for(a=0;a<2*(o-r)-1;a++){var d=Math.floor(a/2);a%2==0?(s(c[r][d+1]),s(c[r+1][d]),s(c[r][d])):(s(c[r][d+1]),s(c[r+1][d+1]),s(c[r+1][d]))}}function s(e){r.push(e.x,e.y,e.z)}function c(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function l(e,t,n,i){i<0&&1===e.x&&(a[t]=e.x-1),0===n.x&&0===n.z&&(a[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new qt,i=new qt,r=new qt,a=0;a<t.length;a+=3)c(t[a+0],n),c(t[a+1],i),c(t[a+2],r),o(n,i,r,e)}(i=i||0),function(e){for(var t=new qt,n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){for(var e=new qt,t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];var n=u(e)/2/Math.PI+.5,i=(o=e,Math.atan2(-o.y,Math.sqrt(o.x*o.x+o.z*o.z))/Math.PI+.5);a.push(n,1-i)}var o;(function(){for(var e=new qt,t=new qt,n=new qt,i=new qt,o=new Wt,s=new Wt,c=new Wt,h=0,d=0;h<r.length;h+=9,d+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),o.set(a[d+0],a[d+1]),s.set(a[d+2],a[d+3]),c.set(a[d+4],a[d+5]),i.copy(e).add(t).add(n).divideScalar(3);var f=u(i);l(o,d+0,e,f),l(s,d+2,t,f),l(c,d+4,n,f)}})(),function(){for(var e=0;e<a.length;e+=6){var t=a[e+0],n=a[e+2],i=a[e+4],r=Math.max(t,n,i),o=Math.min(t,n,i);r>.9&&o<.1&&(t<.2&&(a[e+0]+=1),n<.2&&(a[e+2]+=1),i<.2&&(a[e+4]+=1))}}()}(),this.addAttribute("position",new Wn(r,3)),this.addAttribute("normal",new Wn(r.slice(),3)),this.addAttribute("uv",new Wn(a,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function la(e,t){Un.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ua(e,t)),this.mergeVertices()}function ua(e,t){ca.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ha(e,t){Un.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new da(e,t)),this.mergeVertices()}function da(e,t){ca.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function fa(e,t){Un.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new pa(e,t)),this.mergeVertices()}function pa(e,t){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];ca.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function ma(e,t){Un.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new ga(e,t)),this.mergeVertices()}function ga(e,t){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];ca.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function va(e,t,n,i,r,a){Un.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},void 0!==a&&console.warn("THREE.TubeGeometry: taper has been removed.");var o=new ya(e,t,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function ya(e,t,n,i,r){Zn.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r},t=t||64,n=n||1,i=i||8,r=r||!1;var a=e.computeFrenetFrames(t,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;var o,s,c=new qt,l=new qt,u=new Wt,h=new qt,d=[],f=[],p=[],m=[];function g(r){h=e.getPointAt(r/t,h);var o=a.normals[r],u=a.binormals[r];for(s=0;s<=i;s++){var p=s/i*Math.PI*2,m=Math.sin(p),g=-Math.cos(p);l.x=g*o.x+m*u.x,l.y=g*o.y+m*u.y,l.z=g*o.z+m*u.z,l.normalize(),f.push(l.x,l.y,l.z),c.x=h.x+n*l.x,c.y=h.y+n*l.y,c.z=h.z+n*l.z,d.push(c.x,c.y,c.z)}}!function(){for(o=0;o<t;o++)g(o);g(!1===r?t:0),function(){for(o=0;o<=t;o++)for(s=0;s<=i;s++)u.x=o/t,u.y=s/i,p.push(u.x,u.y)}(),function(){for(s=1;s<=t;s++)for(o=1;o<=i;o++){var e=(i+1)*(s-1)+(o-1),n=(i+1)*s+(o-1),r=(i+1)*s+o,a=(i+1)*(s-1)+o;m.push(e,n,a),m.push(n,r,a)}}()}(),this.setIndex(m),this.addAttribute("position",new Wn(d,3)),this.addAttribute("normal",new Wn(f,3)),this.addAttribute("uv",new Wn(p,2))}function xa(e,t,n,i,r,a,o){Un.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},void 0!==o&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new _a(e,t,n,i,r,a)),this.mergeVertices()}function _a(e,t,n,i,r,a){Zn.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:a},e=e||1,t=t||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;var o,s,c=[],l=[],u=[],h=[],d=new qt,f=new qt,p=new qt,m=new qt,g=new qt,v=new qt,y=new qt;for(o=0;o<=n;++o){var x=o/n*r*Math.PI*2;for(A(x,r,a,e,p),A(x+.01,r,a,e,m),v.subVectors(m,p),y.addVectors(m,p),g.crossVectors(v,y),y.crossVectors(g,v),g.normalize(),y.normalize(),s=0;s<=i;++s){var _=s/i*Math.PI*2,b=-t*Math.cos(_),w=t*Math.sin(_);d.x=p.x+(b*y.x+w*g.x),d.y=p.y+(b*y.y+w*g.y),d.z=p.z+(b*y.z+w*g.z),l.push(d.x,d.y,d.z),f.subVectors(d,p).normalize(),u.push(f.x,f.y,f.z),h.push(o/n),h.push(s/i)}}for(s=1;s<=n;s++)for(o=1;o<=i;o++){var E=(i+1)*(s-1)+(o-1),T=(i+1)*s+(o-1),S=(i+1)*s+o,M=(i+1)*(s-1)+o;c.push(E,T,M),c.push(T,S,M)}function A(e,t,n,i,r){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,c=Math.cos(s);r.x=i*(2+c)*.5*a,r.y=i*(2+c)*o*.5,r.z=i*Math.sin(s)*.5}this.setIndex(c),this.addAttribute("position",new Wn(l,3)),this.addAttribute("normal",new Wn(u,3)),this.addAttribute("uv",new Wn(h,2))}function ba(e,t,n,i,r){Un.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new wa(e,t,n,i,r)),this.mergeVertices()}function wa(e,t,n,i,r){Zn.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},e=e||1,t=t||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var a,o,s=[],c=[],l=[],u=[],h=new qt,d=new qt,f=new qt;for(a=0;a<=n;a++)for(o=0;o<=i;o++){var p=o/i*r,m=a/n*Math.PI*2;d.x=(e+t*Math.cos(m))*Math.cos(p),d.y=(e+t*Math.cos(m))*Math.sin(p),d.z=t*Math.sin(m),c.push(d.x,d.y,d.z),h.x=e*Math.cos(p),h.y=e*Math.sin(p),f.subVectors(d,h).normalize(),l.push(f.x,f.y,f.z),u.push(o/i),u.push(a/n)}for(a=1;a<=n;a++)for(o=1;o<=i;o++){var g=(i+1)*a+o-1,v=(i+1)*(a-1)+o-1,y=(i+1)*(a-1)+o,x=(i+1)*a+o;s.push(g,v,x),s.push(v,y,x)}this.setIndex(s),this.addAttribute("position",new Wn(c,3)),this.addAttribute("normal",new Wn(l,3)),this.addAttribute("uv",new Wn(u,2))}Lr.prototype=Object.create(li.prototype),Lr.prototype.constructor=Lr,Lr.prototype.isMeshDepthMaterial=!0,Lr.prototype.copy=function(e){return li.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},Cr.prototype=Object.create(li.prototype),Cr.prototype.constructor=Cr,Cr.prototype.isMeshDistanceMaterial=!0,Cr.prototype.copy=function(e){return li.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},Rr.prototype=Object.create(rn.prototype),Rr.prototype.constructor=Rr,Or.prototype=Object.assign(Object.create(Pn.prototype),{constructor:Or,isPerspectiveCamera:!0,copy:function(e,t){return Pn.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*jt.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*jt.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*jt.RAD2DEG*Math.atan(Math.tan(.5*jt.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,a){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*jt.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,t-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var c=this.filmOffset;0!==c&&(r+=e*c/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far)},toJSON:function(e){var t=Cn.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Ur.prototype=Object.assign(Object.create(Or.prototype),{constructor:Ur,isArrayCamera:!0}),kr.prototype.isFogExp2=!0,kr.prototype.clone=function(){return new kr(this.color.getHex(),this.density)},kr.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Br.prototype.isFog=!0,Br.prototype.clone=function(){return new Br(this.color.getHex(),this.near,this.far)},Br.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Gr.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Gr,copy:function(e,t){return Cn.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=Cn.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Hr.prototype=Object.create(li.prototype),Hr.prototype.constructor=Hr,Hr.prototype.isSpriteMaterial=!0,Hr.prototype.copy=function(e){return li.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},Vr.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Vr,isSprite:!0,raycast:(vr=new qt,yr=new qt,xr=new qt,function(e,t){yr.setFromMatrixPosition(this.matrixWorld),e.ray.closestPointToPoint(yr,vr),xr.setFromMatrixScale(this.matrixWorld);var n=xr.x*xr.y/4;if(!(yr.distanceToSquared(vr)>n)){var i=e.ray.origin.distanceTo(vr);i<e.near||i>e.far||t.push({distance:i,point:vr.clone(),face:null,object:this})}}),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return Cn.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),jr.prototype=Object.assign(Object.create(Cn.prototype),{constructor:jr,copy:function(e){Cn.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);n.splice(i,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object},raycast:(_r=new qt,function(e,t){_r.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(_r);this.getObjectForDistance(n).raycast(e,t)}),update:function(){var e=new qt,t=new qt;return function(n){var i=this.levels;if(i.length>1){e.setFromMatrixPosition(n.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=e.distanceTo(t);i[0].object.visible=!0;for(var a=1,o=i.length;a<o&&r>=i[a].distance;a++)i[a-1].object.visible=!1,i[a].object.visible=!0;for(;a<o;a++)i[a].object.visible=!1}}}(),toJSON:function(e){var t=Cn.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}}),Object.assign(Wr.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new Xt;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){var e,t,n;for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(br=new Xt,wr=new Xt,function(){for(var e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=e.length;r<a;r++){var o=e[r]?e[r].matrixWorld:wr;br.multiplyMatrices(o,t[r]),br.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)}),clone:function(){return new Wr(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,n=this.bones.length;t<n;t++){var i=this.bones[t];if(i.name===e)return i}}}),Xr.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Xr,isBone:!0}),Yr.prototype=Object.assign(Object.create(mi.prototype),{constructor:Yr,isSkinnedMesh:!0,initBones:function(){var e,t,n,i,r=[];if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++)t=this.geometry.bones[n],e=new Xr,r.push(e),e.name=t.name,e.position.fromArray(t.pos),e.quaternion.fromArray(t.rotq),void 0!==t.scl&&e.scale.fromArray(t.scl);for(n=0,i=this.geometry.bones.length;n<i;n++)-1!==(t=this.geometry.bones[n]).parent&&null!==t.parent&&void 0!==r[t.parent]?r[t.parent].add(r[n]):this.add(r[n])}return this.updateMatrixWorld(!0),r},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var n=this.geometry.skinWeights[t];(e=1/n.manhattanLength())!==1/0?n.multiplyScalar(e):n.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new an,r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++)i.x=r.getX(t),i.y=r.getY(t),i.z=r.getZ(t),i.w=r.getW(t),(e=1/i.manhattanLength())!==1/0?i.multiplyScalar(e):i.set(1,0,0,0),r.setXYZW(t,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(e){mi.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),qr.prototype=Object.create(li.prototype),qr.prototype.constructor=qr,qr.prototype.isLineBasicMaterial=!0,qr.prototype.copy=function(e){return li.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Qr.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Qr,isLine:!0,computeLineDistances:(Er=new qt,Tr=new qt,function(){var e=this.geometry;if(e.isBufferGeometry)if(null===e.index){for(var t=e.attributes.position,n=[0],i=1,r=t.count;i<r;i++)Er.fromBufferAttribute(t,i-1),Tr.fromBufferAttribute(t,i),n[i]=n[i-1],n[i]+=Er.distanceTo(Tr);e.addAttribute("lineDistance",new THREE.Float32BufferAttribute(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(e.isGeometry){var a=e.vertices;for((n=e.lineDistances)[0]=0,i=1,r=a.length;i<r;i++)n[i]=n[i-1],n[i]+=a[i-1].distanceTo(a[i])}return this}),raycast:function(){var e=new Xt,t=new di,n=new un;return function(i,r){var a=i.linePrecision,o=a*a,s=this.geometry,c=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(c),!1!==i.ray.intersectsSphere(n)){e.getInverse(c),t.copy(i.ray).applyMatrix4(e);var l=new qt,u=new qt,h=new qt,d=new qt,f=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var p=s.index,m=s.attributes.position.array;if(null!==p)for(var g=p.array,v=0,y=g.length-1;v<y;v+=f){var x=g[v],_=g[v+1];if(l.fromArray(m,3*x),u.fromArray(m,3*_),!(t.distanceSqToSegment(l,u,d,h)>o))d.applyMatrix4(this.matrixWorld),(E=i.ray.origin.distanceTo(d))<i.near||E>i.far||r.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}else for(v=0,y=m.length/3-1;v<y;v+=f){if(l.fromArray(m,3*v),u.fromArray(m,3*v+3),!(t.distanceSqToSegment(l,u,d,h)>o))d.applyMatrix4(this.matrixWorld),(E=i.ray.origin.distanceTo(d))<i.near||E>i.far||r.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else if(s.isGeometry){var b=s.vertices,w=b.length;for(v=0;v<w-1;v+=f){var E;if(!(t.distanceSqToSegment(b[v],b[v+1],d,h)>o))d.applyMatrix4(this.matrixWorld),(E=i.ray.origin.distanceTo(d))<i.near||E>i.far||r.push({distance:E,point:h.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Zr.prototype=Object.assign(Object.create(Qr.prototype),{constructor:Zr,isLineSegments:!0,computeLineDistances:function(){var e=new qt,t=new qt;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[],a=0,o=i.count;a<o;a+=2)e.fromBufferAttribute(i,a),t.fromBufferAttribute(i,a+1),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+e.distanceTo(t);n.addAttribute("lineDistance",new THREE.Float32BufferAttribute(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(r=n.lineDistances,a=0,o=s.length;a<o;a+=2)e.copy(s[a]),t.copy(s[a+1]),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+e.distanceTo(t)}return this}}()}),$r.prototype=Object.assign(Object.create(Qr.prototype),{constructor:$r,isLineLoop:!0}),Jr.prototype=Object.create(li.prototype),Jr.prototype.constructor=Jr,Jr.prototype.isPointsMaterial=!0,Jr.prototype.copy=function(e){return li.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},Kr.prototype=Object.assign(Object.create(Cn.prototype),{constructor:Kr,isPoints:!0,raycast:function(){var e=new Xt,t=new di,n=new un;return function(i,r){var a=this,o=this.geometry,s=this.matrixWorld,c=i.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(s),n.radius+=c,!1!==i.ray.intersectsSphere(n)){e.getInverse(s),t.copy(i.ray).applyMatrix4(e);var l=c/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,h=new qt,d=new qt;if(o.isBufferGeometry){var f=o.index,p=o.attributes.position.array;if(null!==f)for(var m=f.array,g=0,v=m.length;g<v;g++){var y=m[g];h.fromArray(p,3*y),b(h,y)}else{g=0;for(var x=p.length/3;g<x;g++)h.fromArray(p,3*g),b(h,g)}}else{var _=o.vertices;for(g=0,x=_.length;g<x;g++)b(_[g],g)}}function b(e,n){var o=t.distanceSqToPoint(e);if(o<u){t.closestPointToPoint(e,d),d.applyMatrix4(s);var c=i.ray.origin.distanceTo(d);if(c<i.near||c>i.far)return;r.push({distance:c,distanceToRay:Math.sqrt(o),point:d.clone(),index:n,face:null,object:a})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ea.prototype=Object.assign(Object.create(Cn.prototype),{constructor:ea,isGroup:!0}),ta.prototype=Object.assign(Object.create(rn.prototype),{constructor:ta,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),na.prototype=Object.create(rn.prototype),na.prototype.constructor=na,na.prototype.isCompressedTexture=!0,ia.prototype=Object.create(rn.prototype),ia.prototype.constructor=ia,ia.prototype.isDepthTexture=!0,ra.prototype=Object.create(Zn.prototype),ra.prototype.constructor=ra,aa.prototype=Object.create(Un.prototype),aa.prototype.constructor=aa,oa.prototype=Object.create(Zn.prototype),oa.prototype.constructor=oa,sa.prototype=Object.create(Un.prototype),sa.prototype.constructor=sa,ca.prototype=Object.create(Zn.prototype),ca.prototype.constructor=ca,la.prototype=Object.create(Un.prototype),la.prototype.constructor=la,ua.prototype=Object.create(ca.prototype),ua.prototype.constructor=ua,ha.prototype=Object.create(Un.prototype),ha.prototype.constructor=ha,da.prototype=Object.create(ca.prototype),da.prototype.constructor=da,fa.prototype=Object.create(Un.prototype),fa.prototype.constructor=fa,pa.prototype=Object.create(ca.prototype),pa.prototype.constructor=pa,ma.prototype=Object.create(Un.prototype),ma.prototype.constructor=ma,ga.prototype=Object.create(ca.prototype),ga.prototype.constructor=ga,va.prototype=Object.create(Un.prototype),va.prototype.constructor=va,ya.prototype=Object.create(Zn.prototype),ya.prototype.constructor=ya,xa.prototype=Object.create(Un.prototype),xa.prototype.constructor=xa,_a.prototype=Object.create(Zn.prototype),_a.prototype.constructor=_a,ba.prototype=Object.create(Un.prototype),ba.prototype.constructor=ba,wa.prototype=Object.create(Zn.prototype),wa.prototype.constructor=wa;var Ea=function(e,t,n){n=n||2;var i,r,a,o,s,c,l,u=t&&t.length,h=u?t[0]*n:e.length,d=Ta(e,0,h,n,!0),f=[];if(!d)return f;if(u&&(d=function(e,t,n,i){var r,a,o,s,c,l=[];for(r=0,a=t.length;r<a;r++)o=t[r]*i,s=r<a-1?t[r+1]*i:e.length,(c=Ta(e,o,s,i,!1))===c.next&&(c.steiner=!0),l.push(Na(c));for(l.sort(Ra),r=0;r<l.length;r++)Fa(l[r],n),n=Sa(n,n.next);return n}(e,t,d,n)),e.length>80*n){i=a=e[0],r=o=e[1];for(var p=n;p<h;p+=n)s=e[p],c=e[p+1],s<i&&(i=s),c<r&&(r=c),s>a&&(a=s),c>o&&(o=c);l=0!==(l=Math.max(a-i,o-r))?1/l:0}return Ma(d,f,n,i,r,l),f};function Ta(e,t,n,i,r){var a,o;if(r===function(e,t,n,i){for(var r=0,a=t,o=n-i;a<n;a+=i)r+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return r}(e,t,n,i)>0)for(a=t;a<n;a+=i)o=Ha(a,e[a],e[a+1],o);else for(a=n-i;a>=t;a-=i)o=Ha(a,e[a],e[a+1],o);return o&&za(o,o.next)&&(Va(o),o=o.next),o}function Sa(e,t){if(!e)return e;t||(t=e);var n,i=e;do{if(n=!1,i.steiner||!za(i,i.next)&&0!==Da(i.prev,i,i.next))i=i.next;else{if(Va(i),(i=t=i.prev)===i.next)break;n=!0}}while(n||i!==t);return t}function Ma(e,t,n,i,r,a,o){if(e){!o&&a&&function(e,t,n,i){var r=e;do{null===r.z&&(r.z=Ia(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){var t,n,i,r,a,o,s,c,l=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,i=n,s=0,t=0;t<l&&(s++,i=i.nextZ);t++);for(c=l;s>0||c>0&&i;)0!==s&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,c--),a?a.nextZ=r:e=r,r.prevZ=a,a=r;n=i}a.nextZ=null,l*=2}while(o>1)}(r)}(e,i,r,a);for(var s,c,l=e;e.prev!==e.next;)if(s=e.prev,c=e.next,a?La(e,i,r,a):Aa(e))t.push(s.i/n),t.push(e.i/n),t.push(c.i/n),Va(e),e=c.next,l=c.next;else if((e=c)===l){o?1===o?Ma(e=Ca(e,t,n),t,n,i,r,a,2):2===o&&Pa(e,t,n,i,r,a):Ma(Sa(e),t,n,i,r,a,1);break}}}function Aa(e){var t=e.prev,n=e,i=e.next;if(Da(t,n,i)>=0)return!1;for(var r=e.next.next;r!==e.prev;){if(Oa(t.x,t.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Da(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function La(e,t,n,i){var r=e.prev,a=e,o=e.next;if(Da(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,c=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,l=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,u=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,h=Ia(s,c,t,n,i),d=Ia(l,u,t,n,i),f=e.nextZ;f&&f.z<=d;){if(f!==e.prev&&f!==e.next&&Oa(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Da(f.prev,f,f.next)>=0)return!1;f=f.nextZ}for(f=e.prevZ;f&&f.z>=h;){if(f!==e.prev&&f!==e.next&&Oa(r.x,r.y,a.x,a.y,o.x,o.y,f.x,f.y)&&Da(f.prev,f,f.next)>=0)return!1;f=f.prevZ}return!0}function Ca(e,t,n){var i=e;do{var r=i.prev,a=i.next.next;!za(r,a)&&ka(r,i,i.next,a)&&Ba(r,a)&&Ba(a,r)&&(t.push(r.i/n),t.push(i.i/n),t.push(a.i/n),Va(i),Va(i.next),i=e=a),i=i.next}while(i!==e);return i}function Pa(e,t,n,i,r,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Ua(o,s)){var c=Ga(o,s);return o=Sa(o,o.next),c=Sa(c,c.next),Ma(o,t,n,i,r,a),void Ma(c,t,n,i,r,a)}s=s.next}o=o.next}while(o!==e)}function Ra(e,t){return e.x-t.x}function Fa(e,t){if(t=function(e,t){var n,i=t,r=e.x,a=e.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!n)return null;if(r===o)return n.prev;var c,l=n,u=n.x,h=n.y,d=1/0;i=n.next;for(;i!==l;)r>=i.x&&i.x>=u&&r!==i.x&&Oa(a<h?r:o,a,u,h,a<h?o:r,a,i.x,i.y)&&((c=Math.abs(a-i.y)/(r-i.x))<d||c===d&&i.x>n.x)&&Ba(i,e)&&(n=i,d=c),i=i.next;return n}(e,t)){var n=Ga(t,e);Sa(n,n.next)}}function Ia(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*r)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*r)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Na(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function Oa(e,t,n,i,r,a,o,s){return(r-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(i-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function Ua(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&ka(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&Ba(e,t)&&Ba(t,e)&&function(e,t){var n=e,i=!1,r=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)}function Da(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function za(e,t){return e.x===t.x&&e.y===t.y}function ka(e,t,n,i){return!!(za(e,t)&&za(n,i)||za(e,i)&&za(n,t))||Da(e,t,n)>0!=Da(e,t,i)>0&&Da(n,i,e)>0!=Da(n,i,t)>0}function Ba(e,t){return Da(e.prev,e,e.next)<0?Da(e,t,e.next)>=0&&Da(e,e.prev,t)>=0:Da(e,t,e.prev)<0||Da(e,e.next,t)<0}function Ga(e,t){var n=new ja(e.i,e.x,e.y),i=new ja(t.i,t.x,t.y),r=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function Ha(e,t,n,i){var r=new ja(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Va(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ja(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var Wa={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},isClockWise:function(e){return Wa.area(e)<0},triangulateShape:function(e,t){var n=[],i=[],r=[];Xa(e),Ya(n,e);var a=e.length;t.forEach(Xa);for(var o=0;o<t.length;o++)i.push(a),a+=t[o].length,Ya(n,t[o]);var s=Ea(n,i);for(o=0;o<s.length;o+=3)r.push(s.slice(o,o+3));return r}};function Xa(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function Ya(e,t){for(var n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}function qa(e,t){Un.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Qa(e,t)),this.mergeVertices()}function Qa(e,t){void 0!==e&&(Zn.call(this),this.type="ExtrudeBufferGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeVertexNormals())}function Za(e,t){Un.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new $a(e,t)),this.mergeVertices()}function $a(e,t){var n=(t=t||{}).font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Un;var i=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Qa.call(this,i,t),this.type="TextBufferGeometry"}function Ja(e,t,n,i,r,a,o){Un.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new Ka(e,t,n,i,r,a,o)),this.mergeVertices()}function Ka(e,t,n,i,r,a,o){Zn.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},e=e||1,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var s,c,l=(a=void 0!==a?a:0)+(o=void 0!==o?o:Math.PI),u=0,h=[],d=new qt,f=new qt,p=[],m=[],g=[],v=[];for(c=0;c<=n;c++){var y=[],x=c/n;for(s=0;s<=t;s++){var _=s/t;d.x=-e*Math.cos(i+_*r)*Math.sin(a+x*o),d.y=e*Math.cos(a+x*o),d.z=e*Math.sin(i+_*r)*Math.sin(a+x*o),m.push(d.x,d.y,d.z),f.set(d.x,d.y,d.z).normalize(),g.push(f.x,f.y,f.z),v.push(_,1-x),y.push(u++)}h.push(y)}for(c=0;c<n;c++)for(s=0;s<t;s++){var b=h[c][s+1],w=h[c][s],E=h[c+1][s],T=h[c+1][s+1];(0!==c||a>0)&&p.push(b,w,T),(c!==n-1||l<Math.PI)&&p.push(w,E,T)}this.setIndex(p),this.addAttribute("position",new Wn(m,3)),this.addAttribute("normal",new Wn(g,3)),this.addAttribute("uv",new Wn(v,2))}function eo(e,t,n,i,r,a){Un.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new to(e,t,n,i,r,a)),this.mergeVertices()}function to(e,t,n,i,r,a){Zn.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},e=e||.5,t=t||1,r=void 0!==r?r:0,a=void 0!==a?a:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var o,s,c,l=[],u=[],h=[],d=[],f=e,p=(t-e)/(i=void 0!==i?Math.max(1,i):1),m=new qt,g=new Wt;for(s=0;s<=i;s++){for(c=0;c<=n;c++)o=r+c/n*a,m.x=f*Math.cos(o),m.y=f*Math.sin(o),u.push(m.x,m.y,m.z),h.push(0,0,1),g.x=(m.x/t+1)/2,g.y=(m.y/t+1)/2,d.push(g.x,g.y);f+=p}for(s=0;s<i;s++){var v=s*(n+1);for(c=0;c<n;c++){var y=o=c+v,x=o+n+1,_=o+n+2,b=o+1;l.push(y,x,b),l.push(x,_,b)}}this.setIndex(l),this.addAttribute("position",new Wn(u,3)),this.addAttribute("normal",new Wn(h,3)),this.addAttribute("uv",new Wn(d,2))}function no(e,t,n,i){Un.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},this.fromBufferGeometry(new io(e,t,n,i)),this.mergeVertices()}function io(e,t,n,i){Zn.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=jt.clamp(i,0,2*Math.PI);var r,a,o,s=[],c=[],l=[],u=1/t,h=new qt,d=new Wt;for(a=0;a<=t;a++){var f=n+a*u*i,p=Math.sin(f),m=Math.cos(f);for(o=0;o<=e.length-1;o++)h.x=e[o].x*p,h.y=e[o].y,h.z=e[o].x*m,c.push(h.x,h.y,h.z),d.x=a/t,d.y=o/(e.length-1),l.push(d.x,d.y)}for(a=0;a<t;a++)for(o=0;o<e.length-1;o++){var g=r=o+a*e.length,v=r+e.length,y=r+e.length+1,x=r+1;s.push(g,v,x),s.push(v,y,x)}if(this.setIndex(s),this.addAttribute("position",new Wn(c,3)),this.addAttribute("uv",new Wn(l,2)),this.computeVertexNormals(),i===2*Math.PI){var _=this.attributes.normal.array,b=new qt,w=new qt,E=new qt;for(r=t*e.length*3,a=0,o=0;a<e.length;a++,o+=3)b.x=_[o+0],b.y=_[o+1],b.z=_[o+2],w.x=_[r+o+0],w.y=_[r+o+1],w.z=_[r+o+2],E.addVectors(b,w).normalize(),_[o+0]=_[r+o+0]=E.x,_[o+1]=_[r+o+1]=E.y,_[o+2]=_[r+o+2]=E.z}}function ro(e,t){Un.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new ao(e,t)),this.mergeVertices()}function ao(e,t){Zn.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],i=[],r=[],a=[],o=0,s=0;if(!1===Array.isArray(e))l(e);else for(var c=0;c<e.length;c++)l(e[c]),this.addGroup(o,s,c),o+=s,s=0;function l(e){var o,c,l,u=i.length/3,h=e.extractPoints(t),d=h.shape,f=h.holes;if(!1===Wa.isClockWise(d))for(d=d.reverse(),o=0,c=f.length;o<c;o++)l=f[o],!0===Wa.isClockWise(l)&&(f[o]=l.reverse());var p=Wa.triangulateShape(d,f);for(o=0,c=f.length;o<c;o++)l=f[o],d=d.concat(l);for(o=0,c=d.length;o<c;o++){var m=d[o];i.push(m.x,m.y,0),r.push(0,0,1),a.push(m.x,m.y)}for(o=0,c=p.length;o<c;o++){var g=p[o],v=g[0]+u,y=g[1]+u,x=g[2]+u;n.push(v,y,x),s+=3}}this.setIndex(n),this.addAttribute("position",new Wn(i,3)),this.addAttribute("normal",new Wn(r,3)),this.addAttribute("uv",new Wn(a,2))}function oo(e,t){if(t.shapes=[],Array.isArray(e))for(var n=0,i=e.length;n<i;n++){var r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}function so(e,t){Zn.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,i,r,a,o=[],s=Math.cos(jt.DEG2RAD*t),c=[0,0],l={},u=["a","b","c"];e.isBufferGeometry?(a=new Un).fromBufferGeometry(e):a=e.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,d=a.faces,f=0,p=d.length;f<p;f++)for(var m=d[f],g=0;g<3;g++)n=m[u[g]],i=m[u[(g+1)%3]],c[0]=Math.min(n,i),c[1]=Math.max(n,i),void 0===l[r=c[0]+","+c[1]]?l[r]={index1:c[0],index2:c[1],face1:f,face2:void 0}:l[r].face2=f;for(r in l){var v=l[r];if(void 0===v.face2||d[v.face1].normal.dot(d[v.face2].normal)<=s){var y=h[v.index1];o.push(y.x,y.y,y.z),y=h[v.index2],o.push(y.x,y.y,y.z)}}this.addAttribute("position",new Wn(o,3))}function co(e,t,n,i,r,a,o,s){Un.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new lo(e,t,n,i,r,a,o,s)),this.mergeVertices()}function lo(e,t,n,i,r,a,o,s){Zn.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s};var c=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,a=void 0!==a&&a,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI;var l=[],u=[],h=[],d=[],f=0,p=[],m=n/2,g=0;function v(n){var r,a,p,v=new Wt,y=new qt,x=0,_=!0===n?e:t,b=!0===n?1:-1;for(a=f,r=1;r<=i;r++)u.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),f++;for(p=f,r=0;r<=i;r++){var w=r/i*s+o,E=Math.cos(w),T=Math.sin(w);y.x=_*T,y.y=m*b,y.z=_*E,u.push(y.x,y.y,y.z),h.push(0,b,0),v.x=.5*E+.5,v.y=.5*T*b+.5,d.push(v.x,v.y),f++}for(r=0;r<i;r++){var S=a+r,M=p+r;!0===n?l.push(M,M+1,S):l.push(M+1,M,S),x+=3}c.addGroup(g,x,!0===n?1:2),g+=x}!function(){var a,v,y=new qt,x=new qt,_=0,b=(t-e)/n;for(v=0;v<=r;v++){var w=[],E=v/r,T=E*(t-e)+e;for(a=0;a<=i;a++){var S=a/i,M=S*s+o,A=Math.sin(M),L=Math.cos(M);x.x=T*A,x.y=-E*n+m,x.z=T*L,u.push(x.x,x.y,x.z),y.set(A,b,L).normalize(),h.push(y.x,y.y,y.z),d.push(S,1-E),w.push(f++)}p.push(w)}for(a=0;a<i;a++)for(v=0;v<r;v++){var C=p[v][a],P=p[v+1][a],R=p[v+1][a+1],F=p[v][a+1];l.push(C,P,F),l.push(P,R,F),_+=6}c.addGroup(g,_,0),g+=_}(),!1===a&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(l),this.addAttribute("position",new Wn(u,3)),this.addAttribute("normal",new Wn(h,3)),this.addAttribute("uv",new Wn(d,2))}function uo(e,t,n,i,r,a,o){co.call(this,0,e,t,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function ho(e,t,n,i,r,a,o){lo.call(this,0,e,t,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function fo(e,t,n,i){Un.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new po(e,t,n,i)),this.mergeVertices()}function po(e,t,n,i){Zn.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,a,o=[],s=[],c=[],l=[],u=new qt,h=new Wt;for(s.push(0,0,0),c.push(0,0,1),l.push(.5,.5),a=0,r=3;a<=t;a++,r+=3){var d=n+a/t*i;u.x=e*Math.cos(d),u.y=e*Math.sin(d),s.push(u.x,u.y,u.z),c.push(0,0,1),h.x=(s[r]/e+1)/2,h.y=(s[r+1]/e+1)/2,l.push(h.x,h.y)}for(r=1;r<=t;r++)o.push(r,r+1,0);this.setIndex(o),this.addAttribute("position",new Wn(s,3)),this.addAttribute("normal",new Wn(c,3)),this.addAttribute("uv",new Wn(l,2))}qa.prototype=Object.create(Un.prototype),qa.prototype.constructor=qa,Qa.prototype=Object.create(Zn.prototype),Qa.prototype.constructor=Qa,Qa.prototype.getArrays=function(){var e=this.getAttribute("position"),t=e?Array.prototype.slice.call(e.array):[],n=this.getAttribute("uv"),i=n?Array.prototype.slice.call(n.array):[],r=this.index;return{position:t,uv:i,index:r?Array.prototype.slice.call(r.array):[]}},Qa.prototype.addShapeList=function(e,t){var n=e.length;t.arrays=this.getArrays();for(var i=0;i<n;i++){var r=e[i];this.addShape(r,t)}this.setIndex(t.arrays.index),this.addAttribute("position",new Wn(t.arrays.position,3)),this.addAttribute("uv",new Wn(t.arrays.uv,2))},Qa.prototype.addShape=function(e,t){var n,i,r,a,o,s,c,l,u=t.arrays?t.arrays:this.getArrays(),h=u.position,d=u.index,f=u.uv,p=[],m=void 0!==t.amount?t.amount:100,g=void 0!==t.bevelThickness?t.bevelThickness:6,v=void 0!==t.bevelSize?t.bevelSize:g-2,y=void 0!==t.bevelSegments?t.bevelSegments:3,x=void 0===t.bevelEnabled||t.bevelEnabled,_=void 0!==t.curveSegments?t.curveSegments:12,b=void 0!==t.steps?t.steps:1,w=t.extrudePath,E=!1,T=void 0!==t.UVGenerator?t.UVGenerator:qa.WorldUVGenerator;w&&(n=w.getSpacedPoints(b),E=!0,x=!1,i=void 0!==t.frames?t.frames:w.computeFrenetFrames(b,!1),r=new qt,a=new qt,o=new qt),x||(y=0,g=0,v=0);var S=this,M=e.extractPoints(_),A=M.shape,L=M.holes;if(!Wa.isClockWise(A))for(A=A.reverse(),c=0,l=L.length;c<l;c++)s=L[c],Wa.isClockWise(s)&&(L[c]=s.reverse());var C=Wa.triangulateShape(A,L),P=A;for(c=0,l=L.length;c<l;c++)s=L[c],A=A.concat(s);function R(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var F,I,N,O,U,D,z=A.length,k=C.length;function B(e,t,n){var i,r,a,o=e.x-t.x,s=e.y-t.y,c=n.x-e.x,l=n.y-e.y,u=o*o+s*s,h=o*l-s*c;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(u),f=Math.sqrt(c*c+l*l),p=t.x-s/d,m=t.y+o/d,g=((n.x-l/f-p)*l-(n.y+c/f-m)*c)/(o*l-s*c),v=(i=p+o*g-e.x)*i+(r=m+s*g-e.y)*r;if(v<=2)return new Wt(i,r);a=Math.sqrt(v/2)}else{var y=!1;o>Number.EPSILON?c>Number.EPSILON&&(y=!0):o<-Number.EPSILON?c<-Number.EPSILON&&(y=!0):Math.sign(s)===Math.sign(l)&&(y=!0),y?(i=-s,r=o,a=Math.sqrt(u)):(i=o,r=s,a=Math.sqrt(u/2))}return new Wt(i/a,r/a)}for(var G=[],H=0,V=P.length,j=V-1,W=H+1;H<V;H++,j++,W++)j===V&&(j=0),W===V&&(W=0),G[H]=B(P[H],P[j],P[W]);var X,Y,q=[],Q=G.concat();for(c=0,l=L.length;c<l;c++){for(s=L[c],X=[],H=0,j=(V=s.length)-1,W=H+1;H<V;H++,j++,W++)j===V&&(j=0),W===V&&(W=0),X[H]=B(s[H],s[j],s[W]);q.push(X),Q=Q.concat(X)}for(F=0;F<y;F++){for(N=F/y,O=g*Math.cos(N*Math.PI/2),I=v*Math.sin(N*Math.PI/2),H=0,V=P.length;H<V;H++)$((U=R(P[H],G[H],I)).x,U.y,-O);for(c=0,l=L.length;c<l;c++)for(s=L[c],X=q[c],H=0,V=s.length;H<V;H++)$((U=R(s[H],X[H],I)).x,U.y,-O)}for(I=v,H=0;H<z;H++)U=x?R(A[H],Q[H],I):A[H],E?(a.copy(i.normals[0]).multiplyScalar(U.x),r.copy(i.binormals[0]).multiplyScalar(U.y),o.copy(n[0]).add(a).add(r),$(o.x,o.y,o.z)):$(U.x,U.y,0);for(Y=1;Y<=b;Y++)for(H=0;H<z;H++)U=x?R(A[H],Q[H],I):A[H],E?(a.copy(i.normals[Y]).multiplyScalar(U.x),r.copy(i.binormals[Y]).multiplyScalar(U.y),o.copy(n[Y]).add(a).add(r),$(o.x,o.y,o.z)):$(U.x,U.y,m/b*Y);for(F=y-1;F>=0;F--){for(N=F/y,O=g*Math.cos(N*Math.PI/2),I=v*Math.sin(N*Math.PI/2),H=0,V=P.length;H<V;H++)$((U=R(P[H],G[H],I)).x,U.y,m+O);for(c=0,l=L.length;c<l;c++)for(s=L[c],X=q[c],H=0,V=s.length;H<V;H++)U=R(s[H],X[H],I),E?$(U.x,U.y+n[b-1].y,n[b-1].x+O):$(U.x,U.y,m+O)}function Z(e,t){var n,i;for(H=e.length;--H>=0;){n=H,(i=H-1)<0&&(i=e.length-1);var r=0,a=b+2*y;for(r=0;r<a;r++){var o=z*r,s=z*(r+1);K(t+n+o,t+i+o,t+i+s,t+n+s)}}}function $(e,t,n){p.push(e),p.push(t),p.push(n)}function J(e,t,n){ee(e),ee(t),ee(n);var i=h.length/3,r=T.generateTopUV(S,h,i-3,i-2,i-1);te(r[0]),te(r[1]),te(r[2])}function K(e,t,n,i){ee(e),ee(t),ee(i),ee(t),ee(n),ee(i);var r=h.length/3,a=T.generateSideWallUV(S,h,r-6,r-3,r-2,r-1);te(a[0]),te(a[1]),te(a[3]),te(a[1]),te(a[2]),te(a[3])}function ee(e){d.push(h.length/3),h.push(p[3*e+0]),h.push(p[3*e+1]),h.push(p[3*e+2])}function te(e){f.push(e.x),f.push(e.y)}!function(){var e=h.length/3;if(x){var n=0,i=z*n;for(H=0;H<k;H++)J((D=C[H])[2]+i,D[1]+i,D[0]+i);for(i=z*(n=b+2*y),H=0;H<k;H++)J((D=C[H])[0]+i,D[1]+i,D[2]+i)}else{for(H=0;H<k;H++)J((D=C[H])[2],D[1],D[0]);for(H=0;H<k;H++)J((D=C[H])[0]+z*b,D[1]+z*b,D[2]+z*b)}S.addGroup(e,h.length/3-e,void 0!==t.material?t.material:0)}(),function(){var e=h.length/3,n=0;for(Z(P,n),n+=P.length,c=0,l=L.length;c<l;c++)Z(s=L[c],n),n+=s.length;S.addGroup(e,h.length/3-e,void 0!==t.extrudeMaterial?t.extrudeMaterial:1)}(),t.arrays||(this.setIndex(d),this.addAttribute("position",new Wn(h,3)),this.addAttribute("uv",new Wn(f,2)))},qa.WorldUVGenerator={generateTopUV:function(e,t,n,i,r){var a=t[3*n],o=t[3*n+1],s=t[3*i],c=t[3*i+1],l=t[3*r],u=t[3*r+1];return[new Wt(a,o),new Wt(s,c),new Wt(l,u)]},generateSideWallUV:function(e,t,n,i,r,a){var o=t[3*n],s=t[3*n+1],c=t[3*n+2],l=t[3*i],u=t[3*i+1],h=t[3*i+2],d=t[3*r],f=t[3*r+1],p=t[3*r+2],m=t[3*a],g=t[3*a+1],v=t[3*a+2];return Math.abs(s-u)<.01?[new Wt(o,1-c),new Wt(l,1-h),new Wt(d,1-p),new Wt(m,1-v)]:[new Wt(s,1-c),new Wt(u,1-h),new Wt(f,1-p),new Wt(g,1-v)]}},Za.prototype=Object.create(Un.prototype),Za.prototype.constructor=Za,$a.prototype=Object.create(Qa.prototype),$a.prototype.constructor=$a,Ja.prototype=Object.create(Un.prototype),Ja.prototype.constructor=Ja,Ka.prototype=Object.create(Zn.prototype),Ka.prototype.constructor=Ka,eo.prototype=Object.create(Un.prototype),eo.prototype.constructor=eo,to.prototype=Object.create(Zn.prototype),to.prototype.constructor=to,no.prototype=Object.create(Un.prototype),no.prototype.constructor=no,io.prototype=Object.create(Zn.prototype),io.prototype.constructor=io,ro.prototype=Object.create(Un.prototype),ro.prototype.constructor=ro,ro.prototype.toJSON=function(){var e=Un.prototype.toJSON.call(this);return oo(this.parameters.shapes,e)},ao.prototype=Object.create(Zn.prototype),ao.prototype.constructor=ao,ao.prototype.toJSON=function(){var e=Zn.prototype.toJSON.call(this);return oo(this.parameters.shapes,e)},so.prototype=Object.create(Zn.prototype),so.prototype.constructor=so,co.prototype=Object.create(Un.prototype),co.prototype.constructor=co,lo.prototype=Object.create(Zn.prototype),lo.prototype.constructor=lo,uo.prototype=Object.create(co.prototype),uo.prototype.constructor=uo,ho.prototype=Object.create(lo.prototype),ho.prototype.constructor=ho,fo.prototype=Object.create(Un.prototype),fo.prototype.constructor=fo,po.prototype=Object.create(Zn.prototype),po.prototype.constructor=po;var mo=Object.freeze({WireframeGeometry:ra,ParametricGeometry:aa,ParametricBufferGeometry:oa,TetrahedronGeometry:la,TetrahedronBufferGeometry:ua,OctahedronGeometry:ha,OctahedronBufferGeometry:da,IcosahedronGeometry:fa,IcosahedronBufferGeometry:pa,DodecahedronGeometry:ma,DodecahedronBufferGeometry:ga,PolyhedronGeometry:sa,PolyhedronBufferGeometry:ca,TubeGeometry:va,TubeBufferGeometry:ya,TorusKnotGeometry:xa,TorusKnotBufferGeometry:_a,TorusGeometry:ba,TorusBufferGeometry:wa,TextGeometry:Za,TextBufferGeometry:$a,SphereGeometry:Ja,SphereBufferGeometry:Ka,RingGeometry:eo,RingBufferGeometry:to,PlaneGeometry:Kn,PlaneBufferGeometry:ei,LatheGeometry:no,LatheBufferGeometry:io,ShapeGeometry:ro,ShapeBufferGeometry:ao,ExtrudeGeometry:qa,ExtrudeBufferGeometry:Qa,EdgesGeometry:so,ConeGeometry:uo,ConeBufferGeometry:ho,CylinderGeometry:co,CylinderBufferGeometry:lo,CircleGeometry:fo,CircleBufferGeometry:po,BoxGeometry:$n,BoxBufferGeometry:Jn});function go(e){li.call(this),this.type="ShadowMaterial",this.color=new vn(0),this.transparent=!0,this.setValues(e)}function vo(e){hi.call(this,e),this.type="RawShaderMaterial"}function yo(e){li.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new vn(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function xo(e){yo.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}function _o(e){li.call(this),this.type="MeshPhongMaterial",this.color=new vn(16777215),this.specular=new vn(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ce,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function bo(e){_o.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function wo(e){li.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Wt(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function Eo(e){li.call(this),this.type="MeshLambertMaterial",this.color=new vn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new vn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=ce,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}function To(e){qr.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}go.prototype=Object.create(li.prototype),go.prototype.constructor=go,go.prototype.isShadowMaterial=!0,go.prototype.copy=function(e){return li.prototype.copy.call(this,e),this.color.copy(e.color),this},vo.prototype=Object.create(hi.prototype),vo.prototype.constructor=vo,vo.prototype.isRawShaderMaterial=!0,yo.prototype=Object.create(li.prototype),yo.prototype.constructor=yo,yo.prototype.isMeshStandardMaterial=!0,yo.prototype.copy=function(e){return li.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},xo.prototype=Object.create(yo.prototype),xo.prototype.constructor=xo,xo.prototype.isMeshPhysicalMaterial=!0,xo.prototype.copy=function(e){return yo.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},_o.prototype=Object.create(li.prototype),_o.prototype.constructor=_o,_o.prototype.isMeshPhongMaterial=!0,_o.prototype.copy=function(e){return li.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},bo.prototype=Object.create(_o.prototype),bo.prototype.constructor=bo,bo.prototype.isMeshToonMaterial=!0,bo.prototype.copy=function(e){return _o.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},wo.prototype=Object.create(li.prototype),wo.prototype.constructor=wo,wo.prototype.isMeshNormalMaterial=!0,wo.prototype.copy=function(e){return li.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Eo.prototype=Object.create(li.prototype),Eo.prototype.constructor=Eo,Eo.prototype.isMeshLambertMaterial=!0,Eo.prototype.copy=function(e){return li.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},To.prototype=Object.create(qr.prototype),To.prototype.constructor=To,To.prototype.isLineDashedMaterial=!0,To.prototype.copy=function(e){return qr.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var So=Object.freeze({ShadowMaterial:go,SpriteMaterial:Hr,RawShaderMaterial:vo,ShaderMaterial:hi,PointsMaterial:Jr,MeshPhysicalMaterial:xo,MeshStandardMaterial:yo,MeshPhongMaterial:_o,MeshToonMaterial:bo,MeshNormalMaterial:wo,MeshLambertMaterial:Eo,MeshDepthMaterial:Lr,MeshDistanceMaterial:Cr,MeshBasicMaterial:ui,LineDashedMaterial:To,LineBasicMaterial:qr,Material:li}),Mo={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};function Ao(e,t,n){var i=this,r=!1,a=0,o=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===r&&void 0!==i.onStart&&i.onStart(e,a,o),r=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}var Lo=new Ao,Co={};function Po(e){this.manager=void 0!==e?e:Lo}function Ro(e){this.manager=void 0!==e?e:Lo,this._parser=null}function Fo(e){this.manager=void 0!==e?e:Lo,this._parser=null}function Io(e){this.manager=void 0!==e?e:Lo}function No(e){this.manager=void 0!==e?e:Lo}function Oo(e){this.manager=void 0!==e?e:Lo}function Uo(){this.type="Curve",this.arcLengthDivisions=200}function Do(e,t,n,i,r,a,o,s){Uo.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function zo(e,t,n,i,r,a){Do.call(this,e,t,n,n,i,r,a),this.type="ArcCurve"}function ko(){var e=0,t=0,n=0,i=0;function r(r,a,o,s){e=r,t=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,o,s){var c=(t-e)/a-(n-e)/(a+o)+(n-t)/o,l=(n-t)/o-(i-t)/(o+s)+(i-n)/s;r(t,n,c*=o,l*=o)},calc:function(r){var a=r*r;return e+t*r+n*a+i*(a*r)}}}Object.assign(Po.prototype,{load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Mo.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;if(void 0===Co[e]){var o=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(o){var s=o[1],c=!!o[2],l=o[3];l=window.decodeURIComponent(l),c&&(l=window.atob(l));try{var u,h=(this.responseType||"").toLowerCase();switch(h){case"arraybuffer":case"blob":for(var d=new Uint8Array(l.length),f=0;f<l.length;f++)d[f]=l.charCodeAt(f);u="blob"===h?new Blob([d.buffer],{type:s}):d.buffer;break;case"document":var p=new DOMParser;u=p.parseFromString(l,s);break;case"json":u=JSON.parse(l);break;default:u=l}window.setTimeout(function(){t&&t(u),r.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)},0)}}else{Co[e]=[],Co[e].push({onLoad:t,onProgress:n,onError:i});var m=new XMLHttpRequest;for(var g in m.open("GET",e,!0),m.addEventListener("load",function(t){var n=this.response;Mo.add(e,n);var i=Co[e];if(delete Co[e],200===this.status){for(var a=0,o=i.length;a<o;a++){(s=i[a]).onLoad&&s.onLoad(n)}r.manager.itemEnd(e)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(a=0,o=i.length;a<o;a++){(s=i[a]).onLoad&&s.onLoad(n)}r.manager.itemEnd(e)}else{for(a=0,o=i.length;a<o;a++){var s;(s=i[a]).onError&&s.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)}},!1),m.addEventListener("progress",function(t){for(var n=Co[e],i=0,r=n.length;i<r;i++){var a=n[i];a.onProgress&&a.onProgress(t)}},!1),m.addEventListener("error",function(t){var n=Co[e];delete Co[e];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return r.manager.itemStart(e),m}Co[e].push({onLoad:t,onProgress:n,onError:i})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(Ro.prototype,{load:function(e,t,n,i){var r=this,a=[],o=new na;o.image=a;var s=new Po(this.manager);function c(c){s.load(e[c],function(e){var n=r._parser(e,!0);a[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(o.minFilter=Pe),o.format=n.format,o.needsUpdate=!0,t&&t(o))},n,i)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(e))for(var l=0,u=0,h=e.length;u<h;++u)c(u);else s.load(e,function(e){var n=r._parser(e,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){a[s]={mipmaps:[]};for(var c=0;c<n.mipmapCount;c++)a[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+c]),a[s].format=n.format,a[s].width=n.width,a[s].height=n.height}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Pe),o.format=n.format,o.needsUpdate=!0,t&&t(o)},n,i);return o},setPath:function(e){return this.path=e,this}}),Object.assign(Fo.prototype,{load:function(e,t,n,i){var r=this,a=new cn,o=new Po(this.manager);return o.setResponseType("arraybuffer"),o.load(e,function(e){var n=r._parser(e);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Se,a.wrapT=void 0!==n.wrapT?n.wrapT:Se,a.magFilter=void 0!==n.magFilter?n.magFilter:Pe,a.minFilter=void 0!==n.minFilter?n.minFilter:Fe,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps),1===n.mipmapCount&&(a.minFilter=Pe),a.needsUpdate=!0,t&&t(a,n))},n,i),a}}),Object.assign(Io.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,a=Mo.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;var o=document.createElementNS("http://www.w3.org/1999/xhtml","img");return o.addEventListener("load",function(){Mo.add(e,this),t&&t(this),r.manager.itemEnd(e)},!1),o.addEventListener("error",function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)},!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),r.manager.itemStart(e),o.src=e,o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(No.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){var r=new vi,a=new Io(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var o=0;function s(n){a.load(e[n],function(e){r.images[n]=e,6===++o&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(var c=0;c<e.length;++c)s(c);return r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Oo.prototype,{crossOrigin:"Anonymous",load:function(e,t,n,i){var r=new rn,a=new Io(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(n){r.image=n;var i=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);r.format=i?Xe:Ye,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(Uo.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){var n=this.getUtoTmapping(e);return this.getPoint(n,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),a=0;for(i.push(0),n=1;n<=e;n++)a+=(t=this.getPoint(n/e)).distanceTo(r),i.push(a),r=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,a=i.length;n=t||e*i[a-1];for(var o,s=0,c=a-1;s<=c;)if((o=i[r=Math.floor(s+(c-s)/2)]-n)<0)s=r+1;else{if(!(o>0)){c=r;break}c=r-1}if(i[r=c]===n)return r/(a-1);var l=i[r];return(r+(n-l)/(i[r+1]-l))/(a-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var i=this.getPoint(t);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,i,r,a=new qt,o=[],s=[],c=[],l=new qt,u=new Xt;for(n=0;n<=e;n++)i=n/e,o[n]=this.getTangentAt(i),o[n].normalize();s[0]=new qt,c[0]=new qt;var h=Number.MAX_VALUE,d=Math.abs(o[0].x),f=Math.abs(o[0].y),p=Math.abs(o[0].z);for(d<=h&&(h=d,a.set(1,0,0)),f<=h&&(h=f,a.set(0,1,0)),p<=h&&a.set(0,0,1),l.crossVectors(o[0],a).normalize(),s[0].crossVectors(o[0],l),c[0].crossVectors(o[0],s[0]),n=1;n<=e;n++)s[n]=s[n-1].clone(),c[n]=c[n-1].clone(),l.crossVectors(o[n-1],o[n]),l.length()>Number.EPSILON&&(l.normalize(),r=Math.acos(jt.clamp(o[n-1].dot(o[n]),-1,1)),s[n].applyMatrix4(u.makeRotationAxis(l,r))),c[n].crossVectors(o[n],s[n]);if(!0===t)for(r=Math.acos(jt.clamp(s[0].dot(s[e]),-1,1)),r/=e,o[0].dot(l.crossVectors(s[0],s[e]))>0&&(r=-r),n=1;n<=e;n++)s[n].applyMatrix4(u.makeRotationAxis(o[n],r*n)),c[n].crossVectors(o[n],s[n]);return{tangents:o,normals:s,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),Do.prototype=Object.create(Uo.prototype),Do.prototype.constructor=Do,Do.prototype.isEllipseCurve=!0,Do.prototype.getPoint=function(e,t){for(var n=t||new Wt,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,a=Math.abs(r)<Number.EPSILON;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=a?0:i),!0!==this.aClockwise||a||(r===i?r=-i:r-=i);var o=this.aStartAngle+e*r,s=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){var l=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=s-this.aX,d=c-this.aY;s=h*l-d*u+this.aX,c=h*u+d*l+this.aY}return n.set(s,c)},Do.prototype.copy=function(e){return Uo.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},Do.prototype.toJSON=function(){var e=Uo.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},Do.prototype.fromJSON=function(e){return Uo.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},zo.prototype=Object.create(Do.prototype),zo.prototype.constructor=zo,zo.prototype.isArcCurve=!0;var Bo=new qt,Go=new ko,Ho=new ko,Vo=new ko;function jo(e,t,n,i){Uo.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=n||"centripetal",this.tension=i||.5}function Wo(e,t,n,i,r){var a=.5*(i-t),o=.5*(r-n),s=e*e;return(2*n-2*i+a+o)*(e*s)+(-3*n+3*i-2*a-o)*s+a*e+n}function Xo(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function Yo(e,t,n,i,r){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}function qo(e,t,n,i){Uo.call(this),this.type="CubicBezierCurve",this.v0=e||new Wt,this.v1=t||new Wt,this.v2=n||new Wt,this.v3=i||new Wt}function Qo(e,t,n,i){Uo.call(this),this.type="CubicBezierCurve3",this.v0=e||new qt,this.v1=t||new qt,this.v2=n||new qt,this.v3=i||new qt}function Zo(e,t){Uo.call(this),this.type="LineCurve",this.v1=e||new Wt,this.v2=t||new Wt}function $o(e,t){Uo.call(this),this.type="LineCurve3",this.v1=e||new qt,this.v2=t||new qt}function Jo(e,t,n){Uo.call(this),this.type="QuadraticBezierCurve",this.v0=e||new Wt,this.v1=t||new Wt,this.v2=n||new Wt}function Ko(e,t,n){Uo.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new qt,this.v1=t||new qt,this.v2=n||new qt}function es(e){Uo.call(this),this.type="SplineCurve",this.points=e||[]}jo.prototype=Object.create(Uo.prototype),jo.prototype.constructor=jo,jo.prototype.isCatmullRomCurve3=!0,jo.prototype.getPoint=function(e,t){var n,i,r,a,o=t||new qt,s=this.points,c=s.length,l=(c-(this.closed?0:1))*e,u=Math.floor(l),h=l-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/s.length)+1)*s.length:0===h&&u===c-1&&(u=c-2,h=1),this.closed||u>0?n=s[(u-1)%c]:(Bo.subVectors(s[0],s[1]).add(s[0]),n=Bo),i=s[u%c],r=s[(u+1)%c],this.closed||u+2<c?a=s[(u+2)%c]:(Bo.subVectors(s[c-1],s[c-2]).add(s[c-1]),a=Bo),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,f=Math.pow(n.distanceToSquared(i),d),p=Math.pow(i.distanceToSquared(r),d),m=Math.pow(r.distanceToSquared(a),d);p<1e-4&&(p=1),f<1e-4&&(f=p),m<1e-4&&(m=p),Go.initNonuniformCatmullRom(n.x,i.x,r.x,a.x,f,p,m),Ho.initNonuniformCatmullRom(n.y,i.y,r.y,a.y,f,p,m),Vo.initNonuniformCatmullRom(n.z,i.z,r.z,a.z,f,p,m)}else"catmullrom"===this.curveType&&(Go.initCatmullRom(n.x,i.x,r.x,a.x,this.tension),Ho.initCatmullRom(n.y,i.y,r.y,a.y,this.tension),Vo.initCatmullRom(n.z,i.z,r.z,a.z,this.tension));return o.set(Go.calc(h),Ho.calc(h),Vo.calc(h)),o},jo.prototype.copy=function(e){Uo.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},jo.prototype.toJSON=function(){var e=Uo.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},jo.prototype.fromJSON=function(e){Uo.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new qt).fromArray(i))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},qo.prototype=Object.create(Uo.prototype),qo.prototype.constructor=qo,qo.prototype.isCubicBezierCurve=!0,qo.prototype.getPoint=function(e,t){var n=t||new Wt,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Yo(e,i.x,r.x,a.x,o.x),Yo(e,i.y,r.y,a.y,o.y)),n},qo.prototype.copy=function(e){return Uo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},qo.prototype.toJSON=function(){var e=Uo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},qo.prototype.fromJSON=function(e){return Uo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Qo.prototype=Object.create(Uo.prototype),Qo.prototype.constructor=Qo,Qo.prototype.isCubicBezierCurve3=!0,Qo.prototype.getPoint=function(e,t){var n=t||new qt,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(Yo(e,i.x,r.x,a.x,o.x),Yo(e,i.y,r.y,a.y,o.y),Yo(e,i.z,r.z,a.z,o.z)),n},Qo.prototype.copy=function(e){return Uo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},Qo.prototype.toJSON=function(){var e=Uo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},Qo.prototype.fromJSON=function(e){return Uo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},Zo.prototype=Object.create(Uo.prototype),Zo.prototype.constructor=Zo,Zo.prototype.isLineCurve=!0,Zo.prototype.getPoint=function(e,t){var n=t||new Wt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},Zo.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},Zo.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Zo.prototype.copy=function(e){return Uo.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Zo.prototype.toJSON=function(){var e=Uo.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Zo.prototype.fromJSON=function(e){return Uo.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},$o.prototype=Object.create(Uo.prototype),$o.prototype.constructor=$o,$o.prototype.isLineCurve3=!0,$o.prototype.getPoint=function(e,t){var n=t||new qt;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n},$o.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},$o.prototype.copy=function(e){return Uo.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},$o.prototype.toJSON=function(){var e=Uo.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},$o.prototype.fromJSON=function(e){return Uo.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Jo.prototype=Object.create(Uo.prototype),Jo.prototype.constructor=Jo,Jo.prototype.isQuadraticBezierCurve=!0,Jo.prototype.getPoint=function(e,t){var n=t||new Wt,i=this.v0,r=this.v1,a=this.v2;return n.set(Xo(e,i.x,r.x,a.x),Xo(e,i.y,r.y,a.y)),n},Jo.prototype.copy=function(e){return Uo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Jo.prototype.toJSON=function(){var e=Uo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Jo.prototype.fromJSON=function(e){return Uo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},Ko.prototype=Object.create(Uo.prototype),Ko.prototype.constructor=Ko,Ko.prototype.isQuadraticBezierCurve3=!0,Ko.prototype.getPoint=function(e,t){var n=t||new qt,i=this.v0,r=this.v1,a=this.v2;return n.set(Xo(e,i.x,r.x,a.x),Xo(e,i.y,r.y,a.y),Xo(e,i.z,r.z,a.z)),n},Ko.prototype.copy=function(e){return Uo.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},Ko.prototype.toJSON=function(){var e=Uo.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},Ko.prototype.fromJSON=function(e){return Uo.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},es.prototype=Object.create(Uo.prototype),es.prototype.constructor=es,es.prototype.isSplineCurve=!0,es.prototype.getPoint=function(e,t){var n=t||new Wt,i=this.points,r=(i.length-1)*e,a=Math.floor(r),o=r-a,s=i[0===a?a:a-1],c=i[a],l=i[a>i.length-2?i.length-1:a+1],u=i[a>i.length-3?i.length-1:a+2];return n.set(Wo(o,s.x,c.x,l.x,u.x),Wo(o,s.y,c.y,l.y,u.y)),n},es.prototype.copy=function(e){Uo.prototype.copy.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push(i.clone())}return this},es.prototype.toJSON=function(){var e=Uo.prototype.toJSON.call(this);e.points=[];for(var t=0,n=this.points.length;t<n;t++){var i=this.points[t];e.points.push(i.toArray())}return e},es.prototype.fromJSON=function(e){Uo.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;t<n;t++){var i=e.points[t];this.points.push((new Wt).fromArray(i))}return this};var ts=Object.freeze({ArcCurve:zo,CatmullRomCurve3:jo,CubicBezierCurve:qo,CubicBezierCurve3:Qo,EllipseCurve:Do,LineCurve:Zo,LineCurve3:$o,QuadraticBezierCurve:Jo,QuadraticBezierCurve3:Ko,SplineCurve:es});function ns(){Uo.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function is(e){ns.call(this),this.type="Path",this.currentPoint=new Wt,e&&this.setFromPoints(e)}function rs(e){is.call(this,e),this.uuid=jt.generateUUID(),this.type="Shape",this.holes=[]}function as(e,t){Cn.call(this),this.type="Light",this.color=new vn(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function os(e,t,n){as.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(Cn.DefaultUp),this.updateMatrix(),this.groundColor=new vn(t)}function ss(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new Wt(512,512),this.map=null,this.matrix=new Xt}function cs(){ss.call(this,new Or(50,1,.5,500))}function ls(e,t,n,i,r,a){as.call(this,e,t),this.type="SpotLight",this.position.copy(Cn.DefaultUp),this.updateMatrix(),this.target=new Cn,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new cs}function us(e,t,n,i){as.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new ss(new Or(90,1,.5,500))}function hs(){ss.call(this,new Rn(-5,5,5,-5,.5,500))}function ds(e,t){as.call(this,e,t),this.type="DirectionalLight",this.position.copy(Cn.DefaultUp),this.updateMatrix(),this.target=new Cn,this.shadow=new hs}function fs(e,t){as.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function ps(e,t,n,i){as.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function ms(e,t,n,i){Ms.call(this,e,t,n,i)}function gs(e,t,n){Ms.call(this,e,t,n)}function vs(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}function ys(e,t,n,i){vs.call(this,e,t,n,i)}function xs(e,t,n,i){Ms.call(this,e,t,n,i)}function _s(e,t,n,i){Ms.call(this,e,t,n,i)}function bs(e,t,n,i){Ms.call(this,e,t,n,i)}function ws(e,t,n,i){vs.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Es(e,t,n,i){vs.call(this,e,t,n,i)}function Ts(e,t,n,i){vs.call(this,e,t,n,i)}ns.prototype=Object.assign(Object.create(Uo.prototype),{constructor:ns,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Zo(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,a=this.curves[i],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*e:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),c=0;c<s.length;c++){var l=s[c];t&&t.equals(l)||(n.push(l),t=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(e){Uo.prototype.copy.call(this,e),this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push(i.clone())}return this.autoClose=e.autoClose,this},toJSON:function(){var e=Uo.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,n=this.curves.length;t<n;t++){var i=this.curves[t];e.curves.push(i.toJSON())}return e},fromJSON:function(e){Uo.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,n=e.curves.length;t<n;t++){var i=e.curves[t];this.curves.push((new ts[i.type]).fromJSON(i))}return this}}),is.prototype=Object.assign(Object.create(ns.prototype),{constructor:is,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new Zo(this.currentPoint.clone(),new Wt(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){var r=new Jo(this.currentPoint.clone(),new Wt(e,t),new Wt(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,r,a){var o=new qo(this.currentPoint.clone(),new Wt(e,t),new Wt(n,i),new Wt(r,a));this.curves.push(o),this.currentPoint.set(r,a)},splineThru:function(e){var t=new es([this.currentPoint.clone()].concat(e));this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,n,i,r,a)},absarc:function(e,t,n,i,r,a){this.absellipse(e,t,n,n,i,r,a)},ellipse:function(e,t,n,i,r,a,o,s){var c=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(e+c,t+l,n,i,r,a,o,s)},absellipse:function(e,t,n,i,r,a,o,s){var c=new Do(e,t,n,i,r,a,o,s);if(this.curves.length>0){var l=c.getPoint(0);l.equals(this.currentPoint)||this.lineTo(l.x,l.y)}this.curves.push(c);var u=c.getPoint(1);this.currentPoint.copy(u)},copy:function(e){return ns.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=ns.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return ns.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),rs.prototype=Object.assign(Object.create(is.prototype),{constructor:rs,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){is.prototype.copy.call(this,e),this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push(i.clone())}return this},toJSON:function(){var e=is.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,n=this.holes.length;t<n;t++){var i=this.holes[t];e.holes.push(i.toJSON())}return e},fromJSON:function(e){is.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,n=e.holes.length;t<n;t++){var i=e.holes[t];this.holes.push((new is).fromJSON(i))}return this}}),as.prototype=Object.assign(Object.create(Cn.prototype),{constructor:as,isLight:!0,copy:function(e){return Cn.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=Cn.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),os.prototype=Object.assign(Object.create(as.prototype),{constructor:os,isHemisphereLight:!0,copy:function(e){return as.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(ss.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),cs.prototype=Object.assign(Object.create(ss.prototype),{constructor:cs,isSpotLightShadow:!0,update:function(e){var t=this.camera,n=2*jt.RAD2DEG*e.angle,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix())}}),ls.prototype=Object.assign(Object.create(as.prototype),{constructor:ls,isSpotLight:!0,copy:function(e){return as.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),us.prototype=Object.assign(Object.create(as.prototype),{constructor:us,isPointLight:!0,copy:function(e){return as.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),hs.prototype=Object.assign(Object.create(ss.prototype),{constructor:hs}),ds.prototype=Object.assign(Object.create(as.prototype),{constructor:ds,isDirectionalLight:!0,copy:function(e){return as.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),fs.prototype=Object.assign(Object.create(as.prototype),{constructor:fs,isAmbientLight:!0}),ps.prototype=Object.assign(Object.create(as.prototype),{constructor:ps,isRectAreaLight:!0,copy:function(e){return as.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){var t=as.prototype.toJSON.call(this,e);return t.object.width=this.width,t.object.height=this.height,t}}),ms.prototype=Object.assign(Object.create(Ms.prototype),{constructor:ms,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:St,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),gs.prototype=Object.assign(Object.create(Ms.prototype),{constructor:gs,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:St,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(vs.prototype,{evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var a;n:{i:if(!(e<i)){for(var o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===o)break;if(r=i,e<(i=t[++n]))break t}a=t.length;break n}if(e>=r)break e;var s=t[1];e<s&&(n=2,r=s);for(o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===o)break;if(i=r,e>=(r=t[--n-1]))break t}a=n,n=0}for(;n<a;){var c=n+a>>>1;e<t[c]?a=c:n=c+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,a=0;a!==i;++a)t[a]=n[r+a];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(vs.prototype,{beforeStart_:vs.prototype.copySampleValue_,afterEnd_:vs.prototype.copySampleValue_}),ys.prototype=Object.assign(Object.create(vs.prototype),{constructor:ys,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=(n-t)/(i-t),l=s+o;s!==l;s+=4)Yt.slerpFlat(r,0,a,s-o,a,s,c);return r}}),xs.prototype=Object.assign(Object.create(Ms.prototype),{constructor:xs,ValueTypeName:"quaternion",DefaultInterpolation:Mt,InterpolantFactoryMethodLinear:function(e){return new ys(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),_s.prototype=Object.assign(Object.create(Ms.prototype),{constructor:_s,ValueTypeName:"color"}),bs.prototype=Object.assign(Object.create(Ms.prototype),{constructor:bs,ValueTypeName:"number"}),ws.prototype=Object.assign(Object.create(vs.prototype),{constructor:ws,DefaultSettings_:{endingStart:Lt,endingEnd:Lt},intervalChanged_:function(e,t,n){var i=this.parameterPositions,r=e-2,a=e+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case Ct:r=e,o=2*t-n;break;case Pt:o=t+i[r=i.length-2]-i[r+1];break;default:r=e,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Ct:a=e,s=2*n-t;break;case Pt:a=1,s=n+i[1]-i[0];break;default:a=e-1,s=t}var c=.5*(n-t),l=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(s-n),this._offsetPrev=r*l,this._offsetNext=a*l},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(i-t),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,x=d*m-d*p,_=0;_!==o;++_)r[_]=g*a[l+_]+v*a[c+_]+y*a[s+_]+x*a[u+_];return r}}),Es.prototype=Object.assign(Object.create(vs.prototype),{constructor:Es,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=(n-t)/(i-t),u=1-l,h=0;h!==o;++h)r[h]=a[c+h]*u+a[s+h]*l;return r}}),Ts.prototype=Object.assign(Object.create(vs.prototype),{constructor:Ts,interpolate_:function(e){return this.copySampleValue_(e-1)}});var Ss={arraySlice:function(e,t,n){return Ss.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*t,c=0;c!==t;++c)r[o++]=e[s+c];return r},flattenJSON:function(e,t,n,i){for(var r=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[i])&&(t.push(a.time),n.push.apply(n,o)),a=e[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[i])&&(t.push(a.time),o.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{void 0!==(o=a[i])&&(t.push(a.time),n.push(o)),a=e[r++]}while(void 0!==a)}}};function Ms(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ss.convertArray(t,this.TimeBufferType),this.values=Ss.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation),this.validate(),this.optimize()}function As(e,t,n,i){Ms.call(this,e,t,n,i)}function Ls(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=jt.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}function Cs(e){this.manager=void 0!==e?e:Lo,this.textures={}}function Ps(e){this.manager=void 0!==e?e:Lo}Object.assign(Ms,{parse:function(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Ms._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],i=[];Ss.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:Ss.convertArray(e.times,Array),values:Ss.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return bs;case"vector":case"vector2":case"vector3":case"vector4":return As;case"color":return _s;case"quaternion":return xs;case"bool":case"boolean":return gs;case"string":return ms}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(Ms.prototype,{constructor:Ms,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:Mt,InterpolantFactoryMethodDiscrete:function(e){return new Ts(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Es(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new ws(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case St:t=this.InterpolantFactoryMethodDiscrete;break;case Mt:t=this.InterpolantFactoryMethodLinear;break;case At:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",n)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return St;case this.InterpolantFactoryMethodLinear:return Mt;case this.InterpolantFactoryMethodSmooth:return At}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<e;)++r;for(;-1!==a&&n[a]>t;)--a;if(++a,0!==r||a!==i){r>=a&&(r=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=Ss.arraySlice(n,r,a),this.values=Ss.arraySlice(this.values,r*o,a*o)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,s),e=!1;break}if(null!==a&&a>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,s,a),e=!1;break}a=s}if(void 0!==i&&Ss.isTypedArray(i)){o=0;for(var c=i.length;o!==c;++o){var l=i[o];if(isNaN(l)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,l),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=this.getInterpolation()===At,r=1,a=e.length-1,o=1;o<a;++o){var s=!1,c=e[o];if(c!==e[o+1]&&(1!==o||c!==c[0]))if(i)s=!0;else for(var l=o*n,u=l-n,h=l+n,d=0;d!==n;++d){var f=t[l+d];if(f!==t[u+d]||f!==t[h+d]){s=!0;break}}if(s){if(o!==r){e[r]=e[o];var p=o*n,m=r*n;for(d=0;d!==n;++d)t[m+d]=t[p+d]}++r}}if(a>0){e[r]=e[a];for(p=a*n,m=r*n,d=0;d!==n;++d)t[m+d]=t[p+d];++r}return r!==e.length&&(this.times=Ss.arraySlice(e,0,r),this.values=Ss.arraySlice(t,0,r*n)),this}}),As.prototype=Object.assign(Object.create(Ms.prototype),{constructor:As,ValueTypeName:"vector"}),Object.assign(Ls,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,a=n.length;r!==a;++r)t.push(Ms.parse(n[r]).scale(i));return new Ls(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t},r=0,a=n.length;r!==a;++r)t.push(Ms.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,a=[],o=0;o<r;o++){var s=[],c=[];s.push((o+r-1)%r,o,(o+1)%r),c.push(0,1,0);var l=Ss.getKeyframeOrder(s);s=Ss.sortedArray(s,1,l),c=Ss.sortedArray(c,1,l),i||0!==s[0]||(s.push(r),c.push(c[0])),a.push(new bs(".morphTargetInfluences["+t[o].name+"]",s,c).scale(1/n))}return new Ls(e,-1,a)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],c=s.name.match(r);if(c&&c.length>1){var l=i[h=c[1]];l||(i[h]=l=[]),l.push(s)}}var u=[];for(var h in i)u.push(Ls.CreateFromMorphTargetSequence(h,i[h],t,n));return u},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var a=[],o=[];Ss.flattenJSON(n,a,o,i),0!==a.length&&r.push(new e(t,a,o))}},i=[],r=e.name||"default",a=e.length||-1,o=e.fps||30,s=e.hierarchy||[],c=0;c<s.length;c++){var l=s[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){for(var u={},h=0;h<l.length;h++)if(l[h].morphTargets)for(var d=0;d<l[h].morphTargets.length;d++)u[l[h].morphTargets[d]]=-1;for(var f in u){var p=[],m=[];for(d=0;d!==l[h].morphTargets.length;++d){var g=l[h];p.push(g.time),m.push(g.morphTarget===f?1:0)}i.push(new bs(".morphTargetInfluence["+f+"]",p,m))}a=u.length*(o||1)}else{var v=".bones["+t[c].name+"]";n(As,v+".position",l,"pos",i),n(xs,v+".quaternion",l,"rot",i),n(As,v+".scale",l,"scl",i)}}return 0===i.length?null:new Ls(r,a,i)}}),Object.assign(Ls.prototype,{resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(Cs.prototype,{load:function(e,t,n,i){var r=this;new Po(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var i=new So[e.type];if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&i.specular.setHex(e.specular),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearCoat&&(i.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(i.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(i.uniforms=e.uniforms),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(i.vertexColors=e.vertexColors),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.side&&(i.side=e.side),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(i.skinning=e.skinning),void 0!==e.morphTargets&&(i.morphTargets=e.morphTargets),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.shading&&(i.flatShading=1===e.shading),void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap),i.transparent=!0),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalScale){var r=e.normalScale;!1===Array.isArray(r)&&(r=[r,r]),i.normalScale=(new Wt).fromArray(r)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),i}}),Object.assign(Ps.prototype,{load:function(e,t,n,i){var r=this;new Po(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=new Zn,n=e.data.index;if(void 0!==n){var i=new Os[n.type](n.array);t.setIndex(new Dn(i,1))}var r=e.data.attributes;for(var a in r){var o=r[a];i=new Os[o.type](o.array);t.addAttribute(a,new Dn(i,o.itemSize,o.normalized))}var s=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==s)for(var c=0,l=s.length;c!==l;++c){var u=s[c];t.addGroup(u.start,u.count,u.materialIndex)}var h=e.data.boundingSphere;if(void 0!==h){var d=new qt;void 0!==h.center&&d.fromArray(h.center),t.boundingSphere=new un(d,h.radius)}return t}});var Rs,Fs,Is,Ns,Os={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Us(){}Us.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,i=t.length;n<i;n+=2){var r=t[n],a=t[n+1];if(r.test(e))return a}return null}},Object.assign(Us.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,n){for(var i=[],r=0;r<e.length;++r)i[r]=this.createMaterial(e[r],t,n);return i},createMaterial:(Rs={NoBlending:F,NormalBlending:I,AdditiveBlending:N,SubtractiveBlending:O,MultiplyBlending:U,CustomBlending:D},Fs=new vn,Is=new Oo,Ns=new Cs,function(e,t,n){var i={};function r(e,r,a,o,s){var c,l=t+e,u=Us.Handlers.get(l);null!==u?c=u.load(l):(Is.setCrossOrigin(n),c=Is.load(l)),void 0!==r&&(c.repeat.fromArray(r),1!==r[0]&&(c.wrapS=Te),1!==r[1]&&(c.wrapT=Te)),void 0!==a&&c.offset.fromArray(a),void 0!==o&&("repeat"===o[0]&&(c.wrapS=Te),"mirror"===o[0]&&(c.wrapS=Me),"repeat"===o[1]&&(c.wrapT=Te),"mirror"===o[1]&&(c.wrapT=Me)),void 0!==s&&(c.anisotropy=s);var h=jt.generateUUID();return i[h]=c,h}var a={uuid:jt.generateUUID(),type:"MeshLambertMaterial"};for(var o in e){var s=e[o];switch(o){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":a.name=s;break;case"blending":a.blending=Rs[s];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",o,"is no longer supported.");break;case"colorDiffuse":a.color=Fs.fromArray(s).getHex();break;case"colorSpecular":a.specular=Fs.fromArray(s).getHex();break;case"colorEmissive":a.emissive=Fs.fromArray(s).getHex();break;case"specularCoef":a.shininess=s;break;case"shading":"basic"===s.toLowerCase()&&(a.type="MeshBasicMaterial"),"phong"===s.toLowerCase()&&(a.type="MeshPhongMaterial"),"standard"===s.toLowerCase()&&(a.type="MeshStandardMaterial");break;case"mapDiffuse":a.map=r(s,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":a.emissiveMap=r(s,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":a.lightMap=r(s,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":a.aoMap=r(s,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":a.bumpMap=r(s,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":a.bumpScale=s;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":a.normalMap=r(s,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":a.normalScale=s;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":a.specularMap=r(s,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":a.metalnessMap=r(s,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":a.roughnessMap=r(s,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":a.alphaMap=r(s,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":a.side=S;break;case"doubleSided":a.side=M;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),a.opacity=s;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":a[o]=s;break;case"vertexColors":!0===s&&(a.vertexColors=R),"face"===s&&(a.vertexColors=P);break;default:console.error("THREE.Loader.createMaterial: Unsupported",o,s)}}return"MeshBasicMaterial"===a.type&&delete a.emissive,"MeshPhongMaterial"!==a.type&&delete a.specular,a.opacity<1&&(a.transparent=!0),Ns.setTextures(i),Ns.parse(a)})});var Ds={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")}};function zs(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:Lo,this.withCredentials=!1}function ks(e){this.manager=void 0!==e?e:Lo,this.texturePath=""}Object.assign(zs.prototype,{load:function(e,t,n,i){var r=this,a=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:Ds.extractUrlBase(e),o=new Po(this.manager);o.setWithCredentials(this.withCredentials),o.load(e,function(n){var i=JSON.parse(n),o=i.metadata;if(void 0!==o){var s=o.type;if(void 0!==s&&"object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.")}var c=r.parse(i,a);t(c.geometry,c.materials)},n,i)},setTexturePath:function(e){this.texturePath=e},parse:function(){return function(e,t){void 0!==e.data&&(e=e.data),void 0!==e.scale?e.scale=1/e.scale:e.scale=1;var n=new Un;return function(e,t){function n(e,t){return e&1<<t}var i,r,a,o,s,c,l,u,h,d,f,p,m,g,v,y,x,_,b,w,E,T,S,M,A,L=e.faces,C=e.vertices,P=e.normals,R=e.colors,F=e.scale,I=0;if(void 0!==e.uvs){for(i=0;i<e.uvs.length;i++)e.uvs[i].length&&I++;for(i=0;i<I;i++)t.faceVertexUvs[i]=[]}for(o=0,s=C.length;o<s;)(_=new qt).x=C[o++]*F,_.y=C[o++]*F,_.z=C[o++]*F,t.vertices.push(_);for(o=0,s=L.length;o<s;)if(f=n(d=L[o++],0),p=n(d,1),m=n(d,3),g=n(d,4),v=n(d,5),y=n(d,6),x=n(d,7),f){if((w=new Fn).a=L[o],w.b=L[o+1],w.c=L[o+3],(E=new Fn).a=L[o+1],E.b=L[o+2],E.c=L[o+3],o+=4,p&&(h=L[o++],w.materialIndex=h,E.materialIndex=h),a=t.faces.length,m)for(i=0;i<I;i++)for(M=e.uvs[i],t.faceVertexUvs[i][a]=[],t.faceVertexUvs[i][a+1]=[],r=0;r<4;r++)A=new Wt(M[2*(u=L[o++])],M[2*u+1]),2!==r&&t.faceVertexUvs[i][a].push(A),0!==r&&t.faceVertexUvs[i][a+1].push(A);if(g&&(l=3*L[o++],w.normal.set(P[l++],P[l++],P[l]),E.normal.copy(w.normal)),v)for(i=0;i<4;i++)l=3*L[o++],S=new qt(P[l++],P[l++],P[l]),2!==i&&w.vertexNormals.push(S),0!==i&&E.vertexNormals.push(S);if(y&&(T=R[c=L[o++]],w.color.setHex(T),E.color.setHex(T)),x)for(i=0;i<4;i++)T=R[c=L[o++]],2!==i&&w.vertexColors.push(new vn(T)),0!==i&&E.vertexColors.push(new vn(T));t.faces.push(w),t.faces.push(E)}else{if((b=new Fn).a=L[o++],b.b=L[o++],b.c=L[o++],p&&(h=L[o++],b.materialIndex=h),a=t.faces.length,m)for(i=0;i<I;i++)for(M=e.uvs[i],t.faceVertexUvs[i][a]=[],r=0;r<3;r++)A=new Wt(M[2*(u=L[o++])],M[2*u+1]),t.faceVertexUvs[i][a].push(A);if(g&&(l=3*L[o++],b.normal.set(P[l++],P[l++],P[l])),v)for(i=0;i<3;i++)l=3*L[o++],S=new qt(P[l++],P[l++],P[l]),b.vertexNormals.push(S);if(y&&(c=L[o++],b.color.setHex(R[c])),x)for(i=0;i<3;i++)c=L[o++],b.vertexColors.push(new vn(R[c]));t.faces.push(b)}}(e,n),function(e,t){var n=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,r=e.skinWeights.length;i<r;i+=n){var a=e.skinWeights[i],o=n>1?e.skinWeights[i+1]:0,s=n>2?e.skinWeights[i+2]:0,c=n>3?e.skinWeights[i+3]:0;t.skinWeights.push(new an(a,o,s,c))}if(e.skinIndices)for(i=0,r=e.skinIndices.length;i<r;i+=n){var l=e.skinIndices[i],u=n>1?e.skinIndices[i+1]:0,h=n>2?e.skinIndices[i+2]:0,d=n>3?e.skinIndices[i+3]:0;t.skinIndices.push(new an(l,u,h,d))}t.bones=e.bones,t.bones&&t.bones.length>0&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}(e,n),function(e,t){var n=e.scale;if(void 0!==e.morphTargets)for(var i=0,r=e.morphTargets.length;i<r;i++){t.morphTargets[i]={},t.morphTargets[i].name=e.morphTargets[i].name,t.morphTargets[i].vertices=[];for(var a=t.morphTargets[i].vertices,o=e.morphTargets[i].vertices,s=0,c=o.length;s<c;s+=3){var l=new qt;l.x=o[s]*n,l.y=o[s+1]*n,l.z=o[s+2]*n,a.push(l)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');var u=t.faces,h=e.morphColors[0].colors;for(i=0,r=u.length;i<r;i++)u[i].color.fromArray(h,3*i)}}(e,n),function(e,t){var n=[],i=[];void 0!==e.animation&&i.push(e.animation),void 0!==e.animations&&(e.animations.length?i=i.concat(e.animations):i.push(e.animations));for(var r=0;r<i.length;r++){var a=Ls.parseAnimation(i[r],t.bones);a&&n.push(a)}if(t.morphTargets){var o=Ls.CreateClipsFromMorphTargetSequences(t.morphTargets,10);n=n.concat(o)}n.length>0&&(t.animations=n)}(e,n),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:n}:{geometry:n,materials:Us.prototype.initMaterials(e.materials,t,this.crossOrigin)}}}()}),Object.assign(ks.prototype,{load:function(e,t,n,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var r=this;new Po(r.manager).load(e,function(n){var a=null;try{a=JSON.parse(n)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},n,i)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseShape(e.shapes),i=this.parseGeometries(e.geometries,n),r=this.parseImages(e.images,function(){void 0!==t&&t(s)}),a=this.parseTextures(e.textures,r),o=this.parseMaterials(e.materials,a),s=this.parseObject(e.object,i,o);return e.animations&&(s.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(s),s},parseShape:function(e){var t={};if(void 0!==e)for(var n=0,i=e.length;n<i;n++){var r=(new rs).fromJSON(e[n]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var n={};if(void 0!==e)for(var i=new zs,r=new Ps,a=0,o=e.length;a<o;a++){var s,c=e[a];switch(c.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new mo[c.type](c.width,c.height,c.widthSegments,c.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new mo[c.type](c.width,c.height,c.depth,c.widthSegments,c.heightSegments,c.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new mo[c.type](c.radius,c.segments,c.thetaStart,c.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new mo[c.type](c.radiusTop,c.radiusBottom,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new mo[c.type](c.radius,c.height,c.radialSegments,c.heightSegments,c.openEnded,c.thetaStart,c.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new mo[c.type](c.radius,c.widthSegments,c.heightSegments,c.phiStart,c.phiLength,c.thetaStart,c.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new mo[c.type](c.radius,c.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new mo[c.type](c.innerRadius,c.outerRadius,c.thetaSegments,c.phiSegments,c.thetaStart,c.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new mo[c.type](c.radius,c.tube,c.radialSegments,c.tubularSegments,c.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new mo[c.type](c.radius,c.tube,c.tubularSegments,c.radialSegments,c.p,c.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new mo[c.type](c.points,c.segments,c.phiStart,c.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new mo[c.type](c.vertices,c.indices,c.radius,c.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":var l=[];for(a=0,o=c.shapes.length;a<o;a++){var u=t[c.shapes[a]];l.push(u)}s=new mo[c.type](l,c.curveSegments);break;case"BufferGeometry":s=r.parse(c);break;case"Geometry":s=i.parse(c,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+c.type+'"');continue}s.uuid=c.uuid,void 0!==c.name&&(s.name=c.name),n[c.uuid]=s}return n},parseMaterials:function(e,t){var n={};if(void 0!==e){var i=new Cs;i.setTextures(t);for(var r=0,a=e.length;r<a;r++){var o=e[r];if("MultiMaterial"===o.type){for(var s=[],c=0;c<o.materials.length;c++)s.push(i.parse(o.materials[c]));n[o.uuid]=s}else n[o.uuid]=i.parse(o)}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=Ls.parse(e[n]);t.push(i)}return t},parseImages:function(e,t){var n=this,i={};function r(e){return n.manager.itemStart(e),a.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}if(void 0!==e&&e.length>0){var a=new Io(new Ao(t));a.setCrossOrigin(this.crossOrigin);for(var o=0,s=e.length;o<s;o++){var c=e[o],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.texturePath+c.url;i[c.uuid]=r(l)}}return i},parseTextures:function(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var i={};if(void 0!==e)for(var r=0,a=e.length;r<a;r++){var o=e[r];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=new rn(t[o.image]);s.needsUpdate=!0,s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=n(o.mapping,Gs)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.center&&s.center.fromArray(o.center),void 0!==o.rotation&&(s.rotation=o.rotation),void 0!==o.wrap&&(s.wrapS=n(o.wrap[0],Hs),s.wrapT=n(o.wrap[1],Hs)),void 0!==o.format&&(s.format=o.format),void 0!==o.minFilter&&(s.minFilter=n(o.minFilter,Vs)),void 0!==o.magFilter&&(s.magFilter=n(o.magFilter,Vs)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),i[o.uuid]=s}return i},parseObject:function(e,t,n){var i;function r(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function a(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],i=0,r=e.length;i<r;i++){var a=e[i];void 0===n[a]&&console.warn("THREE.ObjectLoader: Undefined material",a),t.push(n[a])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}switch(e.type){case"Scene":i=new Gr,void 0!==e.background&&Number.isInteger(e.background)&&(i.background=new vn(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?i.fog=new Br(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(i.fog=new kr(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":i=new Or(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(i.focus=e.focus),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.filmGauge&&(i.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(i.filmOffset=e.filmOffset),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"OrthographicCamera":i=new Rn(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(i.zoom=e.zoom),void 0!==e.view&&(i.view=Object.assign({},e.view));break;case"AmbientLight":i=new fs(e.color,e.intensity);break;case"DirectionalLight":i=new ds(e.color,e.intensity);break;case"PointLight":i=new us(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":i=new ps(e.color,e.intensity,e.width,e.height);break;case"SpotLight":i=new ls(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":i=new os(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=r(e.geometry),s=a(e.material);i=o.bones&&o.bones.length>0?new Yr(o,s):new mi(o,s);break;case"LOD":i=new jr;break;case"Line":i=new Qr(r(e.geometry),a(e.material),e.mode);break;case"LineLoop":i=new $r(r(e.geometry),a(e.material));break;case"LineSegments":i=new Zr(r(e.geometry),a(e.material));break;case"PointCloud":case"Points":i=new Kr(r(e.geometry),a(e.material));break;case"Sprite":i=new Vr(a(e.material));break;case"Group":i=new ea;break;default:i=new Cn}if(i.uuid=e.uuid,void 0!==e.name&&(i.name=e.name),void 0!==e.matrix?(i.matrix.fromArray(e.matrix),i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==e.position&&i.position.fromArray(e.position),void 0!==e.rotation&&i.rotation.fromArray(e.rotation),void 0!==e.quaternion&&i.quaternion.fromArray(e.quaternion),void 0!==e.scale&&i.scale.fromArray(e.scale)),void 0!==e.castShadow&&(i.castShadow=e.castShadow),void 0!==e.receiveShadow&&(i.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(i.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(i.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&i.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(i.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.frustumCulled&&(i.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(i.renderOrder=e.renderOrder),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.children)for(var c=e.children,l=0;l<c.length;l++)i.add(this.parseObject(c[l],t,n));if("LOD"===e.type)for(var u=e.levels,h=0;h<u.length;h++){var d=u[h],f=i.getObjectByProperty("uuid",d.object);void 0!==f&&i.addLevel(f,d.distance)}return i}});var Bs,Gs={UVMapping:ge,CubeReflectionMapping:ve,CubeRefractionMapping:ye,EquirectangularReflectionMapping:xe,EquirectangularRefractionMapping:_e,SphericalReflectionMapping:be,CubeUVReflectionMapping:we,CubeUVRefractionMapping:Ee},Hs={RepeatWrapping:Te,ClampToEdgeWrapping:Se,MirroredRepeatWrapping:Me},Vs={NearestFilter:Ae,NearestMipMapNearestFilter:Le,NearestMipMapLinearFilter:Ce,LinearFilter:Pe,LinearMipMapNearestFilter:Re,LinearMipMapLinearFilter:Fe};function js(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:Lo,this.options=void 0}function Ws(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function Xs(e){this.type="Font",this.data=e}function Ys(e,t,n,i,r,a){var o=a.glyphs[e]||a.glyphs["?"];if(o){var s,c,l,u,h,d,f,p,m=new Ws;if(o.o)for(var g=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,y=g.length;v<y;){switch(g[v++]){case"m":s=g[v++]*n+i,c=g[v++]*n+r,m.moveTo(s,c);break;case"l":s=g[v++]*n+i,c=g[v++]*n+r,m.lineTo(s,c);break;case"q":l=g[v++]*n+i,u=g[v++]*n+r,h=g[v++]*n+i,d=g[v++]*n+r,m.quadraticCurveTo(h,d,l,u);break;case"b":l=g[v++]*n+i,u=g[v++]*n+r,h=g[v++]*n+i,d=g[v++]*n+r,f=g[v++]*n+i,p=g[v++]*n+r,m.bezierCurveTo(h,d,f,p,l,u)}}return{offsetX:o.ha*n,path:m}}}function qs(e){this.manager=void 0!==e?e:Lo}js.prototype={constructor:js,setOptions:function(e){return this.options=e,this},load:function(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var r=this,a=Mo.get(e);if(void 0!==a)return r.manager.itemStart(e),setTimeout(function(){t&&t(a),r.manager.itemEnd(e)},0),a;fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,r.options)}).then(function(n){Mo.add(e,n),t&&t(n),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemEnd(e),r.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(Ws.prototype,{moveTo:function(e,t){this.currentPath=new is,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,i){this.currentPath.quadraticCurveTo(e,t,n,i)},bezierCurveTo:function(e,t,n,i,r,a){this.currentPath.bezierCurveTo(e,t,n,i,r,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=new rs;a.curves=r.curves,t.push(a)}return t}function i(e,t){for(var n=t.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=t[r],s=t[a],c=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=t[a],c=-c,s=t[r],l=-l),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var u=l*(e.x-o.x)-c*(e.y-o.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return i}var r=Wa.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===t)return n(a);var o,s,c,l=[];if(1===a.length)return s=a[0],(c=new rs).curves=s.curves,l.push(c),l;var u=!r(a[0].getPoints());u=e?!u:u;var h,d,f=[],p=[],m=[],g=0;p[g]=void 0,m[g]=[];for(var v=0,y=a.length;v<y;v++)o=r(h=(s=a[v]).getPoints()),(o=e?!o:o)?(!u&&p[g]&&g++,p[g]={s:new rs,p:h},p[g].s.curves=s.curves,u&&g++,m[g]=[]):m[g].push({h:s,p:h[0]});if(!p[0])return n(a);if(p.length>1){for(var x=!1,_=[],b=0,w=p.length;b<w;b++)f[b]=[];for(b=0,w=p.length;b<w;b++)for(var E=m[b],T=0;T<E.length;T++){for(var S=E[T],M=!0,A=0;A<p.length;A++)i(S.p,p[A].p)&&(b!==A&&_.push({froms:b,tos:A,hole:T}),M?(M=!1,f[A].push(S)):x=!0);M&&f[b].push(S)}_.length>0&&(x||(m=f))}v=0;for(var L=p.length;v<L;v++){c=p[v].s,l.push(c);for(var C=0,P=(d=m[v]).length;C<P;C++)c.holes.push(d[C].h)}return l}}),Object.assign(Xs.prototype,{isFont:!0,generateShapes:function(e,t,n){void 0===t&&(t=100),void 0===n&&(n=4);for(var i=[],r=function(e,t,n,i){for(var r=String(e).split(""),a=t/i.resolution,o=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*a,s=[],c=0,l=0,u=0;u<r.length;u++){var h=r[u];if("\n"===h)c=0,l-=o;else{var d=Ys(h,n,a,c,l,i);c+=d.offsetX,s.push(d.path)}}return s}(e,t,n,this.data),a=0,o=r.length;a<o;a++)Array.prototype.push.apply(i,r[a].toShapes());return i}}),Object.assign(qs.prototype,{load:function(e,t,n,i){var r=this,a=new Po(this.manager);a.setPath(this.path),a.load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var i=r.parse(n);t&&t(i)},n,i)},parse:function(e){return new Xs(e)},setPath:function(e){return this.path=e,this}});var Qs,Zs,$s,Js,Ks,ec,tc,nc,ic,rc,ac={getContext:function(){return void 0===Bs&&(Bs=new(window.AudioContext||window.webkitAudioContext)),Bs},setContext:function(e){Bs=e}};function oc(e){this.manager=void 0!==e?e:Lo}function sc(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Or,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Or,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function cc(e,t,n){Cn.call(this),this.type="CubeCamera";var i=new Or(90,1,e,t);i.up.set(0,-1,0),i.lookAt(new qt(1,0,0)),this.add(i);var r=new Or(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new qt(-1,0,0)),this.add(r);var a=new Or(90,1,e,t);a.up.set(0,0,1),a.lookAt(new qt(0,1,0)),this.add(a);var o=new Or(90,1,e,t);o.up.set(0,0,-1),o.lookAt(new qt(0,-1,0)),this.add(o);var s=new Or(90,1,e,t);s.up.set(0,-1,0),s.lookAt(new qt(0,0,1)),this.add(s);var c=new Or(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new qt(0,0,-1)),this.add(c);var l={format:Xe,magFilter:Pe,minFilter:Pe};this.renderTarget=new sn(n,n,l),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,l=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,i,n),n.activeCubeFace=1,e.render(t,r,n),n.activeCubeFace=2,e.render(t,a,n),n.activeCubeFace=3,e.render(t,o,n),n.activeCubeFace=4,e.render(t,s,n),n.texture.generateMipmaps=l,n.activeCubeFace=5,e.render(t,c,n),e.setRenderTarget(null)},this.clear=function(e,t,n,i){for(var r=this.renderTarget,a=0;a<6;a++)r.activeCubeFace=a,e.setRenderTarget(r),e.clear(t,n,i);e.setRenderTarget(null)}}function lc(){Cn.call(this),this.type="AudioListener",this.context=ac.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function uc(e){Cn.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function hc(e){uc.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function dc(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function fc(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Object.assign(oc.prototype,{load:function(e,t,n,i){var r=new Po(this.manager);r.setResponseType("arraybuffer"),r.load(e,function(e){ac.getContext().decodeAudioData(e,function(e){t(e)})},n,i)}}),Object.assign(sc.prototype,{update:(ic=new Xt,rc=new Xt,function(e){if(Qs!==this||Zs!==e.focus||$s!==e.fov||Js!==e.aspect*this.aspect||Ks!==e.near||ec!==e.far||tc!==e.zoom||nc!==this.eyeSep){Qs=this,Zs=e.focus,$s=e.fov,Js=e.aspect*this.aspect,Ks=e.near,ec=e.far,tc=e.zoom;var t,n,i=e.projectionMatrix.clone(),r=(nc=this.eyeSep/2)*Ks/Zs,a=Ks*Math.tan(jt.DEG2RAD*$s*.5)/tc;rc.elements[12]=-nc,ic.elements[12]=nc,t=-a*Js+r,n=a*Js+r,i.elements[0]=2*Ks/(n-t),i.elements[8]=(n+t)/(n-t),this.cameraL.projectionMatrix.copy(i),t=-a*Js-r,n=a*Js-r,i.elements[0]=2*Ks/(n-t),i.elements[8]=(n+t)/(n-t),this.cameraR.projectionMatrix.copy(i)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(rc),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(ic)})}),cc.prototype=Object.create(Cn.prototype),cc.prototype.constructor=cc,lc.prototype=Object.assign(Object.create(Cn.prototype),{constructor:lc,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:function(){var e=new qt,t=new Yt,n=new qt,i=new qt;return function(r){Cn.prototype.updateMatrixWorld.call(this,r);var a=this.context.listener,o=this.up;this.matrixWorld.decompose(e,t,n),i.set(0,0,-1).applyQuaternion(t),a.positionX?(a.positionX.setValueAtTime(e.x,this.context.currentTime),a.positionY.setValueAtTime(e.y,this.context.currentTime),a.positionZ.setValueAtTime(e.z,this.context.currentTime),a.forwardX.setValueAtTime(i.x,this.context.currentTime),a.forwardY.setValueAtTime(i.y,this.context.currentTime),a.forwardZ.setValueAtTime(i.z,this.context.currentTime),a.upX.setValueAtTime(o.x,this.context.currentTime),a.upY.setValueAtTime(o.y,this.context.currentTime),a.upZ.setValueAtTime(o.z,this.context.currentTime)):(a.setPosition(e.x,e.y,e.z),a.setOrientation(i.x,i.y,i.z,o.x,o.y,o.z))}}()}),uc.prototype=Object.assign(Object.create(Cn.prototype),{constructor:uc,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}}),hc.prototype=Object.assign(Object.create(uc.prototype),{constructor:hc,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new qt;return function(t){Cn.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(dc.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}}),Object.assign(fc.prototype,{accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,r<1){var o=3*t;this._mixBufferRegion(n,i,o,1-r,t)}for(var s=t,c=t+t;s!==c;++s)if(n[s]!==n[s+t]){a.setValue(n,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=3*n;e.getValue(t,i);for(var r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,i){Yt.slerpFlat(e,t,e,t,e,n,i)},_lerp:function(e,t,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*i}}});var pc,mc,gc,vc,yc,xc,_c,bc,wc,Ec,Tc,Sc,Mc;function Ac(e,t,n){var i=n||Lc.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function Lc(e,t,n){this.path=t,this.parsedPath=n||Lc.parseTrackName(t),this.node=Lc.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function Cc(){this.uuid=jt.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Pc(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var i=t.tracks,r=i.length,a=new Array(r),o={endingStart:Lt,endingEnd:Lt},s=0;s!==r;++s){var c=i[s].createInterpolant(null);a[s]=c,c.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Et,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Rc(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Fc(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}function Ic(){Zn.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Nc(e,t,n,i){this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===i}function Oc(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Uc(e,t,n){Oc.call(this,e,t),this.meshPerAttribute=n||1}function Dc(e,t,n){Dn.call(this,e,t),this.meshPerAttribute=n||1}function zc(e,t,n,i){this.ray=new di(e,t),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function kc(e,t){return e.distance-t.distance}function Bc(e,t,n,i){if(!1!==e.visible&&(e.raycast(t,n),!0===i))for(var r=e.children,a=0,o=r.length;a<o;a++)Bc(r[a],t,n,!0)}function Gc(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function Hc(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}function Vc(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}function jc(e,t){this.min=void 0!==e?e:new Wt(1/0,1/0),this.max=void 0!==t?t:new Wt(-1/0,-1/0)}function Wc(e){Cn.call(this),this.material=e,this.render=function(){}}function Xc(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16711680,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var c=new Zn,l=new Wn(2*o*3,3);c.addAttribute("position",l),Zr.call(this,c,new qr({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function Yc(e,t){Cn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var n=new Zn,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,a=1;r<32;r++,a++){var o=r/32*Math.PI*2,s=a/32*Math.PI*2;i.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new Wn(i,3));var c=new qr({fog:!1});this.cone=new Zr(n,c),this.add(this.cone),this.update()}function qc(e){for(var t=function e(t){var n=[];t&&t.isBone&&n.push(t);for(var i=0;i<t.children.length;i++)n.push.apply(n,e(t.children[i]));return n}(e),n=new Zn,i=[],r=[],a=new vn(0,0,1),o=new vn(0,1,0),s=0;s<t.length;s++){var c=t[s];c.parent&&c.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.addAttribute("position",new Wn(i,3)),n.addAttribute("color",new Wn(r,3));var l=new qr({vertexColors:R,depthTest:!1,depthWrite:!1,transparent:!0});Zr.call(this,n,l),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Qc(e,t,n){this.light=e,this.light.updateMatrixWorld(),this.color=n;var i=new Ka(t,4,2),r=new ui({wireframe:!0,fog:!1});mi.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Zc(e,t){Cn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var n=new qr({fog:!1}),i=new Zn;i.addAttribute("position",new Dn(new Float32Array(15),3)),this.line=new Qr(i,n),this.add(this.line),this.update()}function $c(e,t,n){Cn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new da(t);i.rotateY(.5*Math.PI),this.material=new ui({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=R);var r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.addAttribute("color",new Dn(a,3)),this.add(new mi(i,this.material)),this.update()}function Jc(e,t,n,i){e=e||10,t=t||10,n=new vn(void 0!==n?n:4473924),i=new vn(void 0!==i?i:8947848);for(var r=t/2,a=e/t,o=e/2,s=[],c=[],l=0,u=0,h=-o;l<=t;l++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var d=l===r?n:i;d.toArray(c,u),u+=3,d.toArray(c,u),u+=3,d.toArray(c,u),u+=3,d.toArray(c,u),u+=3}var f=new Zn;f.addAttribute("position",new Wn(s,3)),f.addAttribute("color",new Wn(c,3));var p=new qr({vertexColors:R});Zr.call(this,f,p)}function Kc(e,t,n,i,r,a){e=e||10,t=t||16,n=n||8,i=i||64,r=new vn(void 0!==r?r:4473924),a=new vn(void 0!==a?a:8947848);var o,s,c,l,u,h,d,f=[],p=[];for(l=0;l<=t;l++)c=l/t*(2*Math.PI),o=Math.sin(c)*e,s=Math.cos(c)*e,f.push(0,0,0),f.push(o,0,s),d=1&l?r:a,p.push(d.r,d.g,d.b),p.push(d.r,d.g,d.b);for(l=0;l<=n;l++)for(d=1&l?r:a,h=e-e/n*l,u=0;u<i;u++)c=u/i*(2*Math.PI),o=Math.sin(c)*h,s=Math.cos(c)*h,f.push(o,0,s),p.push(d.r,d.g,d.b),c=(u+1)/i*(2*Math.PI),o=Math.sin(c)*h,s=Math.cos(c)*h,f.push(o,0,s),p.push(d.r,d.g,d.b);var m=new Zn;m.addAttribute("position",new Wn(f,3)),m.addAttribute("color",new Wn(p,3));var g=new qr({vertexColors:R});Zr.call(this,m,g)}function el(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16776960,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var c=new Zn,l=new Wn(2*o*3,3);c.addAttribute("position",l),Zr.call(this,c,new qr({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}function tl(e,t,n){Cn.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===t&&(t=1);var i=new Zn;i.addAttribute("position",new Wn([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new qr({fog:!1});this.lightPlane=new Qr(i,r),this.add(this.lightPlane),(i=new Zn).addAttribute("position",new Wn([0,0,0,0,0,1],3)),this.targetLine=new Qr(i,r),this.add(this.targetLine),this.update()}function nl(e){var t=new Zn,n=new qr({color:16777215,vertexColors:P}),i=[],r=[],a={},o=new vn(16755200),s=new vn(16711680),c=new vn(43775),l=new vn(16777215),u=new vn(3355443);function h(e,t,n){d(e,n),d(t,n)}function d(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===a[e]&&(a[e]=[]),a[e].push(i.length/3-1)}h("n1","n2",o),h("n2","n4",o),h("n4","n3",o),h("n3","n1",o),h("f1","f2",o),h("f2","f4",o),h("f4","f3",o),h("f3","f1",o),h("n1","f1",o),h("n2","f2",o),h("n3","f3",o),h("n4","f4",o),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",c),h("u2","u3",c),h("u3","u1",c),h("c","t",l),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),t.addAttribute("position",new Wn(i,3)),t.addAttribute("color",new Wn(r,3)),Zr.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update()}function il(e,t){this.object=e,void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Zn;r.setIndex(new Dn(n,1)),r.addAttribute("position",new Dn(i,3)),Zr.call(this,r,new qr({color:t})),this.matrixAutoUpdate=!1,this.update()}function rl(e,t){this.type="Box3Helper",this.box=e;var n=void 0!==t?t:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Zn;r.setIndex(new Dn(i,1)),r.addAttribute("position",new Wn([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Zr.call(this,r,new qr({color:n})),this.geometry.computeBoundingSphere()}function al(e,t,n){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t;var i=void 0!==n?n:16776960,r=new Zn;r.addAttribute("position",new Wn([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),Qr.call(this,r,new qr({color:i}));var a=new Zn;a.addAttribute("position",new Wn([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new mi(a,new ui({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function ol(e,t,n,i,r,a){Cn.call(this),void 0===i&&(i=16776960),void 0===n&&(n=1),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===Ec&&((Ec=new Zn).addAttribute("position",new Wn([0,0,0,0,1,0],3)),(Tc=new lo(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new Qr(Ec,new qr({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new mi(Tc,new ui({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,a)}function sl(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Zn;n.addAttribute("position",new Wn(t,3)),n.addAttribute("color",new Wn([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new qr({vertexColors:R});Zr.call(this,n,i)}function cl(e,t,n,i,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Fn(e,t,n,r,a,o)}Object.assign(Ac.prototype,{getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}),Object.assign(Lc,{Composite:Ac,create:function(e,t,n){return e&&e.isAnimationObjectGroup?new Lc.Composite(e,t,n):new Lc(e,t,n)},sanitizeNodeName:(wc=new RegExp("[\\[\\]\\.:\\/]","g"),function(e){return e.replace(/\s/g,"_").replace(wc,"")}),parseTrackName:(pc="[^\\[\\]\\.:\\/]",mc="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",gc=/((?:WC+[\/:])*)/.source.replace("WC",pc),vc=/(WCOD+)?/.source.replace("WCOD",mc),yc=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",pc),xc=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",pc),_c=new RegExp("^"+gc+vc+yc+xc+"$"),bc=["material","materials","bones"],function(e){var t=_c.exec(e);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==bc.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){var i=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t||r.uuid===t)return r;var a=i(r.children);if(a)return a}return null},r=i(e.children);if(r)return r}return null}}),Object.assign(Lc.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,i=t.propertyName,r=t.propertyIndex;if(e||(e=Lc.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var a=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(var o=0;o<e.length;o++)if(e[o].name===a){a=o;break}break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==a){if(void 0===e[a])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[a]}}var s=e[i];if(void 0!==s){var c=this.Versioning.None;void 0!==e.needsUpdate?(c=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var l=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(o=0;o<this.node.geometry.morphAttributes.position.length;o++)if(e.geometry.morphAttributes.position[o].name===r){r=o;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(o=0;o<this.node.geometry.morphTargets.length;o++)if(e.geometry.morphTargets[o].name===r){r=o;break}}}l=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(l=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(l=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}else{var u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",e)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Lc.prototype,{_getValue_unbound:Lc.prototype.getValue,_setValue_unbound:Lc.prototype.setValue}),Object.assign(Cc.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,c=void 0,l=0,u=arguments.length;l!==u;++l){var h=arguments[l],d=h.uuid,f=i[d];if(void 0===f){f=t++,i[d]=f,e.push(h);for(var p=0,m=s;p!==m;++p)o[p].push(new Lc(h,r[p],a[p]))}else if(f<n){c=e[f];var g=--n,v=e[g];i[v.uuid]=f,e[f]=v,i[d]=g,e[g]=h;for(p=0,m=s;p!==m;++p){var y=o[p],x=y[g],_=y[f];y[f]=x,void 0===_&&(_=new Lc(h,r[p],a[p])),y[g]=_}}else e[f]!==c&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],c=s.uuid,l=n[c];if(void 0!==l&&l>=t){var u=t++,h=e[u];n[h.uuid]=l,e[l]=h,n[c]=u,e[u]=s;for(var d=0,f=r;d!==f;++d){var p=i[d],m=p[u],g=p[l];p[l]=m,p[u]=g}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var c=arguments[o].uuid,l=i[c];if(void 0!==l)if(delete i[c],l<n){var u=--n,h=e[u],d=e[v=--t];i[h.uuid]=l,e[l]=h,i[d.uuid]=u,e[u]=d,e.pop();for(var f=0,p=a;f!==p;++f){var m=(y=r[f])[u],g=y[v];y[l]=m,y[u]=g,y.pop()}}else{var v;i[(d=e[v=--t]).uuid]=l,e[l]=d,e.pop();for(f=0,p=a;f!==p;++f){var y;(y=r[f])[l]=y[v],y.pop()}}}this.nCachedObjects_=n},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,i=n[e],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,c=s.length,l=this.nCachedObjects_,u=new Array(c);i=r.length,n[e]=i,a.push(e),o.push(t),r.push(u);for(var h=l,d=s.length;h!==d;++h){var f=s[h];u[h]=new Lc(f,e,t)}return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}),Object.assign(Pc.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,a=r/i,o=i/r;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,c=a.sampleValues;return s[0]=r,s[1]=r+n,c[0]=e/o,c[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(e-r)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var c=this._interpolants,l=this._propertyBindings,u=0,h=c.length;u!==h;++u)c[u].evaluate(o),l[u].accumulate(i,s)}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,i=this.loop,r=this._loopCount;if(i===wt){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var a=i===Tt;if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),t>=n||t<0){var o=Math.floor(t/n);t-=n*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===s){var c=e<0;this._setEndings(c,!c,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}if(a&&1==(1&r))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var i=this._interpolantSettings;n?(i.endingStart=Ct,i.endingEnd=Ct):(i.endingStart=e?this.zeroSlopeAtStart?Ct:Lt:Pt,i.endingEnd=t?this.zeroSlopeAtEnd?Ct:Lt:Pt)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=t,o[1]=r+e,s[1]=n,this}}),Rc.prototype=Object.assign(Object.create(i.prototype),{constructor:Rc,_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,o=e._interpolants,s=n.uuid,c=this._bindingsByRootAndName,l=c[s];void 0===l&&(l={},c[s]=l);for(var u=0;u!==r;++u){var h=i[u],d=h.name,f=l[d];if(void 0!==f)a[u]=f;else{if(void 0!==(f=a[u])){null===f._cacheIndex&&(++f.referenceCount,this._addInactiveBinding(f,s,d));continue}var p=t&&t._propertyBindings[u].binding.parsedPath;++(f=new fc(Lc.create(n,d,p),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(f,s,d),a[u]=f}o[u].resultBuffer=f.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,c=s[s.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],a=this._bindings;void 0===r&&(r={},i[t]=r),r[n]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete o[r];e:{for(var l in o)break e;delete a[i]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new Es(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?Ls.findByName(n,e):e,a=null!==r?r.uuid:e,o=this._actionsByClip[a],s=null;if(void 0!==o){var c=o.actionByRoot[i];if(void 0!==c)return c;s=o.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var l=new Pc(this,r,t);return this._bindAction(l,s),this._addInactiveAction(l,a,i),l},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?Ls.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){t[o]._update(i,e,r,a)}var s=this._bindings,c=this._nActiveBindings;for(o=0;o!==c;++o)s[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var c=a[o];this._deactivateAction(c);var l=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=l,t[l]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Fc.prototype.clone=function(){return new Fc(void 0===this.value.clone?this.value:this.value.clone())},Ic.prototype=Object.assign(Object.create(Zn.prototype),{constructor:Ic,isInstancedBufferGeometry:!0,copy:function(e){return Zn.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(Nc.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Nc.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}),Object.defineProperty(Oc.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(Oc.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),Uc.prototype=Object.assign(Object.create(Oc.prototype),{constructor:Uc,isInstancedInterleavedBuffer:!0,copy:function(e){return Oc.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Dc.prototype=Object.assign(Object.create(Dn.prototype),{constructor:Dc,isInstancedBufferAttribute:!0,copy:function(e){return Dn.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(zc.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var n=[];return Bc(e,this,n,t),n.sort(kc),n},intersectObjects:function(e,t){var n=[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,r=e.length;i<r;i++)Bc(e[i],this,n,t);return n.sort(kc),n}}),Object.assign(Gc.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(Hc.prototype,{set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(jt.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(Vc.prototype,{set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(jc.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new Wt;return function(t,n){var i=e.copy(n).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new Wt),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new Wt),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new Wt),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new Wt),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new Wt;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Wc.prototype=Object.create(Cn.prototype),Wc.prototype.constructor=Wc,Wc.prototype.isImmediateRenderObject=!0,Xc.prototype=Object.create(Zr.prototype),Xc.prototype.constructor=Xc,Xc.prototype.update=function(){var e=new qt,t=new qt,n=new Qt;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,a=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,c=o.faces,l=0,u=0,h=c.length;u<h;u++)for(var d=c[u],f=0,p=d.vertexNormals.length;f<p;f++){var m=s[d[i[f]]],g=d.vertexNormals[f];e.copy(m).applyMatrix4(r),t.copy(g).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(l,e.x,e.y,e.z),l+=1,a.setXYZ(l,t.x,t.y,t.z),l+=1}else if(o&&o.isBufferGeometry){var v=o.attributes.position,y=o.attributes.normal;for(l=0,f=0,p=v.count;f<p;f++)e.set(v.getX(f),v.getY(f),v.getZ(f)).applyMatrix4(r),t.set(y.getX(f),y.getY(f),y.getZ(f)),t.applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),a.setXYZ(l,e.x,e.y,e.z),l+=1,a.setXYZ(l,t.x,t.y,t.z),l+=1}a.needsUpdate=!0}}(),Yc.prototype=Object.create(Cn.prototype),Yc.prototype.constructor=Yc,Yc.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Yc.prototype.update=function(){var e=new qt,t=new qt;return function(){this.light.updateMatrixWorld();var n=this.light.distance?this.light.distance:1e3,i=n*Math.tan(this.light.angle);this.cone.scale.set(i,i,n),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),qc.prototype=Object.create(Zr.prototype),qc.prototype.constructor=qc,qc.prototype.updateMatrixWorld=function(){var e=new qt,t=new Xt,n=new Xt;return function(i){var r=this.bones,a=this.geometry,o=a.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,c=0;s<r.length;s++){var l=r[s];l.parent&&l.parent.isBone&&(t.multiplyMatrices(n,l.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(c,e.x,e.y,e.z),t.multiplyMatrices(n,l.parent.matrixWorld),e.setFromMatrixPosition(t),o.setXYZ(c+1,e.x,e.y,e.z),c+=2)}a.getAttribute("position").needsUpdate=!0,Cn.prototype.updateMatrixWorld.call(this,i)}}(),Qc.prototype=Object.create(mi.prototype),Qc.prototype.constructor=Qc,Qc.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Qc.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Zc.prototype=Object.create(Cn.prototype),Zc.prototype.constructor=Zc,Zc.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Zc.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,n=this.line.geometry.attributes.position,i=n.array;i[0]=e,i[1]=-t,i[2]=0,i[3]=e,i[4]=t,i[5]=0,i[6]=-e,i[7]=t,i[8]=0,i[9]=-e,i[10]=-t,i[11]=0,i[12]=e,i[13]=-t,i[14]=0,n.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},$c.prototype=Object.create(Cn.prototype),$c.prototype.constructor=$c,$c.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},$c.prototype.update=function(){var e=new qt,t=new vn,n=new vn;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");t.copy(this.light.color),n.copy(this.light.groundColor);for(var a=0,o=r.count;a<o;a++){var s=a<o/2?t:n;r.setXYZ(a,s.r,s.g,s.b)}r.needsUpdate=!0}i.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Jc.prototype=Object.create(Zr.prototype),Jc.prototype.constructor=Jc,Kc.prototype=Object.create(Zr.prototype),Kc.prototype.constructor=Kc,el.prototype=Object.create(Zr.prototype),el.prototype.constructor=el,el.prototype.update=function(){var e=new qt,t=new qt,n=new Qt;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,a=this.object.geometry,o=a.vertices,s=a.faces,c=0,l=0,u=s.length;l<u;l++){var h=s[l],d=h.normal;e.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(i),t.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(e),r.setXYZ(c,e.x,e.y,e.z),c+=1,r.setXYZ(c,t.x,t.y,t.z),c+=1}r.needsUpdate=!0}}(),tl.prototype=Object.create(Cn.prototype),tl.prototype.constructor=tl,tl.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},tl.prototype.update=function(){var e=new qt,t=new qt,n=new qt;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(t,e),this.lightPlane.lookAt(n),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(n),this.targetLine.scale.z=n.length()}}(),nl.prototype=Object.create(Zr.prototype),nl.prototype.constructor=nl,nl.prototype.update=function(){var e,t,n=new qt,i=new Pn;function r(r,a,o,s){n.set(a,o,s).unproject(i);var c=t[r];if(void 0!==c)for(var l=e.getAttribute("position"),u=0,h=c.length;u<h;u++)l.setXYZ(c[u],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;i.projectionMatrix.copy(this.camera.projectionMatrix),r("c",0,0,-1),r("t",0,0,1),r("n1",-1,-1,-1),r("n2",1,-1,-1),r("n3",-1,1,-1),r("n4",1,1,-1),r("f1",-1,-1,1),r("f2",1,-1,1),r("f3",-1,1,1),r("f4",1,1,1),r("u1",.7,1.1,-1),r("u2",-.7,1.1,-1),r("u3",0,2,-1),r("cf1",-1,0,1),r("cf2",1,0,1),r("cf3",0,-1,1),r("cf4",0,1,1),r("cn1",-1,0,-1),r("cn2",1,0,-1),r("cn3",0,-1,-1),r("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),il.prototype=Object.create(Zr.prototype),il.prototype.constructor=il,il.prototype.update=function(){var e=new ln;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){var n=e.min,i=e.max,r=this.geometry.attributes.position,a=r.array;a[0]=i.x,a[1]=i.y,a[2]=i.z,a[3]=n.x,a[4]=i.y,a[5]=i.z,a[6]=n.x,a[7]=n.y,a[8]=i.z,a[9]=i.x,a[10]=n.y,a[11]=i.z,a[12]=i.x,a[13]=i.y,a[14]=n.z,a[15]=n.x,a[16]=i.y,a[17]=n.z,a[18]=n.x,a[19]=n.y,a[20]=n.z,a[21]=i.x,a[22]=n.y,a[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),il.prototype.setFromObject=function(e){return this.object=e,this.update(),this},rl.prototype=Object.create(Zr.prototype),rl.prototype.constructor=rl,rl.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),Cn.prototype.updateMatrixWorld.call(this,e))},al.prototype=Object.create(Qr.prototype),al.prototype.constructor=al,al.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;Math.abs(t)<1e-8&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),Cn.prototype.updateMatrixWorld.call(this,e)},ol.prototype=Object.create(Cn.prototype),ol.prototype.constructor=ol,ol.prototype.setDirection=(Mc=new qt,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(Mc.set(e.z,0,-e.x).normalize(),Sc=Math.acos(e.y),this.quaternion.setFromAxisAngle(Mc,Sc))}),ol.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},ol.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},sl.prototype=Object.create(Zr.prototype),sl.prototype.constructor=sl;var ll=0,ul=1;function hl(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e}function dl(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e}function fl(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Kr(e,t)}function pl(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Vr(e)}function ml(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Kr(e,t)}function gl(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Jr(e)}function vl(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Jr(e)}function yl(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Jr(e)}function xl(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new qt(e,t,n)}function _l(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Dn(e,t).setDynamic(!0)}function bl(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new zn(e,t)}function wl(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new kn(e,t)}function El(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Bn(e,t)}function Tl(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Gn(e,t)}function Sl(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Hn(e,t)}function Ml(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Vn(e,t)}function Al(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new jn(e,t)}function Ll(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Wn(e,t)}function Cl(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Xn(e,t)}function Pl(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),jo.call(this,e),this.type="catmullrom",this.closed=!0}function Rl(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),jo.call(this,e),this.type="catmullrom"}function Fl(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),jo.call(this,e),this.type="catmullrom"}function Il(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new sl(e)}function Nl(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new il(e,t)}function Ol(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Zr(new so(e.geometry),new qr({color:void 0!==t?t:16777215}))}function Ul(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Zr(new ra(e.geometry),new qr({color:void 0!==t?t:16777215}))}function Dl(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Po(e)}function zl(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Fo(e)}Uo.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(Uo.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(ns.prototype,{createPointsGeometry:function(e){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new Un,n=0,i=e.length;n<i;n++){var r=e[n];t.vertices.push(new qt(r.x,r.y,r.z||0))}return t}}),Object.assign(is.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Pl.prototype=Object.create(jo.prototype),Rl.prototype=Object.create(jo.prototype),Fl.prototype=Object.create(jo.prototype),Object.assign(Fl.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Jc.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},qc.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Us.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Ds.extractUrlBase(e)}}),Object.assign(jc.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(ln.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),fi.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(jt,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),jt.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),jt.ceilPowerOfTwo(e)}}),Object.assign(Qt.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Xt.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new qt),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,a)}}),hn.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},Yt.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(di.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(rs.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new qa(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ro(this,e)}}),Object.assign(Wt.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(qt.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(an.prototype,{fromAttribute:function(e,t,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Un.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(Cn.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(Cn.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(jr.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Wr.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Uo.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),Or.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(as.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(Dn.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Zn.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Zn.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Fc.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(li.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new vn}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=e===A}}}),Object.defineProperties(_o.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(hi.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(zr.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(zr.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Pr.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(on.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(Dr.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),uc.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new oc).load(e,function(e){t.setBuffer(e)}),this},dc.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},cc.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)};var kl={merge:function(e,t,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},Bl={crossOrigin:void 0,loadTexture:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Oo;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},loadTextureCube:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new No;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}};function Gl(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}}function Hl(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}}var Vl={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}};function jl(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")}},RpJ5:function(e,t){e.exports="#define GLSLIFY 1\nvarying vec3 vCenter;\nvarying vec3 vColor;\nvarying float vNoise;\nuniform float uTime;\nuniform float uLineWidth;\nuniform float uTween;\nuniform float uTweenOut;\nvarying float vTweenEase;\n\nfloat rand(vec2 co){\n    return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat edgeFactorTri() {\n    vec3 d = fwidth( vCenter.xyz ); \n    vec3 a3 = smoothstep( vec3( 0.0 ), d * uLineWidth, vCenter.xyz );  \n    return min( min( a3.x, a3.y ), a3.z );\n}\n\nvoid main() {\n    vec3 color = vec3(1.0) + vec3(0.4, 0.5, 1.5);\n    float flashing = rand(vec2(0.0, uTime * 0.2));\n    float noise = vNoise;\n    float factor = smoothstep(0.0, 0.3, edgeFactorTri());\n    vec3 baseColor = mix(color, vec3( 0.0 ), factor);\n    vec3 flashingColor = max(vColor * flashing, 0.2);\n    vec3 addedColor = mix(vColor, vec3( 0.0 ), factor ) * flashing;\n    gl_FragColor.rgb = baseColor * flashingColor;\n    gl_FragColor.a = (baseColor.r - (1.0 - noise) * 0.2) * (1. - (uTweenOut - 1.) / 2.);\n}\n"},XIRv:function(e,t){},YDhG:function(e,t){},YV4a:function(e,t){e.exports="#define GLSLIFY 1\n#define PHONG\n\n  uniform vec3 diffuse;\n  uniform vec3 emissive;\n  uniform vec3 specular;\n  uniform float shininess;\n  uniform float opacity;\n\n  varying vec3 vecPos;\n  varying vec3 vPos;\n  varying vec3 transformedRedLightPositions[6];\n  varying vec3 transformedBlueLightPositions[6];\n\n  uniform vec3 redColor;\n  uniform vec3 blueColor;\n  uniform vec3 overlayColor;\n\n  uniform float lightIntensity;\n\n  uniform sampler2D videoDiffuse;\n  uniform float efx;\n  uniform float efy;\n  uniform float fxScale;\n  uniform float rfx;\n\n  varying vec2 bakeUV;\n\n\n  #pragma include(THREE.ShaderChunk.common)\n  #pragma include(THREE.ShaderChunk.packing)\n  #pragma include(THREE.ShaderChunk.dithering_pars_fragment)\n  #pragma include(THREE.ShaderChunk.color_pars_fragment)\n  #pragma include(THREE.ShaderChunk.uv_pars_fragment)\n  #pragma include(THREE.ShaderChunk.uv2_pars_fragment)\n  #pragma include(THREE.ShaderChunk.map_pars_fragment)\n  #pragma include(THREE.ShaderChunk.alphamap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.aomap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.lightmap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.emissivemap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.envmap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.gradientmap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.fog_pars_fragment)\n  #pragma include(THREE.ShaderChunk.bsdfs)\n  #pragma include(THREE.ShaderChunk.lights_pars_begin)\n  #pragma include(THREE.ShaderChunk.lights_pars_maps)\n  #pragma include(THREE.ShaderChunk.lights_phong_pars_fragment)\n  #pragma include(THREE.ShaderChunk.shadowmap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.bumpmap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.normalmap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.specularmap_pars_fragment)\n  #pragma include(THREE.ShaderChunk.logdepthbuf_pars_fragment)\n  #pragma include(THREE.ShaderChunk.clipping_planes_pars_fragment)\n\n  // uniform PointLight referenceLight;\n\n  void main() {\n\n    #pragma include(THREE.ShaderChunk.clipping_planes_fragment)\n\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n\n    #pragma include(THREE.ShaderChunk.logdepthbuf_fragment)\n    #pragma include(THREE.ShaderChunk.map_fragment)\n    #pragma include(THREE.ShaderChunk.color_fragment)\n    #pragma include(THREE.ShaderChunk.alphamap_fragment)\n    #pragma include(THREE.ShaderChunk.alphatest_fragment)\n    #pragma include(THREE.ShaderChunk.specularmap_fragment)\n    #pragma include(THREE.ShaderChunk.normal_fragment_begin)\n    #pragma include(THREE.ShaderChunk.normal_fragment_maps)\n    #pragma include(THREE.ShaderChunk.emissivemap_fragment)\n\n    // accumulation\n    #pragma include(THREE.ShaderChunk.lights_phong_fragment)\n    \n    // ------------------------------------------------------------------------------------------------------------------------------\n    // Custom light generation template\n    // ------------------------------------------------------------------------------------------------------------------------------\n\n    GeometricContext geometry;\n    geometry.position = - vViewPosition;\n    geometry.normal = normal;\n    geometry.viewDir = normalize( vViewPosition );\n    IncidentLight directLight;\n    #if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n      PointLight pointLight;\n      for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n        pointLight = pointLights[ i ];\n        getPointDirectLightIrradiance( pointLight, geometry, directLight );\n        #ifdef USE_SHADOWMAP\n          directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n        #endif\n        RE_Direct( directLight, geometry, material, reflectedLight );\n      }\n\n    #endif\n    \n    // Custom reflection LIGHTS\n    PointLight referenceLight;\n    referenceLight.position = vec3(0.,0.,0.);\n\t\treferenceLight.color = vec3(2.,0.,0.);\n\t\treferenceLight.distance = float(100.);\n\t\treferenceLight.decay = float(5.);\n\t\treferenceLight.shadow = int(0.);\n\t\treferenceLight.shadowBias = float(0.);\n\t\treferenceLight.shadowRadius = float(1.);\n\t\treferenceLight.shadowMapSize = vec2(512.,512.);\n\t\treferenceLight.shadowCameraNear = float(0.);\n\t\treferenceLight.shadowCameraFar = float(1000.);\n\n    for ( int p = 0; p < 6; p ++ ) {\n      PointLight PCL;\n      PCL = referenceLight;\n      PCL.position = vec3(transformedRedLightPositions[p].x, transformedRedLightPositions[p].y, transformedRedLightPositions[p].z);\n      PCL.color = redColor * lightIntensity;\n      getPointDirectLightIrradiance( PCL, geometry, directLight );\n      RE_Direct( directLight, geometry, material, reflectedLight );\n    }\n\n    for ( int p = 0; p < 6; p ++ ) {\n      PointLight PCL;\n      PCL = referenceLight;\n      PCL.position = vec3(transformedBlueLightPositions[p].x, transformedBlueLightPositions[p].y, transformedBlueLightPositions[p].z);\n      PCL.color = blueColor * lightIntensity;\n      getPointDirectLightIrradiance( PCL, geometry, directLight );\n      RE_Direct( directLight, geometry, material, reflectedLight );\n    }\n\n\n    #if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n      SpotLight spotLight;\n      #pragma unroll_loop\n      for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n        spotLight = spotLights[ i ];\n        getSpotDirectLightIrradiance( spotLight, geometry, directLight );\n        #ifdef USE_SHADOWMAP\n        directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n        #endif\n        RE_Direct( directLight, geometry, material, reflectedLight );\n      }\n    #endif\n    #if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n      DirectionalLight directionalLight;\n      #pragma unroll_loop\n      for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n        directionalLight = directionalLights[ i ];\n        getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n        #ifdef USE_SHADOWMAP\n        directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n        #endif\n        RE_Direct( directLight, geometry, material, reflectedLight );\n      }\n    #endif\n    #if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n      RectAreaLight rectAreaLight;\n      #pragma unroll_loop\n      for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n        rectAreaLight = rectAreaLights[ i ];\n        RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n      }\n    #endif\n    #if defined( RE_IndirectDiffuse )\n      vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n      #ifdef USE_LIGHTMAP\n        vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n        #ifndef PHYSICALLY_CORRECT_LIGHTS\n          lightMapIrradiance *= PI;\n        #endif\n        irradiance += lightMapIrradiance;\n      #endif\n      #if ( NUM_HEMI_LIGHTS > 0 )\n        #pragma unroll_loop\n        for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n          irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n        }\n      #endif\n      #if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n        irradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n      #endif\n      RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n    #endif\n    #if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n      vec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n      #ifndef STANDARD\n        vec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n      #else\n        vec3 clearCoatRadiance = vec3( 0.0 );\n      #endif\n      RE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n    #endif\n\n    // ------------------------------------------------------------------------------------------------------------------------------\n\n      \n    // modulation\n    #pragma include(THREE.ShaderChunk.aomap_fragment)\n\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n    #pragma include(THREE.ShaderChunk.envmap_fragment)\n\n    vec2 center = vec2(0.5);\n    float intensity = 10.;\n    float scaleX = 1.;\n    float scaleY = 1.;\n    float offsetX = 0.2;\n    float offsetY = 0.27;\n    float dx = 1. - max(0., (distance(bakeUV.x, center.x) - offsetX) * scaleX) * intensity;\n    float dy = 1. - max(0., (distance(bakeUV.y, center.x) - offsetY) * scaleY) * intensity;\n    vec3 colorAO = vec3(mix(dx, dy, 0.5));\n\n    gl_FragColor = vec4(outgoingLight * colorAO, 1.);\n\n    #pragma include(THREE.ShaderChunk.tonemapping_fragment)\n    #pragma include(THREE.ShaderChunk.encodings_fragment)\n    #pragma include(THREE.ShaderChunk.fog_fragment)\n    #pragma include(THREE.ShaderChunk.premultiplied_alpha_fragment)\n    #pragma include(THREE.ShaderChunk.dithering_fragment)\n\n  }"},ZrmX:function(e,t){e.exports="#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform float opacity;\nuniform float opacy;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#pragma include(THREE.ShaderChunk.common)\n#pragma include(THREE.ShaderChunk.color_pars_fragment)\n#pragma include(THREE.ShaderChunk.uv_pars_fragment)\n#pragma include(THREE.ShaderChunk.uv2_pars_fragment)\n#pragma include(THREE.ShaderChunk.map_pars_fragment)\n#pragma include(THREE.ShaderChunk.alphamap_pars_fragment)\n#pragma include(THREE.ShaderChunk.aomap_pars_fragment)\n#pragma include(THREE.ShaderChunk.lightmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.envmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.fog_pars_fragment)\n#pragma include(THREE.ShaderChunk.specularmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.logdepthbuf_pars_fragment)\n#pragma include(THREE.ShaderChunk.clipping_planes_pars_fragment)\n\nvoid main() {\n\n\t#pragma include(THREE.ShaderChunk.clipping_planes_fragment)\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#pragma include(THREE.ShaderChunk.logdepthbuf_fragment)\n\t#pragma include(THREE.ShaderChunk.map_fragment)\n\t#pragma include(THREE.ShaderChunk.color_fragment)\n\t#pragma include(THREE.ShaderChunk.alphamap_fragment)\n\t#pragma include(THREE.ShaderChunk.alphatest_fragment)\n\t#pragma include(THREE.ShaderChunk.specularmap_fragment)\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#pragma include(THREE.ShaderChunk.aomap_fragment)\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#pragma include(THREE.ShaderChunk.envmap_fragment)\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a * opacy );\n\n\t#pragma include(THREE.ShaderChunk.premultiplied_alpha_fragment)\n\t#pragma include(THREE.ShaderChunk.tonemapping_fragment)\n\t#pragma include(THREE.ShaderChunk.encodings_fragment)\n\t#pragma include(THREE.ShaderChunk.fog_fragment)\n\n}\n"},a8dF:function(e,t,n){n("Ra0v").CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")}},bFui:function(e,t){},bHRZ:function(e,t){},ca9b:function(e,t){},dmr9:function(e,t){},doY3:function(e,t){e.exports="#define GLSLIFY 1\nattribute vec3 center;\nvarying vec3 vCenter;\nvarying vec3 vColor;\nvarying float vNoise;\nuniform float uTime;\nuniform int uIn;\nuniform int uOut;\nuniform float uTween;\nuniform float uTweenOut;\nvarying float vTweenEase;\n\n//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_1_0(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289_1_0(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute_1_1(vec3 x) {\n  return mod289_1_0(((x*34.0)+1.0)*x);\n}\n\nfloat snoise_1_2(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289_1_0(i); // Avoid truncation effects in permutation\n  vec3 p = permute_1_1( permute_1_1( i.y + vec3(0.0, i1.y, 1.0 ))\n    + i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\n\n\nfloat exponentialOut_2_3(float t) {\n  return t == 1.0 ? t : 1.0 - pow(2.0, -10.0 * t);\n}\n\n\n\n\nvoid main() {\n    vCenter = center;\n    float elevation = 4.0;\n    float amplitude = 2.0;\n    float speed = 4.2;\n    vec3 color = vec3(0.8,0.1,0.3);\n    vNoise = snoise_1_2( (amplitude + position.z * mod(uTime * speed + 10.0, 100.)) * position.xz) * elevation;\n    vColor = vec3(vNoise) - 0.9 + color;\n    vec3 newPosition = position + vec3(1.5, 0., -0.5);;\n    float time = uTime * 10.8;\n\n    mat3 mRandom = mat3(\n       -0.02, 0.01, -0.01,\n       0.04, -0.01, 0.03,\n       -0.04, 0.02, 0.00\n    );\n    mat3 mY = mat3(\n       0.0, 0.0, 0.0,\n       0.0, 0.0, 0.0,\n       0.0, 0.0, 0.0\n    );\n\n    mat3 mZ = mat3(\n       2.2, 1.0, 4.1,\n       3.4, 3.1, 1.3,\n       3.4, 2.3, 0.0\n    );\n\n    mat3 mX = mat3(\n       -15.0, 0.0, 0.0,\n       0.0, 0.0, 0.0,\n       0.0, 0.0, 0.0\n    );\n    \n    vTweenEase = exponentialOut_2_3(uTween);\n    mZ *= (1.0 - vTweenEase) * -2.0 + (sin(time) * 2.0 * vTweenEase * mRandom) * 0.3;    \n    mX *= mRandom * sin(time) * 0.;\n\n    /* F */\n    if (newPosition.y > -9.0 && newPosition.y < -7.0) {\n        newPosition += vec3(mX[0][0], mY[0][0], mZ[0][0]);\n    }\n\n    /* O1 */\n    if (newPosition.y > -5.0 && newPosition.y < -3.0) {\n        newPosition += vec3(mX[0][1], mY[0][1], mZ[0][1]);\n    }\n\n    /* O2 */\n    if (newPosition.y > -7.0 && newPosition.y < -5.0) {\n        newPosition += vec3(mX[0][2], mY[0][2], mZ[0][2]);\n    }\n\n    /* S */\n    if (newPosition.y > -3.0 && newPosition.y < 0.0) {\n        newPosition += vec3(mX[1][0], mY[1][0], mZ[1][0]);\n    }\n\n    /* B */\n    if (newPosition.y > 3.0 && newPosition.y < 5.0) {\n        newPosition += vec3(mX[1][1], mY[1][1], mZ[1][1]);\n    }\n\n    /* A */\n    if (newPosition.y > 0.0 && newPosition.y < 3.0) {\n        newPosition += vec3(mX[1][2], mY[1][2], mZ[1][2]);\n    }\n    \n    /* L1 */\n    if (newPosition.y > 5.0 && newPosition.y < 7.0) {\n        newPosition += vec3(mX[2][0], mY[2][0], mZ[2][0]);\n    }\n    \n    /* L2 */\n    if (newPosition.y > 7.0 && newPosition.y <= 9.0) {\n        newPosition += vec3(mX[2][1], mY[2][1], mZ[2][1]);\n    }\n\n    //newPosition.y *= 1. + (uTweenOut - 1.) * 2.;\n    newPosition.x += 1. + (uTweenOut - 1.) * 0.55;\n   \n    gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 ); \n}"},"eG+8":function(e,t){},eUxE:function(e,t,n){e.exports="#define GLSLIFY 1\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#pragma include(THREE.ShaderChunk.common)\n#pragma include(THREE.ShaderChunk.uv_pars_vertex)\n#pragma include(THREE.ShaderChunk.uv2_pars_vertex)\n#pragma include(THREE.ShaderChunk.displacementmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.envmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.color_pars_vertex)\n#pragma include(THREE.ShaderChunk.fog_pars_vertex)\n#pragma include(THREE.ShaderChunk.morphtarget_pars_vertex)\n#pragma include(THREE.ShaderChunk.skinning_pars_vertex)\n#pragma include(THREE.ShaderChunk.shadowmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.logdepthbuf_pars_vertex)\n#pragma include(THREE.ShaderChunk.clipping_planes_pars_vertex)\n\n"+n("fCkf")+"\n\nfloat noise;\nuniform float uTime;\n\nfloat turbulence( vec3 p ) {\n\n  float w = 100.0;\n  float t = -1.5;\n\n  for (float f = 1.0 ; f <= 10.0 ; f++ ){\n    float power = pow( 2.0, f );\n    t += abs( pnoise( vec3( power * p ), vec3( 10.0, 10.0, 10.0 ) ) / power );\n  }\n\n  return t;\n\n}\n\nvoid main() {\n\n\t#pragma include(THREE.ShaderChunk.uv_vertex)\n\t#pragma include(THREE.ShaderChunk.uv2_vertex)\n\t#pragma include(THREE.ShaderChunk.color_vertex)\n\n\t#pragma include(THREE.ShaderChunk.beginnormal_vertex)\n\t#pragma include(THREE.ShaderChunk.morphnormal_vertex)\n\t#pragma include(THREE.ShaderChunk.skinbase_vertex)\n\t#pragma include(THREE.ShaderChunk.skinnormal_vertex)\n\t#pragma include(THREE.ShaderChunk.defaultnormal_vertex)\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\n\t#pragma include(THREE.ShaderChunk.begin_vertex)\n\t#pragma include(THREE.ShaderChunk.morphtarget_vertex)\n\t#pragma include(THREE.ShaderChunk.skinning_vertex)\n\t#pragma include(THREE.ShaderChunk.displacementmap_vertex)\n\t#pragma include(THREE.ShaderChunk.project_vertex)\n\t#pragma include(THREE.ShaderChunk.logdepthbuf_vertex)\n\t#pragma include(THREE.ShaderChunk.clipping_planes_vertex)\n\n\tfloat time = uTime / 0.6;\n\tnoise = 1.0 *  -.30 * turbulence( .5 * normal + time );\n  float b = 200.0 * pnoise( 0.05 * position/5. + vec3( time / 10. + 2.0  / 10. ), vec3( 100.0 ) );\n  float displacement = (noise + b) / 320.;\n\n\tvec3 newPosition = vec3(position.x, position.y + (max(0. , position.y + 70.6) * (displacement)), position.z);\n\n  vec4 newMvPosition = modelViewMatrix * vec4( newPosition, 1.0 );\n  vViewPosition = - newMvPosition.xyz;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( newPosition, 1.0 );\n\n\t#pragma include(THREE.ShaderChunk.worldpos_vertex)\n\t#pragma include(THREE.ShaderChunk.envmap_vertex)\n\t#pragma include(THREE.ShaderChunk.shadowmap_vertex)\n\t#pragma include(THREE.ShaderChunk.fog_vertex)\n\n}\n\n\n\n\n"},fCkf:function(e,t){e.exports='#define GLSLIFY 1\n//\n// GLSL textureless classic 3D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/stegu/webgl-noise\n//\n\nvec3 mod289(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x)\n{\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n  return 2.2 * n_xyz;\n}\n\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n  vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n  vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n  return 2.2 * n_xyz;\n}\n\n\n\nvec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\nvec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }\n\nfloat snoise(vec2 v) {\n    const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                        0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                        -0.577350269189626,  // -1.0 + 2.0 * C.x\n                        0.024390243902439); // 1.0 / 41.0\n    vec2 i  = floor(v + dot(v, C.yy) );\n    vec2 x0 = v -   i + dot(i, C.xx);\n    vec2 i1;\n    i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n    vec4 x12 = x0.xyxy + C.xxzz;\n    x12.xy -= i1;\n    i = mod289(i); // Avoid truncation effects in permutation\n    vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n        + i.x + vec3(0.0, i1.x, 1.0 ));\n\n    vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n    m = m*m ;\n    m = m*m ;\n    vec3 x = 2.0 * fract(p * C.www) - 1.0;\n    vec3 h = abs(x) - 0.5;\n    vec3 ox = floor(x + 0.5);\n    vec3 a0 = x - ox;\n    m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n    vec3 g;\n    g.x  = a0.x  * x0.x  + h.x  * x0.y;\n    g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n    return 130.0 * dot(m, g);\n}'},"fZZ/":function(e,t){},gQkG:function(e,t){},h8p8:function(e,t){},iU3H:function(e,t){},kNxh:function(e,t){},kmks:function(e,t){},n4ss:function(e,t,n){n("Ra0v").ShockWave={uniforms:{tDiffuse:{value:null},mouse:{value:null},resolution:{value:null},uTime:{value:null}},vertexShader:"\n    varying vec2 vUv;\n    void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n    }\n  ",fragmentShader:"\n\n    // -------------------------------------\n    //    SHOCKWAVE\n    // -------------------------------------\n    \n    #define quality 10\n\n    uniform sampler2D tDiffuse;\n    uniform vec2 mouse;\n    uniform vec2 resolution;\n    uniform float uTime;\n    varying vec2 vUv;\n\n    vec2 scale(vec2 pos, float size) {\n      return fract(vec2((pos-0.5)*size));\n    }\n\n    void main() {\n\n      vec2 center = vec2(\n        (mouse.x + 1.) / 2.,\n        (-mouse.y + 1.) / 2.\n      );\n      // vec2 center = normMouse;\n      float d = distance(vUv, center);\n      float radius = uTime;\n      float spe = 0.5 * d;\n      float er = smoothstep(d, d+spe, radius);\n      float ir = smoothstep(d, d+spe, radius - 0.01);\n      float offset = (er - ir) * (2. - radius*4.) * cos(d);\n      offset *= 0.2;\n      vec4 color = texture2D(tDiffuse, vec2(vUv.x + offset, vUv.y + offset));\n\n      vec2 UV = vec2(vUv.x - 0.5, vUv.y - 0.5);\n      float stime = (((sin(1.8)/2.)+0.9)*100.)+0.5;\n      vec4 myTexture = vec4(0.);\n\n      for(int i=0;i<10;++i)\n      {\n        float tick = float(i);\n        myTexture += texture2D(tDiffuse,scale(UV,(tick/stime)+1.))/float(10);\n      }\n\n      gl_FragColor = vec4(myTexture.rgb,1.0);\n      gl_FragColor = vec4(color.rgb,1.0);\n  \n    }\n  "}},ojRf:function(e,t){},qXdO:function(e,t){e.exports="#define GLSLIFY 1\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\nuniform vec2 u_resolution;\n\nuniform vec3 colorA;\nuniform vec3 colorB;\n\n#pragma include(THREE.ShaderChunk.common)\n#pragma include(THREE.ShaderChunk.packing)\n#pragma include(THREE.ShaderChunk.dithering_pars_fragment)\n#pragma include(THREE.ShaderChunk.color_pars_fragment)\n#pragma include(THREE.ShaderChunk.uv_pars_fragment)\n#pragma include(THREE.ShaderChunk.uv2_pars_fragment)\n#pragma include(THREE.ShaderChunk.map_pars_fragment)\n#pragma include(THREE.ShaderChunk.alphamap_pars_fragment)\n#pragma include(THREE.ShaderChunk.aomap_pars_fragment)\n#pragma include(THREE.ShaderChunk.lightmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.emissivemap_pars_fragment)\n#pragma include(THREE.ShaderChunk.envmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.gradientmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.fog_pars_fragment)\n#pragma include(THREE.ShaderChunk.bsdfs)\n#pragma include(THREE.ShaderChunk.lights_pars_begin)\n#pragma include(THREE.ShaderChunk.lights_pars_maps)\n#pragma include(THREE.ShaderChunk.lights_phong_pars_fragment)\n#pragma include(THREE.ShaderChunk.shadowmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.bumpmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.normalmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.specularmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.logdepthbuf_pars_fragment)\n#pragma include(THREE.ShaderChunk.clipping_planes_pars_fragment)\n\nvoid main() {\n\n\t#pragma include(THREE.ShaderChunk.clipping_planes_fragment)\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#pragma include(THREE.ShaderChunk.logdepthbuf_fragment)\n\t#pragma include(THREE.ShaderChunk.map_fragment)\n\t#pragma include(THREE.ShaderChunk.color_fragment)\n\t#pragma include(THREE.ShaderChunk.alphamap_fragment)\n\t#pragma include(THREE.ShaderChunk.alphatest_fragment)\n\t#pragma include(THREE.ShaderChunk.specularmap_fragment)\n\t#pragma include(THREE.ShaderChunk.normal_fragment_begin)\n\t#pragma include(THREE.ShaderChunk.normal_fragment_maps)\n\t#pragma include(THREE.ShaderChunk.emissivemap_fragment)\n\n\t// accumulation\n\t#pragma include(THREE.ShaderChunk.lights_phong_fragment)\n\t#pragma include(THREE.ShaderChunk.lights_fragment_begin)\n\t#pragma include(THREE.ShaderChunk.lights_fragment_maps)\n\t#pragma include(THREE.ShaderChunk.lights_fragment_end)\n\n\t// modulation\n\t#pragma include(THREE.ShaderChunk.aomap_fragment)\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#pragma include(THREE.ShaderChunk.envmap_fragment)\n\n\t// vec3 colorRA = colorA * (outgoingLight.r + outgoingLight.g + outgoingLight.b) / 1.;\n\t// vec3 colorRB = colorB * (1.5 - (outgoingLight.r + outgoingLight.g + outgoingLight.b) / 1.);\n\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n  float grayscaleValue = dot(gl_FragColor.rgb, vec3(0.299, 0.587, 0.114)) * 4.;\n\tgl_FragColor = vec4((mix(vec4(colorB, 1.0), vec4(colorA, 1.0), grayscaleValue).rgb)  , diffuseColor.a );\n\n\t// vec3 colorR = smoothstep(colorB, colorA, vec3( (outgoingLight.r + outgoingLight.g + outgoingLight.b) / 3.)) / 1.5;\n\n\t// gl_FragColor = vec4( outgoingLight + grad.rgb, diffuseColor.a );\n\t// gl_FragColor = grad;\n\t// gl_FragColor = vec4( colorRA + colorRB * outgoingLight / 1., 1.);\n\n\t#pragma include(THREE.ShaderChunk.tonemapping_fragment)\n\t#pragma include(THREE.ShaderChunk.encodings_fragment)\n\t#pragma include(THREE.ShaderChunk.fog_fragment)\n\t#pragma include(THREE.ShaderChunk.premultiplied_alpha_fragment)\n\t#pragma include(THREE.ShaderChunk.dithering_fragment)\n\n}\n"},qykQ:function(e,t){},s7lq:function(e,t){},sMpC:function(e,t){},scys:function(e,t){},t2Dr:function(e,t){e.exports="#define GLSLIFY 1\n#define PHONG\n\nvarying vec3 vViewPosition;\nvarying vec2 bakeUV;\n\nuniform vec3 redLightPositions[6];\nuniform vec3 blueLightPositions[6];\n\n#ifndef FLAT_SHADED\n\n  varying vec3 vNormal;\n  varying vec3 transformedRedLightPositions[6];\n  varying vec3 transformedBlueLightPositions[6];\n\n#endif\n\n#pragma include(THREE.ShaderChunk.common)\n#pragma include(THREE.ShaderChunk.uv_pars_vertex)\n#pragma include(THREE.ShaderChunk.uv2_pars_vertex)\n#pragma include(THREE.ShaderChunk.displacementmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.envmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.color_pars_vertex)\n#pragma include(THREE.ShaderChunk.fog_pars_vertex)\n#pragma include(THREE.ShaderChunk.morphtarget_pars_vertex)\n#pragma include(THREE.ShaderChunk.skinning_pars_vertex)\n#pragma include(THREE.ShaderChunk.shadowmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.logdepthbuf_pars_vertex)\n#pragma include(THREE.ShaderChunk.clipping_planes_pars_vertex)\n\nvoid main() {\n\n  #pragma include(THREE.ShaderChunk.uv_vertex)\n  #pragma include(THREE.ShaderChunk.uv2_vertex)\n  #pragma include(THREE.ShaderChunk.color_vertex)\n\n  #pragma include(THREE.ShaderChunk.beginnormal_vertex)\n  #pragma include(THREE.ShaderChunk.morphnormal_vertex)\n  #pragma include(THREE.ShaderChunk.skinbase_vertex)\n  #pragma include(THREE.ShaderChunk.skinnormal_vertex)\n  #pragma include(THREE.ShaderChunk.defaultnormal_vertex)\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n  vNormal = normalize( transformedNormal );\n\n#endif\n\n  #pragma include(THREE.ShaderChunk.begin_vertex)\n  #pragma include(THREE.ShaderChunk.morphtarget_vertex)\n  #pragma include(THREE.ShaderChunk.skinning_vertex)\n  #pragma include(THREE.ShaderChunk.displacementmap_vertex)\n  #pragma include(THREE.ShaderChunk.project_vertex)\n  #pragma include(THREE.ShaderChunk.logdepthbuf_vertex)\n  #pragma include(THREE.ShaderChunk.clipping_planes_vertex)\n\n  for ( int p = 0; p < 6; p ++ ) {\n    transformedRedLightPositions[p] = (modelViewMatrix * vec4(vec3(redLightPositions[p].x, redLightPositions[p].y, redLightPositions[p].z), 1.0 )).xyz;\n  }\n\n  for ( int p = 0; p < 6; p ++ ) {\n    transformedBlueLightPositions[p] = (modelViewMatrix * vec4(vec3(blueLightPositions[p].x, blueLightPositions[p].y, blueLightPositions[p].z), 1.0 )).xyz;\n  }\n\n\n  bakeUV = uv;\n  vViewPosition = - mvPosition.xyz;\n\n  #pragma include(THREE.ShaderChunk.worldpos_vertex)\n  #pragma include(THREE.ShaderChunk.envmap_vertex)\n  #pragma include(THREE.ShaderChunk.shadowmap_vertex)\n  #pragma include(THREE.ShaderChunk.fog_vertex)\n\n}"},taBD:function(e,t){e.exports="#define GLSLIFY 1\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#pragma include(THREE.ShaderChunk.common)\n#pragma include(THREE.ShaderChunk.uv_pars_vertex)\n#pragma include(THREE.ShaderChunk.uv2_pars_vertex)\n#pragma include(THREE.ShaderChunk.displacementmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.envmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.color_pars_vertex)\n#pragma include(THREE.ShaderChunk.fog_pars_vertex)\n#pragma include(THREE.ShaderChunk.morphtarget_pars_vertex)\n#pragma include(THREE.ShaderChunk.skinning_pars_vertex)\n#pragma include(THREE.ShaderChunk.shadowmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.logdepthbuf_pars_vertex)\n#pragma include(THREE.ShaderChunk.clipping_planes_pars_vertex)\n\nvoid main() {\n\n\t#pragma include(THREE.ShaderChunk.uv_vertex)\n\t#pragma include(THREE.ShaderChunk.uv2_vertex)\n\t#pragma include(THREE.ShaderChunk.color_vertex)\n\n\t#pragma include(THREE.ShaderChunk.beginnormal_vertex)\n\t#pragma include(THREE.ShaderChunk.morphnormal_vertex)\n\t#pragma include(THREE.ShaderChunk.skinbase_vertex)\n\t#pragma include(THREE.ShaderChunk.skinnormal_vertex)\n\t#pragma include(THREE.ShaderChunk.defaultnormal_vertex)\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#pragma include(THREE.ShaderChunk.begin_vertex)\n\t#pragma include(THREE.ShaderChunk.morphtarget_vertex)\n\t#pragma include(THREE.ShaderChunk.skinning_vertex)\n\t#pragma include(THREE.ShaderChunk.displacementmap_vertex)\n\t#pragma include(THREE.ShaderChunk.project_vertex)\n\t#pragma include(THREE.ShaderChunk.logdepthbuf_vertex)\n\t#pragma include(THREE.ShaderChunk.clipping_planes_vertex)\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#pragma include(THREE.ShaderChunk.worldpos_vertex)\n\t#pragma include(THREE.ShaderChunk.envmap_vertex)\n\t#pragma include(THREE.ShaderChunk.shadowmap_vertex)\n\t#pragma include(THREE.ShaderChunk.fog_vertex)\n\n}\n"},tgxQ:function(e,t,n){var i=n("Ra0v");i.LuminosityHighPassShader={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{type:"t",value:null},luminosityThreshold:{type:"f",value:1},smoothWidth:{type:"f",value:1},defaultColor:{type:"c",value:new i.Color(0)},defaultOpacity:{type:"f",value:0}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","vec3 luma = vec3( 0.299, 0.587, 0.114 );","float v = dot( texel.xyz, luma );","vec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","float alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","gl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")}},u9tI:function(e,t){e.exports="#define GLSLIFY 1\n#define PHONG\n\nvarying vec3 vViewPosition;\n// varying vec2 VUV;\n\n\n#ifndef FLAT_SHADED\n\n  varying vec3 vNormal;\n\n#endif\n\n#pragma include(THREE.ShaderChunk.common)\n#pragma include(THREE.ShaderChunk.uv_pars_vertex)\n#pragma include(THREE.ShaderChunk.uv2_pars_vertex)\n#pragma include(THREE.ShaderChunk.displacementmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.envmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.color_pars_vertex)\n#pragma include(THREE.ShaderChunk.fog_pars_vertex)\n#pragma include(THREE.ShaderChunk.morphtarget_pars_vertex)\n#pragma include(THREE.ShaderChunk.skinning_pars_vertex)\n#pragma include(THREE.ShaderChunk.shadowmap_pars_vertex)\n#pragma include(THREE.ShaderChunk.logdepthbuf_pars_vertex)\n#pragma include(THREE.ShaderChunk.clipping_planes_pars_vertex)\n\nvoid main() {\n\n  #pragma include(THREE.ShaderChunk.uv_vertex)\n  #pragma include(THREE.ShaderChunk.uv2_vertex)\n  #pragma include(THREE.ShaderChunk.color_vertex)\n\n  #pragma include(THREE.ShaderChunk.beginnormal_vertex)\n  #pragma include(THREE.ShaderChunk.morphnormal_vertex)\n  #pragma include(THREE.ShaderChunk.skinbase_vertex)\n  #pragma include(THREE.ShaderChunk.skinnormal_vertex)\n  #pragma include(THREE.ShaderChunk.defaultnormal_vertex)\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n  vNormal = normalize( transformedNormal );\n\n#endif\n\n  #pragma include(THREE.ShaderChunk.begin_vertex)\n  #pragma include(THREE.ShaderChunk.morphtarget_vertex)\n  #pragma include(THREE.ShaderChunk.skinning_vertex)\n  #pragma include(THREE.ShaderChunk.displacementmap_vertex)\n  #pragma include(THREE.ShaderChunk.project_vertex)\n  #pragma include(THREE.ShaderChunk.logdepthbuf_vertex)\n  #pragma include(THREE.ShaderChunk.clipping_planes_vertex)\n\n  vViewPosition = - mvPosition.xyz;\n\n  #pragma include(THREE.ShaderChunk.worldpos_vertex)\n  #pragma include(THREE.ShaderChunk.envmap_vertex)\n  #pragma include(THREE.ShaderChunk.shadowmap_vertex)\n  #pragma include(THREE.ShaderChunk.fog_vertex)\n\n  // VUV = (modelViewMatrix * vec4(mvPosition.xyz, 1.0 )).xy;\n  \n}"},uEJM:function(e,t){e.exports='#define GLSLIFY 1\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform vec3 color1;\nuniform vec3 color2;\nuniform float shininess;\nuniform float opacity;\nuniform float transition;\nuniform float variance;\nuniform float emit;\nvarying float intensity;\n\n#pragma include(THREE.ShaderChunk.common)\n#pragma include(THREE.ShaderChunk.packing)\n#pragma include(THREE.ShaderChunk.dithering_pars_fragment)\n#pragma include(THREE.ShaderChunk.color_pars_fragment)\n#pragma include(THREE.ShaderChunk.uv_pars_fragment)\n#pragma include(THREE.ShaderChunk.uv2_pars_fragment)\n#pragma include(THREE.ShaderChunk.map_pars_fragment)\n#pragma include(THREE.ShaderChunk.alphamap_pars_fragment)\n#pragma include(THREE.ShaderChunk.aomap_pars_fragment)\n#pragma include(THREE.ShaderChunk.lightmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.emissivemap_pars_fragment)\n#pragma include(THREE.ShaderChunk.envmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.gradientmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.fog_pars_fragment)\n#pragma include(THREE.ShaderChunk.bsdfs)\n#pragma include(THREE.ShaderChunk.lights_pars_begin)\n#pragma include(THREE.ShaderChunk.lights_pars_maps)\n#pragma include(THREE.ShaderChunk.lights_phong_pars_fragment)\n#pragma include(THREE.ShaderChunk.shadowmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.bumpmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.normalmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.specularmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.logdepthbuf_pars_fragment)\n#pragma include(THREE.ShaderChunk.clipping_planes_pars_fragment)\n\n//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_1_0(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec2 mod289_1_0(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec3 permute_1_1(vec3 x) {\n  return mod289_1_0(((x*34.0)+1.0)*x);\n}\n\nfloat snoise_1_2(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289_1_0(i); // Avoid truncation effects in permutation\n  vec3 p = permute_1_1( permute_1_1( i.y + vec3(0.0, i1.y, 1.0 ))\n    + i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n\n\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_3_3(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_3_3(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_3_4(vec4 x) {\n     return mod289_3_3(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_3_5(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise_3_6(vec3 v)\n  {\n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D_3_7 = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g_3_8 = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g_3_8;\n  vec3 i1 = min( g_3_8.xyz, l.zxy );\n  vec3 i2 = max( g_3_8.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D_3_7.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289_3_3(i);\n  vec4 p = permute_3_4( permute_3_4( permute_3_4(\n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D_3_7.wyz - D_3_7.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1_3_9 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0_3_10 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1_3_9.xy,h.z);\n  vec3 p3 = vec3(a1_3_9.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt_3_5(vec4(dot(p0_3_10,p0_3_10), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_3_10 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0_3_10,x0), dot(p1,x1),\n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n\n\n\n//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : ijm\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289_5_11(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nfloat mod289_5_11(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\nvec4 permute_5_12(vec4 x) {\n     return mod289_5_11(((x*34.0)+1.0)*x);\n}\n\nfloat permute_5_12(float x) {\n     return mod289_5_11(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_5_13(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat taylorInvSqrt_5_13(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 grad4_5_14(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www;\n\n  return p;\n  }\n\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise_5_15(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289_5_11(i);\n  float j0 = permute_5_12( permute_5_12( permute_5_12( permute_5_12(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute_5_12( permute_5_12( permute_5_12( permute_5_12 (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0_5_16 = grad4_5_14(j0,   ip);\n  vec4 p1 = grad4_5_14(j1.x, ip);\n  vec4 p2 = grad4_5_14(j1.y, ip);\n  vec4 p3 = grad4_5_14(j1.z, ip);\n  vec4 p4 = grad4_5_14(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt_5_13(vec4(dot(p0_5_16,p0_5_16), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0_5_16 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt_5_13(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0_5_16, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n  }\n\n\n\n//\n// GLSL textureless classic 2D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289_2_17(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_2_18(vec4 x)\n{\n  return mod289_2_17(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_2_19(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec2 fade_2_20(vec2 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise_2_21(vec2 P)\n{\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod289_2_17(Pi); // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n\n  vec4 i = permute_2_18(permute_2_18(ix) + iy);\n\n  vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n  vec4 gy_2_22 = abs(gx) - 0.5 ;\n  vec4 tx_2_23 = floor(gx + 0.5);\n  gx = gx - tx_2_23;\n\n  vec2 g00 = vec2(gx.x,gy_2_22.x);\n  vec2 g10 = vec2(gx.y,gy_2_22.y);\n  vec2 g01 = vec2(gx.z,gy_2_22.z);\n  vec2 g11 = vec2(gx.w,gy_2_22.w);\n\n  vec4 norm = taylorInvSqrt_2_19(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n  g00 *= norm.x;\n  g01 *= norm.y;\n  g10 *= norm.z;\n  g11 *= norm.w;\n\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n\n  vec2 fade_xy = fade_2_20(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n\n\n\n//\n// GLSL textureless classic 3D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_9_24(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_9_24(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_9_25(vec4 x)\n{\n  return mod289_9_24(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_9_26(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade_9_27(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise_9_28(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289_9_24(Pi0);\n  Pi1 = mod289_9_24(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute_9_25(permute_9_25(ix) + iy);\n  vec4 ixy0 = permute_9_25(ixy + iz0);\n  vec4 ixy1 = permute_9_25(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt_9_26(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt_9_26(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade_9_27(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\n\n\n//\n// GLSL textureless classic 4D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289_7_29(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_7_30(vec4 x)\n{\n  return mod289_7_29(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_7_31(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 fade_7_32(vec4 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise\nfloat cnoise_7_33(vec4 P)\n{\n  vec4 Pi0 = floor(P); // Integer part for indexing\n  vec4 Pi1 = Pi0 + 1.0; // Integer part + 1\n  Pi0 = mod289_7_29(Pi0);\n  Pi1 = mod289_7_29(Pi1);\n  vec4 Pf0 = fract(P); // Fractional part for interpolation\n  vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = vec4(Pi0.zzzz);\n  vec4 iz1 = vec4(Pi1.zzzz);\n  vec4 iw0 = vec4(Pi0.wwww);\n  vec4 iw1 = vec4(Pi1.wwww);\n\n  vec4 ixy = permute_7_30(permute_7_30(ix) + iy);\n  vec4 ixy0 = permute_7_30(ixy + iz0);\n  vec4 ixy1 = permute_7_30(ixy + iz1);\n  vec4 ixy00 = permute_7_30(ixy0 + iw0);\n  vec4 ixy01 = permute_7_30(ixy0 + iw1);\n  vec4 ixy10 = permute_7_30(ixy1 + iw0);\n  vec4 ixy11 = permute_7_30(ixy1 + iw1);\n\n  vec4 gx00 = ixy00 * (1.0 / 7.0);\n  vec4 gy00 = floor(gx00) * (1.0 / 7.0);\n  vec4 gz00 = floor(gy00) * (1.0 / 6.0);\n  gx00 = fract(gx00) - 0.5;\n  gy00 = fract(gy00) - 0.5;\n  gz00 = fract(gz00) - 0.5;\n  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);\n  vec4 sw00 = step(gw00, vec4(0.0));\n  gx00 -= sw00 * (step(0.0, gx00) - 0.5);\n  gy00 -= sw00 * (step(0.0, gy00) - 0.5);\n\n  vec4 gx01 = ixy01 * (1.0 / 7.0);\n  vec4 gy01 = floor(gx01) * (1.0 / 7.0);\n  vec4 gz01 = floor(gy01) * (1.0 / 6.0);\n  gx01 = fract(gx01) - 0.5;\n  gy01 = fract(gy01) - 0.5;\n  gz01 = fract(gz01) - 0.5;\n  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);\n  vec4 sw01 = step(gw01, vec4(0.0));\n  gx01 -= sw01 * (step(0.0, gx01) - 0.5);\n  gy01 -= sw01 * (step(0.0, gy01) - 0.5);\n\n  vec4 gx10 = ixy10 * (1.0 / 7.0);\n  vec4 gy10 = floor(gx10) * (1.0 / 7.0);\n  vec4 gz10 = floor(gy10) * (1.0 / 6.0);\n  gx10 = fract(gx10) - 0.5;\n  gy10 = fract(gy10) - 0.5;\n  gz10 = fract(gz10) - 0.5;\n  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);\n  vec4 sw10 = step(gw10, vec4(0.0));\n  gx10 -= sw10 * (step(0.0, gx10) - 0.5);\n  gy10 -= sw10 * (step(0.0, gy10) - 0.5);\n\n  vec4 gx11 = ixy11 * (1.0 / 7.0);\n  vec4 gy11 = floor(gx11) * (1.0 / 7.0);\n  vec4 gz11 = floor(gy11) * (1.0 / 6.0);\n  gx11 = fract(gx11) - 0.5;\n  gy11 = fract(gy11) - 0.5;\n  gz11 = fract(gz11) - 0.5;\n  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);\n  vec4 sw11 = step(gw11, vec4(0.0));\n  gx11 -= sw11 * (step(0.0, gx11) - 0.5);\n  gy11 -= sw11 * (step(0.0, gy11) - 0.5);\n\n  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);\n  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);\n  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);\n  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);\n  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);\n  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);\n  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);\n  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);\n  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);\n  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);\n  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);\n  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);\n  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);\n  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);\n  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);\n  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);\n\n  vec4 norm00 = taylorInvSqrt_7_31(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));\n  g0000 *= norm00.x;\n  g0100 *= norm00.y;\n  g1000 *= norm00.z;\n  g1100 *= norm00.w;\n\n  vec4 norm01 = taylorInvSqrt_7_31(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));\n  g0001 *= norm01.x;\n  g0101 *= norm01.y;\n  g1001 *= norm01.z;\n  g1101 *= norm01.w;\n\n  vec4 norm10 = taylorInvSqrt_7_31(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));\n  g0010 *= norm10.x;\n  g0110 *= norm10.y;\n  g1010 *= norm10.z;\n  g1110 *= norm10.w;\n\n  vec4 norm11 = taylorInvSqrt_7_31(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));\n  g0011 *= norm11.x;\n  g0111 *= norm11.y;\n  g1011 *= norm11.z;\n  g1111 *= norm11.w;\n\n  float n0000 = dot(g0000, Pf0);\n  float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));\n  float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));\n  float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));\n  float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));\n  float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));\n  float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));\n  float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));\n  float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));\n  float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));\n  float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));\n  float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));\n  float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));\n  float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));\n  float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));\n  float n1111 = dot(g1111, Pf1);\n\n  vec4 fade_xyzw = fade_7_32(Pf0);\n  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);\n  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);\n  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);\n  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);\n  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);\n  return 2.2 * n_xyzw;\n}\n\n\n\n//\n// GLSL textureless classic 2D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289_8_34(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_8_35(vec4 x)\n{\n  return mod289_8_34(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_8_36(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec2 fade_8_37(vec2 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise, periodic variant\nfloat pnoise_8_38(vec2 P, vec2 rep)\n{\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod(Pi, rep.xyxy); // To create noise with explicit period\n  Pi = mod289_8_34(Pi);        // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n\n  vec4 i = permute_8_35(permute_8_35(ix) + iy);\n\n  vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n  vec4 gy_8_39 = abs(gx) - 0.5 ;\n  vec4 tx_8_40 = floor(gx + 0.5);\n  gx = gx - tx_8_40;\n\n  vec2 g00 = vec2(gx.x,gy_8_39.x);\n  vec2 g10 = vec2(gx.y,gy_8_39.y);\n  vec2 g01 = vec2(gx.z,gy_8_39.z);\n  vec2 g11 = vec2(gx.w,gy_8_39.w);\n\n  vec4 norm = taylorInvSqrt_8_36(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n  g00 *= norm.x;\n  g01 *= norm.y;\n  g10 *= norm.z;\n  g11 *= norm.w;\n\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n\n  vec2 fade_xy = fade_8_37(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n\n\n\n//\n// GLSL textureless classic 3D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec3 mod289_6_41(vec3 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289_6_41(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_6_42(vec4 x)\n{\n  return mod289_6_41(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_6_43(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec3 fade_6_44(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise, periodic variant\nfloat pnoise_6_45(vec3 P, vec3 rep)\n{\n  vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n  vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n  Pi0 = mod289_6_41(Pi0);\n  Pi1 = mod289_6_41(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute_6_42(permute_6_42(ix) + iy);\n  vec4 ixy0 = permute_6_42(ixy + iz0);\n  vec4 ixy1 = permute_6_42(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt_6_43(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt_6_43(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade_6_44(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n  return 2.2 * n_xyz;\n}\n\n\n\n//\n// GLSL textureless classic 4D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/ashima/webgl-noise\n//\n\nvec4 mod289_4_46(vec4 x)\n{\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute_4_47(vec4 x)\n{\n  return mod289_4_46(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt_4_48(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec4 fade_4_49(vec4 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\n\n// Classic Perlin noise, periodic version\nfloat pnoise_4_50(vec4 P, vec4 rep)\n{\n  vec4 Pi0 = mod(floor(P), rep); // Integer part modulo rep\n  vec4 Pi1 = mod(Pi0 + 1.0, rep); // Integer part + 1 mod rep\n  Pi0 = mod289_4_46(Pi0);\n  Pi1 = mod289_4_46(Pi1);\n  vec4 Pf0 = fract(P); // Fractional part for interpolation\n  vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = vec4(Pi0.zzzz);\n  vec4 iz1 = vec4(Pi1.zzzz);\n  vec4 iw0 = vec4(Pi0.wwww);\n  vec4 iw1 = vec4(Pi1.wwww);\n\n  vec4 ixy = permute_4_47(permute_4_47(ix) + iy);\n  vec4 ixy0 = permute_4_47(ixy + iz0);\n  vec4 ixy1 = permute_4_47(ixy + iz1);\n  vec4 ixy00 = permute_4_47(ixy0 + iw0);\n  vec4 ixy01 = permute_4_47(ixy0 + iw1);\n  vec4 ixy10 = permute_4_47(ixy1 + iw0);\n  vec4 ixy11 = permute_4_47(ixy1 + iw1);\n\n  vec4 gx00 = ixy00 * (1.0 / 7.0);\n  vec4 gy00 = floor(gx00) * (1.0 / 7.0);\n  vec4 gz00 = floor(gy00) * (1.0 / 6.0);\n  gx00 = fract(gx00) - 0.5;\n  gy00 = fract(gy00) - 0.5;\n  gz00 = fract(gz00) - 0.5;\n  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);\n  vec4 sw00 = step(gw00, vec4(0.0));\n  gx00 -= sw00 * (step(0.0, gx00) - 0.5);\n  gy00 -= sw00 * (step(0.0, gy00) - 0.5);\n\n  vec4 gx01 = ixy01 * (1.0 / 7.0);\n  vec4 gy01 = floor(gx01) * (1.0 / 7.0);\n  vec4 gz01 = floor(gy01) * (1.0 / 6.0);\n  gx01 = fract(gx01) - 0.5;\n  gy01 = fract(gy01) - 0.5;\n  gz01 = fract(gz01) - 0.5;\n  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);\n  vec4 sw01 = step(gw01, vec4(0.0));\n  gx01 -= sw01 * (step(0.0, gx01) - 0.5);\n  gy01 -= sw01 * (step(0.0, gy01) - 0.5);\n\n  vec4 gx10 = ixy10 * (1.0 / 7.0);\n  vec4 gy10 = floor(gx10) * (1.0 / 7.0);\n  vec4 gz10 = floor(gy10) * (1.0 / 6.0);\n  gx10 = fract(gx10) - 0.5;\n  gy10 = fract(gy10) - 0.5;\n  gz10 = fract(gz10) - 0.5;\n  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);\n  vec4 sw10 = step(gw10, vec4(0.0));\n  gx10 -= sw10 * (step(0.0, gx10) - 0.5);\n  gy10 -= sw10 * (step(0.0, gy10) - 0.5);\n\n  vec4 gx11 = ixy11 * (1.0 / 7.0);\n  vec4 gy11 = floor(gx11) * (1.0 / 7.0);\n  vec4 gz11 = floor(gy11) * (1.0 / 6.0);\n  gx11 = fract(gx11) - 0.5;\n  gy11 = fract(gy11) - 0.5;\n  gz11 = fract(gz11) - 0.5;\n  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);\n  vec4 sw11 = step(gw11, vec4(0.0));\n  gx11 -= sw11 * (step(0.0, gx11) - 0.5);\n  gy11 -= sw11 * (step(0.0, gy11) - 0.5);\n\n  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);\n  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);\n  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);\n  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);\n  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);\n  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);\n  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);\n  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);\n  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);\n  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);\n  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);\n  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);\n  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);\n  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);\n  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);\n  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);\n\n  vec4 norm00 = taylorInvSqrt_4_48(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));\n  g0000 *= norm00.x;\n  g0100 *= norm00.y;\n  g1000 *= norm00.z;\n  g1100 *= norm00.w;\n\n  vec4 norm01 = taylorInvSqrt_4_48(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));\n  g0001 *= norm01.x;\n  g0101 *= norm01.y;\n  g1001 *= norm01.z;\n  g1101 *= norm01.w;\n\n  vec4 norm10 = taylorInvSqrt_4_48(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));\n  g0010 *= norm10.x;\n  g0110 *= norm10.y;\n  g1010 *= norm10.z;\n  g1110 *= norm10.w;\n\n  vec4 norm11 = taylorInvSqrt_4_48(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));\n  g0011 *= norm11.x;\n  g0111 *= norm11.y;\n  g1011 *= norm11.z;\n  g1111 *= norm11.w;\n\n  float n0000 = dot(g0000, Pf0);\n  float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));\n  float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));\n  float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));\n  float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));\n  float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));\n  float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));\n  float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));\n  float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));\n  float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));\n  float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));\n  float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));\n  float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));\n  float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));\n  float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));\n  float n1111 = dot(g1111, Pf1);\n\n  vec4 fade_xyzw = fade_4_49(Pf0);\n  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);\n  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);\n  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);\n  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);\n  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);\n  return 2.2 * n_xyzw;\n}\n\n\n\n\nvec3 Desaturate(vec3 color, float Desaturation)\n{\n\tvec3 grayXfer = vec3(0.3, 0.59, 0.11);\n\tvec3 gray = vec3(dot(grayXfer, color));\n\treturn mix(color, gray, Desaturation);\n}\n\nvoid main() {\n\n\t#pragma include(THREE.ShaderChunk.clipping_planes_fragment)\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#pragma include(THREE.ShaderChunk.logdepthbuf_fragment)\n\t#pragma include(THREE.ShaderChunk.map_fragment)\n\t#pragma include(THREE.ShaderChunk.color_fragment)\n\t#pragma include(THREE.ShaderChunk.alphamap_fragment)\n\t#pragma include(THREE.ShaderChunk.alphatest_fragment)\n\t#pragma include(THREE.ShaderChunk.specularmap_fragment)\n\t#pragma include(THREE.ShaderChunk.normal_fragment_begin)\n\t#pragma include(THREE.ShaderChunk.normal_fragment_maps)\n\t#pragma include(THREE.ShaderChunk.emissivemap_fragment)\n\n\t// accumulation\n\t#pragma include(THREE.ShaderChunk.lights_phong_fragment)\n\t#pragma include(THREE.ShaderChunk.lights_fragment_begin)\n\t#pragma include(THREE.ShaderChunk.lights_fragment_maps)\n\t#pragma include(THREE.ShaderChunk.lights_fragment_end)\n\n\t// modulation\n\t#pragma include(THREE.ShaderChunk.aomap_fragment)\n\n  float interference = cnoise_9_28((vViewPosition.xyz + vec3(variance*100.) + vec3(1., 50. * transition, 1.)) / 10.) + (-1. + transition * 2.);\n\tfloat interference_white =  (smoothstep(interference - 0.12, interference, 0.) - smoothstep(interference - 0.1, interference, 0.)) * 20.;\n\n  interference = smoothstep(interference, interference+0.05, 0.);\n  vec3 colorFrom = vec3(color1) * interference;\n  vec3 colorTo = vec3(color2) * (1. - interference);\n  vec3 colorMedium = vec3(1.) * (interference_white);\n\tvec3 desNormal = Desaturate(vNormal, 1.);\n  vec3 TColor = (colorFrom + colorTo + interference_white);// * desNormal;\n\n\tvec3 outgoingLight =  reflectedLight.directDiffuse +\n\t\t\t\t\t\t\t\t\t\t\t\treflectedLight.indirectDiffuse +\n\t\t\t\t\t\t\t\t\t\t\t\treflectedLight.directSpecular +\n\t\t\t\t\t\t\t\t\t\t\t\treflectedLight.indirectSpecular +\n\t\t\t\t\t\t\t\t\t\t\t\t(mix(color1, color2, transition) * (emit * 1.8) + (sin(transition * 3.14) * 0.2)) ;\n\t\t\t\t\t\t\t\t\t\t\t\t// totalEmissiveRadiance;\n\n\t#pragma include(THREE.ShaderChunk.envmap_fragment)\n\n\tvec3 renderColor = mix(outgoingLight, vec3(TColor), 0.4);\n\trenderColor = vec3(TColor) *  vec3(0.4 + vNormal.z * 0.6) * outgoingLight;\n\n\tgl_FragColor = vec4(renderColor , diffuseColor.a );\n\n\t#pragma include(THREE.ShaderChunk.tonemapping_fragment)\n\t#pragma include(THREE.ShaderChunk.encodings_fragment)\n\t#pragma include(THREE.ShaderChunk.fog_fragment)\n\t#pragma include(THREE.ShaderChunk.premultiplied_alpha_fragment)\n\t#pragma include(THREE.ShaderChunk.dithering_fragment)\n\n}\n'},uWy6:function(e,t){e.exports={API_BASE_URL:"https://foosballworldcup18.aquest.it",API:{SAVE_USER:"/api/v1/users/insert/",GET_SHARE_IMAGE:"/shareimage.aspx?code=/share/"}}},ui4q:function(e,t,n){var i;i=function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.i=function(e){return e},n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=340)}([function(e,t,n){"use strict";var i,r,a,o,s,c=n(7),l=n(9),u=n(18);function h(e,t,n){this.x=e||0,this.y=t||0,this.z=n||0}n.d(t,"a",function(){return h}),h.prototype={constructor:h,isVector3:!0,set:function(e,t,n){return this.x=e,this.y=t,this.z=n,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e):(this.x=0,this.y=0,this.z=0),this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(e){return!1===(e&&e.isEuler)&&console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),void 0===s&&(s=new u.a),this.applyQuaternion(s.setFromEuler(e))},applyAxisAngle:function(){var e;return function(t,n){return void 0===e&&(e=new u.a),this.applyQuaternion(e.setFromAxisAngle(t,n))}}(),applyMatrix3:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;this.x=r[0]*t+r[4]*n+r[8]*i+r[12],this.y=r[1]*t+r[5]*n+r[9]*i+r[13],this.z=r[2]*t+r[6]*n+r[10]*i+r[14];var a=r[3]*t+r[7]*n+r[11]*i+r[15];return this.divideScalar(a)},applyQuaternion:function(e){var t=this.x,n=this.y,i=this.z,r=e.x,a=e.y,o=e.z,s=e.w,c=s*t+a*i-o*n,l=s*n+o*t-r*i,u=s*i+r*n-a*t,h=-r*t-a*n-o*i;return this.x=c*s+h*-r+l*-o-u*-a,this.y=l*s+h*-a+u*-r-c*-o,this.z=u*s+h*-o+c*-a-l*-r,this},project:function(e){return void 0===o&&(o=new l.a),o.multiplyMatrices(e.projectionMatrix,o.getInverse(e.matrixWorld)),this.applyMatrix4(o)},unproject:function(){var e;return function(t){return void 0===e&&(e=new l.a),e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(e,t){return void 0===r&&(r=new h,a=new h),r.set(e,e,e),a.set(t,t,t),this.clamp(r,a)},clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},cross:function(e,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t);var n=this.x,i=this.y,r=this.z;return this.x=i*e.z-r*e.y,this.y=r*e.x-n*e.z,this.z=n*e.y-i*e.x,this},crossVectors:function(e,t){var n=e.x,i=e.y,r=e.z,a=t.x,o=t.y,s=t.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(e){return void 0===i&&(i=new h),i.copy(this).projectOnVector(e),this.sub(i)},reflect:function(){var e;return function(t){return void 0===e&&(e=new h),this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){var t=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq());return Math.acos(c.a.clamp(t,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return this.setFromMatrixColumn(e,3)},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this},setFromMatrixColumn:function(e,t){if("number"==typeof e){console.warn("THREE.Vector3: setFromMatrixColumn now expects ( matrix, index ).");var n=e;e=t,t=n}return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return r}),n.d(t,"c",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"e",function(){return s}),n.d(t,"f",function(){return c}),n.d(t,"g",function(){return l}),n.d(t,"h",function(){return u}),n.d(t,"i",function(){return h}),n.d(t,"j",function(){return d}),n.d(t,"k",function(){return f}),n.d(t,"l",function(){return p}),n.d(t,"m",function(){return m}),n.d(t,"n",function(){return g}),n.d(t,"o",function(){return v}),n.d(t,"p",function(){return y}),n.d(t,"q",function(){return x}),n.d(t,"r",function(){return _}),n.d(t,"s",function(){return b}),n.d(t,"t",function(){return w}),n.d(t,"u",function(){return E}),n.d(t,"v",function(){return T}),n.d(t,"w",function(){return S}),n.d(t,"x",function(){return M}),n.d(t,"y",function(){return A}),n.d(t,"z",function(){return L}),n.d(t,"A",function(){return C}),n.d(t,"B",function(){return P}),n.d(t,"C",function(){return R}),n.d(t,"D",function(){return F}),n.d(t,"E",function(){return I}),n.d(t,"F",function(){return N}),n.d(t,"G",function(){return O}),n.d(t,"H",function(){return U}),n.d(t,"I",function(){return D}),n.d(t,"J",function(){return z}),n.d(t,"K",function(){return k}),n.d(t,"L",function(){return B}),n.d(t,"M",function(){return G}),n.d(t,"N",function(){return H}),n.d(t,"O",function(){return V}),n.d(t,"P",function(){return j}),n.d(t,"Q",function(){return W}),n.d(t,"R",function(){return X}),n.d(t,"S",function(){return Y}),n.d(t,"T",function(){return q}),n.d(t,"U",function(){return Q}),n.d(t,"V",function(){return Z}),n.d(t,"W",function(){return $}),n.d(t,"X",function(){return J}),n.d(t,"Y",function(){return K}),n.d(t,"Z",function(){return ee}),n.d(t,"_0",function(){return te}),n.d(t,"_1",function(){return ne}),n.d(t,"_2",function(){return ie}),n.d(t,"_3",function(){return re}),n.d(t,"_4",function(){return ae}),n.d(t,"_5",function(){return oe}),n.d(t,"_6",function(){return se}),n.d(t,"_7",function(){return ce}),n.d(t,"_8",function(){return le}),n.d(t,"_9",function(){return ue}),n.d(t,"_10",function(){return he}),n.d(t,"_11",function(){return de}),n.d(t,"_12",function(){return fe}),n.d(t,"_13",function(){return pe}),n.d(t,"_14",function(){return me}),n.d(t,"_15",function(){return ge}),n.d(t,"_16",function(){return ve}),n.d(t,"_17",function(){return ye}),n.d(t,"_18",function(){return xe}),n.d(t,"_19",function(){return _e}),n.d(t,"_20",function(){return be}),n.d(t,"_21",function(){return we}),n.d(t,"_22",function(){return Ee}),n.d(t,"_23",function(){return Te}),n.d(t,"_24",function(){return Se}),n.d(t,"_25",function(){return Me}),n.d(t,"_26",function(){return Ae}),n.d(t,"_27",function(){return Le}),n.d(t,"_28",function(){return Ce}),n.d(t,"_29",function(){return Pe}),n.d(t,"_30",function(){return Re}),n.d(t,"_31",function(){return Fe}),n.d(t,"_32",function(){return Ie}),n.d(t,"_33",function(){return Ne}),n.d(t,"_34",function(){return Oe}),n.d(t,"_35",function(){return Ue}),n.d(t,"_36",function(){return De}),n.d(t,"_37",function(){return ze}),n.d(t,"_38",function(){return ke}),n.d(t,"_39",function(){return Be}),n.d(t,"_40",function(){return Ge}),n.d(t,"_41",function(){return He}),n.d(t,"_42",function(){return Ve}),n.d(t,"_43",function(){return je}),n.d(t,"_44",function(){return We}),n.d(t,"_45",function(){return Xe}),n.d(t,"_46",function(){return Ye}),n.d(t,"_47",function(){return qe}),n.d(t,"_48",function(){return Qe}),n.d(t,"_49",function(){return Ze}),n.d(t,"_50",function(){return $e}),n.d(t,"_51",function(){return Je}),n.d(t,"_52",function(){return Ke}),n.d(t,"_53",function(){return et}),n.d(t,"_54",function(){return tt}),n.d(t,"_55",function(){return nt}),n.d(t,"_56",function(){return it}),n.d(t,"_57",function(){return rt}),n.d(t,"_58",function(){return at}),n.d(t,"_59",function(){return ot}),n.d(t,"_60",function(){return st}),n.d(t,"_61",function(){return ct}),n.d(t,"_62",function(){return lt}),n.d(t,"_63",function(){return ut}),n.d(t,"_64",function(){return ht}),n.d(t,"_65",function(){return dt}),n.d(t,"_66",function(){return ft}),n.d(t,"_67",function(){return pt}),n.d(t,"_68",function(){return mt}),n.d(t,"_69",function(){return gt}),n.d(t,"_70",function(){return vt}),n.d(t,"_71",function(){return yt}),n.d(t,"_72",function(){return xt});var i="84",r={LEFT:0,MIDDLE:1,RIGHT:2},a=0,o=1,s=2,c=3,l=0,u=1,h=0,d=1,f=2,p=0,m=1,g=2,v=1,y=2,x=0,_=1,b=2,w=0,E=1,T=2,S=3,M=4,A=5,L=100,C=101,P=102,R=103,F=104,I=200,N=201,O=202,U=203,D=204,z=205,k=206,B=207,G=208,H=209,V=210,j=0,W=1,X=2,Y=3,q=4,Q=5,Z=6,$=7,J=0,K=1,ee=2,te=0,ne=1,ie=2,re=3,ae=4,oe=300,se=301,ce=302,le=303,ue=304,he=305,de=306,fe=307,pe=1e3,me=1001,ge=1002,ve=1003,ye=1004,xe=1005,_e=1006,be=1007,we=1008,Ee=1009,Te=1010,Se=1011,Me=1012,Ae=1013,Le=1014,Ce=1015,Pe=1016,Re=1017,Fe=1018,Ie=1019,Ne=1020,Oe=1021,Ue=1022,De=1023,ze=1024,ke=1025,Be=De,Ge=1026,He=1027,Ve=2001,je=2002,We=2003,Xe=2004,Ye=2100,qe=2101,Qe=2102,Ze=2103,$e=2151,Je=2200,Ke=2201,et=2202,tt=2300,nt=2301,it=2302,rt=2400,at=2401,ot=2402,st=0,ct=1,lt=2,ut=3e3,ht=3001,dt=3007,ft=3002,pt=3003,mt=3004,gt=3005,vt=3006,yt=3200,xt=3201},function(e,t,n){"use strict";var i,r,a,o,s=n(0),c=n(32),l=n(24),u=n(3),h=n(19),d=n(269),f=n(5),p=n(9),m=n(22),g=n(7),v=n(138),y=n(8);function x(){Object.defineProperty(this,"id",{value:n.i(y.a)()}),this.uuid=g.a.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}n.d(t,"a",function(){return x}),x.prototype={constructor:x,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(n.i(v.a)(e)>65535?u.c:u.e)(e,1):this.index=e},addAttribute:function(e,t){return!1===(t&&t.isBufferAttribute)&&!1===(t&&t.isInterleavedBufferAttribute)?(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(e,new u.j(arguments[1],arguments[2]))):"index"===e?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[e]=t,this)},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,n){this.groups.push({start:e,count:t,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0);var n=this.attributes.normal;void 0!==n&&((new m.a).getNormalMatrix(e).applyToBufferAttribute(n),n.needsUpdate=!0);return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(e){return void 0===o&&(o=new p.a),o.makeRotationX(e),this.applyMatrix(o),this},rotateY:function(){var e;return function(t){return void 0===e&&(e=new p.a),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new p.a),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,i){return void 0===e&&(e=new p.a),e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,i){return void 0===e&&(e=new p.a),e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(e){void 0===a&&(a=new f.a),a.lookAt(e),a.updateMatrix(),this.applyMatrix(a.matrix)},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){var n=new u.b(3*t.vertices.length,3),i=new u.b(3*t.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new u.b(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(e){var t,n=e.geometry;if(e.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(void 0!==(t=this.attributes.position)&&(t.copyVector3sArray(n.vertices),t.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(t=this.attributes.normal)&&(t.copyVector3sArray(n.normals),t.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(t=this.attributes.color)&&(t.copyColorsArray(n.colors),t.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(t=this.attributes.uv)&&(t.copyVector2sArray(n.uvs),t.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(t=this.attributes.lineDistance)&&(t.copyArray(n.lineDistances),t.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(e.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new d.a).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);if(this.addAttribute("position",new u.j(t,3).copyVector3sArray(e.vertices)),e.normals.length>0){var i=new Float32Array(3*e.normals.length);this.addAttribute("normal",new u.j(i,3).copyVector3sArray(e.normals))}if(e.colors.length>0){var r=new Float32Array(3*e.colors.length);this.addAttribute("color",new u.j(r,3).copyColorsArray(e.colors))}if(e.uvs.length>0){var a=new Float32Array(2*e.uvs.length);this.addAttribute("uv",new u.j(a,2).copyVector2sArray(e.uvs))}if(e.uvs2.length>0){var o=new Float32Array(2*e.uvs2.length);this.addAttribute("uv2",new u.j(o,2).copyVector2sArray(e.uvs2))}if(e.indices.length>0){var s=new(n.i(v.a)(e.indices)>65535?Uint32Array:Uint16Array)(3*e.indices.length);this.setIndex(new u.j(s,1).copyIndicesArray(e.indices))}for(var c in this.groups=e.groups,e.morphTargets){for(var l=[],h=e.morphTargets[c],d=0,f=h.length;d<f;d++){var p=h[d],m=new u.b(3*p.length,3);l.push(m.copyVector3sArray(p))}this.morphAttributes[c]=l}if(e.skinIndices.length>0){var g=new u.b(4*e.skinIndices.length,4);this.addAttribute("skinIndex",g.copyVector4sArray(e.skinIndices))}if(e.skinWeights.length>0){var y=new u.b(4*e.skinWeights.length,4);this.addAttribute("skinWeight",y.copyVector4sArray(e.skinWeights))}return null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new c.a);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:(i=new c.a,r=new s.a,function(){null===this.boundingSphere&&(this.boundingSphere=new h.a);var e=this.attributes.position;if(e){var t=this.boundingSphere.center;i.setFromBufferAttribute(e),i.getCenter(t);for(var n=0,a=0,o=e.count;a<o;a++)r.x=e.getX(a),r.y=e.getY(a),r.z=e.getZ(a),n=Math.max(n,t.distanceToSquared(r));this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,n=this.groups;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new u.j(new Float32Array(i.length),3));else for(var r=t.normal.array,a=0,o=r.length;a<o;a++)r[a]=0;var c,l,h,d=t.normal.array,f=new s.a,p=new s.a,m=new s.a,g=new s.a,v=new s.a;if(e){var y=e.array;0===n.length&&this.addGroup(0,y.length);for(var x=0,_=n.length;x<_;++x){var b=n[x],w=b.start;for(a=w,o=w+b.count;a<o;a+=3)c=3*y[a+0],l=3*y[a+1],h=3*y[a+2],f.fromArray(i,c),p.fromArray(i,l),m.fromArray(i,h),g.subVectors(m,p),v.subVectors(f,p),g.cross(v),d[c]+=g.x,d[c+1]+=g.y,d[c+2]+=g.z,d[l]+=g.x,d[l+1]+=g.y,d[l+2]+=g.z,d[h]+=g.x,d[h+1]+=g.y,d[h+2]+=g.z}}else for(a=0,o=i.length;a<o;a+=9)f.fromArray(i,a),p.fromArray(i,a+3),m.fromArray(i,a+6),g.subVectors(m,p),v.subVectors(f,p),g.cross(v),d[a]=g.x,d[a+1]=g.y,d[a+2]=g.z,d[a+3]=g.x,d[a+4]=g.y,d[a+5]=g.z,d[a+6]=g.x,d[a+7]=g.y,d[a+8]=g.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(!1!==(e&&e.isBufferGeometry)){void 0===t&&(t=0);var n=this.attributes;for(var i in n)if(void 0!==e.attributes[i])for(var r=n[i].array,a=e.attributes[i],o=a.array,s=0,c=a.itemSize*t;s<o.length;s++,c++)r[c]=o[s];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){for(var e,t,n,i,r=this.attributes.normal.array,a=0,o=r.length;a<o;a+=3)e=r[a],t=r[a+1],n=r[a+2],i=1/Math.sqrt(e*e+t*t+n*n),r[a]*=i,r[a+1]*=i,r[a+2]*=i},toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new x,t=this.index.array,n=this.attributes;for(var i in n){for(var r=n[i],a=r.array,o=r.itemSize,s=new a.constructor(t.length*o),c=0,l=0,h=0,d=t.length;h<d;h++){c=t[h]*o;for(var f=0;f<o;f++)s[l++]=a[c++]}e.addAttribute(i,new u.j(s,o))}return e},toJSON:function(){var e={metadata:{version:4.4,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);e.data.index={type:i.array.constructor.name,array:r}}var a=this.attributes;for(var n in a){var o=a[n];r=Array.prototype.slice.call(o.array);e.data.attributes[n]={itemSize:o.itemSize,type:o.array.constructor.name,array:r,normalized:o.normalized}}var s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));var c=this.boundingSphere;return null!==c&&(e.data.boundingSphere={center:c.center.toArray(),radius:c.radius}),e},clone:function(){return(new x).copy(this)},copy:function(e){var t,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var r=e.index;null!==r&&this.setIndex(r.clone());var a=e.attributes;for(t in a){var o=a[t];this.addAttribute(t,o.clone())}var s=e.morphAttributes;for(t in s){var c=[],l=s[t];for(n=0,i=l.length;n<i;n++)c.push(l[n].clone());this.morphAttributes[t]=c}var u=e.groups;for(n=0,i=u.length;n<i;n++){var h=u[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=e.boundingBox;null!==d&&(this.boundingBox=d.clone());var f=e.boundingSphere;return null!==f&&(this.boundingSphere=f.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},x.MaxIndex=65535,Object.assign(x.prototype,l.a.prototype)},function(e,t,n){"use strict";var i=n(20),r=n(0),a=n(4),o=n(6),s=n(7);function c(e,t,n){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=s.a.generateUUID(),this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function l(e,t){c.call(this,new Int8Array(e),t)}function u(e,t){c.call(this,new Uint8Array(e),t)}function h(e,t){c.call(this,new Uint8ClampedArray(e),t)}function d(e,t){c.call(this,new Int16Array(e),t)}function f(e,t){c.call(this,new Uint16Array(e),t)}function p(e,t){c.call(this,new Int32Array(e),t)}function m(e,t){c.call(this,new Uint32Array(e),t)}function g(e,t){c.call(this,new Float32Array(e),t)}function v(e,t){c.call(this,new Float64Array(e),t)}n.d(t,"a",function(){return v}),n.d(t,"b",function(){return g}),n.d(t,"c",function(){return m}),n.d(t,"d",function(){return p}),n.d(t,"e",function(){return f}),n.d(t,"f",function(){return d}),n.d(t,"g",function(){return h}),n.d(t,"h",function(){return u}),n.d(t,"i",function(){return l}),n.d(t,"j",function(){return c}),c.prototype={constructor:c,isBufferAttribute:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.itemSize:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.itemSize,n*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),a=new o.a),t[n++]=a.r,t[n++]=a.g,t[n++]=a.b}return this},copyIndicesArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var a=e[i];t[n++]=a.a,t[n++]=a.b,t[n++]=a.c}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,i=0,r=e.length;i<r;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new a.a),t[n++]=o.x,t[n++]=o.y}return this},copyVector3sArray:function(e){for(var t=this.array,n=0,i=0,a=e.length;i<a;i++){var o=e[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new r.a),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z}return this},copyVector4sArray:function(e){for(var t=this.array,n=0,r=0,a=e.length;r<a;r++){var o=e[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",r),o=new i.a),t[n++]=o.x,t[n++]=o.y,t[n++]=o.z,t[n++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}},l.prototype=Object.create(c.prototype),l.prototype.constructor=l,u.prototype=Object.create(c.prototype),u.prototype.constructor=u,h.prototype=Object.create(c.prototype),h.prototype.constructor=h,d.prototype=Object.create(c.prototype),d.prototype.constructor=d,f.prototype=Object.create(c.prototype),f.prototype.constructor=f,p.prototype=Object.create(c.prototype),p.prototype.constructor=p,m.prototype=Object.create(c.prototype),m.prototype.constructor=m,g.prototype=Object.create(c.prototype),g.prototype.constructor=g,v.prototype=Object.create(c.prototype),v.prototype.constructor=v},function(e,t,n){"use strict";function i(e,t){this.x=e||0,this.y=t||0}var r,a;n.d(t,"a",function(){return i}),i.prototype={constructor:i,isVector2:!0,get width(){return this.x},set width(e){this.x=e},get height(){return this.y},set height(e){this.y=e},set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.x=e,this.y=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e):(this.x=0,this.y=0),this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(e,t){return void 0===r&&(r=new i,a=new i),r.set(e,e),a.set(t,t),this.clamp(r,a)},clampLength:function(e,t){var n=this.length();return this.multiplyScalar(Math.max(e,Math.min(t,n))/n)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length())},angle:function(){var e=Math.atan2(this.y,this.x);return e<0&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,n=this.y-e.y;return t*t+n*n},distanceToManhattan:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,a=this.y-e.y;return this.x=r*n-a*i+e.x,this.y=r*i+a*n+e.y,this}}},function(e,t,n){"use strict";var i=n(18),r=n(0),a=n(9),o=n(24),s=n(122),c=n(86),l=n(22),u=n(7);n.d(t,"a",function(){return y});var h,d,f,p,m,g,v=0;function y(){Object.defineProperty(this,"id",{value:v++}),this.uuid=u.a.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=y.DefaultUp.clone();var e=new r.a,t=new s.a,n=new i.a,o=new r.a(1,1,1);t.onChange(function(){n.setFromEuler(t,!1)}),n.onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:o},modelViewMatrix:{value:new a.a},normalMatrix:{value:new l.a}}),this.matrix=new a.a,this.matrixWorld=new a.a,this.matrixAutoUpdate=y.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new c.a,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={},this.onBeforeRender=function(){},this.onAfterRender=function(){}}y.DefaultUp=new r.a(0,1,0),y.DefaultMatrixAutoUpdate=!0,y.prototype={constructor:y,isObject3D:!0,applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:(g=new i.a,function(e,t){return g.setFromAxisAngle(e,t),this.quaternion.multiply(g),this}),rotateX:(m=new r.a(1,0,0),function(e){return this.rotateOnAxis(m,e)}),rotateY:function(){var e=new r.a(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new r.a(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new r.a;return function(t,n){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(n)),this}}(),translateX:function(){var e=new r.a(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new r.a(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new r.a(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:(p=new a.a,function(e){return e.applyMatrix4(p.getInverse(this.matrixWorld))}),lookAt:function(){var e=new a.a;return function(t){e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(arguments.length>1){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(arguments.length>1)for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);var n=this.children.indexOf(e);-1!==n&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(n,1))},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){var t=e||new r.a;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:(d=new r.a,f=new r.a,function(e){var t=e||new i.a;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(d,t,f),t}),getWorldRotation:(h=new i.a,function(e){var t=e||new s.a;return this.getWorldQuaternion(h),t.setFromQuaternion(h,this.rotation.order,!1)}),getWorldScale:function(){var e=new r.a,t=new i.a;return function(n){var i=n||new r.a;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i),i}}(),getWorldDirection:function(){var e=new i.a;return function(t){var n=t||new r.a;return this.getWorldQuaternion(e),n.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){!0===this.matrixAutoUpdate&&this.updateMatrix(),!0!==this.matrixWorldNeedsUpdate&&!0!==e||(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,n=0,i=t.length;n<i;n++)t[n].updateMatrixWorld(e)},toJSON:function(e){var t=void 0===e||""===e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.4,type:"Object",generator:"Object3D.toJSON"});var i={};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),i.matrix=this.matrix.toArray(),void 0!==this.geometry&&(void 0===e.geometries[this.geometry.uuid]&&(e.geometries[this.geometry.uuid]=this.geometry.toJSON(e)),i.geometry=this.geometry.uuid),void 0!==this.material&&(void 0===e.materials[this.material.uuid]&&(e.materials[this.material.uuid]=this.material.toJSON(e)),i.material=this.material.uuid),this.children.length>0){i.children=[];for(var r=0;r<this.children.length;r++)i.children.push(this.children[r].toJSON(e).object)}if(t){var a=l(e.geometries),o=l(e.materials),s=l(e.textures),c=l(e.images);a.length>0&&(n.geometries=a),o.length>0&&(n.materials=o),s.length>0&&(n.textures=s),c.length>0&&(n.images=c)}return n.object=i,n;function l(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(var n=0;n<e.children.length;n++){var i=e.children[n];this.add(i.clone())}return this}},Object.assign(y.prototype,o.a.prototype)},function(e,t,n){"use strict";var i=n(7);function r(e,t,n){return void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}n.d(t,"a",function(){return r}),r.prototype={constructor:r,isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.r=e,this.g=e,this.b=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,n){return this.r=e,this.g=t,this.b=n,this},setHSL:function(){function e(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}return function(t,n,r){if(t=i.a.euclideanModulo(t,1),n=i.a.clamp(n,0,1),r=i.a.clamp(r,0,1),0===n)this.r=this.g=this.b=r;else{var a=r<=.5?r*(1+n):r+n-r*n,o=2*r-a;this.r=e(o,a,t+1/3),this.g=e(o,a,t),this.b=e(o,a,t-1/3)}return this}}(),setStyle:function(e){function t(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var s=parseFloat(i[1])/360,c=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(s,c,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(e)){var u,h=(u=n[1]).length;if(3===h)return this.r=parseInt(u.charAt(0)+u.charAt(0),16)/255,this.g=parseInt(u.charAt(1)+u.charAt(1),16)/255,this.b=parseInt(u.charAt(2)+u.charAt(2),16)/255,this;if(6===h)return this.r=parseInt(u.charAt(0)+u.charAt(1),16)/255,this.g=parseInt(u.charAt(2)+u.charAt(3),16)/255,this.b=parseInt(u.charAt(4)+u.charAt(5),16)/255,this}e&&e.length>0&&(void 0!==(u=a[e])?this.setHex(u):console.warn("THREE.Color: Unknown color "+e));return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){void 0===t&&(t=2);var n=t>0?1/t:1;return this.r=Math.pow(e.r,n),this.g=Math.pow(e.g,n),this.b=Math.pow(e.b,n),this},convertGammaToLinear:function(){var e=this.r,t=this.g,n=this.b;return this.r=e*e,this.g=t*t,this.b=n*n,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){var t,n,i=e||{h:0,s:0,l:0},r=this.r,a=this.g,o=this.b,s=Math.max(r,a,o),c=Math.min(r,a,o),l=(c+s)/2;if(c===s)t=0,n=0;else{var u=s-c;switch(n=l<=.5?u/(s+c):u/(2-s-c),s){case r:t=(a-o)/u+(a<o?6:0);break;case a:t=(o-r)/u+2;break;case o:t=(r-a)/u+4}t/=6}return i.h=t,i.s=n,i.l=l,i},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(e,t,n){var i=this.getHSL();return i.h+=e,i.s+=t,i.l+=n,this.setHSL(i.h,i.s,i.l),this},add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}};var a={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i,r,a,o,s={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:(r="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),a=new Array(36),o=0,function(){for(var e=0;e<36;e++)8===e||13===e||18===e||23===e?a[e]="-":14===e?a[e]="4":(o<=2&&(o=33554432+16777216*Math.random()|0),i=15&o,o>>=4,a[e]=r[19===e?3&i|8:i]);return a.join("")}),clamp:function(e,t,n){return Math.max(t,Math.min(n,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},lerp:function(e,t,n){return(1-n)*e+n*t},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*s.DEG2RAD},radToDeg:function(e){return e*s.RAD2DEG},isPowerOfTwo:function(e){return 0==(e&e-1)&&0!==e},nearestPowerOfTwo:function(e){return Math.pow(2,Math.round(Math.log(e)/Math.LN2))},nextPowerOfTwo:function(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}}},function(e,t,n){"use strict";var i=n(24),r=n(29),a=n(22),o=n(19),s=n(32),c=n(0),l=n(9),u=n(4),h=n(6),d=n(5),f=n(7);n.d(t,"a",function(){return v}),n.d(t,"b",function(){return y});var p,m,g=0;function v(){return g++}function y(){Object.defineProperty(this,"id",{value:v()}),this.uuid=f.a.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}y.prototype={constructor:y,isGeometry:!0,applyMatrix:function(e){for(var t=(new a.a).getNormalMatrix(e),n=0,i=this.vertices.length;n<i;n++){this.vertices[n].applyMatrix4(e)}for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(t).normalize();for(var o=0,s=r.vertexNormals.length;o<s;o++)r.vertexNormals[o].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(e){return void 0===m&&(m=new l.a),m.makeRotationX(e),this.applyMatrix(m),this},rotateY:function(){var e;return function(t){return void 0===e&&(e=new l.a),e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e;return function(t){return void 0===e&&(e=new l.a),e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e;return function(t,n,i){return void 0===e&&(e=new l.a),e.makeTranslation(t,n,i),this.applyMatrix(e),this}}(),scale:function(){var e;return function(t,n,i){return void 0===e&&(e=new l.a),e.makeScale(t,n,i),this.applyMatrix(e),this}}(),lookAt:function(e){void 0===p&&(p=new d.a),p.lookAt(e),p.updateMatrix(),this.applyMatrix(p.matrix)},fromBufferGeometry:function(e){var t=this,n=null!==e.index?e.index.array:void 0,i=e.attributes,a=i.position.array,o=void 0!==i.normal?i.normal.array:void 0,s=void 0!==i.color?i.color.array:void 0,l=void 0!==i.uv?i.uv.array:void 0,d=void 0!==i.uv2?i.uv2.array:void 0;void 0!==d&&(this.faceVertexUvs[1]=[]);for(var f=[],p=[],m=[],g=0,v=0;g<a.length;g+=3,v+=2)t.vertices.push(new c.a(a[g],a[g+1],a[g+2])),void 0!==o&&f.push(new c.a(o[g],o[g+1],o[g+2])),void 0!==s&&t.colors.push(new h.a(s[g],s[g+1],s[g+2])),void 0!==l&&p.push(new u.a(l[v],l[v+1])),void 0!==d&&m.push(new u.a(d[v],d[v+1]));function y(e,n,i,a){var c=void 0!==o?[f[e].clone(),f[n].clone(),f[i].clone()]:[],u=void 0!==s?[t.colors[e].clone(),t.colors[n].clone(),t.colors[i].clone()]:[],h=new r.a(e,n,i,c,u,a);t.faces.push(h),void 0!==l&&t.faceVertexUvs[0].push([p[e].clone(),p[n].clone(),p[i].clone()]),void 0!==d&&t.faceVertexUvs[1].push([m[e].clone(),m[n].clone(),m[i].clone()])}if(void 0!==n){var x=e.groups;if(x.length>0)for(g=0;g<x.length;g++)for(var _=x[g],b=_.start,w=(v=b,b+_.count);v<w;v+=3)y(n[v],n[v+1],n[v+2],_.materialIndex);else for(g=0;g<n.length;g+=3)y(n[g],n[g+1],n[g+2])}else for(g=0;g<a.length/3;g+=3)y(g,g+1,g+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var e=this.boundingBox.getCenter().negate();return this.translate(e.x,e.y,e.z),e},normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius,n=0===t?1:1/t,i=new l.a;return i.set(n,0,0,-n*e.x,0,n,0,-n*e.y,0,0,n,-n*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new c.a,t=new c.a,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];e.subVectors(s,o),t.subVectors(a,o),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){var t,n,i,r,a,o;for(void 0===e&&(e=!0),o=new Array(this.vertices.length),t=0,n=this.vertices.length;t<n;t++)o[t]=new c.a;if(e){var s,l,u,h=new c.a,d=new c.a;for(i=0,r=this.faces.length;i<r;i++)a=this.faces[i],s=this.vertices[a.a],l=this.vertices[a.b],u=this.vertices[a.c],h.subVectors(u,l),d.subVectors(s,l),h.cross(d),o[a.a].add(h),o[a.b].add(h),o[a.c].add(h)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o[(a=this.faces[i]).a].add(a.normal),o[a.b].add(a.normal),o[a.c].add(a.normal);for(t=0,n=this.vertices.length;t<n;t++)o[t].normalize();for(i=0,r=this.faces.length;i<r;i++){var f=(a=this.faces[i]).vertexNormals;3===f.length?(f[0].copy(o[a.a]),f[1].copy(o[a.b]),f[2].copy(o[a.c])):(f[0]=o[a.a].clone(),f[1]=o[a.b].clone(),f[2]=o[a.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e,t,n;for(this.computeFaceNormals(),e=0,t=this.faces.length;e<t;e++){var i=(n=this.faces[e]).vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for((r=this.faces[n]).__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),e=0,t=r.vertexNormals.length;e<t;e++)r.__originalVertexNormals[e]?r.__originalVertexNormals[e].copy(r.vertexNormals[e]):r.__originalVertexNormals[e]=r.vertexNormals[e].clone();var a=new y;for(a.faces=this.faces,e=0,t=this.morphTargets.length;e<t;e++){if(!this.morphNormals[e]){this.morphNormals[e]={},this.morphNormals[e].faceNormals=[],this.morphNormals[e].vertexNormals=[];var o=this.morphNormals[e].faceNormals,s=this.morphNormals[e].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new c.a,u={a:new c.a,b:new c.a,c:new c.a},o.push(l),s.push(u)}var l,u,h=this.morphNormals[e];for(a.vertices=this.morphTargets[e].vertices,a.computeFaceNormals(),a.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],l=h.faceNormals[n],u=h.vertexNormals[n],l.copy(r.normal),u.a.copy(r.vertexNormals[0]),u.b.copy(r.vertexNormals[1]),u.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)(r=this.faces[n]).normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeLineDistances:function(){for(var e=0,t=this.vertices,n=0,i=t.length;n<i;n++)n>0&&(e+=t[n].distanceTo(t[n-1])),this.lineDistances[n]=e},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new s.a),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new o.a),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,n){if(!1!==(e&&e.isGeometry)){var i,o=this.vertices.length,s=this.vertices,c=e.vertices,l=this.faces,u=e.faces,h=this.faceVertexUvs[0],d=e.faceVertexUvs[0],f=this.colors,p=e.colors;void 0===n&&(n=0),void 0!==t&&(i=(new a.a).getNormalMatrix(t));for(var m=0,g=c.length;m<g;m++){var v=c[m].clone();void 0!==t&&v.applyMatrix4(t),s.push(v)}for(m=0,g=p.length;m<g;m++)f.push(p[m].clone());for(m=0,g=u.length;m<g;m++){var y,x,_,b=u[m],w=b.vertexNormals,E=b.vertexColors;(y=new r.a(b.a+o,b.b+o,b.c+o)).normal.copy(b.normal),void 0!==i&&y.normal.applyMatrix3(i).normalize();for(var T=0,S=w.length;T<S;T++)x=w[T].clone(),void 0!==i&&x.applyMatrix3(i).normalize(),y.vertexNormals.push(x);y.color.copy(b.color);for(T=0,S=E.length;T<S;T++)_=E[T],y.vertexColors.push(_.clone());y.materialIndex=b.materialIndex+n,l.push(y)}for(m=0,g=d.length;m<g;m++){var M=d[m],A=[];if(void 0!==M){for(T=0,S=M.length;T<S;T++)A.push(M[T].clone());h.push(A)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){!1!==(e&&e.isMesh)?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t,n,i,r,a,o,s,c={},l=[],u=[],h=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)e=this.vertices[n],void 0===c[t=Math.round(e.x*h)+"_"+Math.round(e.y*h)+"_"+Math.round(e.z*h)]?(c[t]=n,l.push(this.vertices[n]),u[n]=l.length-1):u[n]=u[c[t]];var d=[];for(n=0,i=this.faces.length;n<i;n++){(r=this.faces[n]).a=u[r.a],r.b=u[r.b],r.c=u[r.c],a=[r.a,r.b,r.c];for(var f=0;f<3;f++)if(a[f]===a[(f+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var p=d[n];for(this.faces.splice(p,1),o=0,s=this.faceVertexUvs.length;o<s;o++)this.faceVertexUvs[o].splice(p,1)}var m=this.vertices.length-l.length;return this.vertices=l,m},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,n=0;n<t;n++)e[n]._id=n;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===t&&(i=[]),o&&o.length===t&&(r=[]);for(n=0;n<t;n++){var s=e[n]._id;i&&i.push(a[s]),r&&r.push(o[s])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){var e={metadata:{version:4.4,type:"Geometry",generator:"Geometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var n in t)void 0!==t[n]&&(e[n]=t[n]);return e}for(var i=[],r=0;r<this.vertices.length;r++){var a=this.vertices[r];i.push(a.x,a.y,a.z)}var o=[],s=[],c={},l=[],u={},h=[],d={};for(r=0;r<this.faces.length;r++){var f=this.faces[r],p=void 0!==this.faceVertexUvs[0][r],m=f.normal.length()>0,g=f.vertexNormals.length>0,v=1!==f.color.r||1!==f.color.g||1!==f.color.b,y=f.vertexColors.length>0,x=0;if(x=E(x=E(x=E(x=E(x=E(x=E(x=E(x=E(x,0,0),1,!0),2,!1),3,p),4,m),5,g),6,v),7,y),o.push(x),o.push(f.a,f.b,f.c),o.push(f.materialIndex),p){var _=this.faceVertexUvs[0][r];o.push(M(_[0]),M(_[1]),M(_[2]))}if(m&&o.push(T(f.normal)),g){var b=f.vertexNormals;o.push(T(b[0]),T(b[1]),T(b[2]))}if(v&&o.push(S(f.color)),y){var w=f.vertexColors;o.push(S(w[0]),S(w[1]),S(w[2]))}}function E(e,t,n){return n?e|1<<t:e&~(1<<t)}function T(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==c[t]?c[t]:(c[t]=s.length/3,s.push(e.x,e.y,e.z),c[t])}function S(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==u[t]?u[t]:(u[t]=l.length,l.push(e.getHex()),u[t])}function M(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]?d[t]:(d[t]=h.length/2,h.push(e.x,e.y),d[t])}return e.data={},e.data.vertices=i,e.data.normals=s,l.length>0&&(e.data.colors=l),h.length>0&&(e.data.uvs=[h]),e.data.faces=o,e},clone:function(){return(new y).copy(this)},copy:function(e){var t,n,i,r,a,o;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=e.name;var s=e.vertices;for(t=0,n=s.length;t<n;t++)this.vertices.push(s[t].clone());var c=e.colors;for(t=0,n=c.length;t<n;t++)this.colors.push(c[t].clone());var l=e.faces;for(t=0,n=l.length;t<n;t++)this.faces.push(l[t].clone());for(t=0,n=e.faceVertexUvs.length;t<n;t++){var u=e.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=u.length;i<r;i++){var h=u[i],d=[];for(a=0,o=h.length;a<o;a++){var f=h[a];d.push(f.clone())}this.faceVertexUvs[t].push(d)}}var p=e.morphTargets;for(t=0,n=p.length;t<n;t++){var m={};if(m.name=p[t].name,void 0!==p[t].vertices)for(m.vertices=[],i=0,r=p[t].vertices.length;i<r;i++)m.vertices.push(p[t].vertices[i].clone());if(void 0!==p[t].normals)for(m.normals=[],i=0,r=p[t].normals.length;i<r;i++)m.normals.push(p[t].normals[i].clone());this.morphTargets.push(m)}var g=e.morphNormals;for(t=0,n=g.length;t<n;t++){var v={};if(void 0!==g[t].vertexNormals)for(v.vertexNormals=[],i=0,r=g[t].vertexNormals.length;i<r;i++){var y=g[t].vertexNormals[i],x={};x.a=y.a.clone(),x.b=y.b.clone(),x.c=y.c.clone(),v.vertexNormals.push(x)}if(void 0!==g[t].faceNormals)for(v.faceNormals=[],i=0,r=g[t].faceNormals.length;i<r;i++)v.faceNormals.push(g[t].faceNormals[i].clone());this.morphNormals.push(v)}var _=e.skinWeights;for(t=0,n=_.length;t<n;t++)this.skinWeights.push(_[t].clone());var b=e.skinIndices;for(t=0,n=b.length;t<n;t++)this.skinIndices.push(b[t].clone());var w=e.lineDistances;for(t=0,n=w.length;t<n;t++)this.lineDistances.push(w[t]);var E=e.boundingBox;null!==E&&(this.boundingBox=E.clone());var T=e.boundingSphere;return null!==T&&(this.boundingSphere=T.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(y.prototype,i.a.prototype)},function(e,t,n){"use strict";n(7);var i,r,a,o,s,c,l=n(0);function u(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}n.d(t,"a",function(){return u}),u.prototype={constructor:u,isMatrix4:!0,set:function(e,t,n,i,r,a,o,s,c,l,u,h,d,f,p,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=a,g[9]=o,g[13]=s,g[2]=c,g[6]=l,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new u).fromArray(this.elements)},copy:function(e){return this.elements.set(e.elements),this},copyPosition:function(e){var t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this},extractBasis:function(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this},extractRotation:function(e){void 0===c&&(c=new l.a);var t=this.elements,n=e.elements,i=1/c.setFromMatrixColumn(e,0).length(),r=1/c.setFromMatrixColumn(e,1).length(),a=1/c.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[8]=n[8]*a,t[9]=n[9]*a,t[10]=n[10]*a,this},makeRotationFromEuler:function(e){!1===(e&&e.isEuler)&&console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,n=e.x,i=e.y,r=e.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),c=Math.sin(i),l=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){var h=a*l,d=a*u,f=o*l,p=o*u;t[0]=s*l,t[4]=-s*u,t[8]=c,t[1]=d+f*c,t[5]=h-p*c,t[9]=-o*s,t[2]=p-h*c,t[6]=f+d*c,t[10]=a*s}else if("YXZ"===e.order){var m=s*l,g=s*u,v=c*l,y=c*u;t[0]=m+y*o,t[4]=v*o-g,t[8]=a*c,t[1]=a*u,t[5]=a*l,t[9]=-o,t[2]=g*o-v,t[6]=y+m*o,t[10]=a*s}else if("ZXY"===e.order){m=s*l,g=s*u,v=c*l,y=c*u;t[0]=m-y*o,t[4]=-a*u,t[8]=v+g*o,t[1]=g+v*o,t[5]=a*l,t[9]=y-m*o,t[2]=-a*c,t[6]=o,t[10]=a*s}else if("ZYX"===e.order){h=a*l,d=a*u,f=o*l,p=o*u;t[0]=s*l,t[4]=f*c-d,t[8]=h*c+p,t[1]=s*u,t[5]=p*c+h,t[9]=d*c-f,t[2]=-c,t[6]=o*s,t[10]=a*s}else if("YZX"===e.order){var x=a*s,_=a*c,b=o*s,w=o*c;t[0]=s*l,t[4]=w-x*u,t[8]=b*u+_,t[1]=u,t[5]=a*l,t[9]=-o*l,t[2]=-c*l,t[6]=_*u+b,t[10]=x-w*u}else if("XZY"===e.order){x=a*s,_=a*c,b=o*s,w=o*c;t[0]=s*l,t[4]=-u,t[8]=c*l,t[1]=x*u+w,t[5]=a*l,t[9]=_*u-b,t[2]=b*u-_,t[6]=o*l,t[10]=w*u+x}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z,a=e.w,o=n+n,s=i+i,c=r+r,l=n*o,u=n*s,h=n*c,d=i*s,f=i*c,p=r*c,m=a*o,g=a*s,v=a*c;return t[0]=1-(d+p),t[4]=u-v,t[8]=h+g,t[1]=u+v,t[5]=1-(l+p),t[9]=f-m,t[2]=h-g,t[6]=f+m,t[10]=1-(l+d),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(e,t,n){void 0===a&&(a=new l.a,o=new l.a,s=new l.a);var i=this.elements;return s.subVectors(e,t).normalize(),0===s.lengthSq()&&(s.z=1),a.crossVectors(n,s).normalize(),0===a.lengthSq()&&(s.z+=1e-4,a.crossVectors(n,s).normalize()),o.crossVectors(s,a),i[0]=a.x,i[4]=o.x,i[8]=s.x,i[1]=a.y,i[5]=o.y,i[9]=s.y,i[2]=a.z,i[6]=o.z,i[10]=s.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var n=e.elements,i=t.elements,r=this.elements,a=n[0],o=n[4],s=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],_=n[15],b=i[0],w=i[4],E=i[8],T=i[12],S=i[1],M=i[5],A=i[9],L=i[13],C=i[2],P=i[6],R=i[10],F=i[14],I=i[3],N=i[7],O=i[11],U=i[15];return r[0]=a*b+o*S+s*C+c*I,r[4]=a*w+o*M+s*P+c*N,r[8]=a*E+o*A+s*R+c*O,r[12]=a*T+o*L+s*F+c*U,r[1]=l*b+u*S+h*C+d*I,r[5]=l*w+u*M+h*P+d*N,r[9]=l*E+u*A+h*R+d*O,r[13]=l*T+u*L+h*F+d*U,r[2]=f*b+p*S+m*C+g*I,r[6]=f*w+p*M+m*P+g*N,r[10]=f*E+p*A+m*R+g*O,r[14]=f*T+p*L+m*F+g*U,r[3]=v*b+y*S+x*C+_*I,r[7]=v*w+y*M+x*P+_*N,r[11]=v*E+y*A+x*R+_*O,r[15]=v*T+y*L+x*F+_*U,this},multiplyToArray:function(e,t,n){var i=this.elements;return this.multiplyMatrices(e,t),n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e;return function(t){void 0===e&&(e=new l.a);for(var n=0,i=t.count;n<i;n++)e.x=t.getX(n),e.y=t.getY(n),e.z=t.getZ(n),e.applyMatrix4(this),t.setXYZ(n,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],a=e[1],o=e[5],s=e[9],c=e[13],l=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*s*u-i*c*u-r*o*h+n*c*h+i*o*d-n*s*d)+e[7]*(+t*s*d-t*c*h+r*a*h-i*a*d+i*c*l-r*s*l)+e[11]*(+t*c*u-t*o*d-r*a*u+n*a*d+r*o*l-n*c*l)+e[15]*(-i*o*l-t*s*u+t*o*h+i*a*u-n*a*h+n*s*l)},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var n=this.elements,i=e.elements,r=i[0],a=i[1],o=i[2],s=i[3],c=i[4],l=i[5],u=i[6],h=i[7],d=i[8],f=i[9],p=i[10],m=i[11],g=i[12],v=i[13],y=i[14],x=i[15],_=f*y*h-v*p*h+v*u*m-l*y*m-f*u*x+l*p*x,b=g*p*h-d*y*h-g*u*m+c*y*m+d*u*x-c*p*x,w=d*v*h-g*f*h+g*l*m-c*v*m-d*l*x+c*f*x,E=g*f*u-d*v*u-g*l*p+c*v*p+d*l*y-c*f*y,T=r*_+a*b+o*w+s*E;if(0===T){var S="THREE.Matrix4.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(S);return console.warn(S),this.identity()}var M=1/T;return n[0]=_*M,n[1]=(v*p*s-f*y*s-v*o*m+a*y*m+f*o*x-a*p*x)*M,n[2]=(l*y*s-v*u*s+v*o*h-a*y*h-l*o*x+a*u*x)*M,n[3]=(f*u*s-l*p*s-f*o*h+a*p*h+l*o*m-a*u*m)*M,n[4]=b*M,n[5]=(d*y*s-g*p*s+g*o*m-r*y*m-d*o*x+r*p*x)*M,n[6]=(g*u*s-c*y*s-g*o*h+r*y*h+c*o*x-r*u*x)*M,n[7]=(c*p*s-d*u*s+d*o*h-r*p*h-c*o*m+r*u*m)*M,n[8]=w*M,n[9]=(g*f*s-d*v*s-g*a*m+r*v*m+d*a*x-r*f*x)*M,n[10]=(c*v*s-g*l*s+g*a*h-r*v*h-c*a*x+r*l*x)*M,n[11]=(d*l*s-c*f*s-d*a*h+r*f*h+c*a*m-r*l*m)*M,n[12]=E*M,n[13]=(d*v*o-g*f*o+g*a*p-r*v*p-d*a*y+r*f*y)*M,n[14]=(g*l*o-c*v*o-g*a*u+r*v*u+c*a*y-r*l*y)*M,n[15]=(c*f*o-d*l*o+d*a*u-r*f*u-c*a*p+r*l*p)*M,this},scale:function(e){var t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))},makeTranslation:function(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var n=Math.cos(t),i=Math.sin(t),r=1-n,a=e.x,o=e.y,s=e.z,c=r*a,l=r*o;return this.set(c*a+n,c*o-i*s,c*s+i*o,0,c*o+i*s,l*o+n,l*s-i*a,0,c*s-i*o,l*s+i*a,r*s*s+n,0,0,0,0,1),this},makeScale:function(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(e,t,n){return this.set(1,t,n,0,e,1,n,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,n){return this.makeRotationFromQuaternion(t),this.scale(n),this.setPosition(e),this},decompose:function(e,t,n){void 0===i&&(i=new l.a,r=new u);var a=this.elements,o=i.set(a[0],a[1],a[2]).length(),s=i.set(a[4],a[5],a[6]).length(),c=i.set(a[8],a[9],a[10]).length();this.determinant()<0&&(o=-o),e.x=a[12],e.y=a[13],e.z=a[14],r.elements.set(this.elements);var h=1/o,d=1/s,f=1/c;return r.elements[0]*=h,r.elements[1]*=h,r.elements[2]*=h,r.elements[4]*=d,r.elements[5]*=d,r.elements[6]*=d,r.elements[8]*=f,r.elements[9]*=f,r.elements[10]*=f,t.setFromRotationMatrix(r),n.x=o,n.y=s,n.z=c,this},makePerspective:function(e,t,n,i,r,a){void 0===a&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var o=this.elements,s=2*r/(t-e),c=2*r/(n-i),l=(t+e)/(t-e),u=(n+i)/(n-i),h=-(a+r)/(a-r),d=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=l,o[12]=0,o[1]=0,o[5]=c,o[9]=u,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=d,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(e,t,n,i,r,a){var o=this.elements,s=1/(t-e),c=1/(n-i),l=1/(a-r),u=(t+e)*s,h=(n+i)*c,d=(a+r)*l;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-u,o[1]=0,o[5]=2*c,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*l,o[14]=-d,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(e){for(var t=this.elements,n=e.elements,i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<16;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}},function(e,t,n){"use strict";var i=n(12),r=n(6);function a(e){i.a.call(this),this.type="LineBasicMaterial",this.color=new r.a(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(e)}n.d(t,"a",function(){return a}),a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.isLineBasicMaterial=!0,a.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this}},function(e,t,n){"use strict";function i(e,t,n){var i=this,r=!1,a=0,o=0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===r&&void 0!==i.onStart&&i.onStart(e,a,o),r=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)}}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return i});var r=new i},function(e,t,n){"use strict";var i=n(24),r=n(1),a=n(7);n.d(t,"a",function(){return s});var o=0;function s(){Object.defineProperty(this,"id",{value:o++}),this.uuid=a.a.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=r.u,this.side=r.l,this.shading=r.p,this.vertexColors=r.q,this.opacity=1,this.transparent=!1,this.blendSrc=r.I,this.blendDst=r.J,this.blendEquation=r.z,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=r.S,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this._needsUpdate=!0}s.prototype={constructor:s,isMaterial:!0,get needsUpdate(){return this._needsUpdate},set needsUpdate(e){!0===e&&this.update(),this._needsUpdate=e},setValues:function(e){if(void 0!==e)for(var t in e){var n=e[t];if(void 0!==n){var i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]="overdraw"===t?Number(n):n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}else console.warn("THREE.Material: '"+t+"' parameter is undefined.")}},toJSON:function(e){var t=void 0===e;t&&(e={textures:{},images:{}});var n={metadata:{version:4.4,type:"Material",generator:"Material.toJSON"}};function i(e){var t=[];for(var n in e){var i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==r.u&&(n.blending=this.blending),this.shading!==r.p&&(n.shading=this.shading),this.side!==r.l&&(n.side=this.side),this.vertexColors!==r.q&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),n.skinning=this.skinning,n.morphTargets=this.morphTargets,t){var a=i(e.textures),o=i(e.images);a.length>0&&(n.textures=a),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.shading=e.shading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,n=null;if(null!==t){var i=t.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this},update:function(){this.dispatchEvent({type:"update"})},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(s.prototype,i.a.prototype)},function(e,t,n){"use strict";var i=n(39);function r(e,t){i.a.call(this,e,t),this.type="LineSegments"}n.d(t,"a",function(){return r}),r.prototype=Object.assign(Object.create(i.a.prototype),{constructor:r,isLineSegments:!0})},function(e,t,n){"use strict";var i=n(7),r=n(0),a=n(9);function o(){}n.d(t,"a",function(){return o}),o.prototype={constructor:o,getPoint:function(e){return console.warn("THREE.Curve: Warning, getPoint() not implemented!"),null},getPointAt:function(e){var t=this.getUtoTmapping(e);return this.getPoint(t)},getPoints:function(e){isNaN(e)&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return t},getSpacedPoints:function(e){isNaN(e)&&(e=5);for(var t=[],n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(isNaN(e)&&(e=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,n,i=[],r=this.getPoint(0),a=0;for(i.push(0),n=1;n<=e;n++)a+=(t=this.getPoint(n/e)).distanceTo(r),i.push(a),r=t;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var n,i=this.getLengths(),r=0,a=i.length;n=t||e*i[a-1];for(var o,s=0,c=a-1;s<=c;)if((o=i[r=Math.floor(s+(c-s)/2)]-n)<0)s=r+1;else{if(!(o>0)){c=r;break}c=r-1}if(i[r=c]===n)return r/(a-1);var l=i[r];return(r+(n-l)/(i[r+1]-l))/(a-1)},getTangent:function(e){var t=e-1e-4,n=e+1e-4;t<0&&(t=0),n>1&&(n=1);var i=this.getPoint(t);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(e){var t=this.getUtoTmapping(e);return this.getTangent(t)},computeFrenetFrames:function(e,t){var n,o,s,c=new r.a,l=[],u=[],h=[],d=new r.a,f=new a.a;for(n=0;n<=e;n++)o=n/e,l[n]=this.getTangentAt(o),l[n].normalize();u[0]=new r.a,h[0]=new r.a;var p=Number.MAX_VALUE,m=Math.abs(l[0].x),g=Math.abs(l[0].y),v=Math.abs(l[0].z);for(m<=p&&(p=m,c.set(1,0,0)),g<=p&&(p=g,c.set(0,1,0)),v<=p&&c.set(0,0,1),d.crossVectors(l[0],c).normalize(),u[0].crossVectors(l[0],d),h[0].crossVectors(l[0],u[0]),n=1;n<=e;n++)u[n]=u[n-1].clone(),h[n]=h[n-1].clone(),d.crossVectors(l[n-1],l[n]),d.length()>Number.EPSILON&&(d.normalize(),s=Math.acos(i.a.clamp(l[n-1].dot(l[n]),-1,1)),u[n].applyMatrix4(f.makeRotationAxis(d,s))),h[n].crossVectors(l[n],u[n]);if(!0===t)for(s=Math.acos(i.a.clamp(u[0].dot(u[e]),-1,1)),s/=e,l[0].dot(d.crossVectors(u[0],u[e]))>0&&(s=-s),n=1;n<=e;n++)u[n].applyMatrix4(f.makeRotationAxis(l[n],s*n)),h[n].crossVectors(l[n],u[n]);return{tangents:l,normals:u,binormals:h}}}},function(e,t,n){"use strict";var i=n(24),r=n(1),a=n(7),o=n(4);n.d(t,"a",function(){return c});var s=0;function c(e,t,n,i,l,u,h,d,f,p){Object.defineProperty(this,"id",{value:s++}),this.uuid=a.a.generateUUID(),this.name="",this.image=void 0!==e?e:c.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:c.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:r._14,this.wrapT=void 0!==i?i:r._14,this.magFilter=void 0!==l?l:r._19,this.minFilter=void 0!==u?u:r._21,this.anisotropy=void 0!==f?f:1,this.format=void 0!==h?h:r._36,this.type=void 0!==d?d:r._22,this.offset=new o.a(0,0),this.repeat=new o.a(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==p?p:r._63,this.version=0,this.onUpdate=null}c.DEFAULT_IMAGE=void 0,c.DEFAULT_MAPPING=r._5,c.prototype={constructor:c,isTexture:!0,set needsUpdate(e){!0===e&&this.version++},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){if(void 0!==e.textures[this.uuid])return e.textures[this.uuid];var t={metadata:{version:4.4,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;void 0===n.uuid&&(n.uuid=a.a.generateUUID()),void 0===e.images[n.uuid]&&(e.images[n.uuid]={uuid:n.uuid,url:function(e){var t;return void 0!==e.toDataURL?t=e:((t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")).width=e.width,t.height=e.height,t.getContext("2d").drawImage(e,0,0,e.width,e.height)),t.width>2048||t.height>2048?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(n)}),t.image=n.uuid}return e.textures[this.uuid]=t,t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(this.mapping===r._5){if(e.multiply(this.repeat),e.add(this.offset),e.x<0||e.x>1)switch(this.wrapS){case r._13:e.x=e.x-Math.floor(e.x);break;case r._14:e.x=e.x<0?0:1;break;case r._15:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case r._13:e.y=e.y-Math.floor(e.y);break;case r._14:e.y=e.y<0?0:1;break;case r._15:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}},Object.assign(c.prototype,i.a.prototype)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(320),r=(n.n(i),n(130));n.d(t,"WebGLRenderTargetCube",function(){return r.a});var a=n(47);n.d(t,"WebGLRenderTarget",function(){return a.a});var o=n(131);n.d(t,"WebGLRenderer",function(){return o.a});var s=n(76);n.d(t,"ShaderLib",function(){return s.a});var c=n(77);n.d(t,"UniformsLib",function(){return c.a});var l=n(34);n.d(t,"UniformsUtils",function(){return l.a});var u=n(48);n.d(t,"ShaderChunk",function(){return u.a});var h=n(135);n.d(t,"FogExp2",function(){return h.a});var d=n(134);n.d(t,"Fog",function(){return d.a});var f=n(136);n.d(t,"Scene",function(){return f.a});var p=n(319);n.d(t,"LensFlare",function(){return p.a});var m=n(75);n.d(t,"Sprite",function(){return m.a});var g=n(73);n.d(t,"LOD",function(){return g.a});var v=n(129);n.d(t,"SkinnedMesh",function(){return v.a});var y=n(128);n.d(t,"Skeleton",function(){return y.a});var x=n(127);n.d(t,"Bone",function(){return x.a});var _=n(21);n.d(t,"Mesh",function(){return _.a});var b=n(13);n.d(t,"LineSegments",function(){return b.a});var w=n(39);n.d(t,"Line",function(){return w.a});var E=n(74);n.d(t,"Points",function(){return E.a});var T=n(72);n.d(t,"Group",function(){return T.a});var S=n(339);n.d(t,"VideoTexture",function(){return S.a});var M=n(49);n.d(t,"DataTexture",function(){return M.a});var A=n(137);n.d(t,"CompressedTexture",function(){return A.a});var L=n(78);n.d(t,"CubeTexture",function(){return L.a});var C=n(337);n.d(t,"CanvasTexture",function(){return C.a});var P=n(338);n.d(t,"DepthTexture",function(){return P.a});var R=n(15);n.d(t,"Texture",function(){return R.a});var F=n(96);n.d(t,"WireframeGeometry",function(){return F.WireframeGeometry}),n.d(t,"ParametricGeometry",function(){return F.ParametricGeometry}),n.d(t,"ParametricBufferGeometry",function(){return F.ParametricBufferGeometry}),n.d(t,"TetrahedronGeometry",function(){return F.TetrahedronGeometry}),n.d(t,"TetrahedronBufferGeometry",function(){return F.TetrahedronBufferGeometry}),n.d(t,"OctahedronGeometry",function(){return F.OctahedronGeometry}),n.d(t,"OctahedronBufferGeometry",function(){return F.OctahedronBufferGeometry}),n.d(t,"IcosahedronGeometry",function(){return F.IcosahedronGeometry}),n.d(t,"IcosahedronBufferGeometry",function(){return F.IcosahedronBufferGeometry}),n.d(t,"DodecahedronGeometry",function(){return F.DodecahedronGeometry}),n.d(t,"DodecahedronBufferGeometry",function(){return F.DodecahedronBufferGeometry}),n.d(t,"PolyhedronGeometry",function(){return F.PolyhedronGeometry}),n.d(t,"PolyhedronBufferGeometry",function(){return F.PolyhedronBufferGeometry}),n.d(t,"TubeGeometry",function(){return F.TubeGeometry}),n.d(t,"TubeBufferGeometry",function(){return F.TubeBufferGeometry}),n.d(t,"TorusKnotGeometry",function(){return F.TorusKnotGeometry}),n.d(t,"TorusKnotBufferGeometry",function(){return F.TorusKnotBufferGeometry}),n.d(t,"TorusGeometry",function(){return F.TorusGeometry}),n.d(t,"TorusBufferGeometry",function(){return F.TorusBufferGeometry}),n.d(t,"TextGeometry",function(){return F.TextGeometry}),n.d(t,"SphereGeometry",function(){return F.SphereGeometry}),n.d(t,"SphereBufferGeometry",function(){return F.SphereBufferGeometry}),n.d(t,"RingGeometry",function(){return F.RingGeometry}),n.d(t,"RingBufferGeometry",function(){return F.RingBufferGeometry}),n.d(t,"PlaneGeometry",function(){return F.PlaneGeometry}),n.d(t,"PlaneBufferGeometry",function(){return F.PlaneBufferGeometry}),n.d(t,"LatheGeometry",function(){return F.LatheGeometry}),n.d(t,"LatheBufferGeometry",function(){return F.LatheBufferGeometry}),n.d(t,"ShapeGeometry",function(){return F.ShapeGeometry}),n.d(t,"ShapeBufferGeometry",function(){return F.ShapeBufferGeometry}),n.d(t,"ExtrudeGeometry",function(){return F.ExtrudeGeometry}),n.d(t,"EdgesGeometry",function(){return F.EdgesGeometry}),n.d(t,"ConeGeometry",function(){return F.ConeGeometry}),n.d(t,"ConeBufferGeometry",function(){return F.ConeBufferGeometry}),n.d(t,"CylinderGeometry",function(){return F.CylinderGeometry}),n.d(t,"CylinderBufferGeometry",function(){return F.CylinderBufferGeometry}),n.d(t,"CircleGeometry",function(){return F.CircleGeometry}),n.d(t,"CircleBufferGeometry",function(){return F.CircleBufferGeometry}),n.d(t,"BoxGeometry",function(){return F.BoxGeometry}),n.d(t,"BoxBufferGeometry",function(){return F.BoxBufferGeometry});var I=n(117);n.d(t,"ShadowMaterial",function(){return I.ShadowMaterial}),n.d(t,"SpriteMaterial",function(){return I.SpriteMaterial}),n.d(t,"RawShaderMaterial",function(){return I.RawShaderMaterial}),n.d(t,"ShaderMaterial",function(){return I.ShaderMaterial}),n.d(t,"PointsMaterial",function(){return I.PointsMaterial}),n.d(t,"MultiMaterial",function(){return I.MultiMaterial}),n.d(t,"MeshPhysicalMaterial",function(){return I.MeshPhysicalMaterial}),n.d(t,"MeshStandardMaterial",function(){return I.MeshStandardMaterial}),n.d(t,"MeshPhongMaterial",function(){return I.MeshPhongMaterial}),n.d(t,"MeshToonMaterial",function(){return I.MeshToonMaterial}),n.d(t,"MeshNormalMaterial",function(){return I.MeshNormalMaterial}),n.d(t,"MeshLambertMaterial",function(){return I.MeshLambertMaterial}),n.d(t,"MeshDepthMaterial",function(){return I.MeshDepthMaterial}),n.d(t,"MeshBasicMaterial",function(){return I.MeshBasicMaterial}),n.d(t,"LineDashedMaterial",function(){return I.LineDashedMaterial}),n.d(t,"LineBasicMaterial",function(){return I.LineBasicMaterial}),n.d(t,"Material",function(){return I.Material});var N=n(307);n.d(t,"CompressedTextureLoader",function(){return N.a});var O=n(114);n.d(t,"DataTextureLoader",function(){return O.a});var U=n(113);n.d(t,"CubeTextureLoader",function(){return U.a});var D=n(65);n.d(t,"TextureLoader",function(){return D.a});var z=n(309);n.d(t,"ObjectLoader",function(){return z.a});var k=n(64);n.d(t,"MaterialLoader",function(){return k.a});var B=n(112);n.d(t,"BufferGeometryLoader",function(){return B.a});var G=n(11);n.d(t,"DefaultLoadingManager",function(){return G.a}),n.d(t,"LoadingManager",function(){return G.b});var H=n(115);n.d(t,"JSONLoader",function(){return H.a});var V=n(46);n.d(t,"ImageLoader",function(){return V.a});var j=n(308);n.d(t,"FontLoader",function(){return j.a});var W=n(17);n.d(t,"FileLoader",function(){return W.a});var X=n(116);n.d(t,"Loader",function(){return X.a});var Y=n(63);n.d(t,"Cache",function(){return Y.a});var q=n(111);n.d(t,"AudioLoader",function(){return q.a});var Q=n(110);n.d(t,"SpotLightShadow",function(){return Q.a});var Z=n(109);n.d(t,"SpotLight",function(){return Z.a});var $=n(108);n.d(t,"PointLight",function(){return $.a});var J=n(306);n.d(t,"RectAreaLight",function(){return J.a});var K=n(107);n.d(t,"HemisphereLight",function(){return K.a});var ee=n(106);n.d(t,"DirectionalLightShadow",function(){return ee.a});var te=n(105);n.d(t,"DirectionalLight",function(){return te.a});var ne=n(104);n.d(t,"AmbientLight",function(){return ne.a});var ie=n(45);n.d(t,"LightShadow",function(){return ie.a});var re=n(25);n.d(t,"Light",function(){return re.a});var ae=n(267);n.d(t,"StereoCamera",function(){return ae.a});var oe=n(23);n.d(t,"PerspectiveCamera",function(){return oe.a});var se=n(42);n.d(t,"OrthographicCamera",function(){return se.a});var ce=n(266);n.d(t,"CubeCamera",function(){return ce.a});var le=n(41);n.d(t,"Camera",function(){return le.a});var ue=n(264);n.d(t,"AudioListener",function(){return ue.a});var he=n(265);n.d(t,"PositionalAudio",function(){return he.a});var de=n(55);n.d(t,"AudioContext",function(){return de.a});var fe=n(84);n.d(t,"AudioAnalyser",function(){return fe.a});var pe=n(54);n.d(t,"Audio",function(){return pe.a});var me=n(53);n.d(t,"VectorKeyframeTrack",function(){return me.a});var ge=n(83);n.d(t,"StringKeyframeTrack",function(){return ge.a});var ve=n(52);n.d(t,"QuaternionKeyframeTrack",function(){return ve.a});var ye=n(51);n.d(t,"NumberKeyframeTrack",function(){return ye.a});var xe=n(82);n.d(t,"ColorKeyframeTrack",function(){return xe.a});var _e=n(81);n.d(t,"BooleanKeyframeTrack",function(){return _e.a});var be=n(80);n.d(t,"PropertyMixer",function(){return be.a});var we=n(50);n.d(t,"PropertyBinding",function(){return we.a});var Ee=n(79);n.d(t,"KeyframeTrack",function(){return Ee.a});var Te=n(35);n.d(t,"AnimationUtils",function(){return Te.a});var Se=n(263);n.d(t,"AnimationObjectGroup",function(){return Se.a});var Me=n(262);n.d(t,"AnimationMixer",function(){return Me.a});var Ae=n(40);n.d(t,"AnimationClip",function(){return Ae.a});var Le=n(87);n.d(t,"Uniform",function(){return Le.a});var Ce=n(271);n.d(t,"InstancedBufferGeometry",function(){return Ce.a});var Pe=n(2);n.d(t,"BufferGeometry",function(){return Pe.a});var Re=n(8);n.d(t,"GeometryIdCount",function(){return Re.a}),n.d(t,"Geometry",function(){return Re.b});var Fe=n(273);n.d(t,"InterleavedBufferAttribute",function(){return Fe.a});var Ie=n(272);n.d(t,"InstancedInterleavedBuffer",function(){return Ie.a});var Ne=n(85);n.d(t,"InterleavedBuffer",function(){return Ne.a});var Oe=n(270);n.d(t,"InstancedBufferAttribute",function(){return Oe.a});var Ue=n(3);n.d(t,"Float64BufferAttribute",function(){return Ue.a}),n.d(t,"Float32BufferAttribute",function(){return Ue.b}),n.d(t,"Uint32BufferAttribute",function(){return Ue.c}),n.d(t,"Int32BufferAttribute",function(){return Ue.d}),n.d(t,"Uint16BufferAttribute",function(){return Ue.e}),n.d(t,"Int16BufferAttribute",function(){return Ue.f}),n.d(t,"Uint8ClampedBufferAttribute",function(){return Ue.g}),n.d(t,"Uint8BufferAttribute",function(){return Ue.h}),n.d(t,"Int8BufferAttribute",function(){return Ue.i}),n.d(t,"BufferAttribute",function(){return Ue.j});var De=n(29);n.d(t,"Face3",function(){return De.a});var ze=n(5);n.d(t,"Object3D",function(){return ze.a});var ke=n(274);n.d(t,"Raycaster",function(){return ke.a});var Be=n(86);n.d(t,"Layers",function(){return Be.a});var Ge=n(24);n.d(t,"EventDispatcher",function(){return Ge.a});var He=n(268);n.d(t,"Clock",function(){return He.a});var Ve=n(126);n.d(t,"QuaternionLinearInterpolant",function(){return Ve.a});var je=n(71);n.d(t,"LinearInterpolant",function(){return je.a});var We=n(125);n.d(t,"DiscreteInterpolant",function(){return We.a});var Xe=n(124);n.d(t,"CubicInterpolant",function(){return Xe.a});var Ye=n(37);n.d(t,"Interpolant",function(){return Ye.a});var qe=n(123);n.d(t,"Triangle",function(){return qe.a});var Qe=n(7);n.d(t,"Math",function(){return Qe.a});var Ze=n(318);n.d(t,"Spherical",function(){return Ze.a});var $e=n(317);n.d(t,"Cylindrical",function(){return $e.a});var Je=n(38);n.d(t,"Plane",function(){return Je.a});var Ke=n(69);n.d(t,"Frustum",function(){return Ke.a});var et=n(19);n.d(t,"Sphere",function(){return et.a});var tt=n(33);n.d(t,"Ray",function(){return tt.a});var nt=n(9);n.d(t,"Matrix4",function(){return nt.a});var it=n(22);n.d(t,"Matrix3",function(){return it.a});var rt=n(32);n.d(t,"Box3",function(){return rt.a});var at=n(68);n.d(t,"Box2",function(){return at.a});var ot=n(70);n.d(t,"Line3",function(){return ot.a});var st=n(122);n.d(t,"Euler",function(){return st.a});var ct=n(20);n.d(t,"Vector4",function(){return ct.a});var lt=n(0);n.d(t,"Vector3",function(){return lt.a});var ut=n(4);n.d(t,"Vector2",function(){return ut.a});var ht=n(18);n.d(t,"Quaternion",function(){return ht.a});var dt=n(6);n.d(t,"Color",function(){return dt.a});var ft=n(281);n.d(t,"MorphBlendMesh",function(){return ft.a});var pt=n(280);n.d(t,"ImmediateRenderObject",function(){return pt.a});var mt=n(305);n.d(t,"VertexNormalsHelper",function(){return mt.a});var gt=n(304);n.d(t,"SpotLightHelper",function(){return gt.a});var vt=n(303);n.d(t,"SkeletonHelper",function(){return vt.a});var yt=n(300);n.d(t,"PointLightHelper",function(){return yt.a});var xt=n(302);n.d(t,"RectAreaLightHelper",function(){return xt.a});var _t=n(299);n.d(t,"HemisphereLightHelper",function(){return _t.a});var bt=n(103);n.d(t,"GridHelper",function(){return bt.a});var wt=n(301);n.d(t,"PolarGridHelper",function(){return wt.a});var Et=n(298);n.d(t,"FaceNormalsHelper",function(){return Et.a});var Tt=n(297);n.d(t,"DirectionalLightHelper",function(){return Tt.a});var St=n(296);n.d(t,"CameraHelper",function(){return St.a});var Mt=n(102);n.d(t,"BoxHelper",function(){return Mt.a});var At=n(294);n.d(t,"ArrowHelper",function(){return At.a});var Lt=n(295);n.d(t,"AxisHelper",function(){return Lt.a});var Ct=n(91);n.d(t,"CatmullRomCurve3",function(){return Ct.a});var Pt=n(277);n.d(t,"CubicBezierCurve3",function(){return Pt.a});var Rt=n(279);n.d(t,"QuadraticBezierCurve3",function(){return Rt.a});var Ft=n(278);n.d(t,"LineCurve3",function(){return Ft.a});var It=n(276);n.d(t,"ArcCurve",function(){return It.a});var Nt=n(59);n.d(t,"EllipseCurve",function(){return Nt.a});var Ot=n(94);n.d(t,"SplineCurve",function(){return Ot.a});var Ut=n(92);n.d(t,"CubicBezierCurve",function(){return Ut.a});var Dt=n(93);n.d(t,"QuadraticBezierCurve",function(){return Dt.a});var zt=n(60);n.d(t,"LineCurve",function(){return zt.a});var kt=n(58);n.d(t,"Shape",function(){return kt.a});var Bt=n(57);n.d(t,"Path",function(){return Bt.a});var Gt=n(90);n.d(t,"ShapePath",function(){return Gt.a});var Ht=n(88);n.d(t,"Font",function(){return Ht.a});var Vt=n(56);n.d(t,"CurvePath",function(){return Vt.a});var jt=n(14);n.d(t,"Curve",function(){return jt.a});var Wt=n(43);n.d(t,"ShapeUtils",function(){return Wt.a});var Xt=n(275);n.d(t,"SceneUtils",function(){return Xt.a});var Yt=n(1);n.d(t,"REVISION",function(){return Yt.a}),n.d(t,"MOUSE",function(){return Yt.b}),n.d(t,"CullFaceNone",function(){return Yt.c}),n.d(t,"CullFaceBack",function(){return Yt.d}),n.d(t,"CullFaceFront",function(){return Yt.e}),n.d(t,"CullFaceFrontBack",function(){return Yt.f}),n.d(t,"FrontFaceDirectionCW",function(){return Yt.g}),n.d(t,"FrontFaceDirectionCCW",function(){return Yt.h}),n.d(t,"BasicShadowMap",function(){return Yt.i}),n.d(t,"PCFShadowMap",function(){return Yt.j}),n.d(t,"PCFSoftShadowMap",function(){return Yt.k}),n.d(t,"FrontSide",function(){return Yt.l}),n.d(t,"BackSide",function(){return Yt.m}),n.d(t,"DoubleSide",function(){return Yt.n}),n.d(t,"FlatShading",function(){return Yt.o}),n.d(t,"SmoothShading",function(){return Yt.p}),n.d(t,"NoColors",function(){return Yt.q}),n.d(t,"FaceColors",function(){return Yt.r}),n.d(t,"VertexColors",function(){return Yt.s}),n.d(t,"NoBlending",function(){return Yt.t}),n.d(t,"NormalBlending",function(){return Yt.u}),n.d(t,"AdditiveBlending",function(){return Yt.v}),n.d(t,"SubtractiveBlending",function(){return Yt.w}),n.d(t,"MultiplyBlending",function(){return Yt.x}),n.d(t,"CustomBlending",function(){return Yt.y}),n.d(t,"AddEquation",function(){return Yt.z}),n.d(t,"SubtractEquation",function(){return Yt.A}),n.d(t,"ReverseSubtractEquation",function(){return Yt.B}),n.d(t,"MinEquation",function(){return Yt.C}),n.d(t,"MaxEquation",function(){return Yt.D}),n.d(t,"ZeroFactor",function(){return Yt.E}),n.d(t,"OneFactor",function(){return Yt.F}),n.d(t,"SrcColorFactor",function(){return Yt.G}),n.d(t,"OneMinusSrcColorFactor",function(){return Yt.H}),n.d(t,"SrcAlphaFactor",function(){return Yt.I}),n.d(t,"OneMinusSrcAlphaFactor",function(){return Yt.J}),n.d(t,"DstAlphaFactor",function(){return Yt.K}),n.d(t,"OneMinusDstAlphaFactor",function(){return Yt.L}),n.d(t,"DstColorFactor",function(){return Yt.M}),n.d(t,"OneMinusDstColorFactor",function(){return Yt.N}),n.d(t,"SrcAlphaSaturateFactor",function(){return Yt.O}),n.d(t,"NeverDepth",function(){return Yt.P}),n.d(t,"AlwaysDepth",function(){return Yt.Q}),n.d(t,"LessDepth",function(){return Yt.R}),n.d(t,"LessEqualDepth",function(){return Yt.S}),n.d(t,"EqualDepth",function(){return Yt.T}),n.d(t,"GreaterEqualDepth",function(){return Yt.U}),n.d(t,"GreaterDepth",function(){return Yt.V}),n.d(t,"NotEqualDepth",function(){return Yt.W}),n.d(t,"MultiplyOperation",function(){return Yt.X}),n.d(t,"MixOperation",function(){return Yt.Y}),n.d(t,"AddOperation",function(){return Yt.Z}),n.d(t,"NoToneMapping",function(){return Yt._0}),n.d(t,"LinearToneMapping",function(){return Yt._1}),n.d(t,"ReinhardToneMapping",function(){return Yt._2}),n.d(t,"Uncharted2ToneMapping",function(){return Yt._3}),n.d(t,"CineonToneMapping",function(){return Yt._4}),n.d(t,"UVMapping",function(){return Yt._5}),n.d(t,"CubeReflectionMapping",function(){return Yt._6}),n.d(t,"CubeRefractionMapping",function(){return Yt._7}),n.d(t,"EquirectangularReflectionMapping",function(){return Yt._8}),n.d(t,"EquirectangularRefractionMapping",function(){return Yt._9}),n.d(t,"SphericalReflectionMapping",function(){return Yt._10}),n.d(t,"CubeUVReflectionMapping",function(){return Yt._11}),n.d(t,"CubeUVRefractionMapping",function(){return Yt._12}),n.d(t,"RepeatWrapping",function(){return Yt._13}),n.d(t,"ClampToEdgeWrapping",function(){return Yt._14}),n.d(t,"MirroredRepeatWrapping",function(){return Yt._15}),n.d(t,"NearestFilter",function(){return Yt._16}),n.d(t,"NearestMipMapNearestFilter",function(){return Yt._17}),n.d(t,"NearestMipMapLinearFilter",function(){return Yt._18}),n.d(t,"LinearFilter",function(){return Yt._19}),n.d(t,"LinearMipMapNearestFilter",function(){return Yt._20}),n.d(t,"LinearMipMapLinearFilter",function(){return Yt._21}),n.d(t,"UnsignedByteType",function(){return Yt._22}),n.d(t,"ByteType",function(){return Yt._23}),n.d(t,"ShortType",function(){return Yt._24}),n.d(t,"UnsignedShortType",function(){return Yt._25}),n.d(t,"IntType",function(){return Yt._26}),n.d(t,"UnsignedIntType",function(){return Yt._27}),n.d(t,"FloatType",function(){return Yt._28}),n.d(t,"HalfFloatType",function(){return Yt._29}),n.d(t,"UnsignedShort4444Type",function(){return Yt._30}),n.d(t,"UnsignedShort5551Type",function(){return Yt._31}),n.d(t,"UnsignedShort565Type",function(){return Yt._32}),n.d(t,"UnsignedInt248Type",function(){return Yt._33}),n.d(t,"AlphaFormat",function(){return Yt._34}),n.d(t,"RGBFormat",function(){return Yt._35}),n.d(t,"RGBAFormat",function(){return Yt._36}),n.d(t,"LuminanceFormat",function(){return Yt._37}),n.d(t,"LuminanceAlphaFormat",function(){return Yt._38}),n.d(t,"RGBEFormat",function(){return Yt._39}),n.d(t,"DepthFormat",function(){return Yt._40}),n.d(t,"DepthStencilFormat",function(){return Yt._41}),n.d(t,"RGB_S3TC_DXT1_Format",function(){return Yt._42}),n.d(t,"RGBA_S3TC_DXT1_Format",function(){return Yt._43}),n.d(t,"RGBA_S3TC_DXT3_Format",function(){return Yt._44}),n.d(t,"RGBA_S3TC_DXT5_Format",function(){return Yt._45}),n.d(t,"RGB_PVRTC_4BPPV1_Format",function(){return Yt._46}),n.d(t,"RGB_PVRTC_2BPPV1_Format",function(){return Yt._47}),n.d(t,"RGBA_PVRTC_4BPPV1_Format",function(){return Yt._48}),n.d(t,"RGBA_PVRTC_2BPPV1_Format",function(){return Yt._49}),n.d(t,"RGB_ETC1_Format",function(){return Yt._50}),n.d(t,"LoopOnce",function(){return Yt._51}),n.d(t,"LoopRepeat",function(){return Yt._52}),n.d(t,"LoopPingPong",function(){return Yt._53}),n.d(t,"InterpolateDiscrete",function(){return Yt._54}),n.d(t,"InterpolateLinear",function(){return Yt._55}),n.d(t,"InterpolateSmooth",function(){return Yt._56}),n.d(t,"ZeroCurvatureEnding",function(){return Yt._57}),n.d(t,"ZeroSlopeEnding",function(){return Yt._58}),n.d(t,"WrapAroundEnding",function(){return Yt._59}),n.d(t,"TrianglesDrawMode",function(){return Yt._60}),n.d(t,"TriangleStripDrawMode",function(){return Yt._61}),n.d(t,"TriangleFanDrawMode",function(){return Yt._62}),n.d(t,"LinearEncoding",function(){return Yt._63}),n.d(t,"sRGBEncoding",function(){return Yt._64}),n.d(t,"GammaEncoding",function(){return Yt._65}),n.d(t,"RGBEEncoding",function(){return Yt._66}),n.d(t,"LogLuvEncoding",function(){return Yt._67}),n.d(t,"RGBM7Encoding",function(){return Yt._68}),n.d(t,"RGBM16Encoding",function(){return Yt._69}),n.d(t,"RGBDEncoding",function(){return Yt._70}),n.d(t,"BasicDepthPacking",function(){return Yt._71}),n.d(t,"RGBADepthPacking",function(){return Yt._72});var qt=n(260);n.d(t,"CubeGeometry",function(){return qt.a}),n.d(t,"Face4",function(){return qt.b}),n.d(t,"LineStrip",function(){return qt.c}),n.d(t,"LinePieces",function(){return qt.d}),n.d(t,"MeshFaceMaterial",function(){return qt.e}),n.d(t,"PointCloud",function(){return qt.f}),n.d(t,"Particle",function(){return qt.g}),n.d(t,"ParticleSystem",function(){return qt.h}),n.d(t,"PointCloudMaterial",function(){return qt.i}),n.d(t,"ParticleBasicMaterial",function(){return qt.j}),n.d(t,"ParticleSystemMaterial",function(){return qt.k}),n.d(t,"Vertex",function(){return qt.l}),n.d(t,"DynamicBufferAttribute",function(){return qt.m}),n.d(t,"Int8Attribute",function(){return qt.n}),n.d(t,"Uint8Attribute",function(){return qt.o}),n.d(t,"Uint8ClampedAttribute",function(){return qt.p}),n.d(t,"Int16Attribute",function(){return qt.q}),n.d(t,"Uint16Attribute",function(){return qt.r}),n.d(t,"Int32Attribute",function(){return qt.s}),n.d(t,"Uint32Attribute",function(){return qt.t}),n.d(t,"Float32Attribute",function(){return qt.u}),n.d(t,"Float64Attribute",function(){return qt.v}),n.d(t,"ClosedSplineCurve3",function(){return qt.w}),n.d(t,"SplineCurve3",function(){return qt.x}),n.d(t,"Spline",function(){return qt.y}),n.d(t,"BoundingBoxHelper",function(){return qt.z}),n.d(t,"EdgesHelper",function(){return qt.A}),n.d(t,"WireframeHelper",function(){return qt.B}),n.d(t,"XHRLoader",function(){return qt.C}),n.d(t,"BinaryTextureLoader",function(){return qt.D}),n.d(t,"GeometryUtils",function(){return qt.E}),n.d(t,"ImageUtils",function(){return qt.F}),n.d(t,"Projector",function(){return qt.G}),n.d(t,"CanvasRenderer",function(){return qt.H})},function(e,t,n){"use strict";var i=n(63),r=n(11);function a(e){this.manager=void 0!==e?e:r.a}n.d(t,"a",function(){return a}),Object.assign(a.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var a=this,o=i.a.get(e);if(void 0!==o)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;var s=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var c=s[1],l=!!s[2],u=s[3];u=window.decodeURIComponent(u),l&&(u=window.atob(u));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":h=new ArrayBuffer(u.length);for(var f=new Uint8Array(h),p=0;p<u.length;p++)f[p]=u.charCodeAt(p);"blob"===d&&(h=new Blob([h],{type:c}));break;case"document":var m=new DOMParser;h=m.parseFromString(u,c);break;case"json":h=JSON.parse(u);break;default:h=u}window.setTimeout(function(){t&&t(h),a.manager.itemEnd(e)},0)}catch(t){window.setTimeout(function(){r&&r(t),a.manager.itemError(e)},0)}}else{var g=new XMLHttpRequest;g.open("GET",e,!0),g.addEventListener("load",function(n){var o=n.target.response;i.a.add(e,o),200===this.status?(t&&t(o),a.manager.itemEnd(e)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(o),a.manager.itemEnd(e)):(r&&r(n),a.manager.itemError(e))},!1),void 0!==n&&g.addEventListener("progress",function(e){n(e)},!1),g.addEventListener("error",function(t){r&&r(t),a.manager.itemError(e)},!1),void 0!==this.responseType&&(g.responseType=this.responseType),void 0!==this.withCredentials&&(g.withCredentials=this.withCredentials),g.overrideMimeType&&g.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),g.send(null)}return a.manager.itemStart(e),g},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this}})},function(e,t,n){"use strict";var i,r,a=n(0);function o(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._w=void 0!==i?i:1}n.d(t,"a",function(){return o}),o.prototype={constructor:o,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get w(){return this._w},set w(e){this._w=e,this.onChangeCallback()},set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!1===(e&&e.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=Math.cos(e._x/2),i=Math.cos(e._y/2),r=Math.cos(e._z/2),a=Math.sin(e._x/2),o=Math.sin(e._y/2),s=Math.sin(e._z/2),c=e.order;return"XYZ"===c?(this._x=a*i*r+n*o*s,this._y=n*o*r-a*i*s,this._z=n*i*s+a*o*r,this._w=n*i*r-a*o*s):"YXZ"===c?(this._x=a*i*r+n*o*s,this._y=n*o*r-a*i*s,this._z=n*i*s-a*o*r,this._w=n*i*r+a*o*s):"ZXY"===c?(this._x=a*i*r-n*o*s,this._y=n*o*r+a*i*s,this._z=n*i*s+a*o*r,this._w=n*i*r-a*o*s):"ZYX"===c?(this._x=a*i*r-n*o*s,this._y=n*o*r+a*i*s,this._z=n*i*s-a*o*r,this._w=n*i*r+a*o*s):"YZX"===c?(this._x=a*i*r+n*o*s,this._y=n*o*r+a*i*s,this._z=n*i*s-a*o*r,this._w=n*i*r-a*o*s):"XZY"===c&&(this._x=a*i*r-n*o*s,this._y=n*o*r-a*i*s,this._z=n*i*s+a*o*r,this._w=n*i*r+a*o*s),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){var n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t,n=e.elements,i=n[0],r=n[4],a=n[8],o=n[1],s=n[5],c=n[9],l=n[2],u=n[6],h=n[10],d=i+s+h;return d>0?(t=.5/Math.sqrt(d+1),this._w=.25/t,this._x=(u-c)*t,this._y=(a-l)*t,this._z=(o-r)*t):i>s&&i>h?(t=2*Math.sqrt(1+i-s-h),this._w=(u-c)/t,this._x=.25*t,this._y=(r+o)/t,this._z=(a+l)/t):s>h?(t=2*Math.sqrt(1+s-i-h),this._w=(a-l)/t,this._x=(r+o)/t,this._y=.25*t,this._z=(c+u)/t):(t=2*Math.sqrt(1+h-i-s),this._w=(o-r)/t,this._x=(a+l)/t,this._y=(c+u)/t,this._z=.25*t),this.onChangeCallback(),this},setFromUnitVectors:function(e,t){return void 0===i&&(i=new a.a),(r=e.dot(t)+1)<1e-6?(r=0,Math.abs(e.x)>Math.abs(e.z)?i.set(-e.y,e.x,0):i.set(0,-e.z,e.y)):i.crossVectors(e,t),this._x=i.x,this._y=i.y,this._z=i.z,this._w=r,this.normalize()},inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var n=e._x,i=e._y,r=e._z,a=e._w,o=t._x,s=t._y,c=t._z,l=t._w;return this._x=n*l+a*o+i*c-r*s,this._y=i*l+a*s+r*o-n*c,this._z=r*l+a*c+n*s-i*o,this._w=a*l-n*o-i*s-r*c,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*e._w+n*e._x+i*e._y+r*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=Math.sqrt(1-o*o);if(Math.abs(s)<.001)return this._w=.5*(a+this._w),this._x=.5*(n+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var c=Math.atan2(s,o),l=Math.sin((1-t)*c)/s,u=Math.sin(t*c)/s;return this._w=a*l+this._w*u,this._x=n*l+this._x*u,this._y=i*l+this._y*u,this._z=r*l+this._z*u,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}},Object.assign(o,{slerp:function(e,t,n,i){return n.copy(e).slerp(t,i)},slerpFlat:function(e,t,n,i,r,a,o){var s=n[i+0],c=n[i+1],l=n[i+2],u=n[i+3],h=r[a+0],d=r[a+1],f=r[a+2],p=r[a+3];if(u!==p||s!==h||c!==d||l!==f){var m=1-o,g=s*h+c*d+l*f+u*p,v=g>=0?1:-1,y=1-g*g;if(y>Number.EPSILON){var x=Math.sqrt(y),_=Math.atan2(x,g*v);m=Math.sin(m*_)/x,o=Math.sin(o*_)/x}var b=o*v;if(s=s*m+h*b,c=c*m+d*b,l=l*m+f*b,u=u*m+p*b,m===1-o){var w=1/Math.sqrt(s*s+c*c+l*l+u*u);s*=w,c*=w,l*=w,u*=w}}e[t]=s,e[t+1]=c,e[t+2]=l,e[t+3]=u}})},function(e,t,n){"use strict";var i,r=n(32),a=n(0);function o(e,t){this.center=void 0!==e?e:new a.a,this.radius=void 0!==t?t:0}n.d(t,"a",function(){return o}),o.prototype={constructor:o,set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(e,t){void 0===i&&(i=new r.a);var n=this.center;void 0!==t?n.copy(t):i.setFromPoints(e).getCenter(n);for(var a=0,o=0,s=e.length;o<s;o++)a=Math.max(a,n.distanceToSquared(e[o]));return this.radius=Math.sqrt(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return this.radius<=0},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(this.center.dot(e.normal)-e.constant)<=this.radius},clampPoint:function(e,t){var n=this.center.distanceToSquared(e),i=t||new a.a;return i.copy(e),n>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i},getBoundingBox:function(e){var t=e||new r.a;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}},function(e,t,n){"use strict";function i(e,t,n,i){this.x=e||0,this.y=t||0,this.z=n||0,this.w=void 0!==i?i:1}var r,a;n.d(t,"a",function(){return i}),i.prototype={constructor:i,isVector4:!0,set:function(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this},setScalar:function(e){return this.x=e,this.y=e,this.z=e,this.w=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return isFinite(e)?(this.x*=e,this.y*=e,this.z*=e,this.w*=e):(this.x=0,this.y=0,this.z=0,this.w=0),this},applyMatrix4:function(e){var t=this.x,n=this.y,i=this.z,r=this.w,a=e.elements;return this.x=a[0]*t+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*t+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*t+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*t+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){var t,n,i,r,a=e.elements,o=a[0],s=a[4],c=a[8],l=a[1],u=a[5],h=a[9],d=a[2],f=a[6],p=a[10];if(Math.abs(s-l)<.01&&Math.abs(c-d)<.01&&Math.abs(h-f)<.01){if(Math.abs(s+l)<.1&&Math.abs(c+d)<.1&&Math.abs(h+f)<.1&&Math.abs(o+u+p-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;var m=(o+1)/2,g=(u+1)/2,v=(p+1)/2,y=(s+l)/4,x=(c+d)/4,_=(h+f)/4;return m>g&&m>v?m<.01?(n=0,i=.707106781,r=.707106781):(i=y/(n=Math.sqrt(m)),r=x/n):g>v?g<.01?(n=.707106781,i=0,r=.707106781):(n=y/(i=Math.sqrt(g)),r=_/i):v<.01?(n=.707106781,i=.707106781,r=0):(n=x/(r=Math.sqrt(v)),i=_/r),this.set(n,i,r,t),this}var b=Math.sqrt((f-h)*(f-h)+(c-d)*(c-d)+(l-s)*(l-s));return Math.abs(b)<.001&&(b=1),this.x=(f-h)/b,this.y=(c-d)/b,this.z=(l-s)/b,this.w=Math.acos((o+u+p-1)/2),this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(e,t){return void 0===r&&(r=new i,a=new i),r.set(e,e,e,e),a.set(t,t,t,t),this.clamp(r,a)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(e){return this.multiplyScalar(e/this.length())},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,n){return this.subVectors(t,e).multiplyScalar(n).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}},function(e,t,n){"use strict";var i=n(0),r=n(4),a=n(19),o=n(33),s=n(9),c=n(5),l=n(123),u=n(29),h=n(1),d=n(28),f=n(2);function p(e,t){c.a.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new f.a,this.material=void 0!==t?t:new d.a({color:16777215*Math.random()}),this.drawMode=h._60,this.updateMorphTargets()}n.d(t,"a",function(){return p}),p.prototype=Object.assign(Object.create(c.a.prototype),{constructor:p,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return c.a.prototype.copy.call(this,e),this.drawMode=e.drawMode,this},updateMorphTargets:function(){var e=this.geometry.morphTargets;if(void 0!==e&&e.length>0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var t=0,n=e.length;t<n;t++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[e[t].name]=t}},raycast:function(){var e=new s.a,t=new o.a,n=new a.a,c=new i.a,d=new i.a,f=new i.a,p=new i.a,m=new i.a,g=new i.a,v=new r.a,y=new r.a,x=new r.a,_=new i.a,b=new i.a,w=new i.a;function E(e,t,n,i,r,a,o){return l.a.barycoordFromPoint(e,t,n,i,_),r.multiplyScalar(_.x),a.multiplyScalar(_.y),o.multiplyScalar(_.z),r.add(a).add(o),r.clone()}function T(e,t,n,i,r,a,o){var s=e.material;if(null===(s.side===h.m?n.intersectTriangle(a,r,i,!0,o):n.intersectTriangle(i,r,a,s.side!==h.n,o)))return null;w.copy(o),w.applyMatrix4(e.matrixWorld);var c=t.ray.origin.distanceTo(w);return c<t.near||c>t.far?null:{distance:c,point:w.clone(),object:e}}function S(e,t,n,i,r,a,o,s){c.fromBufferAttribute(i,a),d.fromBufferAttribute(i,o),f.fromBufferAttribute(i,s);var h=T(e,t,n,c,d,f,b);return h&&(r&&(v.fromBufferAttribute(r,a),y.fromBufferAttribute(r,o),x.fromBufferAttribute(r,s),h.uv=E(b,c,d,f,v,y,x)),h.face=new u.a(a,o,s,l.a.normal(c,d,f)),h.faceIndex=a),h}return function(i,r){var a,o=this.geometry,s=this.material,l=this.matrixWorld;if(void 0!==s&&(null===o.boundingSphere&&o.computeBoundingSphere(),n.copy(o.boundingSphere),n.applyMatrix4(l),!1!==i.ray.intersectsSphere(n)&&(e.getInverse(l),t.copy(i.ray).applyMatrix4(e),null===o.boundingBox||!1!==t.intersectsBox(o.boundingBox))))if(o.isBufferGeometry){var u,h,_,w,M,A=o.index,L=o.attributes.position,C=o.attributes.uv;if(null!==A)for(w=0,M=A.count;w<M;w+=3)u=A.getX(w),h=A.getX(w+1),_=A.getX(w+2),(a=S(this,i,t,L,C,u,h,_))&&(a.faceIndex=Math.floor(w/3),r.push(a));else for(w=0,M=L.count;w<M;w+=3)(a=S(this,i,t,L,C,u=w,h=w+1,_=w+2))&&(a.index=u,r.push(a))}else if(o.isGeometry){var P,R,F,I,N=s&&s.isMultiMaterial,O=!0===N?s.materials:null,U=o.vertices,D=o.faces,z=o.faceVertexUvs[0];z.length>0&&(I=z);for(var k=0,B=D.length;k<B;k++){var G=D[k],H=!0===N?O[G.materialIndex]:s;if(void 0!==H){if(P=U[G.a],R=U[G.b],F=U[G.c],!0===H.morphTargets){var V=o.morphTargets,j=this.morphTargetInfluences;c.set(0,0,0),d.set(0,0,0),f.set(0,0,0);for(var W=0,X=V.length;W<X;W++){var Y=j[W];if(0!==Y){var q=V[W].vertices;c.addScaledVector(p.subVectors(q[G.a],P),Y),d.addScaledVector(m.subVectors(q[G.b],R),Y),f.addScaledVector(g.subVectors(q[G.c],F),Y)}}c.add(P),d.add(R),f.add(F),P=c,R=d,F=f}if(a=T(this,i,t,P,R,F,b)){if(I){var Q=I[k];v.copy(Q[0]),y.copy(Q[1]),x.copy(Q[2]),a.uv=E(b,P,R,F,v,y,x)}a.face=G,a.faceIndex=k,r.push(a)}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}})},function(e,t,n){"use strict";var i,r=n(0);function a(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}n.d(t,"a",function(){return a}),a.prototype={constructor:a,isMatrix3:!0,set:function(e,t,n,i,r,a,o,s,c){var l=this.elements;return l[0]=e,l[1]=i,l[2]=o,l[3]=t,l[4]=r,l[5]=s,l[6]=n,l[7]=a,l[8]=c,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=e.elements;return this.set(t[0],t[3],t[6],t[1],t[4],t[7],t[2],t[5],t[8]),this},setFromMatrix4:function(e){var t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(e){void 0===i&&(i=new r.a);for(var t=0,n=e.count;t<n;t++)i.x=e.getX(t),i.y=e.getY(t),i.z=e.getZ(t),i.applyMatrix3(this),e.setXYZ(t,i.x,i.y,i.z);return e},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],a=e[4],o=e[5],s=e[6],c=e[7],l=e[8];return t*a*l-t*o*c-n*r*l+n*o*s+i*r*c-i*a*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3.getInverse no longer takes a Matrix4 argument.");var n=e.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],c=n[4],l=n[5],u=n[6],h=n[7],d=n[8],f=d*c-l*h,p=l*u-d*s,m=h*s-c*u,g=r*f+a*p+o*m;if(0===g){var v="THREE.Matrix3.getInverse(): can't invert matrix, determinant is 0";if(!0===t)throw new Error(v);return console.warn(v),this.identity()}var y=1/g;return i[0]=f*y,i[1]=(o*h-d*a)*y,i[2]=(l*a-o*c)*y,i[3]=p*y,i[4]=(d*r-o*u)*y,i[5]=(o*s-l*r)*y,i[6]=m*y,i[7]=(a*u-h*r)*y,i[8]=(c*r-a*s)*y,this},transpose:function(){var e,t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},fromArray:function(e,t){void 0===t&&(t=0);for(var n=0;n<9;n++)this.elements[n]=e[n+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}}},function(e,t,n){"use strict";var i=n(41),r=n(5),a=n(7);function o(e,t,n,r){i.a.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==r?r:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}n.d(t,"a",function(){return o}),o.prototype=Object.assign(Object.create(i.a.prototype),{constructor:o,isPerspectiveCamera:!0,copy:function(e){return i.a.prototype.copy.call(this,e),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){var t=.5*this.getFilmHeight()/e;this.fov=2*a.a.RAD2DEG*Math.atan(t),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*a.a.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*a.a.RAD2DEG*Math.atan(Math.tan(.5*a.a.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,n,i,r,a){this.aspect=e/t,this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:i,width:r,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*a.a.DEG2RAD*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==o){var s=o.fullWidth,c=o.fullHeight;r+=o.offsetX*i/s,t-=o.offsetY*n/c,i*=o.width/s,n*=o.height/c}var l=this.filmOffset;0!==l&&(r+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far)},toJSON:function(e){var t=r.a.prototype.toJSON.call(this,e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}})},function(e,t,n){"use strict";function i(){}n.d(t,"a",function(){return i}),i.prototype={addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)},removeEventListener:function(e,t){if(void 0!==this._listeners){var n=this._listeners[e];if(void 0!==n){var i=n.indexOf(t);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this;var n=[],i=0,r=t.length;for(i=0;i<r;i++)n[i]=t[i];for(i=0;i<r;i++)n[i].call(this,e)}}}}},function(e,t,n){"use strict";var i=n(5),r=n(6);function a(e,t){i.a.call(this),this.type="Light",this.color=new r.a(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}n.d(t,"a",function(){return a}),a.prototype=Object.assign(Object.create(i.a.prototype),{constructor:a,isLight:!0,copy:function(e){return i.a.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){var t=i.a.prototype.toJSON.call(this,e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}})},function(e,t,n){"use strict";var i=n(35);function r(e,t,n,r){if(void 0===e)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+e);this.name=e,this.times=i.a.convertArray(t,this.TimeBufferType),this.values=i.a.convertArray(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation),this.validate(),this.optimize()}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";var i,r=n(1),a=n(35),o=n(124),s=n(71),c=n(125);n.d(t,"a",function(){return i}),i={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:r._55,InterpolantFactoryMethodDiscrete:function(e){return new c.a(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new s.a(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new o.a(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){var t;switch(e){case r._54:t=this.InterpolantFactoryMethodDiscrete;break;case r._55:t=this.InterpolantFactoryMethodLinear;break;case r._56:t=this.InterpolantFactoryMethodSmooth}if(void 0!==t)this.createInterpolant=t;else{var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}console.warn(n)}},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return r._54;case this.InterpolantFactoryMethodLinear:return r._55;case this.InterpolantFactoryMethodSmooth:return r._56}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,n=0,i=t.length;n!==i;++n)t[n]*=e;return this},trim:function(e,t){for(var n=this.times,i=n.length,r=0,o=i-1;r!==i&&n[r]<e;)++r;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==r||o!==i){r>=o&&(r=(o=Math.max(o,1))-1);var s=this.getValueSize();this.times=a.a.arraySlice(n,r,o),this.values=a.a.arraySlice(this.values,r*s,o*s)}return this},validate:function(){var e=!0,t=this.getValueSize();t-Math.floor(t)!=0&&(console.error("invalid value size in track",this),e=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("track is empty",this),e=!1);for(var o=null,s=0;s!==r;s++){var c=n[s];if("number"==typeof c&&isNaN(c)){console.error("time is not a valid number",this,s,c),e=!1;break}if(null!==o&&o>c){console.error("out of order keys",this,s,c,o),e=!1;break}o=c}if(void 0!==i&&a.a.isTypedArray(i)){s=0;for(var l=i.length;s!==l;++s){var u=i[s];if(isNaN(u)){console.error("value is not a valid number",this,s,u),e=!1;break}}}return e},optimize:function(){for(var e=this.times,t=this.values,n=this.getValueSize(),i=this.getInterpolation()===r._56,o=1,s=e.length-1,c=1;c<s;++c){var l=!1,u=e[c];if(u!==e[c+1]&&(1!==c||u!==u[0]))if(i)l=!0;else for(var h=c*n,d=h-n,f=h+n,p=0;p!==n;++p){var m=t[h+p];if(m!==t[d+p]||m!==t[f+p]){l=!0;break}}if(l){if(c!==o){e[o]=e[c];var g=c*n,v=o*n;for(p=0;p!==n;++p)t[v+p]=t[g+p]}++o}}if(s>0){e[o]=e[s];for(g=s*n,v=o*n,p=0;p!==n;++p)t[v+p]=t[g+p];++o}return o!==e.length&&(this.times=a.a.arraySlice(e,0,o),this.values=a.a.arraySlice(t,0,o*n)),this}}},function(e,t,n){"use strict";var i=n(12),r=n(1),a=n(6);function o(e){i.a.call(this),this.type="MeshBasicMaterial",this.color=new a.a(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=r.X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(e)}n.d(t,"a",function(){return o}),o.prototype=Object.create(i.a.prototype),o.prototype.constructor=o,o.prototype.isMeshBasicMaterial=!0,o.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this}},function(e,t,n){"use strict";var i=n(6),r=n(0);function a(e,t,n,a,o,s){this.a=e,this.b=t,this.c=n,this.normal=a&&a.isVector3?a:new r.a,this.vertexNormals=Array.isArray(a)?a:[],this.color=o&&o.isColor?o:new i.a,this.vertexColors=Array.isArray(o)?o:[],this.materialIndex=void 0!==s?s:0}n.d(t,"a",function(){return a}),a.prototype={constructor:a,clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,n=e.vertexNormals.length;t<n;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,n=e.vertexColors.length;t<n;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}}},function(e,t,n){"use strict";function i(e,t,n,i,r){var a=.5*(i-t),o=.5*(r-n),s=e*e;return(2*n-2*i+a+o)*(e*s)+(-3*n+3*i-2*a-o)*s+a*e+n}function r(e,t,n,i){return function(e,t){var n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function a(e,t,n,i,r){return function(e,t){var n=1-e;return n*n*n*t}(e,t)+function(e,t){var n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}n.d(t,"c",function(){return i}),n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a})},function(e,t,n){"use strict";var i=n(12),r=n(34);function a(e){i.a.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}n.d(t,"a",function(){return a}),a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.isShaderMaterial=!0,a.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=r.a.clone(e.uniforms),this.defines=e.defines,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},a.prototype.toJSON=function(e){var t=i.a.prototype.toJSON.call(this,e);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t}},function(e,t,n){"use strict";var i,r,a,o=n(0),s=n(19);function c(e,t){this.min=void 0!==e?e:new o.a(1/0,1/0,1/0),this.max=void 0!==t?t:new o.a(-1/0,-1/0,-1/0)}n.d(t,"a",function(){return c}),c.prototype={constructor:c,isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,c=e.length;s<c;s+=3){var l=e[s],u=e[s+1],h=e[s+2];l<t&&(t=l),u<n&&(n=u),h<i&&(i=h),l>r&&(r=l),u>a&&(a=u),h>o&&(o=h)}return this.min.set(t,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(e){for(var t=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,c=e.count;s<c;s++){var l=e.getX(s),u=e.getY(s),h=e.getZ(s);l<t&&(t=l),u<n&&(n=u),h<i&&(i=h),l>r&&(r=l),u>a&&(a=u),h>o&&(o=h)}return this.min.set(t,n,i),this.max.set(r,a,o),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:(a=new o.a,function(e,t){var n=a.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){var t=e||new o.a;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new o.a;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){var e=new o.a;return function(t){var n=this;return t.updateMatrixWorld(!0),t.traverse(function(t){var i,r,a=t.geometry;if(void 0!==a)if(a.isGeometry){var o=a.vertices;for(i=0,r=o.length;i<r;i++)e.copy(o[i]),e.applyMatrix4(t.matrixWorld),n.expandByPoint(e)}else if(a.isBufferGeometry){var s=a.attributes.position;if(void 0!==s)for(i=0,r=s.count;i<r;i++)e.fromBufferAttribute(s,i).applyMatrix4(t.matrixWorld),n.expandByPoint(e)}}),this}}(),containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return(t||new o.a).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)},intersectsSphere:function(e){return void 0===r&&(r=new o.a),this.clampPoint(e.center,r),r.distanceToSquared(e.center)<=e.radius*e.radius},intersectsPlane:function(e){var t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=e.constant&&n>=e.constant},clampPoint:function(e,t){return(t||new o.a).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new o.a;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new o.a;return function(t){var n=t||new s.a;return this.getCenter(n.center),n.radius=.5*this.getSize(e).length(),n}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:(i=[new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,new o.a,new o.a],function(e){return this.isEmpty()?this:(i[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),i[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),i[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),i[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),i[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),i[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),i[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),i[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(i),this)}),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}},function(e,t,n){"use strict";var i,r,a,o,s,c=n(0);function l(e,t){this.origin=void 0!==e?e:new c.a,this.direction=void 0!==t?t:new c.a}n.d(t,"a",function(){return l}),l.prototype={constructor:l,set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return(t||new c.a).copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:(s=new c.a,function(e){return this.origin.copy(this.at(e,s)),this}),closestPointToPoint:function(e,t){var n=t||new c.a;n.subVectors(e,this.origin);var i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.direction).multiplyScalar(i).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new c.a;return function(t){var n=e.subVectors(t,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(n).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:(r=new c.a,a=new c.a,o=new c.a,function(e,t,n,i){r.copy(e).add(t).multiplyScalar(.5),a.copy(t).sub(e).normalize(),o.copy(this.origin).sub(r);var s,c,l,u,h=.5*e.distanceTo(t),d=-this.direction.dot(a),f=o.dot(this.direction),p=-o.dot(a),m=o.lengthSq(),g=Math.abs(1-d*d);if(g>0)if(c=d*f-p,u=h*g,(s=d*p-f)>=0)if(c>=-u)if(c<=u){var v=1/g;l=(s*=v)*(s+d*(c*=v)+2*f)+c*(d*s+c+2*p)+m}else c=h,l=-(s=Math.max(0,-(d*c+f)))*s+c*(c+2*p)+m;else c=-h,l=-(s=Math.max(0,-(d*c+f)))*s+c*(c+2*p)+m;else c<=-u?l=-(s=Math.max(0,-(-d*h+f)))*s+(c=s>0?-h:Math.min(Math.max(-h,-p),h))*(c+2*p)+m:c<=u?(s=0,l=(c=Math.min(Math.max(-h,-p),h))*(c+2*p)+m):l=-(s=Math.max(0,-(d*h+f)))*s+(c=s>0?h:Math.min(Math.max(-h,-p),h))*(c+2*p)+m;else c=d>0?-h:h,l=-(s=Math.max(0,-(d*c+f)))*s+c*(c+2*p)+m;return n&&n.copy(this.direction).multiplyScalar(s).add(this.origin),i&&i.copy(a).multiplyScalar(c).add(r),l}),intersectSphere:function(){var e=new c.a;return function(t,n){e.subVectors(t.center,this.origin);var i=e.dot(this.direction),r=e.dot(e)-i*i,a=t.radius*t.radius;if(r>a)return null;var o=Math.sqrt(a-r),s=i-o,c=i+o;return s<0&&c<0?null:s<0?this.at(c,n):this.at(s,n)}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null},intersectPlane:function(e,t){var n=this.distanceToPlane(e);return null===n?null:this.at(n,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||e.normal.dot(this.direction)*t<0},intersectBox:function(e,t){var n,i,r,a,o,s,c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,i=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,i=(e.min.x-h.x)*c),l>=0?(r=(e.min.y-h.y)*l,a=(e.max.y-h.y)*l):(r=(e.max.y-h.y)*l,a=(e.min.y-h.y)*l),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),u>=0?(o=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(o=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||o>i?null:((o>n||n!=n)&&(n=o),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,t)))},intersectsBox:(i=new c.a,function(e){return null!==this.intersectBox(e,i)}),intersectTriangle:function(){var e=new c.a,t=new c.a,n=new c.a,i=new c.a;return function(r,a,o,s,c){t.subVectors(a,r),n.subVectors(o,r),i.crossVectors(t,n);var l,u=this.direction.dot(i);if(u>0){if(s)return null;l=1}else{if(!(u<0))return null;l=-1,u=-u}e.subVectors(this.origin,r);var h=l*this.direction.dot(n.crossVectors(e,n));if(h<0)return null;var d=l*this.direction.dot(t.cross(e));if(d<0)return null;if(h+d>u)return null;var f=-l*e.dot(i);return f<0?null:this.at(f/u,c)}}(),applyMatrix4:function(e){return this.direction.add(this.origin).applyMatrix4(e),this.origin.applyMatrix4(e),this.direction.sub(this.origin),this.direction.normalize(),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={merge:function(e){for(var t={},n=0;n<e.length;n++){var i=this.clone(e[n]);for(var r in i)t[r]=i[r]}return t},clone:function(e){var t={};for(var n in e)for(var i in t[n]={},e[n]){var r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}return t}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={arraySlice:function(e,t,n){return i.isTypedArray(e)?new e.constructor(e.subarray(t,n)):e.slice(t,n)},convertArray:function(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,n=new Array(t),i=0;i!==t;++i)n[i]=i;return n.sort(function(t,n){return e[t]-e[n]}),n},sortedArray:function(e,t,n){for(var i=e.length,r=new e.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*t,c=0;c!==t;++c)r[o++]=e[s+c];return r},flattenJSON:function(e,t,n,i){for(var r=1,a=e[0];void 0!==a&&void 0===a[i];)a=e[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[i])&&(t.push(a.time),n.push.apply(n,o)),a=e[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[i])&&(t.push(a.time),o.toArray(n,n.length)),a=e[r++]}while(void 0!==a);else do{void 0!==(o=a[i])&&(t.push(a.time),n.push(o)),a=e[r++]}while(void 0!==a)}}}},function(e,t,n){"use strict";var i=n(8),r=n(3),a=n(2),o=n(0),s=n(4);function c(e,t,n,r){i.b.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},this.fromBufferGeometry(new l(e,t,n,r)),this.mergeVertices()}function l(e,t,n,i){a.a.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i},n=n||1;var c=[],l=[];function u(e,t,n,i){var r,a,o=Math.pow(2,i),s=[];for(r=0;r<=o;r++){s[r]=[];var c=e.clone().lerp(n,r/o),l=t.clone().lerp(n,r/o),u=o-r;for(a=0;a<=u;a++)s[r][a]=0===a&&r===o?c:c.clone().lerp(l,a/u)}for(r=0;r<o;r++)for(a=0;a<2*(o-r)-1;a++){var d=Math.floor(a/2);a%2==0?(h(s[r][d+1]),h(s[r+1][d]),h(s[r][d])):(h(s[r][d+1]),h(s[r+1][d+1]),h(s[r+1][d]))}}function h(e){c.push(e.x,e.y,e.z)}function d(t,n){var i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function f(e,t,n,i){i<0&&1===e.x&&(l[t]=e.x-1),0===n.x&&0===n.z&&(l[t]=i/2/Math.PI+.5)}function p(e){return Math.atan2(e.z,-e.x)}!function(e){for(var n=new o.a,i=new o.a,r=new o.a,a=0;a<t.length;a+=3)d(t[a+0],n),d(t[a+1],i),d(t[a+2],r),u(n,i,r,e)}(i=i||0),function(e){for(var t=new o.a,n=0;n<c.length;n+=3)t.x=c[n+0],t.y=c[n+1],t.z=c[n+2],t.normalize().multiplyScalar(e),c[n+0]=t.x,c[n+1]=t.y,c[n+2]=t.z}(n),function(){for(var e=new o.a,t=0;t<c.length;t+=3){e.x=c[t+0],e.y=c[t+1],e.z=c[t+2];var n=p(e)/2/Math.PI+.5,i=(r=e,Math.atan2(-r.y,Math.sqrt(r.x*r.x+r.z*r.z))/Math.PI+.5);l.push(n,1-i)}var r;(function(){for(var e=new o.a,t=new o.a,n=new o.a,i=new o.a,r=new s.a,a=new s.a,u=new s.a,h=0,d=0;h<c.length;h+=9,d+=6){e.set(c[h+0],c[h+1],c[h+2]),t.set(c[h+3],c[h+4],c[h+5]),n.set(c[h+6],c[h+7],c[h+8]),r.set(l[d+0],l[d+1]),a.set(l[d+2],l[d+3]),u.set(l[d+4],l[d+5]),i.copy(e).add(t).add(n).divideScalar(3);var m=p(i);f(r,d+0,e,m),f(a,d+2,t,m),f(u,d+4,n,m)}})(),function(){for(var e=0;e<l.length;e+=6){var t=l[e+0],n=l[e+2],i=l[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(l[e+0]+=1),n<.2&&(l[e+2]+=1),i<.2&&(l[e+4]+=1))}}()}(),this.addAttribute("position",new r.b(c,3)),this.addAttribute("normal",new r.b(c.slice(),3)),this.addAttribute("uv",new r.b(l,2)),this.normalizeNormals()}n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l}),c.prototype=Object.create(i.b.prototype),c.prototype.constructor=c,l.prototype=Object.create(a.a.prototype),l.prototype.constructor=l},function(e,t,n){"use strict";function i(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n}n.d(t,"a",function(){return i}),i.prototype={constructor:i,evaluate:function(e){var t=this.parameterPositions,n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{var a;n:{i:if(!(e<i)){for(var o=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,e,r)}if(n===o)break;if(r=i,e<(i=t[++n]))break t}a=t.length;break n}if(e>=r)break e;var s=t[1];e<s&&(n=2,r=s);for(o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,i);if(n===o)break;if(i=r,e>=(r=t[--n-1]))break t}a=n,n=0}for(;n<a;){var c=n+a>>>1;e<t[c]?a=c:n=c+1}if(i=t[n],void 0===(r=t[n-1]))return this._cachedIndex=0,this.beforeStart_(0,e,i);if(void 0===i)return n=t.length,this._cachedIndex=n,this.afterEnd_(n-1,r,e)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i,a=0;a!==i;++a)t[a]=n[r+a];return t},interpolate_:function(e,t,n,i){throw new Error("call to abstract method")},intervalChanged_:function(e,t,n){}},Object.assign(i.prototype,{beforeStart_:i.prototype.copySampleValue_,afterEnd_:i.prototype.copySampleValue_})},function(e,t,n){"use strict";var i,r,a=n(22),o=n(0);function s(e,t){this.normal=void 0!==e?e:new o.a(1,0,0),this.constant=void 0!==t?t:0}n.d(t,"a",function(){return s}),s.prototype={constructor:s,set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:(i=new o.a,r=new o.a,function(e,t,n){var a=i.subVectors(n,t).cross(r.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(a,e),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return this.orthoPoint(e,t).sub(e).negate()},orthoPoint:function(e,t){var n=this.distanceToPoint(e);return(t||new o.a).copy(this.normal).multiplyScalar(n)},intersectLine:function(){var e=new o.a;return function(t,n){var i=n||new o.a,r=t.delta(e),a=this.normal.dot(r);if(0===a)return 0===this.distanceToPoint(t.start)?i.copy(t.start):void 0;var s=-(t.start.dot(this.normal)+this.constant)/a;return s<0||s>1?void 0:i.copy(r).multiplyScalar(s).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return(e||new o.a).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new o.a,t=new a.a;return function(n,i){var r=this.coplanarPoint(e).applyMatrix4(n),a=i||t.getNormalMatrix(n),o=this.normal.applyMatrix3(a).normalize();return this.constant=-r.dot(o),this}}(),translate:function(e){return this.constant=this.constant-e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}},function(e,t,n){"use strict";var i,r,a,o=n(19),s=n(33),c=n(9),l=n(5),u=n(0),h=n(10),d=n(2),f=n(13);function p(e,t,n){if(1===n)return console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new f.a(e,t);l.a.call(this),this.type="Line",this.geometry=void 0!==e?e:new d.a,this.material=void 0!==t?t:new h.a({color:16777215*Math.random()})}n.d(t,"a",function(){return p}),p.prototype=Object.assign(Object.create(l.a.prototype),{constructor:p,isLine:!0,raycast:(i=new c.a,r=new s.a,a=new o.a,function(e,t){var n=e.linePrecision,o=n*n,s=this.geometry,c=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),a.copy(s.boundingSphere),a.applyMatrix4(c),!1!==e.ray.intersectsSphere(a)){i.getInverse(c),r.copy(e.ray).applyMatrix4(i);var l=new u.a,h=new u.a,d=new u.a,f=new u.a,p=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var m=s.index,g=s.attributes.position.array;if(null!==m)for(var v=m.array,y=0,x=v.length-1;y<x;y+=p){var _=v[y],b=v[y+1];l.fromArray(g,3*_),h.fromArray(g,3*b),r.distanceSqToSegment(l,h,f,d)>o||(f.applyMatrix4(this.matrixWorld),(T=e.ray.origin.distanceTo(f))<e.near||T>e.far||t.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}else for(y=0,x=g.length/3-1;y<x;y+=p)l.fromArray(g,3*y),h.fromArray(g,3*y+3),r.distanceSqToSegment(l,h,f,d)>o||(f.applyMatrix4(this.matrixWorld),(T=e.ray.origin.distanceTo(f))<e.near||T>e.far||t.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}else if(s.isGeometry){var w=s.vertices,E=w.length;for(y=0;y<E-1;y+=p){var T;r.distanceSqToSegment(w[y],w[y+1],f,d)>o||(f.applyMatrix4(this.matrixWorld),(T=e.ray.origin.distanceTo(f))<e.near||T>e.far||t.push({distance:T,point:d.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this}))}}}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}})},function(e,t,n){"use strict";var i=n(53),r=n(52),a=n(51),o=n(35),s=n(79),c=n(7);function l(e,t,n){this.name=e,this.tracks=n,this.duration=void 0!==t?t:-1,this.uuid=c.a.generateUUID(),this.duration<0&&this.resetDuration(),this.optimize()}n.d(t,"a",function(){return l}),l.prototype={constructor:l,resetDuration:function(){for(var e=0,t=0,n=this.tracks.length;t!==n;++t){var i=this.tracks[t];e=Math.max(e,i.times[i.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}},Object.assign(l,{parse:function(e){for(var t=[],n=e.tracks,i=1/(e.fps||1),r=0,a=n.length;r!==a;++r)t.push(s.a.parse(n[r]).scale(i));return new l(e.name,e.duration,t)},toJSON:function(e){for(var t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t},r=0,a=n.length;r!==a;++r)t.push(s.a.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(e,t,n,i){for(var r=t.length,s=[],c=0;c<r;c++){var u=[],h=[];u.push((c+r-1)%r,c,(c+1)%r),h.push(0,1,0);var d=o.a.getKeyframeOrder(u);u=o.a.sortedArray(u,1,d),h=o.a.sortedArray(h,1,d),i||0!==u[0]||(u.push(r),h.push(h[0])),s.push(new a.a(".morphTargetInfluences["+t[c].name+"]",u,h).scale(1/n))}return new l(e,-1,s)},findByName:function(e,t){var n=e;if(!Array.isArray(e)){var i=e;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null},CreateClipsFromMorphTargetSequences:function(e,t,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=e.length;a<o;a++){var s=e[a],c=s.name.match(r);if(c&&c.length>1){var u=i[d=c[1]];u||(i[d]=u=[]),u.push(s)}}var h=[];for(var d in i)h.push(l.CreateFromMorphTargetSequence(d,i[d],t,n));return h},parseAnimation:function(e,t){if(!e)return console.error("  no animation in JSONLoader data"),null;for(var n=function(e,t,n,i,r){if(0!==n.length){var a=[],s=[];o.a.flattenJSON(n,a,s,i),0!==a.length&&r.push(new e(t,a,s))}},s=[],c=e.name||"default",u=e.length||-1,h=e.fps||30,d=e.hierarchy||[],f=0;f<d.length;f++){var p=d[f].keys;if(p&&0!==p.length)if(p[0].morphTargets){for(var m={},g=0;g<p.length;g++)if(p[g].morphTargets)for(var v=0;v<p[g].morphTargets.length;v++)m[p[g].morphTargets[v]]=-1;for(var y in m){var x=[],_=[];for(v=0;v!==p[g].morphTargets.length;++v){var b=p[g];x.push(b.time),_.push(b.morphTarget===y?1:0)}s.push(new a.a(".morphTargetInfluence["+y+"]",x,_))}u=m.length*(h||1)}else{var w=".bones["+t[f].name+"]";n(i.a,w+".position",p,"pos",s),n(r.a,w+".quaternion",p,"rot",s),n(i.a,w+".scale",p,"scl",s)}}return 0===s.length?null:new l(c,u,s)}})},function(e,t,n){"use strict";var i,r,a=n(9),o=n(18),s=n(5),c=n(0);function l(){s.a.call(this),this.type="Camera",this.matrixWorldInverse=new a.a,this.projectionMatrix=new a.a}n.d(t,"a",function(){return l}),l.prototype=Object.create(s.a.prototype),l.prototype.constructor=l,l.prototype.isCamera=!0,l.prototype.getWorldDirection=(i=new o.a,function(e){var t=e||new c.a;return this.getWorldQuaternion(i),t.set(0,0,-1).applyQuaternion(i)}),l.prototype.lookAt=(r=new a.a,function(e){r.lookAt(this.position,e,this.up),this.quaternion.setFromRotationMatrix(r)}),l.prototype.clone=function(){return(new this.constructor).copy(this)},l.prototype.copy=function(e){return s.a.prototype.copy.call(this,e),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this}},function(e,t,n){"use strict";var i=n(41),r=n(5);function a(e,t,n,r,a,o){i.a.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=void 0!==a?a:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}n.d(t,"a",function(){return a}),a.prototype=Object.assign(Object.create(i.a.prototype),{constructor:a,isOrthographicCamera:!0,copy:function(e){return i.a.prototype.copy.call(this,e),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,n,i,r,a){this.view={fullWidth:e,fullHeight:t,offsetX:n,offsetY:i,width:r,height:a},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-e,a=n+e,o=i+t,s=i-t;if(null!==this.view){var c=this.zoom/(this.view.width/this.view.fullWidth),l=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;a=(r+=u*(this.view.offsetX/c))+u*(this.view.width/c),s=(o-=h*(this.view.offsetY/l))-h*(this.view.height/l)}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far)},toJSON:function(e){var t=r.a.prototype.toJSON.call(this,e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}})},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={area:function(e){for(var t=e.length,n=0,i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n},triangulate:function(){function e(e,t,n,i,r,a){var o,s,c,l,u,h,d,f,p,m,g,v,y,x,_,b,w;if(s=e[a[t]].x,c=e[a[t]].y,l=e[a[n]].x,u=e[a[n]].y,h=e[a[i]].x,(l-s)*((d=e[a[i]].y)-c)-(u-c)*(h-s)<=0)return!1;for(m=h-l,g=d-u,v=s-h,y=c-d,x=l-s,_=u-c,o=0;o<r;o++)if(f=e[a[o]].x,p=e[a[o]].y,!(f===s&&p===c||f===l&&p===u||f===h&&p===d)&&(b=x*(p-c)-_*(f-s),w=v*(p-d)-y*(f-h),m*(p-u)-g*(f-l)>=-Number.EPSILON&&w>=-Number.EPSILON&&b>=-Number.EPSILON))return!1;return!0}return function(t,n){var r=t.length;if(r<3)return null;var a,o,s,c=[],l=[],u=[];if(i.area(t)>0)for(o=0;o<r;o++)l[o]=o;else for(o=0;o<r;o++)l[o]=r-1-o;var h=r,d=2*h;for(o=h-1;h>2;){if(d--<=0)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),n?u:c;if(h<=(a=o)&&(a=0),h<=(o=a+1)&&(o=0),h<=(s=o+1)&&(s=0),e(t,a,o,s,h,l)){var f,p,m,g,v;for(f=l[a],p=l[o],m=l[s],c.push([t[f],t[p],t[m]]),u.push([l[a],l[o],l[s]]),g=o,v=o+1;v<h;g++,v++)l[g]=l[v];d=2*--h}}return n?u:c}}(),triangulateShape:function(e,t){function n(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function r(e,t,n){return e.x!==t.x?e.x<t.x?e.x<=n.x&&n.x<=t.x:t.x<=n.x&&n.x<=e.x:e.y<t.y?e.y<=n.y&&n.y<=t.y:t.y<=n.y&&n.y<=e.y}function a(e,t,n,i,a){var o=t.x-e.x,s=t.y-e.y,c=i.x-n.x,l=i.y-n.y,u=e.x-n.x,h=e.y-n.y,d=s*c-o*l,f=s*u-o*h;if(Math.abs(d)>Number.EPSILON){var p;if(d>0){if(f<0||f>d)return[];if((p=l*u-c*h)<0||p>d)return[]}else{if(f>0||f<d)return[];if((p=l*u-c*h)>0||p<d)return[]}if(0===p)return!a||0!==f&&f!==d?[e]:[];if(p===d)return!a||0!==f&&f!==d?[t]:[];if(0===f)return[n];if(f===d)return[i];var m=p/d;return[{x:e.x+m*o,y:e.y+m*s}]}if(0!==f||l*u!=c*h)return[];var g,v,y,x,_,b,w,E,T=0===o&&0===s,S=0===c&&0===l;return T&&S?e.x!==n.x||e.y!==n.y?[]:[e]:T?r(n,i,e)?[e]:[]:S?r(e,t,n)?[n]:[]:(0!==o?(e.x<t.x?(g=e,y=e.x,v=t,x=t.x):(g=t,y=t.x,v=e,x=e.x),n.x<i.x?(_=n,w=n.x,b=i,E=i.x):(_=i,w=i.x,b=n,E=n.x)):(e.y<t.y?(g=e,y=e.y,v=t,x=t.y):(g=t,y=t.y,v=e,x=e.y),n.y<i.y?(_=n,w=n.y,b=i,E=i.y):(_=i,w=i.y,b=n,E=n.y)),y<=w?x<w?[]:x===w?a?[]:[_]:x<=E?[_,v]:[_,b]:y>E?[]:y===E?a?[]:[g]:x<=E?[g,v]:[g,b])}function o(e,t,n,i){var r=t.x-e.x,a=t.y-e.y,o=n.x-e.x,s=n.y-e.y,c=i.x-e.x,l=i.y-e.y,u=r*s-a*o,h=r*l-a*c;if(Math.abs(u)>Number.EPSILON){var d=c*s-l*o;return u>0?h>=0&&d>=0:h>=0||d>=0}return h>0}n(e),t.forEach(n);for(var s,c,l,u,h,d,f={},p=e.concat(),m=0,g=t.length;m<g;m++)Array.prototype.push.apply(p,t[m]);for(s=0,c=p.length;s<c;s++)void 0!==f[h=p[s].x+":"+p[s].y]&&console.warn("THREE.ShapeUtils: Duplicate point",h,s),f[h]=s;var v=function(e,t){var n,i=e.concat();function r(e,t){var r=i.length-1,a=e-1;a<0&&(a=r);var s=e+1;s>r&&(s=0);var c=o(i[e],i[a],i[s],n[t]);if(!c)return!1;var l=n.length-1,u=t-1;u<0&&(u=l);var h=t+1;return h>l&&(h=0),!!(c=o(n[t],n[u],n[h],i[e]))}function s(e,t){var n,r;for(n=0;n<i.length;n++)if(r=n+1,r%=i.length,a(e,t,i[n],i[r],!0).length>0)return!0;return!1}var c=[];function l(e,n){var i,r,o,s;for(i=0;i<c.length;i++)for(r=t[c[i]],o=0;o<r.length;o++)if(s=o+1,s%=r.length,a(e,n,r[o],r[s],!0).length>0)return!0;return!1}for(var u,h,d,f,p,m,g,v,y,x,_=[],b=0,w=t.length;b<w;b++)c.push(b);for(var E=0,T=2*c.length;c.length>0;){if(--T<0){console.log("Infinite Loop! Holes left:"+c.length+", Probably Hole outside Shape!");break}for(h=E;h<i.length;h++){for(d=i[h],u=-1,b=0;b<c.length;b++)if(p=c[b],void 0===_[m=d.x+":"+d.y+":"+p]){n=t[p];for(var S=0;S<n.length;S++)if(f=n[S],r(h,S)&&!s(d,f)&&!l(d,f)){u=S,c.splice(b,1),g=i.slice(0,h+1),v=i.slice(h),y=n.slice(u),x=n.slice(0,u+1),i=g.concat(y).concat(x).concat(v),E=h;break}if(u>=0)break;_[m]=!0}if(u>=0)break}}return i}(e,t),y=i.triangulate(v,!1);for(s=0,c=y.length;s<c;s++)for(u=y[s],l=0;l<3;l++)void 0!==(d=f[h=u[l].x+":"+u[l].y])&&(u[l]=d);return y.concat()},isClockWise:function(e){return i.area(e)<0}}},function(e,t,n){"use strict";var i=n(8),r=n(3),a=n(2),o=n(0),s=n(4);function c(e,t,n,r,a,o,s,c){i.b.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:c},this.fromBufferGeometry(new l(e,t,n,r,a,o,s,c)),this.mergeVertices()}function l(e,t,n,i,c,l,u,h){a.a.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:c,openEnded:l,thetaStart:u,thetaLength:h};var d=this;e=void 0!==e?e:20,t=void 0!==t?t:20,n=void 0!==n?n:100,i=Math.floor(i)||8,c=Math.floor(c)||1,l=void 0!==l&&l,u=void 0!==u?u:0,h=void 0!==h?h:2*Math.PI;var f=[],p=[],m=[],g=[],v=0,y=[],x=n/2,_=0;function b(n){var r,a,c,l=new s.a,y=new o.a,b=0,w=!0===n?e:t,E=!0===n?1:-1;for(a=v,r=1;r<=i;r++)p.push(0,x*E,0),m.push(0,E,0),g.push(.5,.5),v++;for(c=v,r=0;r<=i;r++){var T=r/i*h+u,S=Math.cos(T),M=Math.sin(T);y.x=w*M,y.y=x*E,y.z=w*S,p.push(y.x,y.y,y.z),m.push(0,E,0),l.x=.5*S+.5,l.y=.5*M*E+.5,g.push(l.x,l.y),v++}for(r=0;r<i;r++){var A=a+r,L=c+r;!0===n?f.push(L,L+1,A):f.push(L+1,L,A),b+=3}d.addGroup(_,b,!0===n?1:2),_+=b}!function(){var r,a,s=new o.a,l=new o.a,b=0,w=(t-e)/n;for(a=0;a<=c;a++){var E=[],T=a/c,S=T*(t-e)+e;for(r=0;r<=i;r++){var M=r/i,A=M*h+u,L=Math.sin(A),C=Math.cos(A);l.x=S*L,l.y=-T*n+x,l.z=S*C,p.push(l.x,l.y,l.z),s.set(L,w,C).normalize(),m.push(s.x,s.y,s.z),g.push(M,1-T),E.push(v++)}y.push(E)}for(r=0;r<i;r++)for(a=0;a<c;a++){var P=y[a][r],R=y[a+1][r],F=y[a+1][r+1],I=y[a][r+1];f.push(P,R,I),f.push(R,F,I),b+=6}d.addGroup(_,b,0),_+=b}(),!1===l&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(f),this.addAttribute("position",new r.b(p,3)),this.addAttribute("normal",new r.b(m,3)),this.addAttribute("uv",new r.b(g,2))}n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l}),c.prototype=Object.create(i.b.prototype),c.prototype.constructor=c,l.prototype=Object.create(a.a.prototype),l.prototype.constructor=l},function(e,t,n){"use strict";var i=n(9),r=n(4);function a(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new r.a(512,512),this.map=null,this.matrix=new i.a}n.d(t,"a",function(){return a}),Object.assign(a.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}})},function(e,t,n){"use strict";var i=n(63),r=n(11);function a(e){this.manager=void 0!==e?e:r.a}n.d(t,"a",function(){return a}),Object.assign(a.prototype,{load:function(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var a=this,o=i.a.get(e);if(void 0!==o)return a.manager.itemStart(e),setTimeout(function(){t&&t(o),a.manager.itemEnd(e)},0),o;var s=document.createElementNS("http://www.w3.org/1999/xhtml","img");return s.addEventListener("load",function(){i.a.add(e,this),t&&t(this),a.manager.itemEnd(e)},!1),s.addEventListener("error",function(t){r&&r(t),a.manager.itemError(e)},!1),void 0!==this.crossOrigin&&(s.crossOrigin=this.crossOrigin),a.manager.itemStart(e),s.src=e,s},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}})},function(e,t,n){"use strict";var i=n(24),r=n(15),a=n(1),o=n(20),s=n(7);function c(e,t,n){this.uuid=s.a.generateUUID(),this.width=e,this.height=t,this.scissor=new o.a(0,0,e,t),this.scissorTest=!1,this.viewport=new o.a(0,0,e,t),void 0===(n=n||{}).minFilter&&(n.minFilter=a._19),this.texture=new r.a(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}n.d(t,"a",function(){return c}),c.prototype={constructor:c,isWebGLRenderTarget:!0,setSize:function(e,t){this.width===e&&this.height===t||(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}},Object.assign(c.prototype,i.a.prototype)},function(e,t,n){"use strict";var i=n(152),r=n.n(i),a=n(153),o=n.n(a),s=n(154),c=n.n(s),l=n(155),u=n.n(l),h=n(156),d=n.n(h),f=n(157),p=n.n(f),m=n(158),g=n.n(m),v=n(159),y=n.n(v),x=n(160),_=n.n(x),b=n(161),w=n.n(b),E=n(162),T=n.n(E),S=n(163),M=n.n(S),A=n(164),L=n.n(A),C=n(165),P=n.n(C),R=n(166),F=n.n(R),I=n(167),N=n.n(I),O=n(168),U=n.n(O),D=n(169),z=n.n(D),k=n(170),B=n.n(k),G=n(171),H=n.n(G),V=n(172),j=n.n(V),W=n(173),X=n.n(W),Y=n(174),q=n.n(Y),Q=n(175),Z=n.n(Q),$=n(176),J=n.n($),K=n(177),ee=n.n(K),te=n(178),ne=n.n(te),ie=n(179),re=n.n(ie),ae=n(180),oe=n.n(ae),se=n(181),ce=n.n(se),le=n(185),ue=n.n(le),he=n(184),de=n.n(he),fe=n(182),pe=n.n(fe),me=n(183),ge=n.n(me),ve=n(186),ye=n.n(ve),xe=n(187),_e=n.n(xe),be=n(188),we=n.n(be),Ee=n(189),Te=n.n(Ee),Se=n(190),Me=n.n(Se),Ae=n(191),Le=n.n(Ae),Ce=n(192),Pe=n.n(Ce),Re=n(193),Fe=n.n(Re),Ie=n(194),Ne=n.n(Ie),Oe=n(195),Ue=n.n(Oe),De=n(196),ze=n.n(De),ke=n(197),Be=n.n(ke),Ge=n(198),He=n.n(Ge),Ve=n(199),je=n.n(Ve),We=n(200),Xe=n.n(We),Ye=n(201),qe=n.n(Ye),Qe=n(202),Ze=n.n(Qe),$e=n(203),Je=n.n($e),Ke=n(204),et=n.n(Ke),tt=n(205),nt=n.n(tt),it=n(206),rt=n.n(it),at=n(207),ot=n.n(at),st=n(208),ct=n.n(st),lt=n(209),ut=n.n(lt),ht=n(210),dt=n.n(ht),ft=n(211),pt=n.n(ft),mt=n(212),gt=n.n(mt),vt=n(213),yt=n.n(vt),xt=n(214),_t=n.n(xt),bt=n(215),wt=n.n(bt),Et=n(216),Tt=n.n(Et),St=n(217),Mt=n.n(St),At=n(218),Lt=n.n(At),Ct=n(219),Pt=n.n(Ct),Rt=n(220),Ft=n.n(Rt),It=n(221),Nt=n.n(It),Ot=n(222),Ut=n.n(Ot),Dt=n(223),zt=n.n(Dt),kt=n(224),Bt=n.n(kt),Gt=n(225),Ht=n.n(Gt),Vt=n(226),jt=n.n(Vt),Wt=n(227),Xt=n.n(Wt),Yt=n(228),qt=n.n(Yt),Qt=n(232),Zt=n.n(Qt),$t=n(233),Jt=n.n($t),Kt=n(234),en=n.n(Kt),tn=n(229),nn=n.n(tn),rn=n(230),an=n.n(rn),on=n(231),sn=n.n(on),cn=n(235),ln=n.n(cn),un=n(236),hn=n.n(un),dn=n(237),fn=n.n(dn),pn=n(238),mn=n.n(pn),gn=n(239),vn=n.n(gn),yn=n(240),xn=n.n(yn),_n=n(241),bn=n.n(_n),wn=n(242),En=n.n(wn),Tn=n(243),Sn=n.n(Tn),Mn=n(244),An=n.n(Mn),Ln=n(245),Cn=n.n(Ln),Pn=n(246),Rn=n.n(Pn),Fn=n(247),In=n.n(Fn),Nn=n(248),On=n.n(Nn),Un=n(249),Dn=n.n(Un),zn=n(250),kn=n.n(zn),Bn=n(251),Gn=n.n(Bn),Hn=n(252),Vn=n.n(Hn),jn=n(253),Wn=n.n(jn),Xn=n(254),Yn=n.n(Xn),qn=n(255),Qn=n.n(qn),Zn=n(256),$n=n.n(Zn),Jn=n(257),Kn=n.n(Jn),ei=n(258),ti=n.n(ei),ni=n(259),ii=n.n(ni);n.d(t,"a",function(){return ri});var ri={alphamap_fragment:r.a,alphamap_pars_fragment:o.a,alphatest_fragment:c.a,aomap_fragment:u.a,aomap_pars_fragment:d.a,begin_vertex:p.a,beginnormal_vertex:g.a,bsdfs:y.a,bumpmap_pars_fragment:_.a,clipping_planes_fragment:w.a,clipping_planes_pars_fragment:T.a,clipping_planes_pars_vertex:M.a,clipping_planes_vertex:L.a,color_fragment:P.a,color_pars_fragment:F.a,color_pars_vertex:N.a,color_vertex:U.a,common:z.a,cube_uv_reflection_fragment:B.a,defaultnormal_vertex:H.a,displacementmap_pars_vertex:j.a,displacementmap_vertex:X.a,emissivemap_fragment:q.a,emissivemap_pars_fragment:Z.a,encodings_fragment:J.a,encodings_pars_fragment:ee.a,envmap_fragment:ne.a,envmap_pars_fragment:re.a,envmap_pars_vertex:oe.a,envmap_vertex:ce.a,fog_vertex:ue.a,fog_pars_vertex:de.a,fog_fragment:pe.a,fog_pars_fragment:ge.a,gradientmap_pars_fragment:ye.a,lightmap_fragment:_e.a,lightmap_pars_fragment:we.a,lights_lambert_vertex:Te.a,lights_pars:Me.a,lights_phong_fragment:Le.a,lights_phong_pars_fragment:Pe.a,lights_physical_fragment:Fe.a,lights_physical_pars_fragment:Ne.a,lights_template:Ue.a,logdepthbuf_fragment:ze.a,logdepthbuf_pars_fragment:Be.a,logdepthbuf_pars_vertex:He.a,logdepthbuf_vertex:je.a,map_fragment:Xe.a,map_pars_fragment:qe.a,map_particle_fragment:Ze.a,map_particle_pars_fragment:Je.a,metalnessmap_fragment:et.a,metalnessmap_pars_fragment:nt.a,morphnormal_vertex:rt.a,morphtarget_pars_vertex:ot.a,morphtarget_vertex:ct.a,normal_flip:ut.a,normal_fragment:dt.a,normalmap_pars_fragment:pt.a,packing:gt.a,premultiplied_alpha_fragment:yt.a,project_vertex:_t.a,roughnessmap_fragment:wt.a,roughnessmap_pars_fragment:Tt.a,shadowmap_pars_fragment:Mt.a,shadowmap_pars_vertex:Lt.a,shadowmap_vertex:Pt.a,shadowmask_pars_fragment:Ft.a,skinbase_vertex:Nt.a,skinning_pars_vertex:Ut.a,skinning_vertex:zt.a,skinnormal_vertex:Bt.a,specularmap_fragment:Ht.a,specularmap_pars_fragment:jt.a,tonemapping_fragment:Xt.a,tonemapping_pars_fragment:qt.a,uv_pars_fragment:Zt.a,uv_pars_vertex:Jt.a,uv_vertex:en.a,uv2_pars_fragment:nn.a,uv2_pars_vertex:an.a,uv2_vertex:sn.a,worldpos_vertex:ln.a,cube_frag:hn.a,cube_vert:fn.a,depth_frag:mn.a,depth_vert:vn.a,distanceRGBA_frag:xn.a,distanceRGBA_vert:bn.a,equirect_frag:En.a,equirect_vert:Sn.a,linedashed_frag:An.a,linedashed_vert:Cn.a,meshbasic_frag:Rn.a,meshbasic_vert:In.a,meshlambert_frag:On.a,meshlambert_vert:Dn.a,meshphong_frag:kn.a,meshphong_vert:Gn.a,meshphysical_frag:Vn.a,meshphysical_vert:Wn.a,normal_frag:Yn.a,normal_vert:Qn.a,points_frag:$n.a,points_vert:Kn.a,shadow_frag:ti.a,shadow_vert:ii.a}},function(e,t,n){"use strict";var i=n(15),r=n(1);function a(e,t,n,a,o,s,c,l,u,h,d,f){i.a.call(this,null,s,c,l,u,h,a,o,d,f),this.image={data:e,width:t,height:n},this.magFilter=void 0!==u?u:r._16,this.minFilter=void 0!==h?h:r._16,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}n.d(t,"a",function(){return a}),a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.isDataTexture=!0},function(e,t,n){"use strict";function i(e,t,n){this.path=t,this.parsedPath=n||i.parseTrackName(t),this.node=i.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}n.d(t,"a",function(){return i}),i.prototype={constructor:i,getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,n=t.objectName,r=t.propertyName,a=t.propertyIndex;if(e||(e=i.findNode(this.rootNode,t.nodeName)||this.rootNode,this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(n){var o=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("  can not bind to material as node does not have a material",this);if(!e.material.materials)return void console.error("  can not bind to material.materials as node.material does not have a materials array",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("  can not bind to bones as node does not have a skeleton",this);e=e.skeleton.bones;for(var s=0;s<e.length;s++)if(e[s].name===o){o=s;break}break;default:if(void 0===e[n])return void console.error("  can not bind to objectName of node, undefined",this);e=e[n]}if(void 0!==o){if(void 0===e[o])return void console.error("  trying to bind to objectIndex of objectName, but is undefined:",this,e);e=e[o]}}var c=e[r];if(void 0!==c){var l=this.Versioning.None;void 0!==e.needsUpdate?(l=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e);var u=this.BindingType.Direct;if(void 0!==a){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry",this);if(!e.geometry.morphTargets)return void console.error("  can not bind to morphTargetInfluences becasuse node does not have a geometry.morphTargets",this);for(s=0;s<this.node.geometry.morphTargets.length;s++)if(e.geometry.morphTargets[s].name===a){a=s;break}}u=this.BindingType.ArrayElement,this.resolvedProperty=c,this.propertyIndex=a}else void 0!==c.fromArray&&void 0!==c.toArray?(u=this.BindingType.HasFromToArray,this.resolvedProperty=c):void 0!==c.length?(u=this.BindingType.EntireArray,this.resolvedProperty=c):this.propertyName=r;this.getValue=this.GetterByBindingType[u],this.setValue=this.SetterByBindingTypeAndVersioning[u][l]}else{var h=t.nodeName;console.error("  trying to update property for track: "+h+"."+r+" but it wasn't found.",e)}}else console.error("  trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}},Object.assign(i.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},_getValue_unbound:i.prototype.getValue,_setValue_unbound:i.prototype.setValue,BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)e[t++]=n[i]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.node[this.propertyName]=e[t]},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.node[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++]},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]]}),i.Composite=function(e,t,n){var r=n||i.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)},i.Composite.prototype={constructor:i.Composite,getValue:function(e,t){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},i.create=function(e,t,n){return e&&e.isAnimationObjectGroup?new i.Composite(e,t,n):new i(e,t,n)},i.parseTrackName=function(e){var t=/^((?:[\w-]+[\/:])*)([\w-]+)?(?:\.([\w-]+)(?:\[(.+)\])?)?\.([\w-]+)(?:\[(.+)\])?$/.exec(e);if(!t)throw new Error("cannot parse trackName at all: "+e);var n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]};if(null===n.propertyName||0===n.propertyName.length)throw new Error("can not parse propertyName from trackName: "+e);return n},i.findNode=function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var n=function(e){for(var n=0;n<e.bones.length;n++){var i=e.bones[n];if(i.name===t)return i}return null}(e.skeleton);if(n)return n}if(e.children){var i=function(e){for(var n=0;n<e.length;n++){var r=e[n];if(r.name===t||r.uuid===t)return r;var a=i(r.children);if(a)return a}return null},r=i(e.children);if(r)return r}return null}},function(e,t,n){"use strict";var i=n(27),r=n(26);function a(e,t,n,i){r.a.call(this,e,t,n,i)}n.d(t,"a",function(){return a}),a.prototype=Object.assign(Object.create(i.a),{constructor:a,ValueTypeName:"number"})},function(e,t,n){"use strict";var i=n(1),r=n(27),a=n(126),o=n(26);function s(e,t,n,i){o.a.call(this,e,t,n,i)}n.d(t,"a",function(){return s}),s.prototype=Object.assign(Object.create(r.a),{constructor:s,ValueTypeName:"quaternion",DefaultInterpolation:i._55,InterpolantFactoryMethodLinear:function(e){return new a.a(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0})},function(e,t,n){"use strict";var i=n(27),r=n(26);function a(e,t,n,i){r.a.call(this,e,t,n,i)}n.d(t,"a",function(){return a}),a.prototype=Object.assign(Object.create(i.a),{constructor:a,ValueTypeName:"vector"})},function(e,t,n){"use strict";var i=n(5);function r(e){i.a.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}n.d(t,"a",function(){return r}),r.prototype=Object.assign(Object.create(i.a.prototype),{constructor:r,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),e.start(0,this.startTime),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.startTime=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.value=e,this}})},function(e,t,n){"use strict";var i;n.d(t,"a",function(){return r});var r={getContext:function(){return void 0===i&&(i=new(window.AudioContext||window.webkitAudioContext)),i},setContext:function(e){i=e}}},function(e,t,n){"use strict";var i=n(14),r=n(0),a=n(8),o=n(60);function s(){this.curves=[],this.autoClose=!1}n.d(t,"a",function(){return s}),s.prototype=Object.assign(Object.create(i.a.prototype),{constructor:s,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new o.a(t,e))},getPoint:function(e){for(var t=e*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=t){var r=n[i]-t,a=this.curves[i],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}i++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e},getSpacedPoints:function(e){isNaN(e)&&(e=40);for(var t=[],n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*e:a&&a.isLineCurve?1:a&&a.isSplineCurve?e*a.points.length:e,s=a.getPoints(o),c=0;c<s.length;c++){var l=s[c];t&&t.equals(l)||(n.push(l),t=l)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},createPointsGeometry:function(e){var t=this.getPoints(e);return this.createGeometry(t)},createSpacedPointsGeometry:function(e){var t=this.getSpacedPoints(e);return this.createGeometry(t)},createGeometry:function(e){for(var t=new a.b,n=0,i=e.length;n<i;n++){var o=e[n];t.vertices.push(new r.a(o.x,o.y,o.z||0))}return t}})},function(e,t,n){"use strict";var i=n(89),r=n(4),a=n(56);function o(e){a.a.call(this),this.currentPoint=new r.a,e&&this.fromPoints(e)}n.d(t,"a",function(){return o}),o.prototype=i.a,i.a.constructor=o},function(e,t,n){"use strict";var i=n(89),r=n(57);function a(){r.a.apply(this,arguments),this.holes=[]}n.d(t,"a",function(){return a}),a.prototype=Object.assign(Object.create(i.a),{constructor:a,getPointsHoles:function(e){for(var t=[],n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t},extractAllPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},extractPoints:function(e){return this.extractAllPoints(e)}})},function(e,t,n){"use strict";var i=n(14),r=n(4);function a(e,t,n,i,r,a,o,s){this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=a,this.aClockwise=o,this.aRotation=s||0}n.d(t,"a",function(){return a}),a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.isEllipseCurve=!0,a.prototype.getPoint=function(e){for(var t=2*Math.PI,n=this.aEndAngle-this.aStartAngle,i=Math.abs(n)<Number.EPSILON;n<0;)n+=t;for(;n>t;)n-=t;n<Number.EPSILON&&(n=i?0:t),!0!==this.aClockwise||i||(n===t?n=-t:n-=t);var a=this.aStartAngle+e*n,o=this.aX+this.xRadius*Math.cos(a),s=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),l=Math.sin(this.aRotation),u=o-this.aX,h=s-this.aY;o=u*c-h*l+this.aX,s=u*l+h*c+this.aY}return new r.a(o,s)}},function(e,t,n){"use strict";var i=n(14);function r(e,t){this.v1=e,this.v2=t}n.d(t,"a",function(){return r}),r.prototype=Object.create(i.a.prototype),r.prototype.constructor=r,r.prototype.isLineCurve=!0,r.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(e).add(this.v1),t},r.prototype.getPointAt=function(e){return this.getPoint(e)},r.prototype.getTangent=function(e){return this.v2.clone().sub(this.v1).normalize()}},function(e,t,n){"use strict";var i=n(8),r=n(3),a=n(2),o=n(0);function s(e,t,n,r,a,o){i.b.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:a,depthSegments:o},this.fromBufferGeometry(new c(e,t,n,r,a,o)),this.mergeVertices()}function c(e,t,n,i,s,c){a.a.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:s,depthSegments:c};var l=this;i=Math.floor(i)||1,s=Math.floor(s)||1;var u=[],h=[],d=[],f=[],p=0,m=0;function g(e,t,n,i,r,a,s,c,g,v,y){var x,_,b=a/g,w=s/v,E=a/2,T=s/2,S=c/2,M=g+1,A=v+1,L=0,C=0,P=new o.a;for(_=0;_<A;_++){var R=_*w-T;for(x=0;x<M;x++){var F=x*b-E;P[e]=F*i,P[t]=R*r,P[n]=S,h.push(P.x,P.y,P.z),P[e]=0,P[t]=0,P[n]=c>0?1:-1,d.push(P.x,P.y,P.z),f.push(x/g),f.push(1-_/v),L+=1}}for(_=0;_<v;_++)for(x=0;x<g;x++){var I=p+x+M*_,N=p+x+M*(_+1),O=p+(x+1)+M*(_+1),U=p+(x+1)+M*_;u.push(I,N,U),u.push(N,O,U),C+=6}l.addGroup(m,C,y),m+=C,p+=L}g("z","y","x",-1,-1,n,t,e,c=Math.floor(c)||1,s,0),g("z","y","x",1,-1,n,t,-e,c,s,1),g("x","z","y",1,1,e,n,t,i,c,2),g("x","z","y",1,-1,e,n,-t,i,c,3),g("x","y","z",1,-1,e,t,n,i,s,4),g("x","y","z",-1,-1,e,t,-n,i,s,5),this.setIndex(u),this.addAttribute("position",new r.b(h,3)),this.addAttribute("normal",new r.b(d,3)),this.addAttribute("uv",new r.b(f,2))}n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c}),s.prototype=Object.create(i.b.prototype),s.prototype.constructor=s,c.prototype=Object.create(a.a.prototype),c.prototype.constructor=c},function(e,t,n){"use strict";var i=n(8),r=n(4),a=n(29),o=n(0),s=n(43);function c(e,t){void 0!==e?(i.b.call(this),this.type="ExtrudeGeometry",e=Array.isArray(e)?e:[e],this.addShapeList(e,t),this.computeFaceNormals()):e=[]}n.d(t,"a",function(){return c}),c.prototype=Object.create(i.b.prototype),c.prototype.constructor=c,c.prototype.addShapeList=function(e,t){for(var n=e.length,i=0;i<n;i++){var r=e[i];this.addShape(r,t)}},c.prototype.addShape=function(e,t){var n,i,l,u,h,d,f,p,m=void 0!==t.amount?t.amount:100,g=void 0!==t.bevelThickness?t.bevelThickness:6,v=void 0!==t.bevelSize?t.bevelSize:g-2,y=void 0!==t.bevelSegments?t.bevelSegments:3,x=void 0===t.bevelEnabled||t.bevelEnabled,_=void 0!==t.curveSegments?t.curveSegments:12,b=void 0!==t.steps?t.steps:1,w=t.extrudePath,E=!1,T=void 0!==t.UVGenerator?t.UVGenerator:c.WorldUVGenerator;w&&(n=w.getSpacedPoints(b),E=!0,x=!1,i=void 0!==t.frames?t.frames:w.computeFrenetFrames(b,!1),l=new o.a,u=new o.a,h=new o.a),x||(y=0,g=0,v=0);var S=this,M=this.vertices.length,A=e.extractPoints(_),L=A.shape,C=A.holes,P=!s.a.isClockWise(L);if(P){for(L=L.reverse(),f=0,p=C.length;f<p;f++)d=C[f],s.a.isClockWise(d)&&(C[f]=d.reverse());P=!1}var R=s.a.triangulateShape(L,C),F=L;for(f=0,p=C.length;f<p;f++)d=C[f],L=L.concat(d);function I(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(n).add(e)}var N,O,U,D,z,k,B=L.length,G=R.length;function H(e,t,n){var i,a,o=1,s=e.x-t.x,c=e.y-t.y,l=n.x-e.x,u=n.y-e.y,h=s*s+c*c,d=s*u-c*l;if(Math.abs(d)>Number.EPSILON){var f=Math.sqrt(h),p=Math.sqrt(l*l+u*u),m=t.x-c/f,g=t.y+s/f,v=((n.x-u/p-m)*u-(n.y+l/p-g)*l)/(s*u-c*l),y=(i=m+s*v-e.x)*i+(a=g+c*v-e.y)*a;if(y<=2)return new r.a(i,a);o=Math.sqrt(y/2)}else{var x=!1;s>Number.EPSILON?l>Number.EPSILON&&(x=!0):s<-Number.EPSILON?l<-Number.EPSILON&&(x=!0):Math.sign(c)===Math.sign(u)&&(x=!0),x?(i=-c,a=s,o=Math.sqrt(h)):(i=s,a=c,o=Math.sqrt(h/2))}return new r.a(i/o,a/o)}for(var V=[],j=0,W=F.length,X=W-1,Y=j+1;j<W;j++,X++,Y++)X===W&&(X=0),Y===W&&(Y=0),V[j]=H(F[j],F[X],F[Y]);var q,Q,Z=[],$=V.concat();for(f=0,p=C.length;f<p;f++){for(d=C[f],q=[],j=0,X=(W=d.length)-1,Y=j+1;j<W;j++,X++,Y++)X===W&&(X=0),Y===W&&(Y=0),q[j]=H(d[j],d[X],d[Y]);Z.push(q),$=$.concat(q)}for(N=0;N<y;N++){for(U=N/y,D=g*Math.cos(U*Math.PI/2),O=v*Math.sin(U*Math.PI/2),j=0,W=F.length;j<W;j++)K((z=I(F[j],V[j],O)).x,z.y,-D);for(f=0,p=C.length;f<p;f++)for(d=C[f],q=Z[f],j=0,W=d.length;j<W;j++)K((z=I(d[j],q[j],O)).x,z.y,-D)}for(O=v,j=0;j<B;j++)z=x?I(L[j],$[j],O):L[j],E?(u.copy(i.normals[0]).multiplyScalar(z.x),l.copy(i.binormals[0]).multiplyScalar(z.y),h.copy(n[0]).add(u).add(l),K(h.x,h.y,h.z)):K(z.x,z.y,0);for(Q=1;Q<=b;Q++)for(j=0;j<B;j++)z=x?I(L[j],$[j],O):L[j],E?(u.copy(i.normals[Q]).multiplyScalar(z.x),l.copy(i.binormals[Q]).multiplyScalar(z.y),h.copy(n[Q]).add(u).add(l),K(h.x,h.y,h.z)):K(z.x,z.y,m/b*Q);for(N=y-1;N>=0;N--){for(U=N/y,D=g*Math.cos(U*Math.PI/2),O=v*Math.sin(U*Math.PI/2),j=0,W=F.length;j<W;j++)K((z=I(F[j],V[j],O)).x,z.y,m+D);for(f=0,p=C.length;f<p;f++)for(d=C[f],q=Z[f],j=0,W=d.length;j<W;j++)z=I(d[j],q[j],O),E?K(z.x,z.y+n[b-1].y,n[b-1].x+D):K(z.x,z.y,m+D)}function J(e,t){var n,i;for(j=e.length;--j>=0;){n=j,(i=j-1)<0&&(i=e.length-1);var r=0,a=b+2*y;for(r=0;r<a;r++){var o=B*r,s=B*(r+1);te(t+n+o,t+i+o,t+i+s,t+n+s,e,r,a,n,i)}}}function K(e,t,n){S.vertices.push(new o.a(e,t,n))}function ee(e,t,n){e+=M,t+=M,n+=M,S.faces.push(new a.a(e,t,n,null,null,0));var i=T.generateTopUV(S,e,t,n);S.faceVertexUvs[0].push(i)}function te(e,t,n,i,r,o,s,c,l){e+=M,t+=M,n+=M,i+=M,S.faces.push(new a.a(e,t,i,null,null,1)),S.faces.push(new a.a(t,n,i,null,null,1));var u=T.generateSideWallUV(S,e,t,n,i);S.faceVertexUvs[0].push([u[0],u[1],u[3]]),S.faceVertexUvs[0].push([u[1],u[2],u[3]])}!function(){if(x){var e=0,t=B*e;for(j=0;j<G;j++)ee((k=R[j])[2]+t,k[1]+t,k[0]+t);for(t=B*(e=b+2*y),j=0;j<G;j++)ee((k=R[j])[0]+t,k[1]+t,k[2]+t)}else{for(j=0;j<G;j++)ee((k=R[j])[2],k[1],k[0]);for(j=0;j<G;j++)ee((k=R[j])[0]+B*b,k[1]+B*b,k[2]+B*b)}}(),function(){var e=0;for(J(F,e),e+=F.length,f=0,p=C.length;f<p;f++)J(d=C[f],e),e+=d.length}()},c.WorldUVGenerator={generateTopUV:function(e,t,n,i){var a=e.vertices,o=a[t],s=a[n],c=a[i];return[new r.a(o.x,o.y),new r.a(s.x,s.y),new r.a(c.x,c.y)]},generateSideWallUV:function(e,t,n,i,a){var o=e.vertices,s=o[t],c=o[n],l=o[i],u=o[a];return Math.abs(s.y-c.y)<.01?[new r.a(s.x,1-s.z),new r.a(c.x,1-c.z),new r.a(l.x,1-l.z),new r.a(u.x,1-u.z)]:[new r.a(s.y,1-s.z),new r.a(c.y,1-c.z),new r.a(l.y,1-l.z),new r.a(u.y,1-u.z)]}}},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}}},function(e,t,n){"use strict";var i=n(4),r=n(17),a=n(11),o=n(117);function s(e){this.manager=void 0!==e?e:a.a,this.textures={}}n.d(t,"a",function(){return s}),Object.assign(s.prototype,{load:function(e,t,n,i){var a=this;new r.a(a.manager).load(e,function(e){t(a.parse(JSON.parse(e)))},n,i)},setTextures:function(e){this.textures=e},parse:function(e){var t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}var r=new o[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.shading&&(r.shading=e.shading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalScale){var a=e.normalScale;!1===Array.isArray(a)&&(a=[a,a]),r.normalScale=(new i.a).fromArray(a)}if(void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.materials)for(var s=0,c=e.materials.length;s<c;s++)r.materials.push(this.parse(e.materials[s]));return r}})},function(e,t,n){"use strict";var i=n(1),r=n(46),a=n(15),o=n(11);function s(e){this.manager=void 0!==e?e:o.a}n.d(t,"a",function(){return s}),Object.assign(s.prototype,{load:function(e,t,n,o){var s=new a.a,c=new r.a(this.manager);return c.setCrossOrigin(this.crossOrigin),c.setPath(this.path),c.load(e,function(n){var r=e.search(/\.(jpg|jpeg)$/)>0||0===e.search(/^data\:image\/jpeg/);s.format=r?i._35:i._36,s.image=n,s.needsUpdate=!0,void 0!==t&&t(s)},n,o),s},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}})},function(e,t,n){"use strict";var i=n(12),r=n(1),a=n(4),o=n(6);function s(e){i.a.call(this),this.type="MeshPhongMaterial",this.color=new o.a(16777215),this.specular=new o.a(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new o.a(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new a.a(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=r.X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}n.d(t,"a",function(){return s}),s.prototype=Object.create(i.a.prototype),s.prototype.constructor=s,s.prototype.isMeshPhongMaterial=!0,s.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}},function(e,t,n){"use strict";var i=n(12),r=n(6);function a(e){i.a.call(this),this.type="PointsMaterial",this.color=new r.a(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}n.d(t,"a",function(){return a}),a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.isPointsMaterial=!0,a.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this}},function(e,t,n){"use strict";var i,r=n(4);function a(e,t){this.min=void 0!==e?e:new r.a(1/0,1/0),this.max=void 0!==t?t:new r.a(-1/0,-1/0)}n.d(t,"a",function(){return a}),a.prototype={constructor:a,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:(i=new r.a,function(e,t){var n=i.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){var t=e||new r.a;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){var t=e||new r.a;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return(t||new r.a).set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)},clampPoint:function(e,t){return(t||new r.a).copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new r.a;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}},function(e,t,n){"use strict";var i,r,a,o=n(0),s=n(19),c=n(38);function l(e,t,n,i,r,a){this.planes=[void 0!==e?e:new c.a,void 0!==t?t:new c.a,void 0!==n?n:new c.a,void 0!==i?i:new c.a,void 0!==r?r:new c.a,void 0!==a?a:new c.a]}n.d(t,"a",function(){return l}),l.prototype={constructor:l,set:function(e,t,n,i,r,a){var o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,n=0;n<6;n++)t[n].copy(e.planes[n]);return this},setFromMatrix:function(e){var t=this.planes,n=e.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],c=n[5],l=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(o-i,u-s,p-h,y-m).normalize(),t[1].setComponents(o+i,u+s,p+h,y+m).normalize(),t[2].setComponents(o+r,u+c,p+d,y+g).normalize(),t[3].setComponents(o-r,u-c,p-d,y-g).normalize(),t[4].setComponents(o-a,u-l,p-f,y-v).normalize(),t[5].setComponents(o+a,u+l,p+f,y+v).normalize(),this},intersectsObject:(a=new s.a,function(e){var t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),a.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(a)}),intersectsSprite:function(){var e=new s.a;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){for(var t=this.planes,n=e.center,i=-e.radius,r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:(i=new o.a,r=new o.a,function(e){for(var t=this.planes,n=0;n<6;n++){var a=t[n];i.x=a.normal.x>0?e.min.x:e.max.x,r.x=a.normal.x>0?e.max.x:e.min.x,i.y=a.normal.y>0?e.min.y:e.max.y,r.y=a.normal.y>0?e.max.y:e.min.y,i.z=a.normal.z>0?e.min.z:e.max.z,r.z=a.normal.z>0?e.max.z:e.min.z;var o=a.distanceToPoint(i),s=a.distanceToPoint(r);if(o<0&&s<0)return!1}return!0}),containsPoint:function(e){for(var t=this.planes,n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}}},function(e,t,n){"use strict";var i,r,a=n(0),o=n(7);function s(e,t){this.start=void 0!==e?e:new a.a,this.end=void 0!==t?t:new a.a}n.d(t,"a",function(){return s}),s.prototype={constructor:s,set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return(e||new a.a).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return(e||new a.a).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){var n=t||new a.a;return this.delta(n).multiplyScalar(e).add(this.start)},closestPointToPointParameter:(i=new a.a,r=new a.a,function(e,t){i.subVectors(e,this.start),r.subVectors(this.end,this.start);var n=r.dot(r),a=r.dot(i)/n;return t&&(a=o.a.clamp(a,0,1)),a}),closestPointToPoint:function(e,t,n){var i=this.closestPointToPointParameter(e,t),r=n||new a.a;return this.delta(r).multiplyScalar(i).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}},function(e,t,n){"use strict";var i=n(37);function r(e,t,n,r){i.a.call(this,e,t,n,r)}n.d(t,"a",function(){return r}),r.prototype=Object.assign(Object.create(i.a.prototype),{constructor:r,interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=(n-t)/(i-t),u=1-l,h=0;h!==o;++h)r[h]=a[c+h]*u+a[s+h]*l;return r}})},function(e,t,n){"use strict";var i=n(5);function r(){i.a.call(this),this.type="Group"}n.d(t,"a",function(){return r}),r.prototype=Object.assign(Object.create(i.a.prototype),{constructor:r})},function(e,t,n){"use strict";var i,r,a,o=n(0),s=n(5);function c(){s.a.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}n.d(t,"a",function(){return c}),c.prototype=Object.assign(Object.create(s.a.prototype),{constructor:c,copy:function(e){s.a.prototype.copy.call(this,e,!1);for(var t=e.levels,n=0,i=t.length;n<i;n++){var r=t[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var n=this.levels,i=0;i<n.length&&!(t<n[i].distance);i++);n.splice(i,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,n=1,i=t.length;n<i&&!(e<t[n].distance);n++);return t[n-1].object},raycast:(a=new o.a,function(e,t){a.setFromMatrixPosition(this.matrixWorld);var n=e.ray.origin.distanceTo(a);this.getObjectForDistance(n).raycast(e,t)}),update:(i=new o.a,r=new o.a,function(e){var t=this.levels;if(t.length>1){i.setFromMatrixPosition(e.matrixWorld),r.setFromMatrixPosition(this.matrixWorld);var n=i.distanceTo(r);t[0].object.visible=!0;for(var a=1,o=t.length;a<o&&n>=t[a].distance;a++)t[a-1].object.visible=!1,t[a].object.visible=!0;for(;a<o;a++)t[a].object.visible=!1}}),toJSON:function(e){var t=s.a.prototype.toJSON.call(this,e);t.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];t.object.levels.push({object:a.object.uuid,distance:a.distance})}return t}})},function(e,t,n){"use strict";var i,r,a,o=n(19),s=n(33),c=n(9),l=n(5),u=n(0),h=n(67),d=n(2);function f(e,t){l.a.call(this),this.type="Points",this.geometry=void 0!==e?e:new d.a,this.material=void 0!==t?t:new h.a({color:16777215*Math.random()})}n.d(t,"a",function(){return f}),f.prototype=Object.assign(Object.create(l.a.prototype),{constructor:f,isPoints:!0,raycast:(i=new c.a,r=new s.a,a=new o.a,function(e,t){var n=this,o=this.geometry,s=this.matrixWorld,c=e.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),a.copy(o.boundingSphere),a.applyMatrix4(s),!1!==e.ray.intersectsSphere(a)){i.getInverse(s),r.copy(e.ray).applyMatrix4(i);var l=c/((this.scale.x+this.scale.y+this.scale.z)/3),h=l*l,d=new u.a;if(o.isBufferGeometry){var f=o.index,p=o.attributes.position.array;if(null!==f)for(var m=f.array,g=0,v=m.length;g<v;g++){var y=m[g];d.fromArray(p,3*y),b(d,y)}else{g=0;for(var x=p.length/3;g<x;g++)d.fromArray(p,3*g),b(d,g)}}else{var _=o.vertices;for(g=0,x=_.length;g<x;g++)b(_[g],g)}}function b(i,a){var o=r.distanceSqToPoint(i);if(o<h){var c=r.closestPointToPoint(i);c.applyMatrix4(s);var l=e.ray.origin.distanceTo(c);if(l<e.near||l>e.far)return;t.push({distance:l,distanceToRay:Math.sqrt(o),point:c.clone(),index:a,face:null,object:n})}}}),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}})},function(e,t,n){"use strict";var i,r=n(0),a=n(5),o=n(121);function s(e){a.a.call(this),this.type="Sprite",this.material=void 0!==e?e:new o.a}n.d(t,"a",function(){return s}),s.prototype=Object.assign(Object.create(a.a.prototype),{constructor:s,isSprite:!0,raycast:(i=new r.a,function(e,t){i.setFromMatrixPosition(this.matrixWorld);var n=e.ray.distanceSqToPoint(i);n>this.scale.x*this.scale.y/4||t.push({distance:Math.sqrt(n),point:this.position,face:null,object:this})}),clone:function(){return new this.constructor(this.material).copy(this)}})},function(e,t,n){"use strict";var i=n(48),r=n(34),a=n(0),o=n(77),s=n(6);n.d(t,"a",function(){return c});var c={basic:{uniforms:r.a.merge([o.a.common,o.a.aomap,o.a.lightmap,o.a.fog]),vertexShader:i.a.meshbasic_vert,fragmentShader:i.a.meshbasic_frag},lambert:{uniforms:r.a.merge([o.a.common,o.a.aomap,o.a.lightmap,o.a.emissivemap,o.a.fog,o.a.lights,{emissive:{value:new s.a(0)}}]),vertexShader:i.a.meshlambert_vert,fragmentShader:i.a.meshlambert_frag},phong:{uniforms:r.a.merge([o.a.common,o.a.aomap,o.a.lightmap,o.a.emissivemap,o.a.bumpmap,o.a.normalmap,o.a.displacementmap,o.a.gradientmap,o.a.fog,o.a.lights,{emissive:{value:new s.a(0)},specular:{value:new s.a(1118481)},shininess:{value:30}}]),vertexShader:i.a.meshphong_vert,fragmentShader:i.a.meshphong_frag},standard:{uniforms:r.a.merge([o.a.common,o.a.aomap,o.a.lightmap,o.a.emissivemap,o.a.bumpmap,o.a.normalmap,o.a.displacementmap,o.a.roughnessmap,o.a.metalnessmap,o.a.fog,o.a.lights,{emissive:{value:new s.a(0)},roughness:{value:.5},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:i.a.meshphysical_vert,fragmentShader:i.a.meshphysical_frag},points:{uniforms:r.a.merge([o.a.points,o.a.fog]),vertexShader:i.a.points_vert,fragmentShader:i.a.points_frag},dashed:{uniforms:r.a.merge([o.a.common,o.a.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:i.a.linedashed_vert,fragmentShader:i.a.linedashed_frag},depth:{uniforms:r.a.merge([o.a.common,o.a.displacementmap]),vertexShader:i.a.depth_vert,fragmentShader:i.a.depth_frag},normal:{uniforms:r.a.merge([o.a.common,o.a.bumpmap,o.a.normalmap,o.a.displacementmap,{opacity:{value:1}}]),vertexShader:i.a.normal_vert,fragmentShader:i.a.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:i.a.cube_vert,fragmentShader:i.a.cube_frag},equirect:{uniforms:{tEquirect:{value:null},tFlip:{value:-1}},vertexShader:i.a.equirect_vert,fragmentShader:i.a.equirect_frag},distanceRGBA:{uniforms:{lightPos:{value:new a.a}},vertexShader:i.a.distanceRGBA_vert,fragmentShader:i.a.distanceRGBA_frag}};c.physical={uniforms:r.a.merge([c.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:i.a.meshphysical_vert,fragmentShader:i.a.meshphysical_frag}},function(e,t,n){"use strict";var i=n(20),r=n(6),a=n(4);n(49);n.d(t,"a",function(){return o});var o={common:{diffuse:{value:new r.a(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new i.a(0,0,1,1)},specularMap:{value:null},alphaMap:{value:null},envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new a.a(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new r.a(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new r.a(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new i.a(0,0,1,1)}}}},function(e,t,n){"use strict";var i=n(15),r=n(1);function a(e,t,n,a,o,s,c,l,u,h){e=void 0!==e?e:[],t=void 0!==t?t:r._6,i.a.call(this,e,t,n,a,o,s,c,l,u,h),this.flipY=!1}n.d(t,"a",function(){return a}),a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.isCubeTexture=!0,Object.defineProperty(a.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}})},function(e,t,n){"use strict";var i=n(27),r=n(83),a=n(81),o=n(52),s=n(82),c=n(53),l=n(51),u=n(35),h=n(26);function d(e,t,n,i){h.a.apply(this,arguments)}n.d(t,"a",function(){return d}),d.prototype=i.a,i.a.constructor=d,Object.assign(d,{parse:function(e){if(void 0===e.type)throw new Error("track type undefined, can not parse");var t=d._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var n=[],i=[];u.a.flattenJSON(e.keys,n,i,"value"),e.times=n,e.values=i}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t,n=e.constructor;if(void 0!==n.toJSON)t=n.toJSON(e);else{t={name:e.name,times:u.a.convertArray(e.times,Array),values:u.a.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return l.a;case"vector":case"vector2":case"vector3":case"vector4":return c.a;case"color":return s.a;case"quaternion":return o.a;case"bool":case"boolean":return a.a;case"string":return r.a}throw new Error("Unsupported typeName: "+e)}})},function(e,t,n){"use strict";var i=n(18);function r(e,t,n){this.binding=e,this.valueSize=n;var i,r=Float64Array;switch(t){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}n.d(t,"a",function(){return r}),r.prototype={constructor:r,accumulate:function(e,t){var n=this.buffer,i=this.valueSize,r=e*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=t}else{var s=t/(a+=t);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a},apply:function(e){var t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,a=this.binding;if(this.cumulativeWeight=0,r<1){var o=3*t;this._mixBufferRegion(n,i,o,1-r,t)}for(var s=t,c=t+t;s!==c;++s)if(n[s]!==n[s+t]){a.setValue(n,i);break}},saveOriginalState:function(){var e=this.binding,t=this.buffer,n=this.valueSize,i=3*n;e.getValue(t,i);for(var r=n,a=i;r!==a;++r)t[r]=t[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var e=3*this.valueSize;this.binding.setValue(this.buffer,e)},_select:function(e,t,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)e[t+a]=e[n+a]},_slerp:function(e,t,n,r,a){i.a.slerpFlat(e,t,e,t,e,n,r)},_lerp:function(e,t,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=t+o;e[s]=e[s]*a+e[n+o]*i}}}},function(e,t,n){"use strict";var i=n(1),r=n(27),a=n(26);function o(e,t,n){a.a.call(this,e,t,n)}n.d(t,"a",function(){return o}),o.prototype=Object.assign(Object.create(r.a),{constructor:o,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:i._54,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0})},function(e,t,n){"use strict";var i=n(27),r=n(26);function a(e,t,n,i){r.a.call(this,e,t,n,i)}n.d(t,"a",function(){return a}),a.prototype=Object.assign(Object.create(i.a),{constructor:a,ValueTypeName:"color"})},function(e,t,n){"use strict";var i=n(1),r=n(27),a=n(26);function o(e,t,n,i){a.a.call(this,e,t,n,i)}n.d(t,"a",function(){return o}),o.prototype=Object.assign(Object.create(r.a),{constructor:o,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:i._54,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0})},function(e,t,n){"use strict";function i(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}n.d(t,"a",function(){return i}),Object.assign(i.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),n=0;n<t.length;n++)e+=t[n];return e/t.length}})},function(e,t,n){"use strict";var i=n(7);function r(e,t){this.uuid=i.a.generateUUID(),this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}n.d(t,"a",function(){return r}),r.prototype={constructor:r,isInterleavedBuffer:!0,set needsUpdate(e){!0===e&&this.version++},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0!==e?e.length/this.stride:0,this.array=e},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,n){e*=this.stride,n*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}},function(e,t,n){"use strict";function i(){this.mask=1}n.d(t,"a",function(){return i}),i.prototype={constructor:i,set:function(e){this.mask=1<<e},enable:function(e){this.mask|=1<<e},toggle:function(e){this.mask^=1<<e},disable:function(e){this.mask&=~(1<<e)},test:function(e){return 0!=(this.mask&e.mask)}}},function(e,t,n){"use strict";function i(e){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=arguments[1]),this.value=e}n.d(t,"a",function(){return i}),i.prototype.clone=function(){return new i(void 0===this.value.clone?this.value:this.value.clone())}},function(e,t,n){"use strict";var i=n(30),r=n(90);function a(e){this.data=e}n.d(t,"a",function(){return a}),Object.assign(a.prototype,{isFont:!0,generateShapes:function(e,t,a){function o(e,t,o,c){var l=s.glyphs[e]||s.glyphs["?"];if(l){var u,h,d,f,p,m,g,v,y,x,_,b=new r.a,w=[];if(l.o)for(var E=l._cachedOutline||(l._cachedOutline=l.o.split(" ")),T=0,S=E.length;T<S;){switch(E[T++]){case"m":u=E[T++]*t+o,h=E[T++]*t+c,b.moveTo(u,h);break;case"l":u=E[T++]*t+o,h=E[T++]*t+c,b.lineTo(u,h);break;case"q":if(d=E[T++]*t+o,f=E[T++]*t+c,g=E[T++]*t+o,v=E[T++]*t+c,b.quadraticCurveTo(g,v,d,f),_=w[w.length-1]){p=_.x,m=_.y;for(var M=1;M<=a;M++){var A=M/a;n.i(i.a)(A,p,g,d),n.i(i.a)(A,m,v,f)}}break;case"b":if(d=E[T++]*t+o,f=E[T++]*t+c,g=E[T++]*t+o,v=E[T++]*t+c,y=E[T++]*t+o,x=E[T++]*t+c,b.bezierCurveTo(g,v,y,x,d,f),_=w[w.length-1]){p=_.x,m=_.y;for(M=1;M<=a;M++){A=M/a;n.i(i.b)(A,p,g,y,d),n.i(i.b)(A,m,v,x,f)}}}}return{offsetX:l.ha*t,path:b}}}void 0===t&&(t=100),void 0===a&&(a=4);for(var s=this.data,c=function(e){for(var n=String(e).split(""),i=t/s.resolution,r=(s.boundingBox.yMax-s.boundingBox.yMin+s.underlineThickness)*i,a=0,c=0,l=[],u=0;u<n.length;u++){var h=n[u];if("\n"===h)a=0,c-=r;else{var d=o(h,i,a,c);a+=d.offsetX,l.push(d.path)}}return l}(e),l=[],u=0,h=c.length;u<h;u++)Array.prototype.push.apply(l,c[u].toShapes());return l}})},function(e,t,n){"use strict";var i=n(56),r=n(59),a=n(94),o=n(4),s=n(92),c=n(93),l=n(60);n.d(t,"a",function(){return u});var u=Object.assign(Object.create(i.a.prototype),{fromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new l.a(this.currentPoint.clone(),new o.a(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,i){var r=new c.a(this.currentPoint.clone(),new o.a(e,t),new o.a(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(e,t,n,i,r,a){var c=new s.a(this.currentPoint.clone(),new o.a(e,t),new o.a(n,i),new o.a(r,a));this.curves.push(c),this.currentPoint.set(r,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e),n=new a.a(t);this.curves.push(n),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;this.absarc(e+o,t+s,n,i,r,a)},absarc:function(e,t,n,i,r,a){this.absellipse(e,t,n,n,i,r,a)},ellipse:function(e,t,n,i,r,a,o,s){var c=this.currentPoint.x,l=this.currentPoint.y;this.absellipse(e+c,t+l,n,i,r,a,o,s)},absellipse:function(e,t,n,i,a,o,s,c){var l=new r.a(e,t,n,i,a,o,s,c);if(this.curves.length>0){var u=l.getPoint(0);u.equals(this.currentPoint)||this.lineTo(u.x,u.y)}this.curves.push(l);var h=l.getPoint(1);this.currentPoint.copy(h)}})},function(e,t,n){"use strict";var i=n(57),r=n(58),a=n(43);function o(){this.subPaths=[],this.currentPath=null}n.d(t,"a",function(){return o}),o.prototype={moveTo:function(e,t){this.currentPath=new i.a,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,n,i){this.currentPath.quadraticCurveTo(e,t,n,i)},bezierCurveTo:function(e,t,n,i,r,a){this.currentPath.bezierCurveTo(e,t,n,i,r,a)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function n(e){for(var t=[],n=0,i=e.length;n<i;n++){var a=e[n],o=new r.a;o.curves=a.curves,t.push(o)}return t}function i(e,t){for(var n=t.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=t[r],s=t[a],c=s.x-o.x,l=s.y-o.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(o=t[a],c=-c,s=t[r],l=-l),e.y<o.y||e.y>s.y)continue;if(e.y===o.y){if(e.x===o.x)return!0}else{var u=l*(e.x-o.x)-c*(e.y-o.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(e.y!==o.y)continue;if(s.x<=e.x&&e.x<=o.x||o.x<=e.x&&e.x<=s.x)return!0}}return i}var o=a.a.isClockWise,s=this.subPaths;if(0===s.length)return[];if(!0===t)return n(s);var c,l,u,h=[];if(1===s.length)return l=s[0],(u=new r.a).curves=l.curves,h.push(u),h;var d=!o(s[0].getPoints());d=e?!d:d;var f,p,m=[],g=[],v=[],y=0;g[y]=void 0,v[y]=[];for(var x=0,_=s.length;x<_;x++)c=o(f=(l=s[x]).getPoints()),(c=e?!c:c)?(!d&&g[y]&&y++,g[y]={s:new r.a,p:f},g[y].s.curves=l.curves,d&&y++,v[y]=[]):v[y].push({h:l,p:f[0]});if(!g[0])return n(s);if(g.length>1){for(var b=!1,w=[],E=0,T=g.length;E<T;E++)m[E]=[];for(E=0,T=g.length;E<T;E++)for(var S=v[E],M=0;M<S.length;M++){for(var A=S[M],L=!0,C=0;C<g.length;C++)i(A.p,g[C].p)&&(E!==C&&w.push({froms:E,tos:C,hole:M}),L?(L=!1,m[C].push(A)):b=!0);L&&m[E].push(A)}w.length>0&&(b||(v=m))}x=0;for(var P=g.length;x<P;x++){u=g[x].s,h.push(u);for(var R=0,F=(p=v[x]).length;R<F;R++)u.holes.push(p[R].h)}return h}}},function(e,t,n){"use strict";var i=n(0),r=n(14);function a(){var e=0,t=0,n=0,i=0;function r(r,a,o,s){e=r,t=o,n=-3*r+3*a-2*o-s,i=2*r-2*a+o+s}return{initCatmullRom:function(e,t,n,i,a){r(t,n,a*(n-e),a*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,a,o,s){var c=(t-e)/a-(n-e)/(a+o)+(n-t)/o,l=(n-t)/o-(i-t)/(o+s)+(i-n)/s;r(t,n,c*=o,l*=o)},calc:function(r){var a=r*r;return e+t*r+n*a+i*(a*r)}}}n.d(t,"a",function(){return u});var o=new i.a,s=new a,c=new a,l=new a;function u(e){this.points=e||[],this.closed=!1}u.prototype=Object.create(r.a.prototype),u.prototype.constructor=u,u.prototype.getPoint=function(e){var t=this.points,n=t.length;n<2&&console.log("duh, you need at least 2 points");var r,a,u,h,d=(n-(this.closed?0:1))*e,f=Math.floor(d),p=d-f;if(this.closed?f+=f>0?0:(Math.floor(Math.abs(f)/t.length)+1)*t.length:0===p&&f===n-1&&(f=n-2,p=1),this.closed||f>0?r=t[(f-1)%n]:(o.subVectors(t[0],t[1]).add(t[0]),r=o),a=t[f%n],u=t[(f+1)%n],this.closed||f+2<n?h=t[(f+2)%n]:(o.subVectors(t[n-1],t[n-2]).add(t[n-1]),h=o),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var m="chordal"===this.type?.5:.25,g=Math.pow(r.distanceToSquared(a),m),v=Math.pow(a.distanceToSquared(u),m),y=Math.pow(u.distanceToSquared(h),m);v<1e-4&&(v=1),g<1e-4&&(g=v),y<1e-4&&(y=v),s.initNonuniformCatmullRom(r.x,a.x,u.x,h.x,g,v,y),c.initNonuniformCatmullRom(r.y,a.y,u.y,h.y,g,v,y),l.initNonuniformCatmullRom(r.z,a.z,u.z,h.z,g,v,y)}else if("catmullrom"===this.type){var x=void 0!==this.tension?this.tension:.5;s.initCatmullRom(r.x,a.x,u.x,h.x,x),c.initCatmullRom(r.y,a.y,u.y,h.y,x),l.initCatmullRom(r.z,a.z,u.z,h.z,x)}return new i.a(s.calc(p),c.calc(p),l.calc(p))}},function(e,t,n){"use strict";var i=n(14),r=n(30),a=n(4);function o(e,t,n,i){this.v0=e,this.v1=t,this.v2=n,this.v3=i}n.d(t,"a",function(){return o}),o.prototype=Object.create(i.a.prototype),o.prototype.constructor=o,o.prototype.getPoint=function(e){var t=this.v0,i=this.v1,o=this.v2,s=this.v3;return new a.a(n.i(r.b)(e,t.x,i.x,o.x,s.x),n.i(r.b)(e,t.y,i.y,o.y,s.y))}},function(e,t,n){"use strict";var i=n(14),r=n(30),a=n(4);function o(e,t,n){this.v0=e,this.v1=t,this.v2=n}n.d(t,"a",function(){return o}),o.prototype=Object.create(i.a.prototype),o.prototype.constructor=o,o.prototype.getPoint=function(e){var t=this.v0,i=this.v1,o=this.v2;return new a.a(n.i(r.a)(e,t.x,i.x,o.x),n.i(r.a)(e,t.y,i.y,o.y))}},function(e,t,n){"use strict";var i=n(14),r=n(30),a=n(4);function o(e){this.points=void 0===e?[]:e}n.d(t,"a",function(){return o}),o.prototype=Object.create(i.a.prototype),o.prototype.constructor=o,o.prototype.isSplineCurve=!0,o.prototype.getPoint=function(e){var t=this.points,i=(t.length-1)*e,o=Math.floor(i),s=i-o,c=t[0===o?o:o-1],l=t[o],u=t[o>t.length-2?t.length-1:o+1],h=t[o>t.length-3?t.length-1:o+2];return new a.a(n.i(r.c)(s,c.x,l.x,u.x,h.x),n.i(r.c)(s,c.y,l.y,u.y,h.y))}},function(e,t,n){"use strict";var i=n(2),r=n(3),a=n(8),o=n(7);function s(e,t){i.a.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0!==t?t:1;var n,s,c=[],l=Math.cos(o.a.DEG2RAD*t),u=[0,0],h={},d=["a","b","c"];e.isBufferGeometry?(s=new a.b).fromBufferGeometry(e):s=e.clone(),s.mergeVertices(),s.computeFaceNormals();for(var f=s.vertices,p=s.faces,m=0,g=p.length;m<g;m++)for(var v=p[m],y=0;y<3;y++)u[0]=v[d[y]],u[1]=v[d[(y+1)%3]],u.sort(b),void 0===h[n=u.toString()]?h[n]={index1:u[0],index2:u[1],face1:m,face2:void 0}:h[n].face2=m;for(n in h){var x=h[n];if(void 0===x.face2||p[x.face1].normal.dot(p[x.face2].normal)<=l){var _=f[x.index1];c.push(_.x,_.y,_.z),_=f[x.index2],c.push(_.x,_.y,_.z)}}function b(e,t){return e-t}this.addAttribute("position",new r.b(c,3))}n.d(t,"a",function(){return s}),s.prototype=Object.create(i.a.prototype),s.prototype.constructor=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(101);n.d(t,"WireframeGeometry",function(){return i.a});var r=n(287);n.d(t,"ParametricGeometry",function(){return r.a}),n.d(t,"ParametricBufferGeometry",function(){return r.b});var a=n(289);n.d(t,"TetrahedronGeometry",function(){return a.a}),n.d(t,"TetrahedronBufferGeometry",function(){return a.b});var o=n(97);n.d(t,"OctahedronGeometry",function(){return o.b}),n.d(t,"OctahedronBufferGeometry",function(){return o.a});var s=n(285);n.d(t,"IcosahedronGeometry",function(){return s.a}),n.d(t,"IcosahedronBufferGeometry",function(){return s.b});var c=n(284);n.d(t,"DodecahedronGeometry",function(){return c.a}),n.d(t,"DodecahedronBufferGeometry",function(){return c.b});var l=n(36);n.d(t,"PolyhedronGeometry",function(){return l.b}),n.d(t,"PolyhedronBufferGeometry",function(){return l.a});var u=n(293);n.d(t,"TubeGeometry",function(){return u.a}),n.d(t,"TubeBufferGeometry",function(){return u.b});var h=n(292);n.d(t,"TorusKnotGeometry",function(){return h.a}),n.d(t,"TorusKnotBufferGeometry",function(){return h.b});var d=n(291);n.d(t,"TorusGeometry",function(){return d.a}),n.d(t,"TorusBufferGeometry",function(){return d.b});var f=n(290);n.d(t,"TextGeometry",function(){return f.a});var p=n(100);n.d(t,"SphereGeometry",function(){return p.b}),n.d(t,"SphereBufferGeometry",function(){return p.a});var m=n(288);n.d(t,"RingGeometry",function(){return m.a}),n.d(t,"RingBufferGeometry",function(){return m.b});var g=n(98);n.d(t,"PlaneGeometry",function(){return g.a}),n.d(t,"PlaneBufferGeometry",function(){return g.b});var v=n(286);n.d(t,"LatheGeometry",function(){return v.a}),n.d(t,"LatheBufferGeometry",function(){return v.b});var y=n(99);n.d(t,"ShapeGeometry",function(){return y.a}),n.d(t,"ShapeBufferGeometry",function(){return y.b});var x=n(62);n.d(t,"ExtrudeGeometry",function(){return x.a});var _=n(95);n.d(t,"EdgesGeometry",function(){return _.a});var b=n(283);n.d(t,"ConeGeometry",function(){return b.a}),n.d(t,"ConeBufferGeometry",function(){return b.b});var w=n(44);n.d(t,"CylinderGeometry",function(){return w.b}),n.d(t,"CylinderBufferGeometry",function(){return w.a});var E=n(282);n.d(t,"CircleGeometry",function(){return E.a}),n.d(t,"CircleBufferGeometry",function(){return E.b});var T=n(61);n.d(t,"BoxGeometry",function(){return T.a}),n.d(t,"BoxBufferGeometry",function(){return T.b})},function(e,t,n){"use strict";var i=n(8),r=n(36);function a(e,t){i.b.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new o(e,t)),this.mergeVertices()}function o(e,t){r.a.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o}),a.prototype=Object.create(i.b.prototype),a.prototype.constructor=a,o.prototype=Object.create(r.a.prototype),o.prototype.constructor=o},function(e,t,n){"use strict";var i=n(8),r=n(3),a=n(2);function o(e,t,n,r){i.b.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new s(e,t,n,r))}function s(e,t,n,i){a.a.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};var o,s,c=e/2,l=t/2,u=Math.floor(n)||1,h=Math.floor(i)||1,d=u+1,f=h+1,p=e/u,m=t/h,g=[],v=[],y=[],x=[];for(s=0;s<f;s++){var _=s*m-l;for(o=0;o<d;o++){var b=o*p-c;v.push(b,-_,0),y.push(0,0,1),x.push(o/u),x.push(1-s/h)}}for(s=0;s<h;s++)for(o=0;o<u;o++){var w=o+d*s,E=o+d*(s+1),T=o+1+d*(s+1),S=o+1+d*s;g.push(w,E,S),g.push(E,T,S)}this.setIndex(g),this.addAttribute("position",new r.b(v,3)),this.addAttribute("normal",new r.b(y,3)),this.addAttribute("uv",new r.b(x,2))}n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),o.prototype=Object.create(i.b.prototype),o.prototype.constructor=o,s.prototype=Object.create(a.a.prototype),s.prototype.constructor=s},function(e,t,n){"use strict";var i=n(8),r=n(3),a=n(2),o=n(43);function s(e,t){i.b.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new c(e,t)),this.mergeVertices()}function c(e,t){a.a.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],i=[],s=[],c=[],l=0,u=0;if(!1===Array.isArray(e))d(e);else for(var h=0;h<e.length;h++)d(e[h]),this.addGroup(l,u,h),l+=u,u=0;function d(e){var r,a,l,h=i.length/3,d=e.extractPoints(t),f=d.shape,p=d.holes;if(!1===o.a.isClockWise(f))for(f=f.reverse(),r=0,a=p.length;r<a;r++)l=p[r],!0===o.a.isClockWise(l)&&(p[r]=l.reverse());var m=o.a.triangulateShape(f,p);for(r=0,a=p.length;r<a;r++)l=p[r],f=f.concat(l);for(r=0,a=f.length;r<a;r++){var g=f[r];i.push(g.x,g.y,0),s.push(0,0,1),c.push(g.x,g.y)}for(r=0,a=m.length;r<a;r++){var v=m[r],y=v[0]+h,x=v[1]+h,_=v[2]+h;n.push(y,x,_),u+=3}}this.setIndex(n),this.addAttribute("position",new r.b(i,3)),this.addAttribute("normal",new r.b(s,3)),this.addAttribute("uv",new r.b(c,2))}n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c}),s.prototype=Object.create(i.b.prototype),s.prototype.constructor=s,c.prototype=Object.create(a.a.prototype),c.prototype.constructor=c},function(e,t,n){"use strict";var i=n(8),r=n(3),a=n(2),o=n(0);function s(e,t,n,r,a,o,s){i.b.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new c(e,t,n,r,a,o,s))}function c(e,t,n,i,s,c,l){a.a.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:s,thetaStart:c,thetaLength:l},e=e||50,t=Math.max(3,Math.floor(t)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,s=void 0!==s?s:2*Math.PI;var u,h,d=(c=void 0!==c?c:0)+(l=void 0!==l?l:Math.PI),f=0,p=[],m=new o.a,g=new o.a,v=[],y=[],x=[],_=[];for(h=0;h<=n;h++){var b=[],w=h/n;for(u=0;u<=t;u++){var E=u/t;m.x=-e*Math.cos(i+E*s)*Math.sin(c+w*l),m.y=e*Math.cos(c+w*l),m.z=e*Math.sin(i+E*s)*Math.sin(c+w*l),y.push(m.x,m.y,m.z),g.set(m.x,m.y,m.z).normalize(),x.push(g.x,g.y,g.z),_.push(E,1-w),b.push(f++)}p.push(b)}for(h=0;h<n;h++)for(u=0;u<t;u++){var T=p[h][u+1],S=p[h][u],M=p[h+1][u],A=p[h+1][u+1];(0!==h||c>0)&&v.push(T,S,A),(h!==n-1||d<Math.PI)&&v.push(S,M,A)}this.setIndex(v),this.addAttribute("position",new r.b(y,3)),this.addAttribute("normal",new r.b(x,3)),this.addAttribute("uv",new r.b(_,2))}n.d(t,"b",function(){return s}),n.d(t,"a",function(){return c}),s.prototype=Object.create(i.b.prototype),s.prototype.constructor=s,c.prototype=Object.create(a.a.prototype),c.prototype.constructor=c},function(e,t,n){"use strict";var i=n(2),r=n(3),a=n(0);function o(e){i.a.call(this),this.type="WireframeGeometry";var t,n,o,s,c,l,u,h,d=[],f=[0,0],p={},m=["a","b","c"];if(e&&e.isGeometry){var g=e.faces;for(t=0,o=g.length;t<o;t++){var v=g[t];for(n=0;n<3;n++)f[0]=v[m[n]],f[1]=v[m[(n+1)%3]],f.sort(S),void 0===p[u=f.toString()]&&(p[u]={index1:f[0],index2:f[1]})}for(u in p)l=p[u],h=e.vertices[l.index1],d.push(h.x,h.y,h.z),h=e.vertices[l.index2],d.push(h.x,h.y,h.z)}else if(e&&e.isBufferGeometry){var y,x,_,b,w,E,T;if(h=new a.a,null!==e.index){for(y=e.attributes.position,x=e.index,0===(_=e.groups).length&&e.addGroup(0,x.count),s=0,c=_.length;s<c;++s)for(t=w=(b=_[s]).start,o=w+b.count;t<o;t+=3)for(n=0;n<3;n++)f[0]=x.getX(t+n),f[1]=x.getX(t+(n+1)%3),f.sort(S),void 0===p[u=f.toString()]&&(p[u]={index1:f[0],index2:f[1]});for(u in p)l=p[u],h.fromBufferAttribute(y,l.index1),d.push(h.x,h.y,h.z),h.fromBufferAttribute(y,l.index2),d.push(h.x,h.y,h.z)}else for(t=0,o=(y=e.attributes.position).count/3;t<o;t++)for(n=0;n<3;n++)E=3*t+n,h.fromBufferAttribute(y,E),d.push(h.x,h.y,h.z),T=3*t+(n+1)%3,h.fromBufferAttribute(y,T),d.push(h.x,h.y,h.z)}function S(e,t){return e-t}this.addAttribute("position",new r.b(d,3))}n.d(t,"a",function(){return o}),o.prototype=Object.create(i.a.prototype),o.prototype.constructor=o},function(e,t,n){"use strict";var i,r=n(32),a=n(13),o=n(10),s=n(3),c=n(2);function l(e,t){void 0===t&&(t=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new c.a;r.setIndex(new s.j(n,1)),r.addAttribute("position",new s.j(i,3)),a.a.call(this,r,new o.a({color:t})),void 0!==e&&this.update(e)}n.d(t,"a",function(){return l}),l.prototype=Object.create(a.a.prototype),l.prototype.constructor=l,l.prototype.update=(i=new r.a,function(e){if(e&&e.isBox3?i.copy(e):i.setFromObject(e),!i.isEmpty()){var t=i.min,n=i.max,r=this.geometry.attributes.position,a=r.array;a[0]=n.x,a[1]=n.y,a[2]=n.z,a[3]=t.x,a[4]=n.y,a[5]=n.z,a[6]=t.x,a[7]=t.y,a[8]=n.z,a[9]=n.x,a[10]=t.y,a[11]=n.z,a[12]=n.x,a[13]=n.y,a[14]=t.z,a[15]=t.x,a[16]=n.y,a[17]=t.z,a[18]=t.x,a[19]=t.y,a[20]=t.z,a[21]=n.x,a[22]=t.y,a[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}})},function(e,t,n){"use strict";var i=n(13),r=n(1),a=n(10),o=n(3),s=n(2),c=n(6);function l(e,t,n,l){e=e||10,t=t||10,n=new c.a(void 0!==n?n:4473924),l=new c.a(void 0!==l?l:8947848);for(var u=t/2,h=e/t,d=e/2,f=[],p=[],m=0,g=0,v=-d;m<=t;m++,v+=h){f.push(-d,0,v,d,0,v),f.push(v,0,-d,v,0,d);var y=m===u?n:l;y.toArray(p,g),g+=3,y.toArray(p,g),g+=3,y.toArray(p,g),g+=3,y.toArray(p,g),g+=3}var x=new s.a;x.addAttribute("position",new o.b(f,3)),x.addAttribute("color",new o.b(p,3));var _=new a.a({vertexColors:r.s});i.a.call(this,x,_)}n.d(t,"a",function(){return l}),l.prototype=Object.create(i.a.prototype),l.prototype.constructor=l},function(e,t,n){"use strict";var i=n(25);function r(e,t){i.a.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}n.d(t,"a",function(){return r}),r.prototype=Object.assign(Object.create(i.a.prototype),{constructor:r,isAmbientLight:!0})},function(e,t,n){"use strict";var i=n(25),r=n(106),a=n(5);function o(e,t){i.a.call(this,e,t),this.type="DirectionalLight",this.position.copy(a.a.DefaultUp),this.updateMatrix(),this.target=new a.a,this.shadow=new r.a}n.d(t,"a",function(){return o}),o.prototype=Object.assign(Object.create(i.a.prototype),{constructor:o,isDirectionalLight:!0,copy:function(e){return i.a.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}})},function(e,t,n){"use strict";var i=n(45),r=n(42);function a(){i.a.call(this,new r.a(-5,5,5,-5,.5,500))}n.d(t,"a",function(){return a}),a.prototype=Object.assign(Object.create(i.a.prototype),{constructor:a})},function(e,t,n){"use strict";var i=n(25),r=n(6),a=n(5);function o(e,t,n){i.a.call(this,e,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(a.a.DefaultUp),this.updateMatrix(),this.groundColor=new r.a(t)}n.d(t,"a",function(){return o}),o.prototype=Object.assign(Object.create(i.a.prototype),{constructor:o,isHemisphereLight:!0,copy:function(e){return i.a.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}})},function(e,t,n){"use strict";var i=n(25),r=n(23),a=n(45);function o(e,t,n,o){i.a.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==o?o:1,this.shadow=new a.a(new r.a(90,1,.5,500))}n.d(t,"a",function(){return o}),o.prototype=Object.assign(Object.create(i.a.prototype),{constructor:o,isPointLight:!0,copy:function(e){return i.a.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}})},function(e,t,n){"use strict";var i=n(25),r=n(110),a=n(5);function o(e,t,n,o,s,c){i.a.call(this,e,t),this.type="SpotLight",this.position.copy(a.a.DefaultUp),this.updateMatrix(),this.target=new a.a,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==o?o:Math.PI/3,this.penumbra=void 0!==s?s:0,this.decay=void 0!==c?c:1,this.shadow=new r.a}n.d(t,"a",function(){return o}),o.prototype=Object.assign(Object.create(i.a.prototype),{constructor:o,isSpotLight:!0,copy:function(e){return i.a.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}})},function(e,t,n){"use strict";var i=n(45),r=n(7),a=n(23);function o(){i.a.call(this,new a.a(50,1,.5,500))}n.d(t,"a",function(){return o}),o.prototype=Object.assign(Object.create(i.a.prototype),{constructor:o,isSpotLightShadow:!0,update:function(e){var t=2*r.a.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height,i=e.distance||500,a=this.camera;t===a.fov&&n===a.aspect&&i===a.far||(a.fov=t,a.aspect=n,a.far=i,a.updateProjectionMatrix())}})},function(e,t,n){"use strict";var i=n(55),r=n(17),a=n(11);function o(e){this.manager=void 0!==e?e:a.a}n.d(t,"a",function(){return o}),Object.assign(o.prototype,{load:function(e,t,n,a){var o=new r.a(this.manager);o.setResponseType("arraybuffer"),o.load(e,function(e){i.a.getContext().decodeAudioData(e,function(e){t(e)})},n,a)}})},function(e,t,n){"use strict";var i=n(19),r=n(0),a=n(3),o=n(2),s=n(17),c=n(11);function l(e){this.manager=void 0!==e?e:c.a}n.d(t,"a",function(){return l}),Object.assign(l.prototype,{load:function(e,t,n,i){var r=this;new s.a(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},n,i)},parse:function(e){var t=new o.a,n=e.data.index,s={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};if(void 0!==n){var c=new s[n.type](n.array);t.setIndex(new a.j(c,1))}var l=e.data.attributes;for(var u in l){var h=l[u];c=new s[h.type](h.array);t.addAttribute(u,new a.j(c,h.itemSize,h.normalized))}var d=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==d)for(var f=0,p=d.length;f!==p;++f){var m=d[f];t.addGroup(m.start,m.count,m.materialIndex)}var g=e.data.boundingSphere;if(void 0!==g){var v=new r.a;void 0!==g.center&&v.fromArray(g.center),t.boundingSphere=new i.a(v,g.radius)}return t}})},function(e,t,n){"use strict";var i=n(46),r=n(78),a=n(11);function o(e){this.manager=void 0!==e?e:a.a}n.d(t,"a",function(){return o}),Object.assign(o.prototype,{load:function(e,t,n,a){var o=new r.a,s=new i.a(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);var c=0;function l(n){s.load(e[n],function(e){o.images[n]=e,6===++c&&(o.needsUpdate=!0,t&&t(o))},void 0,a)}for(var u=0;u<e.length;++u)l(u);return o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}})},function(e,t,n){"use strict";var i=n(1),r=n(17),a=n(49),o=n(11);function s(e){this.manager=void 0!==e?e:o.a,this._parser=null}n.d(t,"a",function(){return s}),Object.assign(s.prototype,{load:function(e,t,n,o){var s=this,c=new a.a,l=new r.a(this.manager);return l.setResponseType("arraybuffer"),l.load(e,function(e){var n=s._parser(e);n&&(void 0!==n.image?c.image=n.image:void 0!==n.data&&(c.image.width=n.width,c.image.height=n.height,c.image.data=n.data),c.wrapS=void 0!==n.wrapS?n.wrapS:i._14,c.wrapT=void 0!==n.wrapT?n.wrapT:i._14,c.magFilter=void 0!==n.magFilter?n.magFilter:i._19,c.minFilter=void 0!==n.minFilter?n.minFilter:i._21,c.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(c.format=n.format),void 0!==n.type&&(c.type=n.type),void 0!==n.mipmaps&&(c.mipmaps=n.mipmaps),1===n.mipmapCount&&(c.minFilter=i._19),c.needsUpdate=!0,t&&t(c,n))},n,o),c}})},function(e,t,n){"use strict";var i=n(116),r=n(40),a=n(0),o=n(20),s=n(6),c=n(4),l=n(29),u=n(8),h=n(17),d=n(11);function f(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:d.a,this.withCredentials=!1}n.d(t,"a",function(){return f}),Object.assign(f.prototype,{load:function(e,t,n,r){var a=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:i.a.prototype.extractUrlBase(e),s=new h.a(this.manager);s.setWithCredentials(this.withCredentials),s.load(e,function(n){var i=JSON.parse(n),r=i.metadata;if(void 0!==r){var s=r.type;if(void 0!==s){if("object"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead.");if("scene"===s.toLowerCase())return void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.SceneLoader instead.")}}var c=a.parse(i,o);t(c.geometry,c.materials)},n,r)},setTexturePath:function(e){this.texturePath=e},parse:function(e,t){var n=new u.b,h=void 0!==e.scale?1/e.scale:1;if(function(t){function i(e,t){return e&1<<t}var r,o,u,h,d,f,p,m,g,v,y,x,_,b,w,E,T,S,M,A,L,C,P,R,F,I,N,O=e.faces,U=e.vertices,D=e.normals,z=e.colors,k=0;if(void 0!==e.uvs){for(r=0;r<e.uvs.length;r++)e.uvs[r].length&&k++;for(r=0;r<k;r++)n.faceVertexUvs[r]=[]}h=0,d=U.length;for(;h<d;)(S=new a.a).x=U[h++]*t,S.y=U[h++]*t,S.z=U[h++]*t,n.vertices.push(S);h=0,d=O.length;for(;h<d;)if(v=O[h++],y=i(v,0),x=i(v,1),_=i(v,3),b=i(v,4),w=i(v,5),E=i(v,6),T=i(v,7),y){if((A=new l.a).a=O[h],A.b=O[h+1],A.c=O[h+3],(L=new l.a).a=O[h+1],L.b=O[h+2],L.c=O[h+3],h+=4,x&&(g=O[h++],A.materialIndex=g,L.materialIndex=g),u=n.faces.length,_)for(r=0;r<k;r++)for(R=e.uvs[r],n.faceVertexUvs[r][u]=[],n.faceVertexUvs[r][u+1]=[],o=0;o<4;o++)m=O[h++],I=R[2*m],N=R[2*m+1],F=new c.a(I,N),2!==o&&n.faceVertexUvs[r][u].push(F),0!==o&&n.faceVertexUvs[r][u+1].push(F);if(b&&(p=3*O[h++],A.normal.set(D[p++],D[p++],D[p]),L.normal.copy(A.normal)),w)for(r=0;r<4;r++)p=3*O[h++],P=new a.a(D[p++],D[p++],D[p]),2!==r&&A.vertexNormals.push(P),0!==r&&L.vertexNormals.push(P);if(E&&(f=O[h++],C=z[f],A.color.setHex(C),L.color.setHex(C)),T)for(r=0;r<4;r++)f=O[h++],C=z[f],2!==r&&A.vertexColors.push(new s.a(C)),0!==r&&L.vertexColors.push(new s.a(C));n.faces.push(A),n.faces.push(L)}else{if((M=new l.a).a=O[h++],M.b=O[h++],M.c=O[h++],x&&(g=O[h++],M.materialIndex=g),u=n.faces.length,_)for(r=0;r<k;r++)for(R=e.uvs[r],n.faceVertexUvs[r][u]=[],o=0;o<3;o++)m=O[h++],I=R[2*m],N=R[2*m+1],F=new c.a(I,N),n.faceVertexUvs[r][u].push(F);if(b&&(p=3*O[h++],M.normal.set(D[p++],D[p++],D[p])),w)for(r=0;r<3;r++)p=3*O[h++],P=new a.a(D[p++],D[p++],D[p]),M.vertexNormals.push(P);if(E&&(f=O[h++],M.color.setHex(z[f])),T)for(r=0;r<3;r++)f=O[h++],M.vertexColors.push(new s.a(z[f]));n.faces.push(M)}}(h),function(){var t=void 0!==e.influencesPerVertex?e.influencesPerVertex:2;if(e.skinWeights)for(var i=0,r=e.skinWeights.length;i<r;i+=t){var a=e.skinWeights[i],s=t>1?e.skinWeights[i+1]:0,c=t>2?e.skinWeights[i+2]:0,l=t>3?e.skinWeights[i+3]:0;n.skinWeights.push(new o.a(a,s,c,l))}if(e.skinIndices)for(var i=0,r=e.skinIndices.length;i<r;i+=t){var u=e.skinIndices[i],h=t>1?e.skinIndices[i+1]:0,d=t>2?e.skinIndices[i+2]:0,f=t>3?e.skinIndices[i+3]:0;n.skinIndices.push(new o.a(u,h,d,f))}n.bones=e.bones,n.bones&&n.bones.length>0&&(n.skinWeights.length!==n.skinIndices.length||n.skinIndices.length!==n.vertices.length)&&console.warn("When skinning, number of vertices ("+n.vertices.length+"), skinIndices ("+n.skinIndices.length+"), and skinWeights ("+n.skinWeights.length+") should match.")}(),function(t){if(void 0!==e.morphTargets)for(var i=0,r=e.morphTargets.length;i<r;i++){n.morphTargets[i]={},n.morphTargets[i].name=e.morphTargets[i].name,n.morphTargets[i].vertices=[];for(var o=n.morphTargets[i].vertices,s=e.morphTargets[i].vertices,c=0,l=s.length;c<l;c+=3){var u=new a.a;u.x=s[c]*t,u.y=s[c+1]*t,u.z=s[c+2]*t,o.push(u)}}if(void 0!==e.morphColors&&e.morphColors.length>0){console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.');for(var h=n.faces,d=e.morphColors[0].colors,i=0,r=h.length;i<r;i++)h[i].color.fromArray(d,3*i)}}(h),function(){var t=[],i=[];void 0!==e.animation&&i.push(e.animation);void 0!==e.animations&&(e.animations.length?i=i.concat(e.animations):i.push(e.animations));for(var a=0;a<i.length;a++){var o=r.a.parseAnimation(i[a],n.bones);o&&t.push(o)}if(n.morphTargets){var s=r.a.CreateClipsFromMorphTargetSequences(n.morphTargets,10);t=t.concat(s)}t.length>0&&(n.animations=t)}(),n.computeFaceNormals(),n.computeBoundingSphere(),void 0===e.materials||0===e.materials.length)return{geometry:n};var d=i.a.prototype.initMaterials(e.materials,t,this.crossOrigin);return{geometry:n,materials:d}}})},function(e,t,n){"use strict";var i,r,a,o,s=n(1),c=n(7),l=n(64),u=n(65),h=n(6);function d(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}n.d(t,"a",function(){return d}),d.prototype={constructor:d,crossOrigin:void 0,extractUrlBase:function(e){var t=e.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(e,t,n){for(var i=[],r=0;r<e.length;++r)i[r]=this.createMaterial(e[r],t,n);return i},createMaterial:(o={NoBlending:s.t,NormalBlending:s.u,AdditiveBlending:s.v,SubtractiveBlending:s.w,MultiplyBlending:s.x,CustomBlending:s.y},function(e,t,n){void 0===i&&(i=new h.a),void 0===r&&(r=new u.a),void 0===a&&(a=new l.a);var f={};function p(e,i,a,o,l){var u,h=t+e,p=d.Handlers.get(h);null!==p?u=p.load(h):(r.setCrossOrigin(n),u=r.load(h)),void 0!==i&&(u.repeat.fromArray(i),1!==i[0]&&(u.wrapS=s._13),1!==i[1]&&(u.wrapT=s._13)),void 0!==a&&u.offset.fromArray(a),void 0!==o&&("repeat"===o[0]&&(u.wrapS=s._13),"mirror"===o[0]&&(u.wrapS=s._15),"repeat"===o[1]&&(u.wrapT=s._13),"mirror"===o[1]&&(u.wrapT=s._15)),void 0!==l&&(u.anisotropy=l);var m=c.a.generateUUID();return f[m]=u,m}var m={uuid:c.a.generateUUID(),type:"MeshLambertMaterial"};for(var g in e){var v=e[g];switch(g){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":m.name=v;break;case"blending":m.blending=o[v];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",g,"is no longer supported.");break;case"colorDiffuse":m.color=i.fromArray(v).getHex();break;case"colorSpecular":m.specular=i.fromArray(v).getHex();break;case"colorEmissive":m.emissive=i.fromArray(v).getHex();break;case"specularCoef":m.shininess=v;break;case"shading":"basic"===v.toLowerCase()&&(m.type="MeshBasicMaterial"),"phong"===v.toLowerCase()&&(m.type="MeshPhongMaterial"),"standard"===v.toLowerCase()&&(m.type="MeshStandardMaterial");break;case"mapDiffuse":m.map=p(v,e.mapDiffuseRepeat,e.mapDiffuseOffset,e.mapDiffuseWrap,e.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":m.emissiveMap=p(v,e.mapEmissiveRepeat,e.mapEmissiveOffset,e.mapEmissiveWrap,e.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":m.lightMap=p(v,e.mapLightRepeat,e.mapLightOffset,e.mapLightWrap,e.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":m.aoMap=p(v,e.mapAORepeat,e.mapAOOffset,e.mapAOWrap,e.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":m.bumpMap=p(v,e.mapBumpRepeat,e.mapBumpOffset,e.mapBumpWrap,e.mapBumpAnisotropy);break;case"mapBumpScale":m.bumpScale=v;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":m.normalMap=p(v,e.mapNormalRepeat,e.mapNormalOffset,e.mapNormalWrap,e.mapNormalAnisotropy);break;case"mapNormalFactor":m.normalScale=[v,v];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":m.specularMap=p(v,e.mapSpecularRepeat,e.mapSpecularOffset,e.mapSpecularWrap,e.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":m.metalnessMap=p(v,e.mapMetalnessRepeat,e.mapMetalnessOffset,e.mapMetalnessWrap,e.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":m.roughnessMap=p(v,e.mapRoughnessRepeat,e.mapRoughnessOffset,e.mapRoughnessWrap,e.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":m.alphaMap=p(v,e.mapAlphaRepeat,e.mapAlphaOffset,e.mapAlphaWrap,e.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":m.side=s.m;break;case"doubleSided":m.side=s.n;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),m.opacity=v;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":m[g]=v;break;case"vertexColors":!0===v&&(m.vertexColors=s.s),"face"===v&&(m.vertexColors=s.r);break;default:console.error("THREE.Loader.createMaterial: Unsupported",g,v)}}return"MeshBasicMaterial"===m.type&&delete m.emissive,"MeshPhongMaterial"!==m.type&&delete m.specular,m.opacity<1&&(m.transparent=!0),a.setTextures(f),a.parse(m)})},d.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,n=0,i=t.length;n<i;n+=2){var r=t[n],a=t[n+1];if(r.test(e))return a}return null}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(316);n.d(t,"ShadowMaterial",function(){return i.a});var r=n(121);n.d(t,"SpriteMaterial",function(){return r.a});var a=n(315);n.d(t,"RawShaderMaterial",function(){return a.a});var o=n(31);n.d(t,"ShaderMaterial",function(){return o.a});var s=n(67);n.d(t,"PointsMaterial",function(){return s.a});var c=n(120);n.d(t,"MultiMaterial",function(){return c.a});var l=n(313);n.d(t,"MeshPhysicalMaterial",function(){return l.a});var u=n(119);n.d(t,"MeshStandardMaterial",function(){return u.a});var h=n(66);n.d(t,"MeshPhongMaterial",function(){return h.a});var d=n(314);n.d(t,"MeshToonMaterial",function(){return d.a});var f=n(312);n.d(t,"MeshNormalMaterial",function(){return f.a});var p=n(311);n.d(t,"MeshLambertMaterial",function(){return p.a});var m=n(118);n.d(t,"MeshDepthMaterial",function(){return m.a});var g=n(28);n.d(t,"MeshBasicMaterial",function(){return g.a});var v=n(310);n.d(t,"LineDashedMaterial",function(){return v.a});var y=n(10);n.d(t,"LineBasicMaterial",function(){return y.a});var x=n(12);n.d(t,"Material",function(){return x.a})},function(e,t,n){"use strict";var i=n(12),r=n(1);function a(e){i.a.call(this),this.type="MeshDepthMaterial",this.depthPacking=r._71,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(e)}n.d(t,"a",function(){return a}),a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.isMeshDepthMaterial=!0,a.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}},function(e,t,n){"use strict";var i=n(12),r=n(4),a=n(6);function o(e){i.a.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new a.a(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a.a(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r.a(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}n.d(t,"a",function(){return o}),o.prototype=Object.create(i.a.prototype),o.prototype.constructor=o,o.prototype.isMeshStandardMaterial=!0,o.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}},function(e,t,n){"use strict";var i=n(7);function r(e){this.uuid=i.a.generateUUID(),this.type="MultiMaterial",this.materials=Array.isArray(e)?e:[],this.visible=!0}n.d(t,"a",function(){return r}),r.prototype={constructor:r,isMultiMaterial:!0,toJSON:function(e){for(var t={metadata:{version:4.2,type:"material",generator:"MaterialExporter"},uuid:this.uuid,type:this.type,materials:[]},n=this.materials,i=0,r=n.length;i<r;i++){var a=n[i].toJSON(e);delete a.metadata,t.materials.push(a)}return t.visible=this.visible,t},clone:function(){for(var e=new this.constructor,t=0;t<this.materials.length;t++)e.materials.push(this.materials[t].clone());return e.visible=this.visible,e}}},function(e,t,n){"use strict";var i=n(12),r=n(6);function a(e){i.a.call(this),this.type="SpriteMaterial",this.color=new r.a(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(e)}n.d(t,"a",function(){return a}),a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this}},function(e,t,n){"use strict";var i,r,a=n(18),o=n(0),s=n(9),c=n(7);function l(e,t,n,i){this._x=e||0,this._y=t||0,this._z=n||0,this._order=i||l.DefaultOrder}n.d(t,"a",function(){return l}),l.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],l.DefaultOrder="XYZ",l.prototype={constructor:l,isEuler:!0,get x(){return this._x},set x(e){this._x=e,this.onChangeCallback()},get y(){return this._y},set y(e){this._y=e,this.onChangeCallback()},get z(){return this._z},set z(e){this._z=e,this.onChangeCallback()},get order(){return this._order},set order(e){this._order=e,this.onChangeCallback()},set:function(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,n){var i=c.a.clamp,r=e.elements,a=r[0],o=r[4],s=r[8],l=r[1],u=r[5],h=r[9],d=r[2],f=r[6],p=r[10];return"XYZ"===(t=t||this._order)?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-h,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,u),this._z=0)):"YXZ"===t?(this._x=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-d,a),this._z=0)):"ZXY"===t?(this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.99999?(this._y=Math.atan2(-d,p),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,a))):"ZYX"===t?(this._y=Math.asin(-i(d,-1,1)),Math.abs(d)<.99999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,a)):(this._x=0,this._z=Math.atan2(-o,u))):"YZX"===t?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-h,u),this._y=Math.atan2(-d,a)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===t?(this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.99999?(this._x=Math.atan2(f,u),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-h,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(e,t,n){return void 0===r&&(r=new s.a),r.makeRotationFromQuaternion(e),this.setFromRotationMatrix(r,t,n)},setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:(i=new a.a,function(e){return i.setFromEuler(this),this.setFromQuaternion(i,e)}),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new o.a(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}},function(e,t,n){"use strict";var i,r,a,o,s,c,l=n(0),u=n(70),h=n(38);function d(e,t,n){this.a=void 0!==e?e:new l.a,this.b=void 0!==t?t:new l.a,this.c=void 0!==n?n:new l.a}n.d(t,"a",function(){return d}),d.normal=(i=new l.a,function(e,t,n,r){var a=r||new l.a;a.subVectors(n,t),i.subVectors(e,t),a.cross(i);var o=a.lengthSq();return o>0?a.multiplyScalar(1/Math.sqrt(o)):a.set(0,0,0)}),d.barycoordFromPoint=function(){var e=new l.a,t=new l.a,n=new l.a;return function(i,r,a,o,s){e.subVectors(o,r),t.subVectors(a,r),n.subVectors(i,r);var c=e.dot(e),u=e.dot(t),h=e.dot(n),d=t.dot(t),f=t.dot(n),p=c*d-u*u,m=s||new l.a;if(0===p)return m.set(-2,-1,-1);var g=1/p,v=(d*h-u*f)*g,y=(c*f-u*h)*g;return m.set(1-v-y,y,v)}}(),d.containsPoint=(r=new l.a,function(e,t,n,i){var a=d.barycoordFromPoint(e,t,n,i,r);return a.x>=0&&a.y>=0&&a.x+a.y<=1}),d.prototype={constructor:d,set:function(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this},setFromPointsAndIndices:function(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},area:function(){var e=new l.a,t=new l.a;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),midpoint:function(e){return(e||new l.a).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(e){return d.normal(this.a,this.b,this.c,e)},plane:function(e){return(e||new h.a).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(e,t){return d.barycoordFromPoint(e,this.a,this.b,this.c,t)},containsPoint:function(e){return d.containsPoint(e,this.a,this.b,this.c)},closestPointToPoint:function(e,t){void 0===a&&(a=new h.a,o=[new u.a,new u.a,new u.a],s=new l.a,c=new l.a);var n=t||new l.a,i=1/0;if(a.setFromCoplanarPoints(this.a,this.b,this.c),a.projectPoint(e,s),!0===this.containsPoint(s))n.copy(s);else{o[0].set(this.a,this.b),o[1].set(this.b,this.c),o[2].set(this.c,this.a);for(var r=0;r<o.length;r++){o[r].closestPointToPoint(s,!0,c);var d=s.distanceToSquared(c);d<i&&(i=d,n.copy(c))}}return n},equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}},function(e,t,n){"use strict";var i=n(1),r=n(37);function a(e,t,n,i){r.a.call(this,e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}n.d(t,"a",function(){return a}),a.prototype=Object.assign(Object.create(r.a.prototype),{constructor:a,DefaultSettings_:{endingStart:i._57,endingEnd:i._57},intervalChanged_:function(e,t,n){var r=this.parameterPositions,a=e-2,o=e+1,s=r[a],c=r[o];if(void 0===s)switch(this.getSettings_().endingStart){case i._58:a=e,s=2*t-n;break;case i._59:s=t+r[a=r.length-2]-r[a+1];break;default:a=e,s=n}if(void 0===c)switch(this.getSettings_().endingEnd){case i._58:o=e,c=2*n-t;break;case i._59:o=1,c=n+r[1]-r[0];break;default:o=e-1,c=t}var l=.5*(n-t),u=this.valueSize;this._weightPrev=l/(t-s),this._weightNext=l/(c-n),this._offsetPrev=a*u,this._offsetNext=o*u},interpolate_:function(e,t,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=e*o,c=s-o,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(i-t),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,x=d*m-d*p,_=0;_!==o;++_)r[_]=g*a[l+_]+v*a[c+_]+y*a[s+_]+x*a[u+_];return r}})},function(e,t,n){"use strict";var i=n(37);function r(e,t,n,r){i.a.call(this,e,t,n,r)}n.d(t,"a",function(){return r}),r.prototype=Object.assign(Object.create(i.a.prototype),{constructor:r,interpolate_:function(e,t,n,i){return this.copySampleValue_(e-1)}})},function(e,t,n){"use strict";var i=n(37),r=n(18);function a(e,t,n,r){i.a.call(this,e,t,n,r)}n.d(t,"a",function(){return a}),a.prototype=Object.assign(Object.create(i.a.prototype),{constructor:a,interpolate_:function(e,t,n,i){for(var a=this.resultBuffer,o=this.sampleValues,s=this.valueSize,c=e*s,l=(n-t)/(i-t),u=c+s;c!==u;c+=4)r.a.slerpFlat(a,0,o,c-s,o,c,l);return a}})},function(e,t,n){"use strict";var i=n(5);function r(){i.a.call(this),this.type="Bone"}n.d(t,"a",function(){return r}),r.prototype=Object.assign(Object.create(i.a.prototype),{constructor:r,isBone:!0})},function(e,t,n){"use strict";var i,r=n(9),a=n(1),o=n(49),s=n(7);function c(e,t,n){if(this.useVertexTexture=void 0===n||n,this.identityMatrix=new r.a,e=e||[],this.bones=e.slice(0),this.useVertexTexture){var i=Math.sqrt(4*this.bones.length);i=s.a.nextPowerOfTwo(Math.ceil(i)),i=Math.max(i,4),this.boneTextureWidth=i,this.boneTextureHeight=i,this.boneMatrices=new Float32Array(this.boneTextureWidth*this.boneTextureHeight*4),this.boneTexture=new o.a(this.boneMatrices,this.boneTextureWidth,this.boneTextureHeight,a._36,a._28)}else this.boneMatrices=new Float32Array(16*this.bones.length);if(void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton bonInverses is the wrong length."),this.boneInverses=[];for(var c=0,l=this.bones.length;c<l;c++)this.boneInverses.push(new r.a)}}n.d(t,"a",function(){return c}),Object.assign(c.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;e<t;e++){var n=new r.a;this.bones[e]&&n.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var e,t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&e.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,n=this.bones.length;t<n;t++)(e=this.bones[t])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:(i=new r.a,function(){for(var e=0,t=this.bones.length;e<t;e++){var n=this.bones[e]?this.bones[e].matrixWorld:this.identityMatrix;i.multiplyMatrices(n,this.boneInverses[e]),i.toArray(this.boneMatrices,16*e)}this.useVertexTexture&&(this.boneTexture.needsUpdate=!0)}),clone:function(){return new c(this.bones,this.boneInverses,this.useVertexTexture)}})},function(e,t,n){"use strict";var i=n(21),r=n(20),a=n(128),o=n(127),s=n(9);function c(e,t,n){i.a.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new s.a,this.bindMatrixInverse=new s.a;var r=[];if(this.geometry&&void 0!==this.geometry.bones){for(var c,l,u=0,h=this.geometry.bones.length;u<h;++u)l=this.geometry.bones[u],c=new o.a,r.push(c),c.name=l.name,c.position.fromArray(l.pos),c.quaternion.fromArray(l.rotq),void 0!==l.scl&&c.scale.fromArray(l.scl);for(u=0,h=this.geometry.bones.length;u<h;++u)-1!==(l=this.geometry.bones[u]).parent&&null!==l.parent&&void 0!==r[l.parent]?r[l.parent].add(r[u]):this.add(r[u])}this.normalizeSkinWeights(),this.updateMatrixWorld(!0),this.bind(new a.a(r,void 0,n),this.matrixWorld)}n.d(t,"a",function(){return c}),c.prototype=Object.assign(Object.create(i.a.prototype),{constructor:c,isSkinnedMesh:!0,bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){if(this.geometry&&this.geometry.isGeometry)for(var e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e];(a=1/t.lengthManhattan())!==1/0?t.multiplyScalar(a):t.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){var n=new r.a,i=this.geometry.attributes.skinWeight;for(e=0;e<i.count;e++){var a;n.x=i.getX(e),n.y=i.getY(e),n.z=i.getZ(e),n.w=i.getW(e),(a=1/n.lengthManhattan())!==1/0?n.multiplyScalar(a):n.set(1,0,0,0),i.setXYZW(e,n.x,n.y,n.z,n.w)}}},updateMatrixWorld:function(e){i.a.prototype.updateMatrixWorld.call(this,!0),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material,this.skeleton.useVertexTexture).copy(this)}})},function(e,t,n){"use strict";var i=n(47);function r(e,t,n){i.a.call(this,e,t,n),this.activeCubeFace=0,this.activeMipMapLevel=0}n.d(t,"a",function(){return r}),r.prototype=Object.create(i.a.prototype),r.prototype.constructor=r,r.prototype.isWebGLRenderTargetCube=!0},function(e,t,n){"use strict";(function(e){var i=n(1),r=n(9),a=n(133),o=n(34),s=n(76),c=n(335),l=n(336),u=n(132),h=n(31),d=n(21),f=n(61),p=n(98),m=n(28),g=n(23),v=n(42),y=n(326),x=n(321),_=n(327),b=n(330),w=n(328),E=n(334),T=n(331),S=n(333),M=n(322),A=n(2),L=n(324),C=n(0),P=n(19),R=n(323),F=n(69),I=n(20),N=n(6);function O(t){console.log("THREE.WebGLRenderer",i.a);var n=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),O=void 0!==t.context?t.context:null,U=void 0!==t.alpha&&t.alpha,D=void 0===t.depth||t.depth,z=void 0===t.stencil||t.stencil,k=void 0!==t.antialias&&t.antialias,B=void 0===t.premultipliedAlpha||t.premultipliedAlpha,G=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,H=[],V=[],j=-1,W=[],X=-1,Y=new Float32Array(8),q=[],Q=[];this.domElement=n,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=i._1,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Z,$=this,J=null,K=null,ee=null,te=-1,ne="",ie=null,re=new I.a,ae=null,oe=new I.a,se=0,ce=new N.a(0),le=0,ue=n.width,he=n.height,de=1,fe=new I.a(0,0,ue,he),pe=!1,me=new I.a(0,0,ue,he),ge=new F.a,ve=new R.a,ye=!1,xe=!1,_e=new P.a,be=new r.a,we=new C.a,Ee=new r.a,Te=new r.a,Se={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],shadows:[]},Me={calls:0,vertices:0,faces:0,points:0};this.info={render:Me,memory:{geometries:0,textures:0},programs:null};try{var Ae={alpha:U,depth:D,stencil:z,antialias:k,premultipliedAlpha:B,preserveDrawingBuffer:G};if(null===(Z=O||n.getContext("webgl",Ae)||n.getContext("experimental-webgl",Ae)))throw null!==n.getContext("webgl")?"Error creating WebGL context with your selected attributes.":"Error creating WebGL context.";void 0===Z.getShaderPrecisionFormat&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),n.addEventListener("webglcontextlost",Qe,!1)}catch(e){console.error("THREE.WebGLRenderer: "+e)}var Le=new L.a(Z);Le.get("WEBGL_depth_texture"),Le.get("OES_texture_float"),Le.get("OES_texture_float_linear"),Le.get("OES_texture_half_float"),Le.get("OES_texture_half_float_linear"),Le.get("OES_standard_derivatives"),Le.get("ANGLE_instanced_arrays"),Le.get("OES_element_index_uint")&&(A.a.MaxIndex=4294967296);var Ce=new M.a(Z,Le,t),Pe=new S.a(Z,Le,lt),Re=new T.a,Fe=new E.a(Z,Le,Pe,Re,Ce,lt,this.info),Ie=new w.a(Z,Re,this.info),Ne=new b.a(this,Ce),Oe=new _.a;this.info.programs=Ne.programs;var Ue,De,ze,ke,Be=new x.a(Z,Le,Me),Ge=new y.a(Z,Le,Me);function He(){return null===K?de:1}function Ve(){Pe.init(),Pe.scissor(re.copy(fe).multiplyScalar(de)),Pe.viewport(oe.copy(me).multiplyScalar(de)),Pe.buffers.color.setClear(ce.r,ce.g,ce.b,le,B)}function je(){J=null,ie=null,ne="",te=-1,Pe.reset()}Ve(),this.context=Z,this.capabilities=Ce,this.extensions=Le,this.properties=Re,this.state=Pe;var We=new u.a(this,Se,Ie,Ce);this.shadowMap=We;var Xe,Ye=new l.a(this,q),qe=new c.a(this,Q);function Qe(e){e.preventDefault(),je(),Ve(),Re.clear()}function Ze(e){var t=e.target;t.removeEventListener("dispose",Ze),function(e){$e(e),Re.delete(e)}(t)}function $e(e){var t=Re.get(e).program;e.program=void 0,void 0!==t&&Ne.releaseProgram(t)}function Je(e,t){return Math.abs(t[0])-Math.abs(e[0])}function Ke(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.material.program&&t.material.program&&e.material.program!==t.material.program?e.material.program.id-t.material.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function et(e,t){return e.object.renderOrder!==t.object.renderOrder?e.object.renderOrder-t.object.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function tt(e,t,n,i,r){var a,o;n.transparent?(a=W,o=++X):(a=V,o=++j);var s=a[o];void 0!==s?(s.id=e.id,s.object=e,s.geometry=t,s.material=n,s.z=we.z,s.group=r):(s={id:e.id,object:e,geometry:t,material:n,z:we.z,group:r},a.push(s))}function nt(e){if(!ge.intersectsSphere(e))return!1;var t=ve.numPlanes;if(0===t)return!0;var n=$.clippingPlanes,i=e.center,r=-e.radius,a=0;do{if(n[a].distanceToPoint(i)<r)return!1}while(++a!==t);return!0}function it(e,t,n,i){for(var r=0,a=e.length;r<a;r++){var o=e[r],s=o.object,c=o.geometry,l=void 0===i?o.material:i,u=o.group;if(s.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,s.matrixWorld),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),s.onBeforeRender($,t,n,c,l,u),s.isImmediateRenderObject){rt(l);var h=at(n,t.fog,l,s);ne="",s.render(function(e){$.renderBufferImmediate(e,h,l)})}else $.renderBufferDirect(n,t.fog,c,l,s,u);s.onAfterRender($,t,n,c,l,u)}}function rt(e){e.side===i.n?Pe.disable(Z.CULL_FACE):Pe.enable(Z.CULL_FACE),Pe.setFlipSided(e.side===i.m),!0===e.transparent?Pe.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha):Pe.setBlending(i.t),Pe.setDepthFunc(e.depthFunc),Pe.setDepthTest(e.depthTest),Pe.setDepthWrite(e.depthWrite),Pe.setColorWrite(e.colorWrite),Pe.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits)}function at(t,n,i,r){se=0;var c=Re.get(i);if(ye&&(xe||t!==ie)){var l=t===ie&&i.id===te;ve.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,t,c,l)}!1===i.needsUpdate&&(void 0===c.program?i.needsUpdate=!0:i.fog&&c.fog!==n?i.needsUpdate=!0:i.lights&&c.lightsHash!==Se.hash?i.needsUpdate=!0:void 0===c.numClippingPlanes||c.numClippingPlanes===ve.numPlanes&&c.numIntersection===ve.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(!function(e,t,n){var i=Re.get(e),r=Ne.getParameters(e,Se,t,ve.numPlanes,ve.numIntersection,n),c=Ne.getProgramCode(e,r),l=i.program,u=!0;if(void 0===l)e.addEventListener("dispose",Ze);else if(l.code!==c)$e(e);else{if(void 0!==r.shaderID)return;u=!1}if(u){if(r.shaderID){var h=s.a[r.shaderID];i.__webglShader={name:e.type,uniforms:o.a.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader}}else i.__webglShader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader};e.__webglShader=i.__webglShader,l=Ne.acquireProgram(e,r,c),i.program=l,e.program=l}var d=l.getAttributes();if(e.morphTargets){e.numSupportedMorphTargets=0;for(var f=0;f<$.maxMorphTargets;f++)d["morphTarget"+f]>=0&&e.numSupportedMorphTargets++}if(e.morphNormals)for(e.numSupportedMorphNormals=0,f=0;f<$.maxMorphNormals;f++)d["morphNormal"+f]>=0&&e.numSupportedMorphNormals++;var p=i.__webglShader.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(i.numClippingPlanes=ve.numPlanes,i.numIntersection=ve.numIntersection,p.clippingPlanes=ve.uniform),i.fog=t,i.lightsHash=Se.hash,e.lights&&(p.ambientLightColor.value=Se.ambient,p.directionalLights.value=Se.directional,p.spotLights.value=Se.spot,p.rectAreaLights.value=Se.rectArea,p.pointLights.value=Se.point,p.hemisphereLights.value=Se.hemi,p.directionalShadowMap.value=Se.directionalShadowMap,p.directionalShadowMatrix.value=Se.directionalShadowMatrix,p.spotShadowMap.value=Se.spotShadowMap,p.spotShadowMatrix.value=Se.spotShadowMatrix,p.pointShadowMap.value=Se.pointShadowMap,p.pointShadowMatrix.value=Se.pointShadowMatrix);var m=i.program.getUniforms(),g=a.a.seqWithValue(m.seq,p);i.uniformsList=g}(i,n,r),i.needsUpdate=!1);var u,h,d=!1,f=!1,p=!1,m=c.program,g=m.getUniforms(),v=c.__webglShader.uniforms;if(m.id!==J&&(Z.useProgram(m.program),J=m.id,d=!0,f=!0,p=!0),i.id!==te&&(te=i.id,f=!0),d||t!==ie){if(g.set(Z,t,"projectionMatrix"),Ce.logarithmicDepthBuffer&&g.setValue(Z,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),t!==ie&&(ie=t,f=!0,p=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap){var y=g.map.cameraPosition;void 0!==y&&y.setValue(Z,we.setFromMatrixPosition(t.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&g.setValue(Z,"viewMatrix",t.matrixWorldInverse),g.set(Z,$,"toneMappingExposure"),g.set(Z,$,"toneMappingWhitePoint")}if(i.skinning){g.setOptional(Z,r,"bindMatrix"),g.setOptional(Z,r,"bindMatrixInverse");var x=r.skeleton;x&&(Ce.floatVertexTextures&&x.useVertexTexture?(g.set(Z,x,"boneTexture"),g.set(Z,x,"boneTextureWidth"),g.set(Z,x,"boneTextureHeight")):g.setOptional(Z,x,"boneMatrices"))}return f&&(i.lights&&(h=p,(u=v).ambientLightColor.needsUpdate=h,u.directionalLights.needsUpdate=h,u.pointLights.needsUpdate=h,u.spotLights.needsUpdate=h,u.rectAreaLights.needsUpdate=h,u.hemisphereLights.needsUpdate=h),n&&i.fog&&function(e,t){e.fogColor.value=t.color,t.isFog?(e.fogNear.value=t.near,e.fogFar.value=t.far):t.isFogExp2&&(e.fogDensity.value=t.density)}(v,n),(i.isMeshBasicMaterial||i.isMeshLambertMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.isMeshNormalMaterial||i.isMeshDepthMaterial)&&function(e,t){e.opacity.value=t.opacity,e.diffuse.value=t.color,t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity);e.map.value=t.map,e.specularMap.value=t.specularMap,e.alphaMap.value=t.alphaMap,t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity);t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity);var n;t.map?n=t.map:t.specularMap?n=t.specularMap:t.displacementMap?n=t.displacementMap:t.normalMap?n=t.normalMap:t.bumpMap?n=t.bumpMap:t.roughnessMap?n=t.roughnessMap:t.metalnessMap?n=t.metalnessMap:t.alphaMap?n=t.alphaMap:t.emissiveMap&&(n=t.emissiveMap);if(void 0!==n){n.isWebGLRenderTarget&&(n=n.texture);var i=n.offset,r=n.repeat;e.offsetRepeat.value.set(i.x,i.y,r.x,r.y)}e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio}(v,i),i.isLineBasicMaterial?ot(v,i):i.isLineDashedMaterial?(ot(v,i),function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(v,i)):i.isPointsMaterial?function(e,t){if(e.diffuse.value=t.color,e.opacity.value=t.opacity,e.size.value=t.size*de,e.scale.value=.5*he,e.map.value=t.map,null!==t.map){var n=t.map.offset,i=t.map.repeat;e.offsetRepeat.value.set(n.x,n.y,i.x,i.y)}}(v,i):i.isMeshLambertMaterial?function(e,t){t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap)}(v,i):i.isMeshToonMaterial?function(e,t){st(e,t),t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(v,i):i.isMeshPhongMaterial?st(v,i):i.isMeshPhysicalMaterial?function(e,t){e.clearCoat.value=t.clearCoat,e.clearCoatRoughness.value=t.clearCoatRoughness,ct(e,t)}(v,i):i.isMeshStandardMaterial?ct(v,i):i.isMeshDepthMaterial?i.displacementMap&&(v.displacementMap.value=i.displacementMap,v.displacementScale.value=i.displacementScale,v.displacementBias.value=i.displacementBias):i.isMeshNormalMaterial&&function(e,t){t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale);t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale));t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}(v,i),void 0!==v.ltcMat&&(v.ltcMat.value=e.UniformsLib.LTC_MAT_TEXTURE),void 0!==v.ltcMag&&(v.ltcMag.value=e.UniformsLib.LTC_MAG_TEXTURE),a.a.upload(Z,c.uniformsList,v,$)),g.set(Z,r,"modelViewMatrix"),g.set(Z,r,"normalMatrix"),g.setValue(Z,"modelMatrix",r.matrixWorld),m}function ot(e,t){e.diffuse.value=t.color,e.opacity.value=t.opacity}function st(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}function ct(e,t){e.roughness.value=t.roughness,e.metalness.value=t.metalness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias),t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}function lt(e){var t;if(e===i._13)return Z.REPEAT;if(e===i._14)return Z.CLAMP_TO_EDGE;if(e===i._15)return Z.MIRRORED_REPEAT;if(e===i._16)return Z.NEAREST;if(e===i._17)return Z.NEAREST_MIPMAP_NEAREST;if(e===i._18)return Z.NEAREST_MIPMAP_LINEAR;if(e===i._19)return Z.LINEAR;if(e===i._20)return Z.LINEAR_MIPMAP_NEAREST;if(e===i._21)return Z.LINEAR_MIPMAP_LINEAR;if(e===i._22)return Z.UNSIGNED_BYTE;if(e===i._30)return Z.UNSIGNED_SHORT_4_4_4_4;if(e===i._31)return Z.UNSIGNED_SHORT_5_5_5_1;if(e===i._32)return Z.UNSIGNED_SHORT_5_6_5;if(e===i._23)return Z.BYTE;if(e===i._24)return Z.SHORT;if(e===i._25)return Z.UNSIGNED_SHORT;if(e===i._26)return Z.INT;if(e===i._27)return Z.UNSIGNED_INT;if(e===i._28)return Z.FLOAT;if(e===i._29&&null!==(t=Le.get("OES_texture_half_float")))return t.HALF_FLOAT_OES;if(e===i._34)return Z.ALPHA;if(e===i._35)return Z.RGB;if(e===i._36)return Z.RGBA;if(e===i._37)return Z.LUMINANCE;if(e===i._38)return Z.LUMINANCE_ALPHA;if(e===i._40)return Z.DEPTH_COMPONENT;if(e===i._41)return Z.DEPTH_STENCIL;if(e===i.z)return Z.FUNC_ADD;if(e===i.A)return Z.FUNC_SUBTRACT;if(e===i.B)return Z.FUNC_REVERSE_SUBTRACT;if(e===i.E)return Z.ZERO;if(e===i.F)return Z.ONE;if(e===i.G)return Z.SRC_COLOR;if(e===i.H)return Z.ONE_MINUS_SRC_COLOR;if(e===i.I)return Z.SRC_ALPHA;if(e===i.J)return Z.ONE_MINUS_SRC_ALPHA;if(e===i.K)return Z.DST_ALPHA;if(e===i.L)return Z.ONE_MINUS_DST_ALPHA;if(e===i.M)return Z.DST_COLOR;if(e===i.N)return Z.ONE_MINUS_DST_COLOR;if(e===i.O)return Z.SRC_ALPHA_SATURATE;if((e===i._42||e===i._43||e===i._44||e===i._45)&&null!==(t=Le.get("WEBGL_compressed_texture_s3tc"))){if(e===i._42)return t.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===i._43)return t.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===i._44)return t.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===i._45)return t.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((e===i._46||e===i._47||e===i._48||e===i._49)&&null!==(t=Le.get("WEBGL_compressed_texture_pvrtc"))){if(e===i._46)return t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===i._47)return t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===i._48)return t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===i._49)return t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(e===i._50&&null!==(t=Le.get("WEBGL_compressed_texture_etc1")))return t.COMPRESSED_RGB_ETC1_WEBGL;if((e===i.C||e===i.D)&&null!==(t=Le.get("EXT_blend_minmax"))){if(e===i.C)return t.MIN_EXT;if(e===i.D)return t.MAX_EXT}return e===i._33&&null!==(t=Le.get("WEBGL_depth_texture"))?t.UNSIGNED_INT_24_8_WEBGL:0}this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){Le.get("WEBGL_lose_context").loseContext()},this.getMaxAnisotropy=function(){return Ce.getMaxAnisotropy()},this.getPrecision=function(){return Ce.precision},this.getPixelRatio=function(){return de},this.setPixelRatio=function(e){void 0!==e&&(de=e,this.setSize(me.z,me.w,!1))},this.getSize=function(){return{width:ue,height:he}},this.setSize=function(e,t,i){ue=e,he=t,n.width=e*de,n.height=t*de,!1!==i&&(n.style.width=e+"px",n.style.height=t+"px"),this.setViewport(0,0,e,t)},this.setViewport=function(e,t,n,i){Pe.viewport(me.set(e,t,n,i))},this.setScissor=function(e,t,n,i){Pe.scissor(fe.set(e,t,n,i))},this.setScissorTest=function(e){Pe.setScissorTest(pe=e)},this.getClearColor=function(){return ce},this.setClearColor=function(e,t){ce.set(e),le=void 0!==t?t:1,Pe.buffers.color.setClear(ce.r,ce.g,ce.b,le,B)},this.getClearAlpha=function(){return le},this.setClearAlpha=function(e){le=e,Pe.buffers.color.setClear(ce.r,ce.g,ce.b,le,B)},this.clear=function(e,t,n){var i=0;(void 0===e||e)&&(i|=Z.COLOR_BUFFER_BIT),(void 0===t||t)&&(i|=Z.DEPTH_BUFFER_BIT),(void 0===n||n)&&(i|=Z.STENCIL_BUFFER_BIT),Z.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,n,i){this.setRenderTarget(e),this.clear(t,n,i)},this.resetGLState=je,this.dispose=function(){W=[],X=-1,V=[],j=-1,n.removeEventListener("webglcontextlost",Qe,!1)},this.renderBufferImmediate=function(e,t,n){Pe.initAttributes();var r=Re.get(e);e.hasPositions&&!r.position&&(r.position=Z.createBuffer()),e.hasNormals&&!r.normal&&(r.normal=Z.createBuffer()),e.hasUvs&&!r.uv&&(r.uv=Z.createBuffer()),e.hasColors&&!r.color&&(r.color=Z.createBuffer());var a=t.getAttributes();if(e.hasPositions&&(Z.bindBuffer(Z.ARRAY_BUFFER,r.position),Z.bufferData(Z.ARRAY_BUFFER,e.positionArray,Z.DYNAMIC_DRAW),Pe.enableAttribute(a.position),Z.vertexAttribPointer(a.position,3,Z.FLOAT,!1,0,0)),e.hasNormals){if(Z.bindBuffer(Z.ARRAY_BUFFER,r.normal),!n.isMeshPhongMaterial&&!n.isMeshStandardMaterial&&!n.isMeshNormalMaterial&&n.shading===i.o)for(var o=0,s=3*e.count;o<s;o+=9){var c=e.normalArray,l=(c[o+0]+c[o+3]+c[o+6])/3,u=(c[o+1]+c[o+4]+c[o+7])/3,h=(c[o+2]+c[o+5]+c[o+8])/3;c[o+0]=l,c[o+1]=u,c[o+2]=h,c[o+3]=l,c[o+4]=u,c[o+5]=h,c[o+6]=l,c[o+7]=u,c[o+8]=h}Z.bufferData(Z.ARRAY_BUFFER,e.normalArray,Z.DYNAMIC_DRAW),Pe.enableAttribute(a.normal),Z.vertexAttribPointer(a.normal,3,Z.FLOAT,!1,0,0)}e.hasUvs&&n.map&&(Z.bindBuffer(Z.ARRAY_BUFFER,r.uv),Z.bufferData(Z.ARRAY_BUFFER,e.uvArray,Z.DYNAMIC_DRAW),Pe.enableAttribute(a.uv),Z.vertexAttribPointer(a.uv,2,Z.FLOAT,!1,0,0)),e.hasColors&&n.vertexColors!==i.q&&(Z.bindBuffer(Z.ARRAY_BUFFER,r.color),Z.bufferData(Z.ARRAY_BUFFER,e.colorArray,Z.DYNAMIC_DRAW),Pe.enableAttribute(a.color),Z.vertexAttribPointer(a.color,3,Z.FLOAT,!1,0,0)),Pe.disableUnusedAttributes(),Z.drawArrays(Z.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,n,r,a,o){rt(r);var s=at(e,t,r,a),c=!1,l=n.id+"_"+s.id+"_"+r.wireframe;l!==ne&&(ne=l,c=!0);var u=a.morphTargetInfluences;if(void 0!==u){for(var h=[],d=0,f=u.length;d<f;d++){var p=u[d];h.push([p,d])}h.sort(Je),h.length>8&&(h.length=8);var m=n.morphAttributes;for(d=0,f=h.length;d<f;d++){p=h[d];if(Y[d]=p[0],0!==p[0]){var g=p[1];!0===r.morphTargets&&m.position&&n.addAttribute("morphTarget"+d,m.position[g]),!0===r.morphNormals&&m.normal&&n.addAttribute("morphNormal"+d,m.normal[g])}else!0===r.morphTargets&&n.removeAttribute("morphTarget"+d),!0===r.morphNormals&&n.removeAttribute("morphNormal"+d)}d=h.length;for(var v=Y.length;d<v;d++)Y[d]=0;s.getUniforms().setValue(Z,"morphTargetInfluences",Y),c=!0}g=n.index;var y,x=n.attributes.position,_=1;!0===r.wireframe&&(g=Ie.getWireframeAttribute(n),_=2),null!==g?(y=Ge).setIndex(g):y=Be,c&&(!function(e,t,n,i){var r;if(n&&n.isInstancedBufferGeometry&&null===(r=Le.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===i&&(i=0);Pe.initAttributes();var a=n.attributes,o=t.getAttributes(),s=e.defaultAttributeValues;for(var c in o){var l=o[c];if(l>=0){var u=a[c];if(void 0!==u){var h=u.normalized,d=u.itemSize,f=Ie.getAttributeProperties(u),p=f.__webglBuffer,m=f.type,g=f.bytesPerElement;if(u.isInterleavedBufferAttribute){var v=u.data,y=v.stride,x=u.offset;v&&v.isInstancedInterleavedBuffer?(Pe.enableAttributeAndDivisor(l,v.meshPerAttribute,r),void 0===n.maxInstancedCount&&(n.maxInstancedCount=v.meshPerAttribute*v.count)):Pe.enableAttribute(l),Z.bindBuffer(Z.ARRAY_BUFFER,p),Z.vertexAttribPointer(l,d,m,h,y*g,(i*y+x)*g)}else u.isInstancedBufferAttribute?(Pe.enableAttributeAndDivisor(l,u.meshPerAttribute,r),void 0===n.maxInstancedCount&&(n.maxInstancedCount=u.meshPerAttribute*u.count)):Pe.enableAttribute(l),Z.bindBuffer(Z.ARRAY_BUFFER,p),Z.vertexAttribPointer(l,d,m,h,0,i*d*g)}else if(void 0!==s){var _=s[c];if(void 0!==_)switch(_.length){case 2:Z.vertexAttrib2fv(l,_);break;case 3:Z.vertexAttrib3fv(l,_);break;case 4:Z.vertexAttrib4fv(l,_);break;default:Z.vertexAttrib1fv(l,_)}}}}Pe.disableUnusedAttributes()}(r,s,n),null!==g&&Z.bindBuffer(Z.ELEMENT_ARRAY_BUFFER,Ie.getAttributeBuffer(g)));var b=0;null!==g?b=g.count:void 0!==x&&(b=x.count);var w=n.drawRange.start*_,E=n.drawRange.count*_,T=null!==o?o.start*_:0,S=null!==o?o.count*_:1/0,M=Math.max(w,T),A=Math.min(b,w+E,T+S)-1,L=Math.max(0,A-M+1);if(0!==L){if(a.isMesh)if(!0===r.wireframe)Pe.setLineWidth(r.wireframeLinewidth*He()),y.setMode(Z.LINES);else switch(a.drawMode){case i._60:y.setMode(Z.TRIANGLES);break;case i._61:y.setMode(Z.TRIANGLE_STRIP);break;case i._62:y.setMode(Z.TRIANGLE_FAN)}else if(a.isLine){var C=r.linewidth;void 0===C&&(C=1),Pe.setLineWidth(C*He()),a.isLineSegments?y.setMode(Z.LINES):y.setMode(Z.LINE_STRIP)}else a.isPoints&&y.setMode(Z.POINTS);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&y.renderInstances(n,M,L):y.render(M,L)}},this.render=function(e,t,n,a){if(void 0===t||!0===t.isCamera){ne="",te=-1,ie=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorldInverse.getInverse(t.matrixWorld),be.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ge.setFromMatrix(be),H.length=0,j=-1,X=-1,q.length=0,Q.length=0,xe=this.localClippingEnabled,ye=ve.init(this.clippingPlanes,xe,t),function e(t,n){if(!1===t.visible)return;var i=0!=(t.layers.mask&n.layers.mask);if(i)if(t.isLight)H.push(t);else if(t.isSprite)!1!==t.frustumCulled&&!0!==(d=t,_e.center.set(0,0,0),_e.radius=.7071067811865476,_e.applyMatrix4(d.matrixWorld),nt(_e))||q.push(t);else if(t.isLensFlare)Q.push(t);else if(t.isImmediateRenderObject)!0===$.sortObjects&&(we.setFromMatrixPosition(t.matrixWorld),we.applyMatrix4(be)),tt(t,null,t.material,we.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!1===t.frustumCulled||!0===function(e){var t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere();return _e.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),nt(_e)}(t))){var r=t.material;if(!0===r.visible){!0===$.sortObjects&&(we.setFromMatrixPosition(t.matrixWorld),we.applyMatrix4(be));var a=Ie.update(t);if(r.isMultiMaterial)for(var o=a.groups,s=r.materials,c=0,l=o.length;c<l;c++){var u=o[c],h=s[u.materialIndex];!0===h.visible&&tt(t,a,h,we.z,u)}else tt(t,a,r,we.z,null)}}var d;var f=t.children;for(var c=0,l=f.length;c<l;c++)e(f[c],n)}(e,t),V.length=j+1,W.length=X+1,!0===$.sortObjects&&(V.sort(Ke),W.sort(et)),ye&&ve.beginShadows(),function(e){for(var t=0,n=0,i=e.length;n<i;n++){var r=e[n];r.castShadow&&(Se.shadows[t++]=r)}Se.shadows.length=t}(H),We.render(e,t),function(e,t){var n,i,a,o,s,c,l,u=0,h=0,d=0,f=t.matrixWorldInverse,p=0,m=0,g=0,v=0,y=0;for(n=0,i=e.length;n<i;n++)if(a=e[n],o=a.color,s=a.intensity,c=a.distance,l=a.shadow&&a.shadow.map?a.shadow.map.texture:null,a.isAmbientLight)u+=o.r*s,h+=o.g*s,d+=o.b*s;else if(a.isDirectionalLight){var x=Oe.get(a);x.color.copy(a.color).multiplyScalar(a.intensity),x.direction.setFromMatrixPosition(a.matrixWorld),we.setFromMatrixPosition(a.target.matrixWorld),x.direction.sub(we),x.direction.transformDirection(f),x.shadow=a.castShadow,a.castShadow&&(x.shadowBias=a.shadow.bias,x.shadowRadius=a.shadow.radius,x.shadowMapSize=a.shadow.mapSize),Se.directionalShadowMap[p]=l,Se.directionalShadowMatrix[p]=a.shadow.matrix,Se.directional[p++]=x}else if(a.isSpotLight){var x=Oe.get(a);x.position.setFromMatrixPosition(a.matrixWorld),x.position.applyMatrix4(f),x.color.copy(o).multiplyScalar(s),x.distance=c,x.direction.setFromMatrixPosition(a.matrixWorld),we.setFromMatrixPosition(a.target.matrixWorld),x.direction.sub(we),x.direction.transformDirection(f),x.coneCos=Math.cos(a.angle),x.penumbraCos=Math.cos(a.angle*(1-a.penumbra)),x.decay=0===a.distance?0:a.decay,x.shadow=a.castShadow,a.castShadow&&(x.shadowBias=a.shadow.bias,x.shadowRadius=a.shadow.radius,x.shadowMapSize=a.shadow.mapSize),Se.spotShadowMap[g]=l,Se.spotShadowMatrix[g]=a.shadow.matrix,Se.spot[g++]=x}else if(a.isRectAreaLight){var x=Oe.get(a);x.color.copy(o).multiplyScalar(s/(a.width*a.height)),x.position.setFromMatrixPosition(a.matrixWorld),x.position.applyMatrix4(f),Te.identity(),Ee.copy(a.matrixWorld),Ee.premultiply(f),Te.extractRotation(Ee),x.halfWidth.set(.5*a.width,0,0),x.halfHeight.set(0,.5*a.height,0),x.halfWidth.applyMatrix4(Te),x.halfHeight.applyMatrix4(Te),Se.rectArea[v++]=x}else if(a.isPointLight){var x=Oe.get(a);x.position.setFromMatrixPosition(a.matrixWorld),x.position.applyMatrix4(f),x.color.copy(a.color).multiplyScalar(a.intensity),x.distance=a.distance,x.decay=0===a.distance?0:a.decay,x.shadow=a.castShadow,a.castShadow&&(x.shadowBias=a.shadow.bias,x.shadowRadius=a.shadow.radius,x.shadowMapSize=a.shadow.mapSize),Se.pointShadowMap[m]=l,void 0===Se.pointShadowMatrix[m]&&(Se.pointShadowMatrix[m]=new r.a),we.setFromMatrixPosition(a.matrixWorld).negate(),Se.pointShadowMatrix[m].identity().setPosition(we),Se.point[m++]=x}else if(a.isHemisphereLight){var x=Oe.get(a);x.direction.setFromMatrixPosition(a.matrixWorld),x.direction.transformDirection(f),x.direction.normalize(),x.skyColor.copy(a.color).multiplyScalar(s),x.groundColor.copy(a.groundColor).multiplyScalar(s),Se.hemi[y++]=x}Se.ambient[0]=u,Se.ambient[1]=h,Se.ambient[2]=d,Se.directional.length=p,Se.spot.length=g,Se.rectArea.length=v,Se.point.length=m,Se.hemi.length=y,Se.hash=p+","+m+","+g+","+v+","+y+","+Se.shadows.length}(H,t),ye&&ve.endShadows(),Me.calls=0,Me.vertices=0,Me.faces=0,Me.points=0,void 0===n&&(n=null),this.setRenderTarget(n);var o=e.background;if(null===o?Pe.buffers.color.setClear(ce.r,ce.g,ce.b,le,B):o&&o.isColor&&(Pe.buffers.color.setClear(o.r,o.g,o.b,1,B),a=!0),(this.autoClear||a)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),o&&o.isCubeTexture?(void 0===ze&&(ze=new g.a,ke=new d.a(new f.b(5,5,5),new h.a({uniforms:s.a.cube.uniforms,vertexShader:s.a.cube.vertexShader,fragmentShader:s.a.cube.fragmentShader,side:i.m,depthTest:!1,depthWrite:!1,fog:!1}))),ze.projectionMatrix.copy(t.projectionMatrix),ze.matrixWorld.extractRotation(t.matrixWorld),ze.matrixWorldInverse.getInverse(ze.matrixWorld),ke.material.uniforms.tCube.value=o,ke.modelViewMatrix.multiplyMatrices(ze.matrixWorldInverse,ke.matrixWorld),Ie.update(ke),$.renderBufferDirect(ze,null,ke.geometry,ke.material,ke,null)):o&&o.isTexture&&(void 0===Ue&&(Ue=new v.a(-1,1,1,-1,0,1),De=new d.a(new p.b(2,2),new m.a({depthTest:!1,depthWrite:!1,fog:!1}))),De.material.map=o,Ie.update(De),$.renderBufferDirect(Ue,null,De.geometry,De.material,De,null)),e.overrideMaterial){var c=e.overrideMaterial;it(V,e,t,c),it(W,e,t,c)}else Pe.setBlending(i.t),it(V,e,t),it(W,e,t);Ye.render(e,t),qe.render(e,t,oe),n&&Fe.updateRenderTargetMipmap(n),Pe.setDepthTest(!0),Pe.setDepthWrite(!0),Pe.setColorWrite(!0)}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFaceCulling=function(e,t){Pe.setCullFace(e),Pe.setFlipSided(t===i.g)},this.allocTextureUnit=function(){var e=se;return e>=Ce.maxTextures&&console.warn("WebGLRenderer: trying to use "+e+" texture units while this GPU supports only "+Ce.maxTextures),se+=1,e},this.setTexture2D=(Xe=!1,function(e,t){e&&e.isWebGLRenderTarget&&(Xe||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),Xe=!0),e=e.texture),Fe.setTexture2D(e,t)}),this.setTexture=function(){var e=!1;return function(t,n){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),Fe.setTexture2D(t,n)}}(),this.setTextureCube=function(){var e=!1;return function(t,n){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?Fe.setTextureCube(t,n):Fe.setTextureCubeDynamic(t,n)}}(),this.getCurrentRenderTarget=function(){return K},this.setRenderTarget=function(e){K=e,e&&void 0===Re.get(e).__webglFramebuffer&&Fe.setupRenderTarget(e);var t,n=e&&e.isWebGLRenderTargetCube;if(e){var i=Re.get(e);t=n?i.__webglFramebuffer[e.activeCubeFace]:i.__webglFramebuffer,re.copy(e.scissor),ae=e.scissorTest,oe.copy(e.viewport)}else t=null,re.copy(fe).multiplyScalar(de),ae=pe,oe.copy(me).multiplyScalar(de);if(ee!==t&&(Z.bindFramebuffer(Z.FRAMEBUFFER,t),ee=t),Pe.scissor(re),Pe.setScissorTest(ae),Pe.viewport(oe),n){var r=Re.get(e.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,r.__webglTexture,e.activeMipMapLevel)}},this.readRenderTargetPixels=function(e,t,n,r,a,o){if(!1!==(e&&e.isWebGLRenderTarget)){var s=Re.get(e).__webglFramebuffer;if(s){var c=!1;s!==ee&&(Z.bindFramebuffer(Z.FRAMEBUFFER,s),c=!0);try{var l=e.texture,u=l.format,h=l.type;if(u!==i._36&&lt(u)!==Z.getParameter(Z.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===i._22||lt(h)===Z.getParameter(Z.IMPLEMENTATION_COLOR_READ_TYPE)||h===i._28&&(Le.get("OES_texture_float")||Le.get("WEBGL_color_buffer_float"))||h===i._29&&Le.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Z.checkFramebufferStatus(Z.FRAMEBUFFER)===Z.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-r&&n>=0&&n<=e.height-a&&Z.readPixels(t,n,r,a,lt(u),lt(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{c&&Z.bindFramebuffer(Z.FRAMEBUFFER,ee)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")}}n.d(t,"a",function(){return O})}).call(t,n(16))},function(e,t,n){"use strict";var i=n(1),r=n(47),a=n(31),o=n(34),s=n(76),c=n(118),l=n(20),u=n(0),h=n(4),d=n(9),f=n(69);function p(e,t,n,p){var m=e.context,g=e.state,v=new f.a,y=new d.a,x=t.shadows,_=new h.a,b=new h.a(p.maxTextureSize,p.maxTextureSize),w=new u.a,E=new u.a,T=[],S=1,M=2,A=1+(S|M),L=new Array(A),C=new Array(A),P={},R=[new u.a(1,0,0),new u.a(-1,0,0),new u.a(0,0,1),new u.a(0,0,-1),new u.a(0,1,0),new u.a(0,-1,0)],F=[new u.a(0,1,0),new u.a(0,1,0),new u.a(0,1,0),new u.a(0,1,0),new u.a(0,0,1),new u.a(0,0,-1)],I=[new l.a,new l.a,new l.a,new l.a,new l.a,new l.a],N=new c.a;N.depthPacking=i._72,N.clipping=!0;for(var O=s.a.distanceRGBA,U=o.a.clone(O.uniforms),D=0;D!==A;++D){var z=0!=(D&S),k=0!=(D&M),B=N.clone();B.morphTargets=z,B.skinning=k,L[D]=B;var G=new a.a({defines:{USE_SHADOWMAP:""},uniforms:U,vertexShader:O.vertexShader,fragmentShader:O.fragmentShader,morphTargets:z,skinning:k,clipping:!0});C[D]=G}var H=this;function V(t,n,r,a){var o=t.geometry,s=null,c=L,l=t.customDepthMaterial;if(r&&(c=C,l=t.customDistanceMaterial),l)s=l;else{var u=!1;n.morphTargets&&(o&&o.isBufferGeometry?u=o.morphAttributes&&o.morphAttributes.position&&o.morphAttributes.position.length>0:o&&o.isGeometry&&(u=o.morphTargets&&o.morphTargets.length>0));var h=t.isSkinnedMesh&&n.skinning,d=0;u&&(d|=S),h&&(d|=M),s=c[d]}if(e.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var f=s.uuid,p=n.uuid,m=P[f];void 0===m&&(m={},P[f]=m);var g=m[p];void 0===g&&(g=s.clone(),m[p]=g),s=g}s.visible=n.visible,s.wireframe=n.wireframe;var v=n.side;return H.renderSingleSided&&v==i.n&&(v=i.l),H.renderReverseSided&&(v===i.l?v=i.m:v===i.m&&(v=i.l)),s.side=v,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,r&&void 0!==s.uniforms.lightPos&&s.uniforms.lightPos.value.copy(a),s}function j(e,t,n){if(!1!==e.visible){if(0!=(e.layers.mask&t.layers.mask)&&(e.isMesh||e.isLine||e.isPoints))if(e.castShadow&&(!1===e.frustumCulled||!0===v.intersectsObject(e)))!0===e.material.visible&&(e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),T.push(e));for(var i=e.children,r=0,a=i.length;r<a;r++)j(i[r],t,n)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=i.j,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,a){if(!1!==H.enabled&&(!1!==H.autoUpdate||!1!==H.needsUpdate)&&0!==x.length){var o,s;g.buffers.color.setClear(1,1,1,1),g.disable(m.BLEND),g.setDepthTest(!0),g.setScissorTest(!1);for(var c=0,l=x.length;c<l;c++){var u=x[c],h=u.shadow;if(void 0!==h){var d=h.camera;if(_.copy(h.mapSize),_.min(b),u&&u.isPointLight){o=6,s=!0;var f=_.x,p=_.y;I[0].set(2*f,p,f,p),I[1].set(0,p,f,p),I[2].set(3*f,p,f,p),I[3].set(f,p,f,p),I[4].set(3*f,0,f,p),I[5].set(f,0,f,p),_.x*=4,_.y*=2}else o=1,s=!1;if(null===h.map){var S={minFilter:i._16,magFilter:i._16,format:i._36};h.map=new r.a(_.x,_.y,S),d.updateProjectionMatrix()}h.isSpotLightShadow&&h.update(u),h&&h.isRectAreaLightShadow&&h.update(u);var M=h.map,A=h.matrix;E.setFromMatrixPosition(u.matrixWorld),d.position.copy(E),e.setRenderTarget(M),e.clear();for(var L=0;L<o;L++){if(s){w.copy(d.position),w.add(R[L]),d.up.copy(F[L]),d.lookAt(w);var C=I[L];g.viewport(C)}else w.setFromMatrixPosition(u.target.matrixWorld),d.lookAt(w);d.updateMatrixWorld(),d.matrixWorldInverse.getInverse(d.matrixWorld),A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(d.projectionMatrix),A.multiply(d.matrixWorldInverse),y.multiplyMatrices(d.projectionMatrix,d.matrixWorldInverse),v.setFromMatrix(y),T.length=0,j(t,a,d);for(var P=0,N=T.length;P<N;P++){var O=T[P],U=n.update(O),D=O.material;if(D&&D.isMultiMaterial)for(var z=U.groups,k=D.materials,B=0,G=z.length;B<G;B++){var W=z[B],X=k[W.materialIndex];if(!0===X.visible){var Y=V(O,X,s,E);e.renderBufferDirect(d,null,U,Y,O,W)}}else{Y=V(O,D,s,E);e.renderBufferDirect(d,null,U,Y,O,null)}}}}else console.warn("THREE.WebGLShadowMap:",u,"has no shadow.")}var q=e.getClearColor(),Q=e.getClearAlpha();e.setClearColor(q,Q),H.needsUpdate=!1}}}n.d(t,"a",function(){return p})},function(e,t,n){"use strict";var i=n(78),r=n(15);n.d(t,"a",function(){return G});var a=new r.a,o=new i.a;function s(){this.seq=[],this.map={}}var c=[],l=[];function u(e,t,n){var i=e[0];if(i<=0||i>0)return e;var r=t*n,a=c[r];if(void 0===a&&(a=new Float32Array(r),c[r]=a),0!==t){i.toArray(a,0);for(var o=1,s=0;o!==t;++o)s+=n,e[o].toArray(a,s)}return a}function h(e,t){var n=l[t];void 0===n&&(n=new Int32Array(t),l[t]=n);for(var i=0;i!==t;++i)n[i]=e.allocTextureUnit();return n}function d(e,t){e.uniform1f(this.addr,t)}function f(e,t){e.uniform1i(this.addr,t)}function p(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function m(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function g(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function v(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function y(e,t){e.uniformMatrix3fv(this.addr,!1,t.elements||t)}function x(e,t){e.uniformMatrix4fv(this.addr,!1,t.elements||t)}function _(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTexture2D(t||a,i)}function b(e,t,n){var i=n.allocTextureUnit();e.uniform1i(this.addr,i),n.setTextureCube(t||o,i)}function w(e,t){e.uniform2iv(this.addr,t)}function E(e,t){e.uniform3iv(this.addr,t)}function T(e,t){e.uniform4iv(this.addr,t)}function S(e,t){e.uniform1fv(this.addr,t)}function M(e,t){e.uniform1iv(this.addr,t)}function A(e,t){e.uniform2fv(this.addr,u(t,this.size,2))}function L(e,t){e.uniform3fv(this.addr,u(t,this.size,3))}function C(e,t){e.uniform4fv(this.addr,u(t,this.size,4))}function P(e,t){e.uniformMatrix2fv(this.addr,!1,u(t,this.size,4))}function R(e,t){e.uniformMatrix3fv(this.addr,!1,u(t,this.size,9))}function F(e,t){e.uniformMatrix4fv(this.addr,!1,u(t,this.size,16))}function I(e,t,n){var i=t.length,r=h(n,i);e.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.setTexture2D(t[o]||a,r[o])}function N(e,t,n){var i=t.length,r=h(n,i);e.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.setTextureCube(t[a]||o,r[a])}function O(e,t,n){this.id=e,this.addr=n,this.setValue=function(e){switch(e){case 5126:return d;case 35664:return p;case 35665:return m;case 35666:return g;case 35674:return v;case 35675:return y;case 35676:return x;case 35678:return _;case 35680:return b;case 5124:case 35670:return f;case 35667:case 35671:return w;case 35668:case 35672:return E;case 35669:case 35673:return T}}(t.type)}function U(e,t,n){this.id=e,this.addr=n,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return S;case 35664:return A;case 35665:return L;case 35666:return C;case 35674:return P;case 35675:return R;case 35676:return F;case 35678:return I;case 35680:return N;case 5124:case 35670:return M;case 35667:case 35671:return w;case 35668:case 35672:return E;case 35669:case 35673:return T}}(t.type)}function D(e){this.id=e,s.call(this)}D.prototype.setValue=function(e,t){for(var n=this.seq,i=0,r=n.length;i!==r;++i){var a=n[i];a.setValue(e,t[a.id])}};var z=/([\w\d_]+)(\])?(\[|\.)?/g;function k(e,t){e.seq.push(t),e.map[t.id]=t}function B(e,t,n){var i=e.name,r=i.length;for(z.lastIndex=0;;){var a=z.exec(i),o=z.lastIndex,s=a[1],c="]"===a[2],l=a[3];if(c&&(s|=0),void 0===l||"["===l&&o+2===r){k(n,void 0===l?new O(s,e,t):new U(s,e,t));break}var u=n.map[s];void 0===u&&k(n,u=new D(s)),n=u}}function G(e,t,n){s.call(this),this.renderer=n;for(var i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=0;r<i;++r){var a=e.getActiveUniform(t,r),o=a.name;B(a,e.getUniformLocation(t,o),this)}}G.prototype.setValue=function(e,t,n){var i=this.map[t];void 0!==i&&i.setValue(e,n,this.renderer)},G.prototype.set=function(e,t,n){var i=this.map[n];void 0!==i&&i.setValue(e,t[n],this.renderer)},G.prototype.setOptional=function(e,t,n){var i=t[n];void 0!==i&&this.setValue(e,n,i)},G.upload=function(e,t,n,i){for(var r=0,a=t.length;r!==a;++r){var o=t[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(e,s.value,i)}},G.seqWithValue=function(e,t){for(var n=[],i=0,r=e.length;i!==r;++i){var a=e[i];a.id in t&&n.push(a)}return n}},function(e,t,n){"use strict";var i=n(6);function r(e,t,n){this.name="",this.color=new i.a(e),this.near=void 0!==t?t:1,this.far=void 0!==n?n:1e3}n.d(t,"a",function(){return r}),r.prototype.isFog=!0,r.prototype.clone=function(){return new r(this.color.getHex(),this.near,this.far)},r.prototype.toJSON=function(e){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}},function(e,t,n){"use strict";var i=n(6);function r(e,t){this.name="",this.color=new i.a(e),this.density=void 0!==t?t:25e-5}n.d(t,"a",function(){return r}),r.prototype.isFogExp2=!0,r.prototype.clone=function(){return new r(this.color.getHex(),this.density)},r.prototype.toJSON=function(e){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}},function(e,t,n){"use strict";var i=n(5);function r(){i.a.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}n.d(t,"a",function(){return r}),r.prototype=Object.create(i.a.prototype),r.prototype.constructor=r,r.prototype.copy=function(e,t){return i.a.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},r.prototype.toJSON=function(e){var t=i.a.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}},function(e,t,n){"use strict";var i=n(15);function r(e,t,n,r,a,o,s,c,l,u,h,d){i.a.call(this,null,o,s,c,l,u,r,a,h,d),this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}n.d(t,"a",function(){return r}),r.prototype=Object.create(i.a.prototype),r.prototype.constructor=r,r.prototype.isCompressedTexture=!0},function(e,t,n){"use strict";function i(e){for(var t=e.length,n=-1/0;t--;)e[t]>n&&(n=e[t]);return n}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t,this.target=t,this.speed=3}return i(e,[{key:"update",value:function(e){var t=this.target-this.value;this.value+=t*(this.speed*Math.min(e,.1))}}]),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t,this.x=t.x,this.y=t.y,this.speed=3}return i(e,[{key:"update",value:function(e){e=Math.min(e,.1);var t=this.x-this.value.x,n=this.y-this.value.y;this.value.x+=t*(this.speed*e),this.value.y+=n*(this.speed*e)}}]),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=n(16);var a=function(e){function t(e,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));a.pinId=n;var o=new r.PlaneBufferGeometry(.35,.35,1,1),s=e.load(i+"/pin-single.png");s.magFilter=r.LinearFilter,s.minFilter=r.LinearFilter,a._numplanes=3,a._animatedPlanes=[];for(var c=0;c<a._numplanes;c++){var l=a._createPlane(o,s);l.scale.set(.1,.1,.1),l.position.z=.005*-(c+1),a.add(l),a._animatedPlanes.push(l),a._initPlanesLoop()}var u=a._createPlane(o,s);return u.scale.set(1,1,1),u.material.opacity=1,a.add(u),a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Object3D),i(t,[{key:"toggleVisibility",value:function(e){var t=this;this.children.forEach(function(n){TweenMax.killTweensOf(n.material),TweenMax.killTweensOf(n.scale),e?t._initPlanesLoop():TweenMax.to(n.material,.5,{opacity:0})})}},{key:"zoom",value:function(){this._initPlanesLoop(3,1,0,Power4.easeInOut)}},{key:"unzoom",value:function(){this._initPlanesLoop()}},{key:"_initPlanesLoop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Power4.easeOut,r=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;this._animatedPlanes.forEach(function(s,c){TweenMax.killTweensOf(s.material),TweenMax.killTweensOf(s.scale),s.scale.set(a,a,a),TweenMax.fromTo(s.scale,e,{x:a,y:a,z:a},{x:o,y:o,z:o,repeat:-1,delay:c*(e/r._numplanes)}),TweenMax.fromTo(s.material,e,{opacity:t},{opacity:n,repeat:-1,delay:c*(e/r._numplanes),ease:i})})}},{key:"_createPlane",value:function(e,t){var n=new r.MeshBasicMaterial({map:t,transparent:!0,side:r.BackSide,lights:!1,fog:!1,depthWrite:!1}),i=new r.Mesh(e,n);return i.controller=this,i.isPin=!0,i}}]),t}();t.default=a,e.exports=t.default},function(e,t){e.exports="#define GLSLIFY 1\nuniform sampler2D map;\nuniform float opacity;\nvarying vec2 vUv;\n\nvoid main() {\n\tvec4 map = texture2D( map, vUv );\n\t// if(map.a < 0.5) {\n\t// \tdiscard;\n\t// }\n\t// gl_FragColor = vec4(1.0,1.0,1.0,1.0);\n\t// gl_FragColor.a = opacity;\n\tgl_FragColor = map;\n\tgl_FragColor.a *= opacity;\n}"},function(e,t){e.exports="#define GLSLIFY 1\nuniform vec4 offsetRepeat;\nvarying vec2 vUv;\n\nvoid main() {\n  vec3 transformed = vec3( position );\n\n  vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n  vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n  gl_Position = projectionMatrix * mvPosition;\n}"},function(e,t,n){var i={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var e=document.createElement("div");return e.id="webgl-error-message",e.style.fontFamily="monospace",e.style.fontSize="13px",e.style.fontWeight="normal",e.style.textAlign="center",e.style.background="#fff",e.style.color="#000",e.style.padding="1.5em",e.style.width="400px",e.style.margin="5em auto 0",this.webgl||(e.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n"):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" style="color:#000">here</a>.'].join("\n")),e},addGetWebGLMessage:function(e){var t,n,r;t=void 0!==(e=e||{}).parent?e.parent:document.body,n=void 0!==e.id?e.id:"oldie",(r=i.getWebGLErrorMessage()).id=n,t.appendChild(r)}};e.exports=i},function(e,t){var n=function(){function e(e){return r.appendChild(e.dom),e}function t(e){for(var t=0;t<r.children.length;t++)r.children[t].style.display=t===e?"block":"none";i=e}var i=0,r=document.createElement("div");r.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",r.addEventListener("click",function(e){e.preventDefault(),t(++i%r.children.length)},!1);var a=(performance||Date).now(),o=a,s=0,c=e(new n.Panel("FPS","#0ff","#002")),l=e(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=e(new n.Panel("MB","#f08","#201"));return t(0),{REVISION:16,dom:r,addPanel:e,showPanel:t,begin:function(){a=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(l.update(e-a,200),e>o+1e3&&(c.update(1e3*s/(e-o),100),o=e,s=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){a=this.end()},domElement:r,setMode:t}};n.Panel=function(e,t,n){var i=1/0,r=0,a=Math.round,o=a(window.devicePixelRatio||1),s=80*o,c=48*o,l=3*o,u=2*o,h=3*o,d=15*o,f=74*o,p=30*o,m=document.createElement("canvas");m.width=s,m.height=c,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*o+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,s,c),g.fillStyle=t,g.fillText(e,l,u),g.fillRect(h,d,f,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h,d,f,p),{dom:m,update:function(c,v){i=Math.min(i,c),r=Math.max(r,c),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,s,d),g.fillStyle=t,g.fillText(a(c)+" "+e+" ("+a(i)+"-"+a(r)+")",l,u),g.drawImage(m,h+o,d,f-o,p,h,d,f-o,p),g.fillRect(h+f-o,d,o,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h+f-o,d,o,a((1-c/v)*p))}}},"object"==typeof e&&(e.exports=n)},function(e,t,n){(function(e){e.EffectComposer=function(t,n){if(this.renderer=t,void 0===n){var i={minFilter:e.LinearFilter,magFilter:e.LinearFilter,format:e.RGBAFormat,stencilBuffer:!1},r=t.getSize();n=new e.WebGLRenderTarget(r.width,r.height,i)}this.renderTarget1=n,this.renderTarget2=n.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===e.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),this.copyPass=new e.ShaderPass(e.CopyShader)},Object.assign(e.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(t){var n,i,r=!1,a=this.passes.length;for(i=0;i<a;i++)if(!1!==(n=this.passes[i]).enabled){if(n.render(this.renderer,this.writeBuffer,this.readBuffer,t,r),n.needsSwap){if(r){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==e.MaskPass&&(n instanceof e.MaskPass?r=!0:n instanceof e.ClearMaskPass&&(r=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getSize();(e=this.renderTarget1.clone()).setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var n=0;n<this.passes.length;n++)this.passes[n].setSize(e,t)}}),e.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(e.Pass.prototype,{setSize:function(e,t){},render:function(e,t,n,i,r){console.error("THREE.Pass: .render() must be implemented in derived pass.")}})}).call(t,n(16))},function(e,t,n){(function(e){e.MaskPass=function(t,n){e.Pass.call(this),this.scene=t,this.camera=n,this.clear=!0,this.needsSwap=!1,this.inverse=!1},e.MaskPass.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:e.MaskPass,render:function(e,t,n,i,r){var a,o,s=e.context,c=e.state;c.buffers.color.setMask(!1),c.buffers.depth.setMask(!1),c.buffers.color.setLocked(!0),c.buffers.depth.setLocked(!0),this.inverse?(a=0,o=1):(a=1,o=0),c.buffers.stencil.setTest(!0),c.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),c.buffers.stencil.setFunc(s.ALWAYS,a,4294967295),c.buffers.stencil.setClear(o),e.render(this.scene,this.camera,n,this.clear),e.render(this.scene,this.camera,t,this.clear),c.buffers.color.setLocked(!1),c.buffers.depth.setLocked(!1),c.buffers.stencil.setFunc(s.EQUAL,1,4294967295),c.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP)}}),e.ClearMaskPass=function(){e.Pass.call(this),this.needsSwap=!1},e.ClearMaskPass.prototype=Object.create(e.Pass.prototype),Object.assign(e.ClearMaskPass.prototype,{render:function(e,t,n,i,r){e.state.buffers.stencil.setTest(!1)}})}).call(t,n(16))},function(e,t,n){(function(e){e.RenderPass=function(t,n,i,r,a){e.Pass.call(this),this.scene=t,this.camera=n,this.overrideMaterial=i,this.clearColor=r,this.clearAlpha=void 0!==a?a:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},e.RenderPass.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:e.RenderPass,render:function(e,t,n,i,r){var a,o,s=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial,this.clearColor&&(a=e.getClearColor().getHex(),o=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.render(this.scene,this.camera,this.renderToScreen?null:n,this.clear),this.clearColor&&e.setClearColor(a,o),this.scene.overrideMaterial=null,e.autoClear=s}})}).call(t,n(16))},function(e,t,n){(function(e){e.SSAARenderPass=function(t,n,i,r){e.Pass.call(this),this.scene=t,this.camera=n,this.sampleLevel=4,this.unbiased=!0,this.clearColor=void 0!==i?i:0,this.clearAlpha=void 0!==r?r:0,void 0===e.CopyShader&&console.error("THREE.SSAARenderPass relies on THREE.CopyShader");var a=e.CopyShader;this.copyUniforms=e.UniformsUtils.clone(a.uniforms),this.copyMaterial=new e.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:e.AdditiveBlending,depthTest:!1,depthWrite:!1}),this.camera2=new e.OrthographicCamera(-1,1,1,-1,0,1),this.scene2=new e.Scene,this.quad2=new e.Mesh(new e.PlaneGeometry(2,2),this.copyMaterial),this.quad2.frustumCulled=!1,this.scene2.add(this.quad2)},e.SSAARenderPass.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:e.SSAARenderPass,dispose:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)},setSize:function(e,t){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(e,t)},render:function(t,n,i,r,a){this.sampleRenderTarget||(this.sampleRenderTarget=new e.WebGLRenderTarget(i.width,i.height,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,format:e.RGBAFormat}));var o=e.SSAARenderPass.JitterVectors[Math.max(0,Math.min(this.sampleLevel,5))],s=t.autoClear;t.autoClear=!1;var c=t.getClearColor().getHex(),l=t.getClearAlpha(),u=1/o.length;this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture;for(var h=i.width,d=i.height,f=0;f<o.length;f++){var p=o[f];this.camera.setViewOffset&&this.camera.setViewOffset(h,d,.0625*p[0],.0625*p[1],h,d);var m=u;if(this.unbiased)m+=1/32*((f+.5)/o.length-.5);this.copyUniforms.opacity.value=m,t.setClearColor(this.clearColor,this.clearAlpha),t.render(this.scene,this.camera,this.sampleRenderTarget,!0),0===f&&t.setClearColor(0,0),t.render(this.scene2,this.camera2,this.renderToScreen?null:n,0===f)}this.camera.clearViewOffset&&this.camera.clearViewOffset(),t.autoClear=s,t.setClearColor(c,l)}}),e.SSAARenderPass.JitterVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]]}).call(t,n(16))},function(e,t,n){(function(e){e.ShaderPass=function(t,n){e.Pass.call(this),this.textureID=void 0!==n?n:"tDiffuse",t instanceof e.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=e.UniformsUtils.clone(t.uniforms),this.material=new e.ShaderMaterial({defines:t.defines||{},uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.camera=new e.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new e.Scene,this.quad=new e.Mesh(new e.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},e.ShaderPass.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:e.ShaderPass,render:function(e,t,n,i,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}})}).call(t,n(16))},function(e,t,n){(function(e){e.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")}}).call(t,n(16))},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_AOMAP\n\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\nvec3 transformed = vec3( position );\n"},function(e,t){e.exports="#define GLSLIFY 1\nvec3 objectNormal = vec3( normal );\n"},function(e,t){e.exports='#define GLSLIFY 1\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n\t\tif( decayExponent > 0.0 ) {\n\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t\t\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t\t\t// page 32, equation 26: E[window1]\n\t\t\t// http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr_v2.pdf\n\t\t\t// this is intended to be used on spot and point lights who are represented as luminous intensity\n\t\t\t// but who must be converted to luminous irradiance for surface lighting calculation\n\t\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n\n#else\n\n\t\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n#endif\n\n\t\t}\n\n\t\treturn 1.0;\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick \'94\n\t//;float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH \'13)\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney’s reparameterization\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\t// geometry term = G(l)⋅G(v) / 4(n⋅l)(n⋅v)\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\n\treturn 1.0 / ( gl * gv );\n\n} // validated\n\n// from page 12, listing 2 of http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr_v2.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is "roughness squared" in Disney’s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4\'s roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n//\n// Rect Area Light BRDF Approximations\n//\n\n// Area light computation code adapted from:\n// http://blog.selfshadow.com/sandbox/ltc.html\n//\n// Based on paper:\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// By: Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// https://eheitzresearch.wordpress.com/415-2/\n\nvec2 ltcTextureCoords( const in GeometricContext geometry, const in float roughness ) {\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = (LUT_SIZE - 1.0)/LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5/LUT_SIZE;\n\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\n\t// view angle on surface determines which LTC BRDF values we use\n\tfloat theta = acos( dot( N, V ) );\n\n\t// Parameterization of texture:\n\t// sqrt(roughness) -> [0,1]\n\t// theta -> [0, PI/2]\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\n\t// Ensure we don\'t have nonlinearities at the look-up table\'s edges\n\t// see: http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter24.html\n\t//      "Shader Analysis" section\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nvoid clipQuadToHorizon( inout vec3 L[5], out int n ) {\n\n\t// detect clipping config\n\tint config = 0;\n\tif ( L[0].z > 0.0 ) config += 1;\n\tif ( L[1].z > 0.0 ) config += 2;\n\tif ( L[2].z > 0.0 ) config += 4;\n\tif ( L[3].z > 0.0 ) config += 8;\n\n\t// clip\n\tn = 0;\n\n\tif ( config == 0 ) {\n\n\t\t// clip all\n\n\t} else if ( config == 1 ) {\n\n\t\t// V1 clip V2 V3 V4\n\t\tn = 3;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[3].z * L[0] + L[0].z * L[3];\n\n\t} else if ( config == 2 ) {\n\n\t\t// V2 clip V1 V3 V4\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\n\t} else if ( config == 3 ) {\n\n\t\t// V1 V2 clip V3 V4\n\t\tn = 4;\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\t\tL[3] = -L[3].z * L[0] + L[0].z * L[3];\n\n\t} else if ( config == 4 ) {\n\n\t\t// V3 clip V1 V2 V4\n\t\tn = 3;\n\t\tL[0] = -L[3].z * L[2] + L[2].z * L[3];\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\n\t} else if ( config == 5 ) {\n\n\t\t// V1 V3 clip V2 V4) impossible\n\t\tn = 0;\n\n\t} else if ( config == 6 ) {\n\n\t\t// V2 V3 clip V1 V4\n\t\tn = 4;\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\n\t} else if ( config == 7 ) {\n\n\t\t// V1 V2 V3 clip V4\n\t\tn = 5;\n\t\tL[4] = -L[3].z * L[0] + L[0].z * L[3];\n\t\tL[3] = -L[3].z * L[2] + L[2].z * L[3];\n\n\t} else if ( config == 8 ) {\n\n\t\t// V4 clip V1 V2 V3\n\t\tn = 3;\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[1] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] =  L[3];\n\n\t} else if ( config == 9 ) {\n\n\t\t// V1 V4 clip V2 V3\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\t\tL[2] = -L[2].z * L[3] + L[3].z * L[2];\n\n\t} else if ( config == 10 ) {\n\n\t\t// V2 V4 clip V1 V3) impossible\n\t\tn = 0;\n\n\t} else if ( config == 11 ) {\n\n\t\t// V1 V2 V4 clip V3\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = -L[2].z * L[3] + L[3].z * L[2];\n\t\tL[2] = -L[2].z * L[1] + L[1].z * L[2];\n\n\t} else if ( config == 12 ) {\n\n\t\t// V3 V4 clip V1 V2\n\t\tn = 4;\n\t\tL[1] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[0] = -L[0].z * L[3] + L[3].z * L[0];\n\n\t} else if ( config == 13 ) {\n\n\t\t// V1 V3 V4 clip V2\n\t\tn = 5;\n\t\tL[4] = L[3];\n\t\tL[3] = L[2];\n\t\tL[2] = -L[1].z * L[2] + L[2].z * L[1];\n\t\tL[1] = -L[1].z * L[0] + L[0].z * L[1];\n\n\t} else if ( config == 14 ) {\n\n\t\t// V2 V3 V4 clip V1\n\t\tn = 5;\n\t\tL[4] = -L[0].z * L[3] + L[3].z * L[0];\n\t\tL[0] = -L[0].z * L[1] + L[1].z * L[0];\n\n\t} else if ( config == 15 ) {\n\n\t\t// V1 V2 V3 V4\n\t\tn = 4;\n\n\t}\n\n\tif ( n == 3 )\n\t\tL[3] = L[0];\n\tif ( n == 4 )\n\t\tL[4] = L[0];\n\n}\n\n// Equation (11) of "Real-Time Polygonal-Light Shading with Linearly Transformed Cosines"\nfloat integrateLtcBrdfOverRectEdge( vec3 v1, vec3 v2 ) {\n\n\tfloat cosTheta = dot( v1, v2 );\n\tfloat theta = acos( cosTheta );\n\tfloat res = cross( v1, v2 ).z * ( ( theta > 0.001 ) ? theta / sin( theta ) : 1.0 );\n\n\treturn res;\n\n}\n\nvoid initRectPoints( const in vec3 pos, const in vec3 halfWidth, const in vec3 halfHeight, out vec3 rectPoints[4] ) {\n\n\trectPoints[0] = pos - halfWidth - halfHeight;\n\trectPoints[1] = pos + halfWidth - halfHeight;\n\trectPoints[2] = pos + halfWidth + halfHeight;\n\trectPoints[3] = pos - halfWidth + halfHeight;\n\n}\n\nvec3 integrateLtcBrdfOverRect( const in GeometricContext geometry, const in mat3 brdfMat, const in vec3 rectPoints[4] ) {\n\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 P = geometry.position;\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize(V - N * dot( V, N ));\n\t// TODO (abelnation): I had to negate this cross product to get proper light.  Curious why sample code worked without negation\n\tT2 = - cross( N, T1 );\n\n\t// rotate area light in (T1, T2, N) basis\n\tmat3 brdfWrtSurface = brdfMat * transpose( mat3( T1, T2, N ) );\n\n\t// transformed rect relative to surface point\n\tvec3 clippedRect[5];\n\tclippedRect[0] = brdfWrtSurface * ( rectPoints[0] - P );\n\tclippedRect[1] = brdfWrtSurface * ( rectPoints[1] - P );\n\tclippedRect[2] = brdfWrtSurface * ( rectPoints[2] - P );\n\tclippedRect[3] = brdfWrtSurface * ( rectPoints[3] - P );\n\n\t// clip light rect to horizon, resulting in at most 5 points\n\t// we do this because we are integrating the BRDF over the hemisphere centered on the surface points normal\n\tint n;\n\tclipQuadToHorizon(clippedRect, n);\n\n\t// light is completely below horizon\n\tif ( n == 0 )\n\t\treturn vec3( 0, 0, 0 );\n\n\t// project clipped rect onto sphere\n\tclippedRect[0] = normalize( clippedRect[0] );\n\tclippedRect[1] = normalize( clippedRect[1] );\n\tclippedRect[2] = normalize( clippedRect[2] );\n\tclippedRect[3] = normalize( clippedRect[3] );\n\tclippedRect[4] = normalize( clippedRect[4] );\n\n\t// integrate\n\t// simplified integration only needs to be evaluated for each edge in the polygon\n\tfloat sum = 0.0;\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[0], clippedRect[1] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[1], clippedRect[2] );\n\tsum += integrateLtcBrdfOverRectEdge( clippedRect[2], clippedRect[3] );\n\tif (n >= 4)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[3], clippedRect[4] );\n\tif (n == 5)\n\t\tsum += integrateLtcBrdfOverRectEdge( clippedRect[4], clippedRect[0] );\n\n\t// TODO (abelnation): two-sided area light\n\t// sum = twoSided ? abs(sum) : max(0.0, sum);\n\tsum = max( 0.0, sum );\n\t// sum = abs( sum );\n\n\tvec3 Lo_i = vec3( sum, sum, sum );\n\n\treturn Lo_i;\n\n}\n\nvec3 Rect_Area_Light_Specular_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight,\n\t\tconst in float roughness,\n\t\tconst in sampler2D ltcMat, const in sampler2D ltcMag ) {\n\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\n\tvec2 uv = ltcTextureCoords( geometry, roughness );\n\n\tvec4 brdfLtcApproxParams, t;\n\n\tbrdfLtcApproxParams = texture2D( ltcMat, uv );\n\tt = texture2D( ltcMat, uv );\n\n\tfloat brdfLtcScalar = texture2D( ltcMag, uv ).a;\n\n\t// inv(M) matrix referenced by equation (6) in paper\n\tmat3 brdfLtcApproxMat = mat3(\n\t\tvec3(   1,   0, t.y ),\n\t\tvec3(   0, t.z,   0 ),\n\t\tvec3( t.w,   0, t.x )\n\t);\n\n\tvec3 specularReflectance = integrateLtcBrdfOverRect( geometry, brdfLtcApproxMat, rectPoints );\n\tspecularReflectance *= brdfLtcScalar;\n\n\treturn specularReflectance;\n\n}\n\nvec3 Rect_Area_Light_Diffuse_Reflectance(\n\t\tconst in GeometricContext geometry,\n\t\tconst in vec3 lightPos, const in vec3 lightHalfWidth, const in vec3 lightHalfHeight ) {\n\n\tvec3 rectPoints[4];\n\tinitRectPoints( lightPos, lightHalfWidth, lightHalfHeight, rectPoints );\n\n\tmat3 diffuseBrdfMat = mat3(1);\n\tvec3 diffuseReflectance = integrateLtcBrdfOverRect( geometry, diffuseBrdfMat, rectPoints );\n\n\treturn diffuseReflectance;\n\n}\n// End RectArea BRDF\n\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n\treturn specularColor * AB.x + AB.y;\n\n} // validated\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n'},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n\t// http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\tvec3 vSigmaX = dFdx( surf_pos );\n\t\tvec3 vSigmaY = dFdy( surf_pos );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#if NUM_CLIPPING_PLANES > 0\n\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#if NUM_CLIPPING_PLANES > 0\n\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nmat3 transpose( const in mat3 v ) {\n\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\n\treturn tmp;\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n#define cubeUV_textureSize (1024.0)\n\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\n\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\t// Clamp the value to the max mip level counts. hard coded to 6 mips\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\n\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\t// float powScale = exp2(roughnessLevel + mipLevel);\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\t// float scale =  1.0 / exp2(roughnessLevel + 2.0 + mipLevel);\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\t// float mipOffset = 0.75*(1.0 - 1.0/exp2(mipLevel))/exp2(roughnessLevel);\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\n\tfloat rcpPowScale = 1.0 / powScale;\n\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\n\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\n\t// round to nearest mipmap if we are not interpolating.\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\n\t// Tri linear interpolation.\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\n\tvec4 result = mix(color10, color20, t);\n\n\treturn vec4(result.rgb, 1.0);\n}\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef FLIP_SIDED\n\n\tobjectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normal * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n  gl_FragColor = linearToOutputTexel( gl_FragColor );\n"},function(e,t){e.exports="#define GLSLIFY 1\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\tvec2 sampleUV;\n\t\tsampleUV.y = saturate( flipNormal * reflectVec.y * 0.5 + 0.5 );\n\t\tsampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\tvec3 reflectView = flipNormal * normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\tenvColor = envMapTexelToLinear( envColor );\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n\n#ifdef USE_ENVMAP\n\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_FOG\n\n  varying float fogDepth;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef TOON\n\n\tuniform sampler2D gradientMap;\n\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t\t// dotNL will be from -1.0 to 1.0\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t\t#ifdef USE_GRADIENTMAP\n\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t\t#else\n\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t\t#endif\n\n\t}\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_LIGHTMAP\n\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\n#if NUM_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\n#endif\n\n/*\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\t// TODO (abelnation): implement\n\n\t}\n\n#endif\n*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\n\t\t#endif\n\n\t}\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\nuniform vec3 ambientLightColor;\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI;\n\n\t#endif\n\n\treturn irradiance;\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n#endif\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltcMat; // RGBA Float\n\tuniform sampler2D ltcMag; // Alpha Float (only has w component)\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\n\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\n\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#else\n\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\n\t\t#else\n\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\n\t\t#endif\n\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t}\n\n\t// taken from here: http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\n\t\t//float envMapWidth = pow( 2.0, maxMIPLevelScalar );\n\t\t//float desiredMIPLevel = log2( envMapWidth * sqrt( 3.0 ) ) - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\n\t\t// clamp to allowable LOD ranges.\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t}\n\n\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\n\t\t#endif\n\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = saturate( reflectVec.y * 0.5 + 0.5 );\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#endif\n\n\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t}\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n"},function(e,t){e.exports="#define GLSLIFY 1\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\nstruct BlinnPhongMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_BlinnPhong( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\n\t\tfloat roughness = BlinnExponentToGGXRoughness( material.specularShininess );\n\n\t\t// Evaluate Lighting Equation\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\n\t\t// TODO (abelnation): note why division by 2PI is necessary\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec / PI2;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff / PI2;\n\n\t}\n#endif\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t#ifdef TOON\n\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\t#else\n\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\n\t#endif\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n"},function(e,t){e.exports="#define GLSLIFY 1\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat ); // Burley clearcoat model\n\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\nstruct PhysicalMaterial {\n\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n\n};\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 matDiffColor = material.diffuseColor;\n\t\tvec3 matSpecColor = material.specularColor;\n\t\tvec3 lightColor   = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\n\t\tvec3 spec = Rect_Area_Light_Specular_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight,\n\t\t\t\troughness,\n\t\t\t\tltcMat, ltcMag );\n\t\tvec3 diff = Rect_Area_Light_Diffuse_Reflectance(\n\t\t\t\tgeometry,\n\t\t\t\trectAreaLight.position, rectAreaLight.halfWidth, rectAreaLight.halfHeight );\n\n\t\treflectedLight.directSpecular += lightColor * matSpecColor * spec;\n\t\treflectedLight.directDiffuse  += lightColor * matDiffColor * diff;\n\n\t}\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\t#ifndef STANDARD\n\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\n\t#endif\n\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\n\t#ifndef STANDARD\n\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\n\t#endif\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\n\n// ref: http://www.frostbite.com/wp-content/uploads/2014/11/course_notes_moving_frostbite_to_pbr_v2.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t}\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t// TODO, replace 8 with the real maxMIPLevel\n\t\tirradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, 8 );\n\n\t#endif\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\t// TODO, replace 8 with the real maxMIPLevel\n\tvec3 radiance = getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry, Material_BlinnShininessExponent( material ), 8 );\n\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_LOGDEPTHBUF\n\n\tuniform float logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\n\t#endif\n\n\tuniform float logDepthBufFC;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_LOGDEPTHBUF\n\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\n\t#else\n\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n\t#endif\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_MAP\n\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_MAP\n\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.r;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_MORPHNORMALS\n\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_MORPHTARGETS\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_MORPHTARGETS\n\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef DOUBLE_SIDED\n\tfloat flipNormal = ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n#else\n\tfloat flipNormal = 1.0;\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal ) * flipNormal;\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_SKINNING\n\n\tvec4 mvPosition = modelViewMatrix * skinned;\n\n#else\n\n\tvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n"},function(e,t){e.exports="#define GLSLIFY 1\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.r;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\n\t\tvec2 f = fract( uv * size + 0.5 );\n\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\n\t\treturn c;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\n\t\t\treturn (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\treturn texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn 1.0;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the distance from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t// dp = distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowBias ) / 1000.0;\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHTS > 0\n\n\tDirectionalLight directionalLight;\n\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHTS > 0\n\n\tSpotLight spotLight;\n\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t#if NUM_POINT_LIGHTS > 0\n\n\tPointLight pointLight;\n\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureWidth;\n\t\tuniform int boneTextureHeight;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureWidth ) );\n\t\t\tfloat y = floor( j / float( boneTextureWidth ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureWidth );\n\t\t\tfloat dy = 1.0 / float( boneTextureHeight );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\tskinned  = bindMatrixInverse * skinned;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined( TONE_MAPPING )\n\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#define saturate(a) clamp( a, 0.0, 1.0 )\n\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\n\t// John Hable's filmic operator from Uncharted 2 video game\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = uv2;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\n\tvarying vec2 vUv;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif"},function(e,t){e.exports="#define GLSLIFY 1\n#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n\t#ifdef USE_SKINNING\n\n\t\tvec4 worldPosition = modelMatrix * skinned;\n\n\t#else\n\n\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\n\t#endif\n\n#endif\n"},function(e,t){e.exports="#define GLSLIFY 1\nuniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n\nvoid main() {\n\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nvarying vec3 vWorldPosition;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\n\t#endif\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nuniform vec3 lightPos;\nvarying vec4 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tgl_FragColor = packDepthToRGBA( length( vWorldPosition.xyz - lightPos.xyz ) / 1000.0 );\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nvarying vec4 vWorldPosition;\n\n#include <common>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <skinbase_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition;\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nuniform sampler2D tEquirect;\nuniform float tFlip;\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n\nvoid main() {\n\n\t// \tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = saturate( tFlip * direction.y * -0.5 + 0.5 );\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nvarying vec3 vWorldPosition;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\n\tvLineDistance = scale * lineDistance;\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\n\n#ifdef DOUBLE_SIDED\n\n\tvarying vec3 vLightBack;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <normal_flip>\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#define LAMBERT\n\nvarying vec3 vLightFront;\n\n#ifdef DOUBLE_SIDED\n\n\tvarying vec3 vLightBack;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#define PHYSICAL\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#define PHYSICAL\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n\nvoid main() {\n\n\t#include <logdepthbuf_fragment>\n\t#include <normal_flip>\n\t#include <normal_fragment>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( 0.0, 0.0, 0.0, opacity * ( 1.0 - getShadowMask() ) );\n\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\n}\n"},function(e,t,n){"use strict";var i=n(54),r=n(84),a=n(23),o=n(1),s=n(3),c=n(2),l=n(29),u=n(8),h=n(5),d=n(87),f=n(14),p=n(91),m=n(102),g=n(103),v=n(61),y=n(95),x=n(62),_=n(99),b=n(101),w=n(25),E=n(17),T=n(111),S=n(113),M=n(114),A=n(65),L=n(12),C=n(10),P=n(66),R=n(120),F=n(67),I=n(31),N=n(68),O=n(32),U=n(6),D=n(70),z=n(7),k=n(22),B=n(9),G=n(38),H=n(18),V=n(33),j=n(4),W=n(0),X=n(20),Y=n(13),q=n(73),Q=n(74),Z=n(75),$=n(131),J=n(47),K=n(132),ee=n(58);n.d(t,"a",function(){return v.a}),t.b=function(e,t,n,i,r,a,o){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new l.a(e,t,n,r,a,o)},n.d(t,"c",function(){return ne}),n.d(t,"d",function(){return ie}),t.e=function(e){return console.warn("THREE.MeshFaceMaterial has been renamed to THREE.MultiMaterial."),new R.a(e)},t.f=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Q.a(e,t)},t.g=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Z.a(e)},t.h=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Q.a(e,t)},t.i=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new F.a(e)},t.j=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new F.a(e)},t.k=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new F.a(e)},t.l=function(e,t,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new W.a(e,t,n)},t.m=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new s.j(e,t).setDynamic(!0)},t.n=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new s.i(e,t)},t.o=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new s.h(e,t)},t.p=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new s.g(e,t)},t.q=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new s.f(e,t)},t.r=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new s.e(e,t)},t.s=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new s.d(e,t)},t.t=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new s.c(e,t)},t.u=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new s.b(e,t)},t.v=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new s.a(e,t)},t.w=re,t.x=ae,t.y=oe,t.z=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new m.a(e,t)},t.A=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Y.a(new y.a(e.geometry),new C.a({color:void 0!==t?t:16777215}))},t.B=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Y.a(new b.a(e.geometry),new C.a({color:void 0!==t?t:16777215}))},t.C=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new E.a(e)},t.D=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new M.a(e)},n.d(t,"E",function(){return se}),n.d(t,"F",function(){return ce}),t.G=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},t.H=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}};var te,ne=0,ie=1;function re(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),p.a.call(this,e),this.type="catmullrom",this.closed=!0}function ae(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),p.a.call(this,e),this.type="catmullrom"}function oe(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),p.a.call(this,e),this.type="catmullrom"}f.a.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(f.a.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},re.prototype=Object.create(p.a.prototype),ae.prototype=Object.create(p.a.prototype),oe.prototype=Object.create(p.a.prototype),Object.assign(oe.prototype,{initFromArray:function(e){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(e){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(e){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),g.a.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Object.assign(N.a.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(O.a.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),D.a.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},z.a.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(k.a.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},applyToBuffer:function(e,t,n){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,n){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(B.a.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){return void 0===te&&(te=new W.a),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),te.setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(e){return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(e)},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e,t,n){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(e,t,n){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,n,i,r,a){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,i,n,r,a)}}),G.a.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},H.a.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(V.a.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(ee.a.prototype,{extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new x.a(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new _.a(this,e)}}),Object.assign(j.a.prototype,{fromAttribute:function(e,t,n){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}}),Object.assign(W.a.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,n){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}}),Object.assign(X.a.prototype,{fromAttribute:function(e,t,n){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,n)}}),u.b.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(h.a.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)}}),Object.defineProperties(h.a.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(q.a.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),a.a.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(w.a.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(s.j.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(c.a.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(c.a.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(d.a.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(L.a.prototype,{wrapAround:{get:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")},set:function(){console.warn("THREE."+this.type+": .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE."+this.type+": .wrapRGB has been removed."),new U.a}}}),Object.defineProperties(P.a.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(I.a.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign($.a.prototype,{supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties($.a.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=e}}}),Object.defineProperties(K.a.prototype,{cullFace:{get:function(){return this.renderReverseSided?o.e:o.d},set:function(e){var t=e!==o.d;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(J.a.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),i.a.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new T.a).load(e,function(e){t.setBuffer(e)}),this},r.a.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()};var se={merge:function(e,t,n){var i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),i=t.matrix,t=t.geometry),e.merge(t,i,n)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},ce={crossOrigin:void 0,loadTexture:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new A.a;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},loadTextureCube:function(e,t,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new S.a;r.setCrossOrigin(this.crossOrigin);var a=r.load(e,n,void 0,i);return t&&(a.mapping=t),a},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}}},function(e,t,n){"use strict";var i=n(1);function r(e,t,n){this._mixer=e,this._clip=t,this._localRoot=n||null;for(var r=t.tracks,a=r.length,o=new Array(a),s={endingStart:i._57,endingEnd:i._57},c=0;c!==a;++c){var l=r[c].createInterpolant(null);o[c]=l,l.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=i._52,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}n.d(t,"a",function(){return r}),r.prototype={constructor:r,play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){var i=this._clip.duration,r=e._clip.duration,a=r/i,o=i/r;e.warp(1,a,t),this.warp(o,1,t)}return this},crossFadeTo:function(e,t,n){return e.crossFadeFrom(this,t,n)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,n){var i=this._mixer,r=i.time,a=this._timeScaleInterpolant,o=this.timeScale;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);var s=a.parameterPositions,c=a.sampleValues;return s[0]=r,s[1]=r+n,c[0]=e/o,c[1]=t/o,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,n,i){var r=this._startTime;if(null!==r){var a=(e-r)*n;if(a<0||0===n)return;this._startTime=null,t=n*a}t*=this._updateTimeScale(e);var o=this._updateTime(t),s=this._updateWeight(e);if(s>0)for(var c=this._interpolants,l=this._propertyBindings,u=0,h=c.length;u!==h;++u)c[u].evaluate(o),l[u].accumulate(i,s)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}return this._effectiveTimeScale=t,t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var n=this._clip.duration,r=this.loop,a=this._loopCount;if(r===i._51){-1===a&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(t>=n)t=n;else{if(!(t<0))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{var o=r===i._53;if(-1===a&&(e>=0?(a=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),t>=n||t<0){var s=Math.floor(t/n);t-=n*s,a+=Math.abs(s);var c=this.repetitions-a;if(c<0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?n:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(0===c){var l=e<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=a,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:s})}}if(o&&1==(1&a))return this.time=t,n-t}return this.time=t,t},_setEndings:function(e,t,n){var r=this._interpolantSettings;n?(r.endingStart=i._58,r.endingEnd=i._58):(r.endingStart=e?this.zeroSlopeAtStart?i._58:i._57:i._59,r.endingEnd=t?this.zeroSlopeAtEnd?i._58:i._57:i._59)},_scheduleFading:function(e,t,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=t,o[1]=r+e,s[1]=n,this}}},function(e,t,n){"use strict";var i=n(261),r=n(24),a=n(71),o=n(50),s=n(80),c=n(40);function l(e){this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}n.d(t,"a",function(){return l}),l.prototype={constructor:l,clipAction:function(e,t){var n=t||this._root,r=n.uuid,a="string"==typeof e?c.a.findByName(n,e):e,o=null!==a?a.uuid:e,s=this._actionsByClip[o],l=null;if(void 0!==s){var u=s.actionByRoot[r];if(void 0!==u)return u;l=s.knownActions[0],null===a&&(a=l._clip)}if(null===a)return null;var h=new i.a(this,a,t);return this._bindAction(h,l),this._addInactiveAction(h,o,r),h},existingAction:function(e,t){var n=t||this._root,i=n.uuid,r="string"==typeof e?c.a.findByName(n,e):e,a=r?r.uuid:e,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){var e=this._actions,t=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)e[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),a=this._accuIndex^=1,o=0;o!==n;++o){var s=t[o];s.enabled&&s._update(i,e,r,a)}var c=this._bindings,l=this._nActiveBindings;for(o=0;o!==l;++o)c[o].apply(a);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var c=a[o];this._deactivateAction(c);var l=c._cacheIndex,u=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,u._cacheIndex=l,t[l]=u,t.pop(),this._removeInactiveBindingsForAction(c)}delete i[n]}},uncacheRoot:function(e){var t=e.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[t];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(e,t){var n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}},Object.assign(l.prototype,{_bindAction:function(e,t){var n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,a=e._propertyBindings,c=e._interpolants,l=n.uuid,u=this._bindingsByRootAndName,h=u[l];void 0===h&&(h={},u[l]=h);for(var d=0;d!==r;++d){var f=i[d],p=f.name,m=h[p];if(void 0!==m)a[d]=m;else{if(void 0!==(m=a[d])){null===m._cacheIndex&&(++m.referenceCount,this._addInactiveBinding(m,l,p));continue}var g=t&&t._propertyBindings[d].binding.parsedPath;++(m=new s.a(o.a.create(n,p,g),f.ValueTypeName,f.getValueSize())).referenceCount,this._addInactiveBinding(m,l,p),a[d]=m}c[d].resultBuffer=m.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}for(var r=e._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){var t=e._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(e,t,n){var i=this._actions,r=this._actionsByClip,a=r[t];if(void 0===a)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=a;else{var o=a.knownActions;e._byClipCacheIndex=o.length,o.push(e)}e._cacheIndex=i.length,i.push(e),a.actionByRoot[n]=e},_removeInactiveAction:function(e){var t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;var r=e._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,c=s[s.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,s[l]=c,s.pop(),e._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){for(var t=e._propertyBindings,n=0,i=t.length;n!==i;++n){var r=t[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(e){var t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackAction:function(e){var t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_addInactiveBinding:function(e,t,n){var i=this._bindingsByRootAndName,r=i[t],a=this._bindings;void 0===r&&(r={},i[t]=r),r[n]=e,e._cacheIndex=a.length,a.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=t[t.length-1],c=e._cacheIndex;s._cacheIndex=c,t[c]=s,t.pop(),delete o[r];e:{for(var l in o)break e;delete a[i]}},_lendBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_takeBackBinding:function(e){var t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,n=e[t];return void 0===n&&((n=new a.a(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=t,e[t]=n),n},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1)}),Object.assign(l.prototype,r.a.prototype)},function(e,t,n){"use strict";var i=n(50),r=n(7);function a(e){this.uuid=r.a.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var a=this;this.stats={objects:{get total(){return a._objects.length},get inUse(){return this.total-a.nCachedObjects_}},get bindingsPerObject(){return a._bindings.length}}}n.d(t,"a",function(){return a}),a.prototype={constructor:a,isAnimationObjectGroup:!0,add:function(e){for(var t=this._objects,n=t.length,r=this.nCachedObjects_,a=this._indicesByUUID,o=this._paths,s=this._parsedPaths,c=this._bindings,l=c.length,u=0,h=arguments.length;u!==h;++u){var d=arguments[u],f=d.uuid,p=a[f],m=void 0;if(void 0===p){p=n++,a[f]=p,t.push(d);for(var g=0,v=l;g!==v;++g)c[g].push(new i.a(d,o[g],s[g]))}else if(p<r){m=t[p];var y=--r,x=t[y];a[x.uuid]=p,t[p]=x,a[f]=y,t[y]=d;for(g=0,v=l;g!==v;++g){var _=c[g],b=_[y],w=_[p];_[p]=b,void 0===w&&(w=new i.a(d,o[g],s[g])),_[y]=w}}else t[p]!==m&&console.error("Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes...")}this.nCachedObjects_=r},remove:function(e){for(var t=this._objects,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var c=arguments[o],l=c.uuid,u=i[l];if(void 0!==u&&u>=n){var h=n++,d=t[h];i[d.uuid]=u,t[u]=d,i[l]=h,t[h]=c;for(var f=0,p=a;f!==p;++f){var m=r[f],g=m[h],v=m[u];m[u]=g,m[h]=v}}}this.nCachedObjects_=n},uncache:function(e){for(var t=this._objects,n=t.length,i=this.nCachedObjects_,r=this._indicesByUUID,a=this._bindings,o=a.length,s=0,c=arguments.length;s!==c;++s){var l=arguments[s].uuid,u=r[l];if(void 0!==u)if(delete r[l],u<i){var h=--i,d=t[h],f=t[y=--n];r[d.uuid]=u,t[u]=d,r[f.uuid]=h,t[h]=f,t.pop();for(var p=0,m=o;p!==m;++p){var g=(x=a[p])[h],v=x[y];x[u]=g,x[h]=v,x.pop()}}else{var y;r[(f=t[y=--n]).uuid]=u,t[u]=f,t.pop();for(p=0,m=o;p!==m;++p){var x;(x=a[p])[u]=x[y],x.pop()}}}this.nCachedObjects_=i},subscribe_:function(e,t){var n=this._bindingsIndicesByPath,r=n[e],a=this._bindings;if(void 0!==r)return a[r];var o=this._paths,s=this._parsedPaths,c=this._objects,l=c.length,u=this.nCachedObjects_,h=new Array(l);r=a.length,n[e]=r,o.push(e),s.push(t),a.push(h);for(var d=u,f=c.length;d!==f;++d){var p=c[d];h[d]=new i.a(p,e,t)}return h},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];t[e[o]]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}},function(e,t,n){"use strict";var i,r,a,o,s=n(0),c=n(18),l=n(5),u=n(55);function h(){l.a.call(this),this.type="AudioListener",this.context=u.a.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}n.d(t,"a",function(){return h}),h.prototype=Object.assign(Object.create(l.a.prototype),{constructor:h,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.value=e},updateMatrixWorld:(i=new s.a,r=new c.a,a=new s.a,o=new s.a,function(e){l.a.prototype.updateMatrixWorld.call(this,e);var t=this.context.listener,n=this.up;this.matrixWorld.decompose(i,r,a),o.set(0,0,-1).applyQuaternion(r),t.positionX?(t.positionX.setValueAtTime(i.x,this.context.currentTime),t.positionY.setValueAtTime(i.y,this.context.currentTime),t.positionZ.setValueAtTime(i.z,this.context.currentTime),t.forwardX.setValueAtTime(o.x,this.context.currentTime),t.forwardY.setValueAtTime(o.y,this.context.currentTime),t.forwardZ.setValueAtTime(o.z,this.context.currentTime),t.upX.setValueAtTime(n.x,this.context.currentTime),t.upY.setValueAtTime(n.y,this.context.currentTime),t.upZ.setValueAtTime(n.z,this.context.currentTime)):(t.setPosition(i.x,i.y,i.z),t.setOrientation(o.x,o.y,o.z,n.x,n.y,n.z))})})},function(e,t,n){"use strict";var i,r=n(0),a=n(54),o=n(5);function s(e){a.a.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}n.d(t,"a",function(){return s}),s.prototype=Object.assign(Object.create(a.a.prototype),{constructor:s,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:(i=new r.a,function(e){o.a.prototype.updateMatrixWorld.call(this,e),i.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(i.x,i.y,i.z)})})},function(e,t,n){"use strict";var i=n(5),r=n(130),a=n(1),o=n(0),s=n(23);function c(e,t,n){i.a.call(this),this.type="CubeCamera";var c=new s.a(90,1,e,t);c.up.set(0,-1,0),c.lookAt(new o.a(1,0,0)),this.add(c);var l=new s.a(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new o.a(-1,0,0)),this.add(l);var u=new s.a(90,1,e,t);u.up.set(0,0,1),u.lookAt(new o.a(0,1,0)),this.add(u);var h=new s.a(90,1,e,t);h.up.set(0,0,-1),h.lookAt(new o.a(0,-1,0)),this.add(h);var d=new s.a(90,1,e,t);d.up.set(0,-1,0),d.lookAt(new o.a(0,0,1)),this.add(d);var f=new s.a(90,1,e,t);f.up.set(0,-1,0),f.lookAt(new o.a(0,0,-1)),this.add(f);var p={format:a._35,magFilter:a._19,minFilter:a._19};this.renderTarget=new r.a(n,n,p),this.updateCubeMap=function(e,t){null===this.parent&&this.updateMatrixWorld();var n=this.renderTarget,i=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,n.activeCubeFace=0,e.render(t,c,n),n.activeCubeFace=1,e.render(t,l,n),n.activeCubeFace=2,e.render(t,u,n),n.activeCubeFace=3,e.render(t,h,n),n.activeCubeFace=4,e.render(t,d,n),n.texture.generateMipmaps=i,n.activeCubeFace=5,e.render(t,f,n),e.setRenderTarget(null)}}n.d(t,"a",function(){return c}),c.prototype=Object.create(i.a.prototype),c.prototype.constructor=c},function(e,t,n){"use strict";var i,r,a,o,s,c,l,u,h,d=n(9),f=n(7),p=n(23);function m(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new p.a,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new p.a,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}n.d(t,"a",function(){return m}),Object.assign(m.prototype,{update:(u=new d.a,h=new d.a,function(e){if(i!==this||r!==e.focus||a!==e.fov||o!==e.aspect*this.aspect||s!==e.near||c!==e.far||l!==e.zoom){i=this,r=e.focus,a=e.fov,o=e.aspect*this.aspect,s=e.near,c=e.far,l=e.zoom;var t,n,d=e.projectionMatrix.clone(),p=this.eyeSep/2,m=p*s/r,g=s*Math.tan(f.a.DEG2RAD*a*.5)/l;h.elements[12]=-p,u.elements[12]=p,t=-g*o+m,n=g*o+m,d.elements[0]=2*s/(n-t),d.elements[8]=(n+t)/(n-t),this.cameraL.projectionMatrix.copy(d),t=-g*o-m,n=g*o-m,d.elements[0]=2*s/(n-t),d.elements[8]=(n+t)/(n-t),this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(h),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(u)})})},function(e,t,n){"use strict";function i(e){this.autoStart=void 0===e||e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}n.d(t,"a",function(){return i}),i.prototype={constructor:i,start:function(){this.startTime=(performance||Date).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running&&this.start(),this.running){var t=(performance||Date).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}},function(e,t,n){"use strict";var i=n(4);function r(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}n.d(t,"a",function(){return r}),Object.assign(r.prototype,{computeGroups:function(e){for(var t,n=[],i=void 0,r=e.faces,a=0;a<r.length;a++){var o=r[a];o.materialIndex!==i&&(i=o.materialIndex,void 0!==t&&(t.count=3*a-t.start,n.push(t)),t={start:3*a,materialIndex:i})}void 0!==t&&(t.count=3*a-t.start,n.push(t)),this.groups=n},fromGeometry:function(e){var t,n=e.faces,r=e.vertices,a=e.faceVertexUvs,o=a[0]&&a[0].length>0,s=a[1]&&a[1].length>0,c=e.morphTargets,l=c.length;if(l>0){t=[];for(var u=0;u<l;u++)t[u]=[];this.morphTargets.position=t}var h,d=e.morphNormals,f=d.length;if(f>0){h=[];for(u=0;u<f;u++)h[u]=[];this.morphTargets.normal=h}var p=e.skinIndices,m=e.skinWeights,g=p.length===r.length,v=m.length===r.length;for(u=0;u<n.length;u++){var y=n[u];this.vertices.push(r[y.a],r[y.b],r[y.c]);var x=y.vertexNormals;if(3===x.length)this.normals.push(x[0],x[1],x[2]);else{var _=y.normal;this.normals.push(_,_,_)}var b,w=y.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var E=y.color;this.colors.push(E,E,E)}if(!0===o)void 0!==(b=a[0][u])?this.uvs.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new i.a,new i.a,new i.a));if(!0===s)void 0!==(b=a[1][u])?this.uvs2.push(b[0],b[1],b[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new i.a,new i.a,new i.a));for(var T=0;T<l;T++){var S=c[T].vertices;t[T].push(S[y.a],S[y.b],S[y.c])}for(T=0;T<f;T++){var M=d[T].vertexNormals[u];h[T].push(M.a,M.b,M.c)}g&&this.skinIndices.push(p[y.a],p[y.b],p[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}})},function(e,t,n){"use strict";var i=n(3);function r(e,t,n){i.j.call(this,e,t),this.meshPerAttribute=n||1}n.d(t,"a",function(){return r}),r.prototype=Object.create(i.j.prototype),r.prototype.constructor=r,r.prototype.isInstancedBufferAttribute=!0,r.prototype.copy=function(e){return i.j.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},function(e,t,n){"use strict";var i=n(2);function r(){i.a.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}n.d(t,"a",function(){return r}),r.prototype=Object.create(i.a.prototype),r.prototype.constructor=r,r.prototype.isInstancedBufferGeometry=!0,r.prototype.addGroup=function(e,t,n){this.groups.push({start:e,count:t,materialIndex:n})},r.prototype.copy=function(e){var t=e.index;null!==t&&this.setIndex(t.clone());var n=e.attributes;for(var i in n){var r=n[i];this.addAttribute(i,r.clone())}for(var a=e.groups,o=0,s=a.length;o<s;o++){var c=a[o];this.addGroup(c.start,c.count,c.materialIndex)}return this}},function(e,t,n){"use strict";var i=n(85);function r(e,t,n){i.a.call(this,e,t),this.meshPerAttribute=n||1}n.d(t,"a",function(){return r}),r.prototype=Object.create(i.a.prototype),r.prototype.constructor=r,r.prototype.isInstancedInterleavedBuffer=!0,r.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}},function(e,t,n){"use strict";var i=n(7);function r(e,t,n,r){this.uuid=i.a.generateUUID(),this.data=e,this.itemSize=t,this.offset=n,this.normalized=!0===r}n.d(t,"a",function(){return r}),r.prototype={constructor:r,isInterleavedBufferAttribute:!0,get count(){return this.data.count},get array(){return this.data.array},setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this},setXYZ:function(e,t,n,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this},setXYZW:function(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}}},function(e,t,n){"use strict";var i=n(33);function r(e,t,n,r){this.ray=new i.a(e,t),this.near=n||0,this.far=r||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function a(e,t){return e.distance-t.distance}function o(e,t,n,i){if(!1!==e.visible&&(e.raycast(t,n),!0===i))for(var r=e.children,a=0,s=r.length;a<s;a++)o(r[a],t,n,!0)}n.d(t,"a",function(){return r}),r.prototype={constructor:r,linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t){var n=[];return o(e,this,n,t),n.sort(a),n},intersectObjects:function(e,t){var n=[];if(!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),n;for(var i=0,r=e.length;i<r;i++)o(e[i],this,n,t);return n.sort(a),n}}},function(e,t,n){"use strict";var i=n(9),r=n(21),a=n(72);n.d(t,"a",function(){return o});var o={createMultiMaterialObject:function(e,t){for(var n=new a.a,i=0,o=t.length;i<o;i++)n.add(new r.a(e,t[i]));return n},detach:function(e,t,n){e.applyMatrix(t.matrixWorld),t.remove(e),n.add(e)},attach:function(e,t,n){var r=new i.a;r.getInverse(n.matrixWorld),e.applyMatrix(r),t.remove(e),n.add(e)}}},function(e,t,n){"use strict";var i=n(59);function r(e,t,n,r,a,o){i.a.call(this,e,t,n,n,r,a,o)}n.d(t,"a",function(){return r}),r.prototype=Object.create(i.a.prototype),r.prototype.constructor=r},function(e,t,n){"use strict";var i=n(14),r=n(30),a=n(0);function o(e,t,n,i){this.v0=e,this.v1=t,this.v2=n,this.v3=i}n.d(t,"a",function(){return o}),o.prototype=Object.create(i.a.prototype),o.prototype.constructor=o,o.prototype.getPoint=function(e){var t=this.v0,i=this.v1,o=this.v2,s=this.v3;return new a.a(n.i(r.b)(e,t.x,i.x,o.x,s.x),n.i(r.b)(e,t.y,i.y,o.y,s.y),n.i(r.b)(e,t.z,i.z,o.z,s.z))}},function(e,t,n){"use strict";var i=n(0),r=n(14);function a(e,t){this.v1=e,this.v2=t}n.d(t,"a",function(){return a}),a.prototype=Object.create(r.a.prototype),a.prototype.constructor=a,a.prototype.getPoint=function(e){if(1===e)return this.v2.clone();var t=new i.a;return t.subVectors(this.v2,this.v1),t.multiplyScalar(e),t.add(this.v1),t}},function(e,t,n){"use strict";var i=n(14),r=n(30),a=n(0);function o(e,t,n){this.v0=e,this.v1=t,this.v2=n}n.d(t,"a",function(){return o}),o.prototype=Object.create(i.a.prototype),o.prototype.constructor=o,o.prototype.getPoint=function(e){var t=this.v0,i=this.v1,o=this.v2;return new a.a(n.i(r.a)(e,t.x,i.x,o.x),n.i(r.a)(e,t.y,i.y,o.y),n.i(r.a)(e,t.z,i.z,o.z))}},function(e,t,n){"use strict";var i=n(5);function r(e){i.a.call(this),this.material=e,this.render=function(e){}}n.d(t,"a",function(){return r}),r.prototype=Object.create(i.a.prototype),r.prototype.constructor=r,r.prototype.isImmediateRenderObject=!0},function(e,t,n){"use strict";var i=n(21),r=n(7);function a(e,t){i.a.call(this,e,t),this.animationsMap={},this.animationsList=[];var n=this.geometry.morphTargets.length,r=n-1,a=n/1;this.createAnimation("__default",0,r,a),this.setAnimationWeight("__default",1)}n.d(t,"a",function(){return a}),a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.createAnimation=function(e,t,n,i){var r={start:t,end:n,length:n-t+1,fps:i,duration:(n-t)/i,lastFrame:0,currentFrame:0,active:!1,time:0,direction:1,weight:1,directionBackwards:!1,mirroredLoop:!1};this.animationsMap[e]=r,this.animationsList.push(r)},a.prototype.autoCreateAnimations=function(e){for(var t,n=/([a-z]+)_?(\d+)/i,i={},r=this.geometry,a=0,o=r.morphTargets.length;a<o;a++){var s=r.morphTargets[a].name.match(n);if(s&&s.length>1)i[c=s[1]]||(i[c]={start:1/0,end:-1/0}),a<(l=i[c]).start&&(l.start=a),a>l.end&&(l.end=a),t||(t=c)}for(var c in i){var l=i[c];this.createAnimation(c,l.start,l.end,e)}this.firstAnimation=t},a.prototype.setAnimationDirectionForward=function(e){var t=this.animationsMap[e];t&&(t.direction=1,t.directionBackwards=!1)},a.prototype.setAnimationDirectionBackward=function(e){var t=this.animationsMap[e];t&&(t.direction=-1,t.directionBackwards=!0)},a.prototype.setAnimationFPS=function(e,t){var n=this.animationsMap[e];n&&(n.fps=t,n.duration=(n.end-n.start)/n.fps)},a.prototype.setAnimationDuration=function(e,t){var n=this.animationsMap[e];n&&(n.duration=t,n.fps=(n.end-n.start)/n.duration)},a.prototype.setAnimationWeight=function(e,t){var n=this.animationsMap[e];n&&(n.weight=t)},a.prototype.setAnimationTime=function(e,t){var n=this.animationsMap[e];n&&(n.time=t)},a.prototype.getAnimationTime=function(e){var t=0,n=this.animationsMap[e];return n&&(t=n.time),t},a.prototype.getAnimationDuration=function(e){var t=-1,n=this.animationsMap[e];return n&&(t=n.duration),t},a.prototype.playAnimation=function(e){var t=this.animationsMap[e];t?(t.time=0,t.active=!0):console.warn("THREE.MorphBlendMesh: animation["+e+"] undefined in .playAnimation()")},a.prototype.stopAnimation=function(e){var t=this.animationsMap[e];t&&(t.active=!1)},a.prototype.update=function(e){for(var t=0,n=this.animationsList.length;t<n;t++){var i=this.animationsList[t];if(i.active){var a=i.duration/i.length;i.time+=i.direction*e,i.mirroredLoop?(i.time>i.duration||i.time<0)&&(i.direction*=-1,i.time>i.duration&&(i.time=i.duration,i.directionBackwards=!0),i.time<0&&(i.time=0,i.directionBackwards=!1)):(i.time=i.time%i.duration,i.time<0&&(i.time+=i.duration));var o=i.start+r.a.clamp(Math.floor(i.time/a),0,i.length-1),s=i.weight;o!==i.currentFrame&&(this.morphTargetInfluences[i.lastFrame]=0,this.morphTargetInfluences[i.currentFrame]=1*s,this.morphTargetInfluences[o]=0,i.lastFrame=i.currentFrame,i.currentFrame=o);var c=i.time%a/a;i.directionBackwards&&(c=1-c),i.currentFrame!==i.lastFrame?(this.morphTargetInfluences[i.currentFrame]=c*s,this.morphTargetInfluences[i.lastFrame]=(1-c)*s):this.morphTargetInfluences[i.currentFrame]=s}}}},function(e,t,n){"use strict";var i=n(8),r=n(3),a=n(2),o=n(0),s=n(4);function c(e,t,n,r){i.b.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},this.fromBufferGeometry(new l(e,t,n,r))}function l(e,t,n,i){a.a.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},e=e||50,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var c,l,u=[],h=[],d=[],f=[],p=new o.a,m=new s.a;for(h.push(0,0,0),d.push(0,0,1),f.push(.5,.5),l=0,c=3;l<=t;l++,c+=3){var g=n+l/t*i;p.x=e*Math.cos(g),p.y=e*Math.sin(g),h.push(p.x,p.y,p.z),d.push(0,0,1),m.x=(h[c]/e+1)/2,m.y=(h[c+1]/e+1)/2,f.push(m.x,m.y)}for(c=1;c<=t;c++)u.push(c,c+1,0);this.setIndex(u),this.addAttribute("position",new r.b(h,3)),this.addAttribute("normal",new r.b(d,3)),this.addAttribute("uv",new r.b(f,2))}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l}),c.prototype=Object.create(i.b.prototype),c.prototype.constructor=c,l.prototype=Object.create(a.a.prototype),l.prototype.constructor=l},function(e,t,n){"use strict";var i=n(44);function r(e,t,n,r,a,o,s){i.b.call(this,0,e,t,n,r,a,o,s),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s}}function a(e,t,n,r,a,o,s){i.a.call(this,0,e,t,n,r,a,o,s),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s}}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return a}),r.prototype=Object.create(i.b.prototype),r.prototype.constructor=r,a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a},function(e,t,n){"use strict";var i=n(8),r=n(36);function a(e,t){i.b.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new o(e,t)),this.mergeVertices()}function o(e,t){var n=(1+Math.sqrt(5))/2,i=1/n,a=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];r.a.call(this,a,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o}),a.prototype=Object.create(i.b.prototype),a.prototype.constructor=a,o.prototype=Object.create(r.a.prototype),o.prototype.constructor=o},function(e,t,n){"use strict";var i=n(8),r=n(36);function a(e,t){i.b.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new o(e,t)),this.mergeVertices()}function o(e,t){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];r.a.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o}),a.prototype=Object.create(i.b.prototype),a.prototype.constructor=a,o.prototype=Object.create(r.a.prototype),o.prototype.constructor=o},function(e,t,n){"use strict";var i=n(8),r=n(3),a=n(2),o=n(0),s=n(4),c=n(7);function l(e,t,n,r){i.b.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},this.fromBufferGeometry(new u(e,t,n,r)),this.mergeVertices()}function u(e,t,n,i){a.a.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t)||12,n=n||0,i=i||2*Math.PI,i=c.a.clamp(i,0,2*Math.PI);var l,u,h,d=[],f=[],p=[],m=1/t,g=new o.a,v=new s.a;for(u=0;u<=t;u++){var y=n+u*m*i,x=Math.sin(y),_=Math.cos(y);for(h=0;h<=e.length-1;h++)g.x=e[h].x*x,g.y=e[h].y,g.z=e[h].x*_,f.push(g.x,g.y,g.z),v.x=u/t,v.y=h/(e.length-1),p.push(v.x,v.y)}for(u=0;u<t;u++)for(h=0;h<e.length-1;h++){var b=l=h+u*e.length,w=l+e.length,E=l+e.length+1,T=l+1;d.push(b,w,T),d.push(w,E,T)}if(this.setIndex(d),this.addAttribute("position",new r.b(f,3)),this.addAttribute("uv",new r.b(p,2)),this.computeVertexNormals(),i===2*Math.PI){var S=this.attributes.normal.array,M=new o.a,A=new o.a,L=new o.a;for(l=t*e.length*3,u=0,h=0;u<e.length;u++,h+=3)M.x=S[h+0],M.y=S[h+1],M.z=S[h+2],A.x=S[l+h+0],A.y=S[l+h+1],A.z=S[l+h+2],L.addVectors(M,A).normalize(),S[h+0]=S[l+h+0]=L.x,S[h+1]=S[l+h+1]=L.y,S[h+2]=S[l+h+2]=L.z}}n.d(t,"a",function(){return l}),n.d(t,"b",function(){return u}),l.prototype=Object.create(i.b.prototype),l.prototype.constructor=l,u.prototype=Object.create(a.a.prototype),u.prototype.constructor=u},function(e,t,n){"use strict";var i=n(8),r=n(2),a=n(3);function o(e,t,n){i.b.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:n},this.fromBufferGeometry(new s(e,t,n)),this.mergeVertices()}function s(e,t,n){r.a.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:n};var i,o,s=[],c=[],l=[],u=t+1;for(i=0;i<=n;i++){var h=i/n;for(o=0;o<=t;o++){var d=o/t,f=e(d,h);c.push(f.x,f.y,f.z),l.push(d,h)}}for(i=0;i<n;i++)for(o=0;o<t;o++){var p=i*u+o,m=i*u+o+1,g=(i+1)*u+o+1,v=(i+1)*u+o;s.push(p,m,v),s.push(m,g,v)}this.setIndex(s),this.addAttribute("position",new a.b(c,3)),this.addAttribute("uv",new a.b(l,2)),this.computeVertexNormals()}n.d(t,"a",function(){return o}),n.d(t,"b",function(){return s}),o.prototype=Object.create(i.b.prototype),o.prototype.constructor=o,s.prototype=Object.create(r.a.prototype),s.prototype.constructor=s},function(e,t,n){"use strict";var i=n(8),r=n(3),a=n(2),o=n(4),s=n(0);function c(e,t,n,r,a,o){i.b.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new l(e,t,n,r,a,o))}function l(e,t,n,i,c,l){a.a.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:c,thetaLength:l},e=e||20,t=t||50,c=void 0!==c?c:0,l=void 0!==l?l:2*Math.PI,n=void 0!==n?Math.max(3,n):8;var u,h,d,f=[],p=[],m=[],g=[],v=e,y=(t-e)/(i=void 0!==i?Math.max(1,i):1),x=new s.a,_=new o.a;for(h=0;h<=i;h++){for(d=0;d<=n;d++)u=c+d/n*l,x.x=v*Math.cos(u),x.y=v*Math.sin(u),p.push(x.x,x.y,x.z),m.push(0,0,1),_.x=(x.x/t+1)/2,_.y=(x.y/t+1)/2,g.push(_.x,_.y);v+=y}for(h=0;h<i;h++){var b=h*(n+1);for(d=0;d<n;d++){var w=u=d+b,E=u+n+1,T=u+n+2,S=u+1;f.push(w,E,S),f.push(E,T,S)}}this.setIndex(f),this.addAttribute("position",new r.b(p,3)),this.addAttribute("normal",new r.b(m,3)),this.addAttribute("uv",new r.b(g,2))}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l}),c.prototype=Object.create(i.b.prototype),c.prototype.constructor=c,l.prototype=Object.create(a.a.prototype),l.prototype.constructor=l},function(e,t,n){"use strict";var i=n(8),r=n(36);function a(e,t){i.b.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new o(e,t)),this.mergeVertices()}function o(e,t){r.a.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}n.d(t,"a",function(){return a}),n.d(t,"b",function(){return o}),a.prototype=Object.create(i.b.prototype),a.prototype.constructor=a,o.prototype=Object.create(r.a.prototype),o.prototype.constructor=o},function(e,t,n){"use strict";var i=n(62),r=n(8);function a(e,t){var n=(t=t||{}).font;if(!1===(n&&n.isFont))return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new r.b;var a=n.generateShapes(e,t.size,t.curveSegments);t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),i.a.call(this,a,t),this.type="TextGeometry"}n.d(t,"a",function(){return a}),a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a},function(e,t,n){"use strict";var i=n(8),r=n(3),a=n(2),o=n(0);function s(e,t,n,r,a){i.b.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:a},this.fromBufferGeometry(new c(e,t,n,r,a))}function c(e,t,n,i,s){a.a.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:s},e=e||100,t=t||40,n=Math.floor(n)||8,i=Math.floor(i)||6,s=s||2*Math.PI;var c,l,u=[],h=[],d=[],f=[],p=new o.a,m=new o.a,g=new o.a;for(c=0;c<=n;c++)for(l=0;l<=i;l++){var v=l/i*s,y=c/n*Math.PI*2;m.x=(e+t*Math.cos(y))*Math.cos(v),m.y=(e+t*Math.cos(y))*Math.sin(v),m.z=t*Math.sin(y),h.push(m.x,m.y,m.z),p.x=e*Math.cos(v),p.y=e*Math.sin(v),g.subVectors(m,p).normalize(),d.push(g.x,g.y,g.z),f.push(l/i),f.push(c/n)}for(c=1;c<=n;c++)for(l=1;l<=i;l++){var x=(i+1)*c+l-1,_=(i+1)*(c-1)+l-1,b=(i+1)*(c-1)+l,w=(i+1)*c+l;u.push(x,_,w),u.push(_,b,w)}this.setIndex(u),this.addAttribute("position",new r.b(h,3)),this.addAttribute("normal",new r.b(d,3)),this.addAttribute("uv",new r.b(f,2))}n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c}),s.prototype=Object.create(i.b.prototype),s.prototype.constructor=s,c.prototype=Object.create(a.a.prototype),c.prototype.constructor=c},function(e,t,n){"use strict";var i=n(8),r=n(3),a=n(2),o=n(0),s=n(4);function c(e,t,n,r,a,o,s){i.b.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:a,q:o},void 0!==s&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new l(e,t,n,r,a,o)),this.mergeVertices()}function l(e,t,n,i,c,l){a.a.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:c,q:l},e=e||100,t=t||40,n=Math.floor(n)||64,i=Math.floor(i)||8,c=c||2,l=l||3;var u,h,d=[],f=[],p=[],m=[],g=new o.a,v=new o.a,y=(new s.a,new o.a),x=new o.a,_=new o.a,b=new o.a,w=new o.a;for(u=0;u<=n;++u){var E=u/n*c*Math.PI*2;for(R(E,c,l,e,y),R(E+.01,c,l,e,x),b.subVectors(x,y),w.addVectors(x,y),_.crossVectors(b,w),w.crossVectors(_,b),_.normalize(),w.normalize(),h=0;h<=i;++h){var T=h/i*Math.PI*2,S=-t*Math.cos(T),M=t*Math.sin(T);g.x=y.x+(S*w.x+M*_.x),g.y=y.y+(S*w.y+M*_.y),g.z=y.z+(S*w.z+M*_.z),f.push(g.x,g.y,g.z),v.subVectors(g,y).normalize(),p.push(v.x,v.y,v.z),m.push(u/n),m.push(h/i)}}for(h=1;h<=n;h++)for(u=1;u<=i;u++){var A=(i+1)*(h-1)+(u-1),L=(i+1)*h+(u-1),C=(i+1)*h+u,P=(i+1)*(h-1)+u;d.push(A,L,P),d.push(L,C,P)}function R(e,t,n,i,r){var a=Math.cos(e),o=Math.sin(e),s=n/t*e,c=Math.cos(s);r.x=i*(2+c)*.5*a,r.y=i*(2+c)*o*.5,r.z=i*Math.sin(s)*.5}this.setIndex(d),this.addAttribute("position",new r.b(f,3)),this.addAttribute("normal",new r.b(p,3)),this.addAttribute("uv",new r.b(m,2))}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l}),c.prototype=Object.create(i.b.prototype),c.prototype.constructor=c,l.prototype=Object.create(a.a.prototype),l.prototype.constructor=l},function(e,t,n){"use strict";var i=n(8),r=n(3),a=n(2),o=n(4),s=n(0);function c(e,t,n,r,a,o){i.b.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:a},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var s=new l(e,t,n,r,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals,this.fromBufferGeometry(s),this.mergeVertices()}function l(e,t,n,i,c){a.a.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:c},t=t||64,n=n||1,i=i||8,c=c||!1;var l=e.computeFrenetFrames(t,c);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;var u,h,d=new s.a,f=new s.a,p=new o.a,m=[],g=[],v=[],y=[];function x(r){var a=e.getPointAt(r/t),o=l.normals[r],s=l.binormals[r];for(h=0;h<=i;h++){var c=h/i*Math.PI*2,u=Math.sin(c),p=-Math.cos(c);f.x=p*o.x+u*s.x,f.y=p*o.y+u*s.y,f.z=p*o.z+u*s.z,f.normalize(),g.push(f.x,f.y,f.z),d.x=a.x+n*f.x,d.y=a.y+n*f.y,d.z=a.z+n*f.z,m.push(d.x,d.y,d.z)}}!function(){for(u=0;u<t;u++)x(u);x(!1===c?t:0),function(){for(u=0;u<=t;u++)for(h=0;h<=i;h++)p.x=u/t,p.y=h/i,v.push(p.x,p.y)}(),function(){for(h=1;h<=t;h++)for(u=1;u<=i;u++){var e=(i+1)*(h-1)+(u-1),n=(i+1)*h+(u-1),r=(i+1)*h+u,a=(i+1)*(h-1)+u;y.push(e,n,a),y.push(n,r,a)}}()}(),this.setIndex(y),this.addAttribute("position",new r.b(m,3)),this.addAttribute("normal",new r.b(g,3)),this.addAttribute("uv",new r.b(v,2))}n.d(t,"a",function(){return c}),n.d(t,"b",function(){return l}),c.prototype=Object.create(i.b.prototype),c.prototype.constructor=c,l.prototype=Object.create(a.a.prototype),l.prototype.constructor=l},function(e,t,n){"use strict";var i,r,a,o,s=n(3),c=n(2),l=n(5),u=n(44),h=n(28),d=n(10),f=n(21),p=n(39),m=n(0);function g(e,t,n,a,o,m){l.a.call(this),void 0===a&&(a=16776960),void 0===n&&(n=1),void 0===o&&(o=.2*n),void 0===m&&(m=.2*o),void 0===i&&((i=new c.a).addAttribute("position",new s.b([0,0,0,0,1,0],3)),(r=new u.a(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(t),this.line=new p.a(i,new d.a({color:a})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new f.a(r,new h.a({color:a})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,o,m)}n.d(t,"a",function(){return g}),g.prototype=Object.create(l.a.prototype),g.prototype.constructor=g,g.prototype.setDirection=(o=new m.a,function(e){e.y>.99999?this.quaternion.set(0,0,0,1):e.y<-.99999?this.quaternion.set(1,0,0,0):(o.set(e.z,0,-e.x).normalize(),a=Math.acos(e.y),this.quaternion.setFromAxisAngle(o,a))}),g.prototype.setLength=function(e,t,n){void 0===t&&(t=.2*e),void 0===n&&(n=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()},g.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)}},function(e,t,n){"use strict";var i=n(13),r=n(1),a=n(10),o=n(3),s=n(2);function c(e){var t=[0,0,0,e=e||1,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new s.a;n.addAttribute("position",new o.b(t,3)),n.addAttribute("color",new o.b([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var c=new a.a({vertexColors:r.s});i.a.call(this,n,c)}n.d(t,"a",function(){return c}),c.prototype=Object.create(i.a.prototype),c.prototype.constructor=c},function(e,t,n){"use strict";var i=n(41),r=n(0),a=n(13),o=n(6),s=n(1),c=n(10),l=n(2),u=n(3);function h(e){var t=new l.a,n=new c.a({color:16777215,vertexColors:s.r}),i=[],r=[],h={},d=new o.a(16755200),f=new o.a(16711680),p=new o.a(43775),m=new o.a(16777215),g=new o.a(3355443);function v(e,t,n){y(e,n),y(t,n)}function y(e,t){i.push(0,0,0),r.push(t.r,t.g,t.b),void 0===h[e]&&(h[e]=[]),h[e].push(i.length/3-1)}v("n1","n2",d),v("n2","n4",d),v("n4","n3",d),v("n3","n1",d),v("f1","f2",d),v("f2","f4",d),v("f4","f3",d),v("f3","f1",d),v("n1","f1",d),v("n2","f2",d),v("n3","f3",d),v("n4","f4",d),v("p","n1",f),v("p","n2",f),v("p","n3",f),v("p","n4",f),v("u1","u2",p),v("u2","u3",p),v("u3","u1",p),v("c","t",m),v("p","c",g),v("cn1","cn2",g),v("cn3","cn4",g),v("cf1","cf2",g),v("cf3","cf4",g),t.addAttribute("position",new u.b(i,3)),t.addAttribute("color",new u.b(r,3)),a.a.call(this,t,n),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=h,this.update()}n.d(t,"a",function(){return h}),h.prototype=Object.create(a.a.prototype),h.prototype.constructor=h,h.prototype.update=function(){var e,t,n=new r.a,a=new i.a;function o(i,r,o,s){n.set(r,o,s).unproject(a);var c=t[i];if(void 0!==c)for(var l=e.getAttribute("position"),u=0,h=c.length;u<h;u++)l.setXYZ(c[u],n.x,n.y,n.z)}return function(){e=this.geometry,t=this.pointMap;a.projectionMatrix.copy(this.camera.projectionMatrix),o("c",0,0,-1),o("t",0,0,1),o("n1",-1,-1,-1),o("n2",1,-1,-1),o("n3",-1,1,-1),o("n4",1,1,-1),o("f1",-1,-1,1),o("f2",1,-1,1),o("f3",-1,1,1),o("f4",1,1,1),o("u1",.7,1.1,-1),o("u2",-.7,1.1,-1),o("u3",0,2,-1),o("cf1",-1,0,1),o("cf2",1,0,1),o("cf3",0,-1,1),o("cf4",0,1,1),o("cn1",-1,0,-1),o("cn2",1,0,-1),o("cn3",0,-1,-1),o("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}()},function(e,t,n){"use strict";var i,r,a,o=n(0),s=n(5),c=n(39),l=n(3),u=n(2),h=n(10);function d(e,t){s.a.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,void 0===t&&(t=1);var n=new u.a;n.addAttribute("position",new l.b([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var i=new h.a({fog:!1});this.add(new c.a(n,i)),(n=new u.a).addAttribute("position",new l.b([0,0,0,0,0,1],3)),this.add(new c.a(n,i)),this.update()}n.d(t,"a",function(){return d}),d.prototype=Object.create(s.a.prototype),d.prototype.constructor=d,d.prototype.dispose=function(){var e=this.children[0],t=this.children[1];e.geometry.dispose(),e.material.dispose(),t.geometry.dispose(),t.material.dispose()},d.prototype.update=(i=new o.a,r=new o.a,a=new o.a,function(){i.setFromMatrixPosition(this.light.matrixWorld),r.setFromMatrixPosition(this.light.target.matrixWorld),a.subVectors(r,i);var e=this.children[0],t=this.children[1];e.lookAt(a),e.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),t.lookAt(a),t.scale.z=a.length()})},function(e,t,n){"use strict";var i,r,a,o=n(22),s=n(0),c=n(13),l=n(10),u=n(3),h=n(2);function d(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16776960,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var d=new h.a,f=new u.b(2*o*3,3);d.addAttribute("position",f),c.a.call(this,d,new l.a({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}n.d(t,"a",function(){return d}),d.prototype=Object.create(c.a.prototype),d.prototype.constructor=d,d.prototype.update=(i=new s.a,r=new s.a,a=new o.a,function(){this.object.updateMatrixWorld(!0),a.getNormalMatrix(this.object.matrixWorld);for(var e=this.object.matrixWorld,t=this.geometry.attributes.position,n=this.object.geometry,o=n.vertices,s=n.faces,c=0,l=0,u=s.length;l<u;l++){var h=s[l],d=h.normal;i.copy(o[h.a]).add(o[h.b]).add(o[h.c]).divideScalar(3).applyMatrix4(e),r.copy(d).applyMatrix3(a).normalize().multiplyScalar(this.size).add(i),t.setXYZ(c,i.x,i.y,i.z),c+=1,t.setXYZ(c,r.x,r.y,r.z),c+=1}return t.needsUpdate=!0,this})},function(e,t,n){"use strict";var i,r,a,o=n(0),s=n(6),c=n(5),l=n(21),u=n(1),h=n(28),d=n(97),f=n(3);function p(e,t){c.a.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;var n=new d.a(t);n.rotateY(.5*Math.PI);var i=new h.a({vertexColors:u.s,wireframe:!0}),r=n.getAttribute("position"),a=new Float32Array(3*r.count);n.addAttribute("color",new f.j(a,3)),this.add(new l.a(n,i)),this.update()}n.d(t,"a",function(){return p}),p.prototype=Object.create(c.a.prototype),p.prototype.constructor=p,p.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},p.prototype.update=(i=new o.a,r=new s.a,a=new s.a,function(){var e=this.children[0],t=e.geometry.getAttribute("color");r.copy(this.light.color).multiplyScalar(this.light.intensity),a.copy(this.light.groundColor).multiplyScalar(this.light.intensity);for(var n=0,o=t.count;n<o;n++){var s=n<o/2?r:a;t.setXYZ(n,s.r,s.g,s.b)}e.lookAt(i.setFromMatrixPosition(this.light.matrixWorld).negate()),t.needsUpdate=!0})},function(e,t,n){"use strict";var i=n(21),r=n(28),a=n(100);function o(e,t){this.light=e,this.light.updateMatrixWorld();var n=new a.a(t,4,2),o=new r.a({wireframe:!0,fog:!1});o.color.copy(this.light.color).multiplyScalar(this.light.intensity),i.a.call(this,n,o),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1}n.d(t,"a",function(){return o}),o.prototype=Object.create(i.a.prototype),o.prototype.constructor=o,o.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},o.prototype.update=function(){this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)}},function(e,t,n){"use strict";var i=n(13),r=n(1),a=n(10),o=n(3),s=n(2),c=n(6);function l(e,t,n,l,u,h){e=e||10,t=t||16,n=n||8,l=l||64,u=new c.a(void 0!==u?u:4473924),h=new c.a(void 0!==h?h:8947848);var d,f,p,m,g,v,y,x=[],_=[];for(m=0;m<=t;m++)p=m/t*(2*Math.PI),d=Math.sin(p)*e,f=Math.cos(p)*e,x.push(0,0,0),x.push(d,0,f),y=1&m?u:h,_.push(y.r,y.g,y.b),_.push(y.r,y.g,y.b);for(m=0;m<=n;m++)for(y=1&m?u:h,v=e-e/n*m,g=0;g<l;g++)p=g/l*(2*Math.PI),d=Math.sin(p)*v,f=Math.cos(p)*v,x.push(d,0,f),_.push(y.r,y.g,y.b),p=(g+1)/l*(2*Math.PI),d=Math.sin(p)*v,f=Math.cos(p)*v,x.push(d,0,f),_.push(y.r,y.g,y.b);var b=new s.a;b.addAttribute("position",new o.b(x,3)),b.addAttribute("color",new o.b(_,3));var w=new a.a({vertexColors:r.s});i.a.call(this,b,w)}n.d(t,"a",function(){return l}),l.prototype=Object.create(i.a.prototype),l.prototype.constructor=l},function(e,t,n){"use strict";var i,r,a=n(5),o=n(0),s=n(21),c=n(28),l=n(2),u=n(3);function h(e){a.a.call(this),this.light=e,this.light.updateMatrixWorld();var t=new c.a({color:e.color,fog:!1}),n=new c.a({color:e.color,fog:!1,wireframe:!0}),i=new l.a;i.addAttribute("position",new u.j(new Float32Array(18),3)),this.add(new s.a(i,t)),this.add(new s.a(i,n)),this.update()}n.d(t,"a",function(){return h}),h.prototype=Object.create(a.a.prototype),h.prototype.constructor=h,h.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose(),this.children[1].geometry.dispose(),this.children[1].material.dispose()},h.prototype.update=(i=new o.a,r=new o.a,function(){var e=this.children[0],t=this.children[1];if(this.light.target){i.setFromMatrixPosition(this.light.matrixWorld),r.setFromMatrixPosition(this.light.target.matrixWorld);var n=r.clone().sub(i);e.lookAt(n),t.lookAt(n)}e.material.color.copy(this.light.color).multiplyScalar(this.light.intensity),t.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var a=.5*this.light.width,o=.5*this.light.height,s=e.geometry.getAttribute("position"),c=s.array;c[0]=a,c[1]=-o,c[2]=0,c[3]=a,c[4]=o,c[5]=0,c[6]=-a,c[7]=o,c[8]=0,c[9]=-a,c[10]=o,c[11]=0,c[12]=-a,c[13]=-o,c[14]=0,c[15]=a,c[16]=-o,c[17]=0,s.needsUpdate=!0})},function(e,t,n){"use strict";var i,r,a,o=n(13),s=n(9),c=n(1),l=n(10),u=n(6),h=n(0),d=n(2),f=n(3);function p(e){this.bones=this.getBoneList(e);for(var t=new d.a,n=[],i=[],r=new u.a(0,0,1),a=new u.a(0,1,0),s=0;s<this.bones.length;s++){var h=this.bones[s];h.parent&&h.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),i.push(r.r,r.g,r.b),i.push(a.r,a.g,a.b))}t.addAttribute("position",new f.b(n,3)),t.addAttribute("color",new f.b(i,3));var p=new l.a({vertexColors:c.s,depthTest:!1,depthWrite:!1,transparent:!0});o.a.call(this,t,p),this.root=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.update()}n.d(t,"a",function(){return p}),p.prototype=Object.create(o.a.prototype),p.prototype.constructor=p,p.prototype.getBoneList=function(e){var t=[];e&&e.isBone&&t.push(e);for(var n=0;n<e.children.length;n++)t.push.apply(t,this.getBoneList(e.children[n]));return t},p.prototype.update=(i=new h.a,r=new s.a,a=new s.a,function(){var e=this.geometry,t=e.getAttribute("position");a.getInverse(this.root.matrixWorld);for(var n=0,o=0;n<this.bones.length;n++){var s=this.bones[n];s.parent&&s.parent.isBone&&(r.multiplyMatrices(a,s.matrixWorld),i.setFromMatrixPosition(r),t.setXYZ(o,i.x,i.y,i.z),r.multiplyMatrices(a,s.parent.matrixWorld),i.setFromMatrixPosition(r),t.setXYZ(o+1,i.x,i.y,i.z),o+=2)}e.getAttribute("position").needsUpdate=!0})},function(e,t,n){"use strict";var i,r,a=n(0),o=n(5),s=n(13),c=n(10),l=n(3),u=n(2);function h(e){o.a.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;for(var t=new u.a,n=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],i=0,r=1;i<32;i++,r++){var a=i/32*Math.PI*2,h=r/32*Math.PI*2;n.push(Math.cos(a),Math.sin(a),1,Math.cos(h),Math.sin(h),1)}t.addAttribute("position",new l.b(n,3));var d=new c.a({fog:!1});this.cone=new s.a(t,d),this.add(this.cone),this.update()}n.d(t,"a",function(){return h}),h.prototype=Object.create(o.a.prototype),h.prototype.constructor=h,h.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},h.prototype.update=(i=new a.a,r=new a.a,function(){var e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),i.setFromMatrixPosition(this.light.matrixWorld),r.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(r.sub(i)),this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)})},function(e,t,n){"use strict";var i,r,a,o=n(22),s=n(0),c=n(13),l=n(10),u=n(3),h=n(2);function d(e,t,n,i){this.object=e,this.size=void 0!==t?t:1;var r=void 0!==n?n:16711680,a=void 0!==i?i:1,o=0,s=this.object.geometry;s&&s.isGeometry?o=3*s.faces.length:s&&s.isBufferGeometry&&(o=s.attributes.normal.count);var d=new h.a,f=new u.b(2*o*3,3);d.addAttribute("position",f),c.a.call(this,d,new l.a({color:r,linewidth:a})),this.matrixAutoUpdate=!1,this.update()}n.d(t,"a",function(){return d}),d.prototype=Object.create(c.a.prototype),d.prototype.constructor=d,d.prototype.update=(i=new s.a,r=new s.a,a=new o.a,function(){var e=["a","b","c"];this.object.updateMatrixWorld(!0),a.getNormalMatrix(this.object.matrixWorld);var t=this.object.matrixWorld,n=this.geometry.attributes.position,o=this.object.geometry;if(o&&o.isGeometry)for(var s=o.vertices,c=o.faces,l=0,u=0,h=c.length;u<h;u++)for(var d=c[u],f=0,p=d.vertexNormals.length;f<p;f++){var m=s[d[e[f]]],g=d.vertexNormals[f];i.copy(m).applyMatrix4(t),r.copy(g).applyMatrix3(a).normalize().multiplyScalar(this.size).add(i),n.setXYZ(l,i.x,i.y,i.z),l+=1,n.setXYZ(l,r.x,r.y,r.z),l+=1}else if(o&&o.isBufferGeometry){var v=o.attributes.position,y=o.attributes.normal;for(l=0,f=0,p=v.count;f<p;f++)i.set(v.getX(f),v.getY(f),v.getZ(f)).applyMatrix4(t),r.set(y.getX(f),y.getY(f),y.getZ(f)),r.applyMatrix3(a).normalize().multiplyScalar(this.size).add(i),n.setXYZ(l,i.x,i.y,i.z),l+=1,n.setXYZ(l,r.x,r.y,r.z),l+=1}return n.needsUpdate=!0,this})},function(e,t,n){"use strict";var i=n(25);function r(e,t,n,r){i.a.call(this,e,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0!==n?n:10,this.height=void 0!==r?r:10}n.d(t,"a",function(){return r}),r.prototype=Object.assign(Object.create(i.a.prototype),{constructor:r,isRectAreaLight:!0,copy:function(e){return i.a.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this}})},function(e,t,n){"use strict";var i=n(1),r=n(17),a=n(137),o=n(11);function s(e){this.manager=void 0!==e?e:o.a,this._parser=null}n.d(t,"a",function(){return s}),Object.assign(s.prototype,{load:function(e,t,n,o){var s=this,c=[],l=new a.a;l.image=c;var u=new r.a(this.manager);function h(r){u.load(e[r],function(e){var n=s._parser(e,!0);c[r]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(d+=1)&&(1===n.mipmapCount&&(l.minFilter=i._19),l.format=n.format,l.needsUpdate=!0,t&&t(l))},n,o)}if(u.setPath(this.path),u.setResponseType("arraybuffer"),Array.isArray(e))for(var d=0,f=0,p=e.length;f<p;++f)h(f);else u.load(e,function(e){var n=s._parser(e,!0);if(n.isCubemap)for(var r=n.mipmaps.length/n.mipmapCount,a=0;a<r;a++){c[a]={mipmaps:[]};for(var o=0;o<n.mipmapCount;o++)c[a].mipmaps.push(n.mipmaps[a*n.mipmapCount+o]),c[a].format=n.format,c[a].width=n.width,c[a].height=n.height}else l.image.width=n.width,l.image.height=n.height,l.mipmaps=n.mipmaps;1===n.mipmapCount&&(l.minFilter=i._19),l.format=n.format,l.needsUpdate=!0,t&&t(l)},n,o);return l},setPath:function(e){return this.path=e,this}})},function(e,t,n){"use strict";var i=n(88),r=n(17),a=n(11);function o(e){this.manager=void 0!==e?e:a.a}n.d(t,"a",function(){return o}),Object.assign(o.prototype,{load:function(e,t,n,i){var a=this;new r.a(this.manager).load(e,function(e){var n;try{n=JSON.parse(e)}catch(t){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(e.substring(65,e.length-2))}var i=a.parse(n);t&&t(i)},n,i)},parse:function(e){return new i.a(e)}})},function(e,t,n){"use strict";var i,r=n(1),a=n(6),o=n(9),s=n(5),c=n(72),l=n(75),u=n(74),h=n(39),d=n(13),f=n(73),p=n(21),m=n(129),g=n(134),v=n(135),y=n(107),x=n(109),_=n(108),b=n(105),w=n(104),E=n(42),T=n(23),S=n(136),M=n(15),A=n(46),L=n(11),C=n(40),P=n(64),R=n(112),F=n(115),I=n(17),N=n(96);function O(e){this.manager=void 0!==e?e:L.a,this.texturePath=""}n.d(t,"a",function(){return O}),Object.assign(O.prototype,{load:function(e,t,n,i){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var r=this;new I.a(r.manager).load(e,function(n){var a=null;try{a=JSON.parse(n)}catch(t){return void 0!==i&&i(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}var o=a.metadata;void 0!==o&&void 0!==o.type&&"geometry"!==o.type.toLowerCase()?r.parse(a,t):console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead.")},n,i)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var n=this.parseGeometries(e.geometries),i=this.parseImages(e.images,function(){void 0!==t&&t(o)}),r=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,r),o=this.parseObject(e.object,n,a);return e.animations&&(o.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0!==t&&t(o),o},parseGeometries:function(e){var t={};if(void 0!==e)for(var n=new F.a,i=new R.a,r=0,a=e.length;r<a;r++){var o,s=e[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":o=new N[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":o=new N[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":o=new N[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":o=new N[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":o=new N[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":o=new N[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":o=new N[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":o=new N[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":o=new N[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":o=new N[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":o=new N[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"BufferGeometry":o=i.parse(s);break;case"Geometry":o=n.parse(s.data,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}o.uuid=s.uuid,void 0!==s.name&&(o.name=s.name),t[s.uuid]=o}return t},parseMaterials:function(e,t){var n={};if(void 0!==e){var i=new P.a;i.setTextures(t);for(var r=0,a=e.length;r<a;r++){var o=i.parse(e[r]);n[o.uuid]=o}}return n},parseAnimations:function(e){for(var t=[],n=0;n<e.length;n++){var i=C.a.parse(e[n]);t.push(i)}return t},parseImages:function(e,t){var n=this,i={};function r(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e)})}if(void 0!==e&&e.length>0){var a=new L.b(t),o=new A.a(a);o.setCrossOrigin(this.crossOrigin);for(var s=0,c=e.length;s<c;s++){var l=e[s],u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url)?l.url:n.texturePath+l.url;i[l.uuid]=r(u)}}return i},parseTextures:function(e,t){var n={UVMapping:r._5,CubeReflectionMapping:r._6,CubeRefractionMapping:r._7,EquirectangularReflectionMapping:r._8,EquirectangularRefractionMapping:r._9,SphericalReflectionMapping:r._10,CubeUVReflectionMapping:r._11,CubeUVRefractionMapping:r._12},i={RepeatWrapping:r._13,ClampToEdgeWrapping:r._14,MirroredRepeatWrapping:r._15},a={NearestFilter:r._16,NearestMipMapNearestFilter:r._17,NearestMipMapLinearFilter:r._18,LinearFilter:r._19,LinearMipMapNearestFilter:r._20,LinearMipMapLinearFilter:r._21};function o(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var s={};if(void 0!==e)for(var c=0,l=e.length;c<l;c++){var u=e[c];void 0===u.image&&console.warn('THREE.ObjectLoader: No "image" specified for',u.uuid),void 0===t[u.image]&&console.warn("THREE.ObjectLoader: Undefined image",u.image);var h=new M.a(t[u.image]);h.needsUpdate=!0,h.uuid=u.uuid,void 0!==u.name&&(h.name=u.name),void 0!==u.mapping&&(h.mapping=o(u.mapping,n)),void 0!==u.offset&&h.offset.fromArray(u.offset),void 0!==u.repeat&&h.repeat.fromArray(u.repeat),void 0!==u.wrap&&(h.wrapS=o(u.wrap[0],i),h.wrapT=o(u.wrap[1],i)),void 0!==u.minFilter&&(h.minFilter=o(u.minFilter,a)),void 0!==u.magFilter&&(h.magFilter=o(u.magFilter,a)),void 0!==u.anisotropy&&(h.anisotropy=u.anisotropy),void 0!==u.flipY&&(h.flipY=u.flipY),s[u.uuid]=h}return s},parseObject:(i=new o.a,function(e,t,n){var r;function o(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function M(e){if(void 0!==e)return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}switch(e.type){case"Scene":r=new S.a,void 0!==e.background&&Number.isInteger(e.background)&&(r.background=new a.a(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?r.fog=new g.a(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(r.fog=new v.a(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":r=new T.a(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(r.focus=e.focus),void 0!==e.zoom&&(r.zoom=e.zoom),void 0!==e.filmGauge&&(r.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(r.filmOffset=e.filmOffset),void 0!==e.view&&(r.view=Object.assign({},e.view));break;case"OrthographicCamera":r=new E.a(e.left,e.right,e.top,e.bottom,e.near,e.far);break;case"AmbientLight":r=new w.a(e.color,e.intensity);break;case"DirectionalLight":r=new b.a(e.color,e.intensity);break;case"PointLight":r=new _.a(e.color,e.intensity,e.distance,e.decay);break;case"SpotLight":r=new x.a(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":r=new y.a(e.color,e.groundColor,e.intensity);break;case"Mesh":var A=o(e.geometry),L=M(e.material);r=A.bones&&A.bones.length>0?new m.a(A,L):new p.a(A,L);break;case"LOD":r=new f.a;break;case"Line":r=new h.a(o(e.geometry),M(e.material),e.mode);break;case"LineSegments":r=new d.a(o(e.geometry),M(e.material));break;case"PointCloud":case"Points":r=new u.a(o(e.geometry),M(e.material));break;case"Sprite":r=new l.a(M(e.material));break;case"Group":r=new c.a;break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh type. Instantiates Object3D instead.");default:r=new s.a}if(r.uuid=e.uuid,void 0!==e.name&&(r.name=e.name),void 0!==e.matrix?(i.fromArray(e.matrix),i.decompose(r.position,r.quaternion,r.scale)):(void 0!==e.position&&r.position.fromArray(e.position),void 0!==e.rotation&&r.rotation.fromArray(e.rotation),void 0!==e.quaternion&&r.quaternion.fromArray(e.quaternion),void 0!==e.scale&&r.scale.fromArray(e.scale)),void 0!==e.castShadow&&(r.castShadow=e.castShadow),void 0!==e.receiveShadow&&(r.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(r.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(r.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&r.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(r.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.children)for(var C in e.children)r.add(this.parseObject(e.children[C],t,n));if("LOD"===e.type)for(var P=e.levels,R=0;R<P.length;R++){var F=P[R];void 0!==(C=r.getObjectByProperty("uuid",F.object))&&r.addLevel(C,F.distance)}return r})})},function(e,t,n){"use strict";var i=n(12),r=n(6);function a(e){i.a.call(this),this.type="LineDashedMaterial",this.color=new r.a(16777215),this.linewidth=1,this.scale=1,this.dashSize=3,this.gapSize=1,this.lights=!1,this.setValues(e)}n.d(t,"a",function(){return a}),a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.isLineDashedMaterial=!0,a.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}},function(e,t,n){"use strict";var i=n(12),r=n(1),a=n(6);function o(e){i.a.call(this),this.type="MeshLambertMaterial",this.color=new a.a(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new a.a(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=r.X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}n.d(t,"a",function(){return o}),o.prototype=Object.create(i.a.prototype),o.prototype.constructor=o,o.prototype.isMeshLambertMaterial=!0,o.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}},function(e,t,n){"use strict";var i=n(12),r=n(4);function a(e){i.a.call(this,e),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new r.a(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(e)}n.d(t,"a",function(){return a}),a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.isMeshNormalMaterial=!0,a.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this}},function(e,t,n){"use strict";var i=n(119);function r(e){i.a.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(e)}n.d(t,"a",function(){return r}),r.prototype=Object.create(i.a.prototype),r.prototype.constructor=r,r.prototype.isMeshPhysicalMaterial=!0,r.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this}},function(e,t,n){"use strict";var i=n(66);function r(e){i.a.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}n.d(t,"a",function(){return r}),r.prototype=Object.create(i.a.prototype),r.prototype.constructor=r,r.prototype.isMeshToonMaterial=!0,r.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this}},function(e,t,n){"use strict";var i=n(31);function r(e){i.a.call(this,e),this.type="RawShaderMaterial"}n.d(t,"a",function(){return r}),r.prototype=Object.create(i.a.prototype),r.prototype.constructor=r,r.prototype.isRawShaderMaterial=!0},function(e,t,n){"use strict";var i=n(31),r=n(48),a=n(77),o=n(34);function s(){i.a.call(this,{uniforms:o.a.merge([a.a.lights,{opacity:{value:1}}]),vertexShader:r.a.shadow_vert,fragmentShader:r.a.shadow_frag}),this.lights=!0,this.transparent=!0,Object.defineProperties(this,{opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}}})}n.d(t,"a",function(){return s}),s.prototype=Object.create(i.a.prototype),s.prototype.constructor=s,s.prototype.isShadowMaterial=!0},function(e,t,n){"use strict";function i(e,t,n){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==n?n:0,this}n.d(t,"a",function(){return i}),i.prototype={constructor:i,set:function(e,t,n){return this.radius=e,this.theta=t,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}},function(e,t,n){"use strict";var i=n(7);function r(e,t,n){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==n?n:0,this}n.d(t,"a",function(){return r}),r.prototype={constructor:r,set:function(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(i.a.clamp(e.y/this.radius,-1,1))),this}}},function(e,t,n){"use strict";var i=n(5),r=n(1),a=n(6),o=n(0);function s(e,t,n,r,a){i.a.call(this),this.lensFlares=[],this.positionScreen=new o.a,this.customUpdateCallback=void 0,void 0!==e&&this.add(e,t,n,r,a)}n.d(t,"a",function(){return s}),s.prototype=Object.assign(Object.create(i.a.prototype),{constructor:s,isLensFlare:!0,copy:function(e){i.a.prototype.copy.call(this,e),this.positionScreen.copy(e.positionScreen),this.customUpdateCallback=e.customUpdateCallback;for(var t=0,n=e.lensFlares.length;t<n;t++)this.lensFlares.push(e.lensFlares[t]);return this},add:function(e,t,n,i,o,s){void 0===t&&(t=-1),void 0===n&&(n=0),void 0===s&&(s=1),void 0===o&&(o=new a.a(16777215)),void 0===i&&(i=r.u),n=Math.min(n,Math.max(0,n)),this.lensFlares.push({texture:e,size:t,distance:n,x:0,y:0,z:0,scale:1,rotation:0,opacity:s,color:o,blending:i})},updateLensFlares:function(){var e,t,n=this.lensFlares.length,i=2*-this.positionScreen.x,r=2*-this.positionScreen.y;for(e=0;e<n;e++)(t=this.lensFlares[e]).x=this.positionScreen.x+i*t.distance,t.y=this.positionScreen.y+r*t.distance,t.wantedRotation=t.x*Math.PI*.25,t.rotation+=.25*(t.wantedRotation-t.rotation)}})},function(e,t){void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Math.sign&&(Math.sign=function(e){return e<0?-1:e>0?1:+e}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(e){"use strict";if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t})},function(e,t,n){"use strict";function i(e,t,n){var i;return{setMode:function(e){i=e},render:function(t,r){e.drawArrays(i,t,r),n.calls++,n.vertices+=r,i===e.TRIANGLES&&(n.faces+=r/3)},renderInstances:function(r){var a=t.get("ANGLE_instanced_arrays");if(null!==a){var o=r.attributes.position,s=0;o.isInterleavedBufferAttribute?(s=o.data.count,a.drawArraysInstancedANGLE(i,0,s,r.maxInstancedCount)):(s=o.count,a.drawArraysInstancedANGLE(i,0,s,r.maxInstancedCount)),n.calls++,n.vertices+=s*r.maxInstancedCount,i===e.TRIANGLES&&(n.faces+=r.maxInstancedCount*s/3)}else console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function i(e,t,n){var i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}var a=void 0!==n.precision?n.precision:"highp",o=r(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);var s=!0===n.logarithmicDepthBuffer&&!!t.get("EXT_frag_depth"),c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_TEXTURE_SIZE),h=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),d=e.getParameter(e.MAX_VERTEX_ATTRIBS),f=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),p=e.getParameter(e.MAX_VARYING_VECTORS),m=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),g=l>0,v=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==i)return i;var n=t.get("EXT_texture_filter_anisotropic");return i=null!==n?e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:s,maxTextures:c,maxVertexTextures:l,maxTextureSize:u,maxCubemapSize:h,maxAttributes:d,maxVertexUniforms:f,maxVaryings:p,maxFragmentUniforms:m,vertexTextures:g,floatFragmentTextures:v,floatVertexTextures:g&&v}}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";var i=n(22),r=n(38);function a(){var e=this,t=null,n=0,a=!1,o=!1,s=new r.a,c=new i.a,l={value:null,needsUpdate:!1};function u(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function h(t,n,i,r){var a=null!==t?t.length:0,o=null;if(0!==a){if(o=l.value,!0!==r||null===o){var u=i+4*a,h=n.matrixWorldInverse;c.getNormalMatrix(h),(null===o||o.length<u)&&(o=new Float32Array(u));for(var d=0,f=i;d!==a;++d,f+=4)s.copy(t[d]).applyMatrix4(h,c),s.normal.toArray(o,f),o[f+3]=s.constant}l.value=o,l.needsUpdate=!0}return e.numPlanes=a,o}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,i,r){var o=0!==e.length||i||0!==n||a;return a=i,t=h(e,r,0),n=e.length,o},this.beginShadows=function(){o=!0,h(null)},this.endShadows=function(){o=!1,u()},this.setState=function(e,i,r,s,c,d){if(!a||null===e||0===e.length||o&&!r)o?h(null):u();else{var f=o?0:n,p=4*f,m=c.clippingState||null;l.value=m,m=h(e,s,p,d);for(var g=0;g!==p;++g)m[g]=t[g];c.clippingState=m,this.numIntersection=i?this.numPlanes:0,this.numPlanes+=f}}}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";function i(e){var t={};return{get:function(n){if(void 0!==t[n])return t[n];var i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;case"WEBGL_compressed_texture_etc1":i=e.getExtension("WEBGL_compressed_texture_etc1");break;default:i=e.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),t[n]=i,i}}}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";var i=n(2);function r(e,t,n){var r={};function a(e){var i=e.target,s=r[i.id];null!==s.index&&o(s.index),function(e){for(var t in e)o(e[t])}(s.attributes),i.removeEventListener("dispose",a),delete r[i.id];var c=t.get(i);c.wireframe&&o(c.wireframe),t.delete(i);var l=t.get(s);l.wireframe&&o(l.wireframe),t.delete(s),n.memory.geometries--}function o(n){var i=function(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer}(n);void 0!==i&&(e.deleteBuffer(i),function(e){e.isInterleavedBufferAttribute?t.delete(e.data):t.delete(e)}(n))}return{get:function(e){var t,o=e.geometry;return void 0!==r[o.id]?r[o.id]:(o.addEventListener("dispose",a),o.isBufferGeometry?t=o:o.isGeometry&&(void 0===o._bufferGeometry&&(o._bufferGeometry=(new i.a).setFromObject(e)),t=o._bufferGeometry),r[o.id]=t,n.memory.geometries++,t)}}}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";function i(e,t,n){var i,r,a;return{setMode:function(e){i=e},setIndex:function(n){n.array instanceof Uint32Array&&t.get("OES_element_index_uint")?(r=e.UNSIGNED_INT,a=4):n.array instanceof Uint16Array?(r=e.UNSIGNED_SHORT,a=2):(r=e.UNSIGNED_BYTE,a=1)},render:function(t,o){e.drawElements(i,o,r,t*a),n.calls++,n.vertices+=o,i===e.TRIANGLES&&(n.faces+=o/3)},renderInstances:function(o,s,c){var l=t.get("ANGLE_instanced_arrays");null!==l?(l.drawElementsInstancedANGLE(i,c,r,s*a,o.maxInstancedCount),n.calls++,n.vertices+=c*o.maxInstancedCount,i===e.TRIANGLES&&(n.faces+=o.maxInstancedCount*c/3)):console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}}}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";var i=n(6),r=n(0),a=n(4);n(9);function o(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];var n;switch(t.type){case"DirectionalLight":n={direction:new r.a,color:new i.a,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new a.a};break;case"SpotLight":n={position:new r.a,direction:new r.a,color:new i.a,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new a.a};break;case"PointLight":n={position:new r.a,color:new i.a,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new a.a};break;case"HemisphereLight":n={direction:new r.a,skyColor:new i.a,groundColor:new i.a};break;case"RectAreaLight":n={color:new i.a,position:new r.a,halfWidth:new r.a,halfHeight:new r.a}}return e[t.id]=n,n}}}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";var i=n(3),r=n(138),a=n(325);function o(e,t,o){var s=new a.a(e,t,o);function c(n,i){var r=n.isInterleavedBufferAttribute?n.data:n,a=t.get(r);void 0===a.__webglBuffer?function(t,n,i){t.__webglBuffer=e.createBuffer(),e.bindBuffer(i,t.__webglBuffer);var r=n.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW;e.bufferData(i,n.array,r);var a=e.FLOAT,o=n.array;o instanceof Float32Array?a=e.FLOAT:o instanceof Float64Array?console.warn("Unsupported data buffer format: Float64Array"):o instanceof Uint16Array?a=e.UNSIGNED_SHORT:o instanceof Int16Array?a=e.SHORT:o instanceof Uint32Array?a=e.UNSIGNED_INT:o instanceof Int32Array?a=e.INT:o instanceof Int8Array?a=e.BYTE:o instanceof Uint8Array&&(a=e.UNSIGNED_BYTE);t.bytesPerElement=o.BYTES_PER_ELEMENT,t.type=a,t.version=n.version,n.onUploadCallback()}(a,r,i):a.version!==r.version&&function(t,n,i){e.bindBuffer(i,t.__webglBuffer),!1===n.dynamic?e.bufferData(i,n.array,e.STATIC_DRAW):-1===n.updateRange.count?e.bufferSubData(i,0,n.array):0===n.updateRange.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(i,n.updateRange.offset*n.array.BYTES_PER_ELEMENT,n.array.subarray(n.updateRange.offset,n.updateRange.offset+n.updateRange.count)),n.updateRange.count=0);t.version=n.version}(a,r,i)}return{getAttributeBuffer:function(e){return e.isInterleavedBufferAttribute?t.get(e.data).__webglBuffer:t.get(e).__webglBuffer},getAttributeProperties:function(e){return e.isInterleavedBufferAttribute?t.get(e.data):t.get(e)},getWireframeAttribute:function(a){var o=t.get(a);if(void 0!==o.wireframe)return o.wireframe;var s,l=[],u=a.index,h=a.attributes;if(null!==u)for(var d=0,f=(s=u.array).length;d<f;d+=3){var p=s[d+0],m=s[d+1],g=s[d+2];l.push(p,m,m,g,g,p)}else for(d=0,f=(s=h.position.array).length/3-1;d<f;d+=3)p=d+0,m=d+1,g=d+2,l.push(p,m,m,g,g,p);var v=new(n.i(r.a)(l)>65535?i.c:i.e)(l,1);return c(v,e.ELEMENT_ARRAY_BUFFER),o.wireframe=v,v},update:function(t){var n=s.get(t);t.geometry.isGeometry&&n.updateFromObject(t);var i=n.index,r=n.attributes;for(var a in null!==i&&c(i,e.ELEMENT_ARRAY_BUFFER),r)c(r[a],e.ARRAY_BUFFER);var o=n.morphAttributes;for(var a in o)for(var l=o[a],u=0,h=l.length;u<h;u++)c(l[u],e.ARRAY_BUFFER);return n}}}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";var i=n(133),r=n(332),a=n(48),o=n(1);n.d(t,"a",function(){return p});var s=0;function c(e){switch(e){case o._63:return["Linear","( value )"];case o._64:return["sRGB","( value )"];case o._66:return["RGBE","( value )"];case o._68:return["RGBM","( value, 7.0 )"];case o._69:return["RGBM","( value, 16.0 )"];case o._70:return["RGBD","( value, 256.0 )"];case o._65:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+e)}}function l(e,t){var n=c(t);return"vec4 "+e+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function u(e){return""!==e}function h(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function d(e){return e.replace(/#include +<([\w\d.]+)>/g,function(e,t){var n=a.a[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return d(n)})}function f(e){return e.replace(/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,n,i){for(var r="",a=parseInt(t);a<parseInt(n);a++)r+=i.replace(/\[ i \]/g,"[ "+a+" ]");return r})}function p(e,t,p,m){var g=e.context,v=p.extensions,y=p.defines,x=p.__webglShader.vertexShader,_=p.__webglShader.fragmentShader,b="SHADOWMAP_TYPE_BASIC";m.shadowMapType===o.j?b="SHADOWMAP_TYPE_PCF":m.shadowMapType===o.k&&(b="SHADOWMAP_TYPE_PCF_SOFT");var w="ENVMAP_TYPE_CUBE",E="ENVMAP_MODE_REFLECTION",T="ENVMAP_BLENDING_MULTIPLY";if(m.envMap){switch(p.envMap.mapping){case o._6:case o._7:w="ENVMAP_TYPE_CUBE";break;case o._11:case o._12:w="ENVMAP_TYPE_CUBE_UV";break;case o._8:case o._9:w="ENVMAP_TYPE_EQUIREC";break;case o._10:w="ENVMAP_TYPE_SPHERE"}switch(p.envMap.mapping){case o._7:case o._9:E="ENVMAP_MODE_REFRACTION"}switch(p.combine){case o.X:T="ENVMAP_BLENDING_MULTIPLY";break;case o.Y:T="ENVMAP_BLENDING_MIX";break;case o.Z:T="ENVMAP_BLENDING_ADD"}}var S,M,A,L,C,P=e.gammaFactor>0?e.gammaFactor:1,R=function(e,t,n){return[(e=e||{}).derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(u).join("\n")}(v,m,e.extensions),F=function(e){var t=[];for(var n in e){var i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(y),I=g.createProgram();p.isRawShaderMaterial?(S=[F,"\n"].filter(u).join("\n"),M=[R,F,"\n"].filter(u).join("\n")):(S=["precision "+m.precision+" float;","precision "+m.precision+" int;","#define SHADER_NAME "+p.__webglShader.name,F,m.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+P,"#define MAX_BONES "+m.maxBones,m.useFog&&m.fog?"#define USE_FOG":"",m.useFog&&m.fogExp?"#define FOG_EXP2":"",m.map?"#define USE_MAP":"",m.envMap?"#define USE_ENVMAP":"",m.envMap?"#define "+E:"",m.lightMap?"#define USE_LIGHTMAP":"",m.aoMap?"#define USE_AOMAP":"",m.emissiveMap?"#define USE_EMISSIVEMAP":"",m.bumpMap?"#define USE_BUMPMAP":"",m.normalMap?"#define USE_NORMALMAP":"",m.displacementMap&&m.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",m.specularMap?"#define USE_SPECULARMAP":"",m.roughnessMap?"#define USE_ROUGHNESSMAP":"",m.metalnessMap?"#define USE_METALNESSMAP":"",m.alphaMap?"#define USE_ALPHAMAP":"",m.vertexColors?"#define USE_COLOR":"",m.flatShading?"#define FLAT_SHADED":"",m.skinning?"#define USE_SKINNING":"",m.useVertexTexture?"#define BONE_TEXTURE":"",m.morphTargets?"#define USE_MORPHTARGETS":"",m.morphNormals&&!1===m.flatShading?"#define USE_MORPHNORMALS":"",m.doubleSided?"#define DOUBLE_SIDED":"",m.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+m.numClippingPlanes,m.shadowMapEnabled?"#define USE_SHADOWMAP":"",m.shadowMapEnabled?"#define "+b:"",m.sizeAttenuation?"#define USE_SIZEATTENUATION":"",m.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",m.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(u).join("\n"),M=[R,"precision "+m.precision+" float;","precision "+m.precision+" int;","#define SHADER_NAME "+p.__webglShader.name,F,m.alphaTest?"#define ALPHATEST "+m.alphaTest:"","#define GAMMA_FACTOR "+P,m.useFog&&m.fog?"#define USE_FOG":"",m.useFog&&m.fogExp?"#define FOG_EXP2":"",m.map?"#define USE_MAP":"",m.envMap?"#define USE_ENVMAP":"",m.envMap?"#define "+w:"",m.envMap?"#define "+E:"",m.envMap?"#define "+T:"",m.lightMap?"#define USE_LIGHTMAP":"",m.aoMap?"#define USE_AOMAP":"",m.emissiveMap?"#define USE_EMISSIVEMAP":"",m.bumpMap?"#define USE_BUMPMAP":"",m.normalMap?"#define USE_NORMALMAP":"",m.specularMap?"#define USE_SPECULARMAP":"",m.roughnessMap?"#define USE_ROUGHNESSMAP":"",m.metalnessMap?"#define USE_METALNESSMAP":"",m.alphaMap?"#define USE_ALPHAMAP":"",m.vertexColors?"#define USE_COLOR":"",m.gradientMap?"#define USE_GRADIENTMAP":"",m.flatShading?"#define FLAT_SHADED":"",m.doubleSided?"#define DOUBLE_SIDED":"",m.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+m.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(m.numClippingPlanes-m.numClipIntersection),m.shadowMapEnabled?"#define USE_SHADOWMAP":"",m.shadowMapEnabled?"#define "+b:"",m.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",m.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",m.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",m.logarithmicDepthBuffer&&e.extensions.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",m.envMap&&e.extensions.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",m.toneMapping!==o._0?"#define TONE_MAPPING":"",m.toneMapping!==o._0?a.a.tonemapping_pars_fragment:"",m.toneMapping!==o._0?function(e,t){var n;switch(t){case o._1:n="Linear";break;case o._2:n="Reinhard";break;case o._3:n="Uncharted2";break;case o._4:n="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}("toneMapping",m.toneMapping):"",m.outputEncoding||m.mapEncoding||m.envMapEncoding||m.emissiveMapEncoding?a.a.encodings_pars_fragment:"",m.mapEncoding?l("mapTexelToLinear",m.mapEncoding):"",m.envMapEncoding?l("envMapTexelToLinear",m.envMapEncoding):"",m.emissiveMapEncoding?l("emissiveMapTexelToLinear",m.emissiveMapEncoding):"",m.outputEncoding?(A="linearToOutputTexel",L=m.outputEncoding,C=c(L),"vec4 "+A+"( vec4 value ) { return LinearTo"+C[0]+C[1]+"; }"):"",m.depthPacking?"#define DEPTH_PACKING "+p.depthPacking:"","\n"].filter(u).join("\n")),x=h(x=d(x),m),_=h(_=d(_),m),p.isShaderMaterial||(x=f(x),_=f(_));var N=S+x,O=M+_,U=n.i(r.a)(g,g.VERTEX_SHADER,N),D=n.i(r.a)(g,g.FRAGMENT_SHADER,O);g.attachShader(I,U),g.attachShader(I,D),void 0!==p.index0AttributeName?g.bindAttribLocation(I,0,p.index0AttributeName):!0===m.morphTargets&&g.bindAttribLocation(I,0,"position"),g.linkProgram(I);var z,k,B=g.getProgramInfoLog(I),G=g.getShaderInfoLog(U),H=g.getShaderInfoLog(D),V=!0,j=!0;return!1===g.getProgramParameter(I,g.LINK_STATUS)?(V=!1,console.error("THREE.WebGLProgram: shader error: ",g.getError(),"gl.VALIDATE_STATUS",g.getProgramParameter(I,g.VALIDATE_STATUS),"gl.getProgramInfoLog",B,G,H)):""!==B?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",B):""!==G&&""!==H||(j=!1),j&&(this.diagnostics={runnable:V,material:p,programLog:B,vertexShader:{log:G,prefix:S},fragmentShader:{log:H,prefix:M}}),g.deleteShader(U),g.deleteShader(D),this.getUniforms=function(){return void 0===z&&(z=new i.a(g,I,e)),z},this.getAttributes=function(){return void 0===k&&(k=function(e,t,n){for(var i={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),a=0;a<r;a++){var o=e.getActiveAttrib(t,a).name;i[o]=e.getAttribLocation(t,o)}return i}(g,I)),k},this.destroy=function(){g.deleteProgram(I),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=s++,this.code=t,this.usedTimes=1,this.program=I,this.vertexShader=U,this.fragmentShader=D,this}},function(e,t,n){"use strict";var i=n(329),r=n(1);function a(e,t){var n=[],a={MeshDepthMaterial:"depth",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking"];function s(e,t){var n;return e?e.isTexture?n=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=e.texture.encoding):n=r._63,n===r._63&&t&&(n=r._65),n}this.getParameters=function(n,i,o,c,l,u){var h=a[n.type],d=function(e){if(t.floatVertexTextures&&e&&e.skeleton&&e.skeleton.useVertexTexture)return 1024;var n=t.maxVertexUniforms,i=Math.floor((n-20)/4);return void 0!==e&&e&&e.isSkinnedMesh&&(i=Math.min(e.skeleton.bones.length,i))<e.skeleton.bones.length&&console.warn("WebGLRenderer: too many bones - "+e.skeleton.bones.length+", this GPU supports just "+i+" (try OpenGL instead of ANGLE)"),i}(u),f=e.getPrecision();null!==n.precision&&(f=t.getMaxPrecision(n.precision))!==n.precision&&console.warn("THREE.WebGLProgram.getParameters:",n.precision,"not supported, using",f,"instead.");var p=e.getCurrentRenderTarget();return{shaderID:h,precision:f,supportsVertexTextures:t.vertexTextures,outputEncoding:s(p?p.texture:null,e.gammaOutput),map:!!n.map,mapEncoding:s(n.map,e.gammaInput),envMap:!!n.envMap,envMapMode:n.envMap&&n.envMap.mapping,envMapEncoding:s(n.envMap,e.gammaInput),envMapCubeUV:!!n.envMap&&(n.envMap.mapping===r._11||n.envMap.mapping===r._12),lightMap:!!n.lightMap,aoMap:!!n.aoMap,emissiveMap:!!n.emissiveMap,emissiveMapEncoding:s(n.emissiveMap,e.gammaInput),bumpMap:!!n.bumpMap,normalMap:!!n.normalMap,displacementMap:!!n.displacementMap,roughnessMap:!!n.roughnessMap,metalnessMap:!!n.metalnessMap,specularMap:!!n.specularMap,alphaMap:!!n.alphaMap,gradientMap:!!n.gradientMap,combine:n.combine,vertexColors:n.vertexColors,fog:!!o,useFog:n.fog,fogExp:o&&o.isFogExp2,flatShading:n.shading===r.o,sizeAttenuation:n.sizeAttenuation,logarithmicDepthBuffer:t.logarithmicDepthBuffer,skinning:n.skinning,maxBones:d,useVertexTexture:t.floatVertexTextures&&u&&u.skeleton&&u.skeleton.useVertexTexture,morphTargets:n.morphTargets,morphNormals:n.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:c,numClipIntersection:l,shadowMapEnabled:e.shadowMap.enabled&&u.receiveShadow&&i.shadows.length>0,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:n.premultipliedAlpha,alphaTest:n.alphaTest,doubleSided:n.side===r.n,flipSided:n.side===r.m,depthPacking:void 0!==n.depthPacking&&n.depthPacking}},this.getProgramCode=function(e,t){var n=[];if(t.shaderID?n.push(t.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)n.push(i),n.push(e.defines[i]);for(var r=0;r<o.length;r++)n.push(t[o[r]]);return n.join()},this.acquireProgram=function(t,r,a){for(var o,s=0,c=n.length;s<c;s++){var l=n[s];if(l.code===a){++(o=l).usedTimes;break}}return void 0===o&&(o=new i.a(e,a,t,r),n.push(o)),o},this.releaseProgram=function(e){if(0==--e.usedTimes){var t=n.indexOf(e);n[t]=n[n.length-1],n.pop(),e.destroy()}},this.programs=n}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";function i(){var e={};return{get:function(t){var n=t.uuid,i=e[n];return void 0===i&&(i={},e[n]=i),i},delete:function(t){delete e[t.uuid]},clear:function(){e={}}}}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";function i(e,t,n){var i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),!1===e.getShaderParameter(i,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(i)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(i),function(e){for(var t=e.split("\n"),n=0;n<t.length;n++)t[n]=n+1+": "+t[n];return t.join("\n")}(n)),i}n.d(t,"a",function(){return i})},function(e,t,n){"use strict";var i=n(1),r=n(20);function a(e,t,n){var a=new function(){var t=!1,n=new r.a,i=null,a=new r.a;return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,r,o,s){!0===s&&(t*=o,i*=o,r*=o),n.set(t,i,r,o),!1===a.equals(n)&&(e.clearColor(t,i,r,o),a.copy(n))},reset:function(){t=!1,i=null,a.set(0,0,0,1)}}},o=new function(){var t=!1,n=null,r=null,a=null;return{setTest:function(t){t?D(e.DEPTH_TEST):z(e.DEPTH_TEST)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(r!==t){if(t)switch(t){case i.P:e.depthFunc(e.NEVER);break;case i.Q:e.depthFunc(e.ALWAYS);break;case i.R:e.depthFunc(e.LESS);break;case i.S:e.depthFunc(e.LEQUAL);break;case i.T:e.depthFunc(e.EQUAL);break;case i.U:e.depthFunc(e.GEQUAL);break;case i.V:e.depthFunc(e.GREATER);break;case i.W:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);r=t}},setLocked:function(e){t=e},setClear:function(t){a!==t&&(e.clearDepth(t),a=t)},reset:function(){t=!1,n=null,r=null,a=null}}},s=new function(){var t=!1,n=null,i=null,r=null,a=null,o=null,s=null,c=null,l=null;return{setTest:function(t){t?D(e.STENCIL_TEST):z(e.STENCIL_TEST)},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,o){i===t&&r===n&&a===o||(e.stencilFunc(t,n,o),i=t,r=n,a=o)},setOp:function(t,n,i){o===t&&s===n&&c===i||(e.stencilOp(t,n,i),o=t,s=n,c=i)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,i=null,r=null,a=null,o=null,s=null,c=null,l=null}}},c=e.getParameter(e.MAX_VERTEX_ATTRIBS),l=new Uint8Array(c),u=new Uint8Array(c),h=new Uint8Array(c),d={},f=null,p=null,m=null,g=null,v=null,y=null,x=null,_=null,b=!1,w=null,E=null,T=null,S=null,M=null,A=null,L=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),C=parseFloat(/^WebGL\ ([0-9])/.exec(e.getParameter(e.VERSION))[1]),P=parseFloat(C)>=1,R=null,F={},I=new r.a,N=new r.a;function O(t,n,i){var r=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(var o=0;o<i;o++)e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r);return a}var U={};function D(t){!0!==d[t]&&(e.enable(t),d[t]=!0)}function z(t){!1!==d[t]&&(e.disable(t),d[t]=!1)}function k(t,r,a,o,s,c,l,u){t!==i.t?D(e.BLEND):z(e.BLEND),t===p&&u===b||(t===i.v?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE)):t===i.w?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR)):t===i.x?u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR)):u?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)),p=t,b=u),t===i.y?(s=s||r,c=c||a,l=l||o,r===m&&s===y||(e.blendEquationSeparate(n(r),n(s)),m=r,y=s),a===g&&o===v&&c===x&&l===_||(e.blendFuncSeparate(n(a),n(o),n(c),n(l)),g=a,v=o,x=c,_=l)):(m=null,g=null,v=null,y=null,x=null,_=null)}function B(e){o.setFunc(e)}function G(t){w!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),w=t)}function H(t){t!==i.c?(D(e.CULL_FACE),t!==E&&(t===i.d?e.cullFace(e.BACK):t===i.e?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):z(e.CULL_FACE),E=t}function V(t){void 0===t&&(t=e.TEXTURE0+L-1),R!==t&&(e.activeTexture(t),R=t)}return U[e.TEXTURE_2D]=O(e.TEXTURE_2D,e.TEXTURE_2D,1),U[e.TEXTURE_CUBE_MAP]=O(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),{buffers:{color:a,depth:o,stencil:s},init:function(){a.setClear(0,0,0,1),o.setClear(1),s.setClear(0),D(e.DEPTH_TEST),B(i.S),G(!1),H(i.d),D(e.CULL_FACE),D(e.BLEND),k(i.u)},initAttributes:function(){for(var e=0,t=l.length;e<t;e++)l[e]=0},enableAttribute:function(n){l[n]=1,0===u[n]&&(e.enableVertexAttribArray(n),u[n]=1),0!==h[n]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(n,0),h[n]=0)},enableAttributeAndDivisor:function(t,n,i){l[t]=1,0===u[t]&&(e.enableVertexAttribArray(t),u[t]=1),h[t]!==n&&(i.vertexAttribDivisorANGLE(t,n),h[t]=n)},disableUnusedAttributes:function(){for(var t=0,n=u.length;t!==n;++t)u[t]!==l[t]&&(e.disableVertexAttribArray(t),u[t]=0)},enable:D,disable:z,getCompressedTextureFormats:function(){if(null===f&&(f=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var n=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),i=0;i<n.length;i++)f.push(n[i]);return f},setBlending:k,setColorWrite:function(e){a.setMask(e)},setDepthTest:function(e){o.setTest(e)},setDepthWrite:function(e){o.setMask(e)},setDepthFunc:B,setStencilTest:function(e){s.setTest(e)},setStencilWrite:function(e){s.setMask(e)},setStencilFunc:function(e,t,n){s.setFunc(e,t,n)},setStencilOp:function(e,t,n){s.setOp(e,t,n)},setFlipSided:G,setCullFace:H,setLineWidth:function(t){t!==T&&(P&&e.lineWidth(t),T=t)},setPolygonOffset:function(t,n,i){t?(D(e.POLYGON_OFFSET_FILL),S===n&&M===i||(e.polygonOffset(n,i),S=n,M=i)):z(e.POLYGON_OFFSET_FILL)},getScissorTest:function(){return A},setScissorTest:function(t){A=t,t?D(e.SCISSOR_TEST):z(e.SCISSOR_TEST)},activeTexture:V,bindTexture:function(t,n){null===R&&V();var i=F[R];void 0===i&&(i={type:void 0,texture:void 0},F[R]=i),i.type===t&&i.texture===n||(e.bindTexture(t,n||U[t]),i.type=t,i.texture=n)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error(e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error(e)}},scissor:function(t){!1===I.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),I.copy(t))},viewport:function(t){!1===N.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),N.copy(t))},reset:function(){for(var t=0;t<u.length;t++)1===u[t]&&(e.disableVertexAttribArray(t),u[t]=0);d={},f=null,R=null,F={},p=null,w=null,E=null,a.reset(),o.reset(),s.reset()}}}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";var i=n(1),r=n(7);function a(e,t,n,a,o,s,c){var l=c.memory,u="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;function h(e,t){if(e.width>t||e.height>t){var n=t/Math.max(e.width,e.height),i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=Math.floor(e.width*n),i.height=Math.floor(e.height*n),i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height,e),i}return e}function d(e){return r.a.isPowerOfTwo(e.width)&&r.a.isPowerOfTwo(e.height)}function f(t){return t===i._16||t===i._17||t===i._18?e.NEAREST:e.LINEAR}function p(t){var n=t.target;n.removeEventListener("dispose",p),function(t){var n=a.get(t);if(t.image&&n.__image__webglTextureCube)e.deleteTexture(n.__image__webglTextureCube);else{if(void 0===n.__webglInit)return;e.deleteTexture(n.__webglTexture)}a.delete(t)}(n),l.textures--}function m(t){var n=t.target;n.removeEventListener("dispose",m),function(t){var n=a.get(t),i=a.get(t.texture);if(!t)return;void 0!==i.__webglTexture&&e.deleteTexture(i.__webglTexture);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLRenderTargetCube)for(var r=0;r<6;r++)e.deleteFramebuffer(n.__webglFramebuffer[r]),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[r]);else e.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer);a.delete(t.texture),a.delete(t)}(n),l.textures--}function g(t,c){var f=a.get(t);if(t.version>0&&f.__version!==t.version){var m=t.image;if(void 0===m)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==m.complete)return void function(t,a,c){void 0===t.__webglInit&&(t.__webglInit=!0,a.addEventListener("dispose",p),t.__webglTexture=e.createTexture(),l.textures++);n.activeTexture(e.TEXTURE0+c),n.bindTexture(e.TEXTURE_2D,t.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment);var f=h(a.image,o.maxTextureSize);(function(e){return e.wrapS!==i._14||e.wrapT!==i._14||e.minFilter!==i._16&&e.minFilter!==i._19})(a)&&!1===d(f)&&(f=function(e){if(e instanceof HTMLImageElement||e instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.width=r.a.nearestPowerOfTwo(e.width),t.height=r.a.nearestPowerOfTwo(e.height),t.getContext("2d").drawImage(e,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+e.width+"x"+e.height+"). Resized to "+t.width+"x"+t.height,e),t}return e}(f));var m=d(f),g=s(a.format),y=s(a.type);v(e.TEXTURE_2D,a,m);var x,_=a.mipmaps;if(a.isDepthTexture){var b=e.DEPTH_COMPONENT;if(a.type===i._28){if(!u)throw new Error("Float Depth Texture only supported in WebGL2.0");b=e.DEPTH_COMPONENT32F}else u&&(b=e.DEPTH_COMPONENT16);a.format===i._40&&b===e.DEPTH_COMPONENT&&a.type!==i._25&&a.type!==i._27&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),a.type=i._25,y=s(a.type)),a.format===i._41&&(b=e.DEPTH_STENCIL,a.type!==i._33&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),a.type=i._33,y=s(a.type))),n.texImage2D(e.TEXTURE_2D,0,b,f.width,f.height,0,g,y,null)}else if(a.isDataTexture)if(_.length>0&&m){for(var w=0,E=_.length;w<E;w++)x=_[w],n.texImage2D(e.TEXTURE_2D,w,g,x.width,x.height,0,g,y,x.data);a.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,g,f.width,f.height,0,g,y,f.data);else if(a.isCompressedTexture)for(var w=0,E=_.length;w<E;w++)x=_[w],a.format!==i._36&&a.format!==i._35?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(e.TEXTURE_2D,w,g,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(e.TEXTURE_2D,w,g,x.width,x.height,0,g,y,x.data);else if(_.length>0&&m){for(var w=0,E=_.length;w<E;w++)x=_[w],n.texImage2D(e.TEXTURE_2D,w,g,g,y,x);a.generateMipmaps=!1}else n.texImage2D(e.TEXTURE_2D,0,g,g,y,f);a.generateMipmaps&&m&&e.generateMipmap(e.TEXTURE_2D);t.__version=a.version,a.onUpdate&&a.onUpdate(a)}(f,t,c);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}n.activeTexture(e.TEXTURE0+c),n.bindTexture(e.TEXTURE_2D,f.__webglTexture)}function v(n,r,c){var l;if(c?(e.texParameteri(n,e.TEXTURE_WRAP_S,s(r.wrapS)),e.texParameteri(n,e.TEXTURE_WRAP_T,s(r.wrapT)),e.texParameteri(n,e.TEXTURE_MAG_FILTER,s(r.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,s(r.minFilter))):(e.texParameteri(n,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(n,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),r.wrapS===i._14&&r.wrapT===i._14||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",r),e.texParameteri(n,e.TEXTURE_MAG_FILTER,f(r.magFilter)),e.texParameteri(n,e.TEXTURE_MIN_FILTER,f(r.minFilter)),r.minFilter!==i._16&&r.minFilter!==i._19&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",r)),l=t.get("EXT_texture_filter_anisotropic")){if(r.type===i._28&&null===t.get("OES_texture_float_linear"))return;if(r.type===i._29&&null===t.get("OES_texture_half_float_linear"))return;(r.anisotropy>1||a.get(r).__currentAnisotropy)&&(e.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(r.anisotropy,o.getMaxAnisotropy())),a.get(r).__currentAnisotropy=r.anisotropy)}}function y(t,i,r,o){var c=s(i.texture.format),l=s(i.texture.type);n.texImage2D(o,0,c,i.width,i.height,0,c,l,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,r,o,a.get(i.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function x(t,n){e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer&&!n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):n.depthBuffer&&n.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,n.width,n.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}function _(t){var n=a.get(t),r=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported!");if(e.bindFramebuffer(e.FRAMEBUFFER,t),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");a.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),g(n.depthTexture,0);var r=a.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===i._40)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0);else{if(n.depthTexture.format!==i._41)throw new Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,r,0)}}(n.__webglFramebuffer,t)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=e.createRenderbuffer(),x(n.__webglDepthbuffer[o],t)}else e.bindFramebuffer(e.FRAMEBUFFER,n.__webglFramebuffer),n.__webglDepthbuffer=e.createRenderbuffer(),x(n.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}this.setTexture2D=g,this.setTextureCube=function(t,r){var c=a.get(t);if(6===t.image.length)if(t.version>0&&c.__version!==t.version){c.__image__webglTextureCube||(t.addEventListener("dispose",p),c.__image__webglTextureCube=e.createTexture(),l.textures++),n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var u=t&&t.isCompressedTexture,f=t.image[0]&&t.image[0].isDataTexture,m=[],g=0;g<6;g++)m[g]=u||f?f?t.image[g].image:t.image[g]:h(t.image[g],o.maxCubemapSize);var y=d(m[0]),x=s(t.format),_=s(t.type);for(v(e.TEXTURE_CUBE_MAP,t,y),g=0;g<6;g++)if(u)for(var b,w=m[g].mipmaps,E=0,T=w.length;E<T;E++)b=w[E],t.format!==i._36&&t.format!==i._35?n.getCompressedTextureFormats().indexOf(x)>-1?n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,E,x,b.width,b.height,0,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,E,x,b.width,b.height,0,x,_,b.data);else f?n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,x,m[g].width,m[g].height,0,x,_,m[g].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+g,0,x,x,_,m[g]);t.generateMipmaps&&y&&e.generateMipmap(e.TEXTURE_CUBE_MAP),c.__version=t.version,t.onUpdate&&t.onUpdate(t)}else n.activeTexture(e.TEXTURE0+r),n.bindTexture(e.TEXTURE_CUBE_MAP,c.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,i){n.activeTexture(e.TEXTURE0+i),n.bindTexture(e.TEXTURE_CUBE_MAP,a.get(t).__webglTexture)},this.setupRenderTarget=function(t){var i=a.get(t),r=a.get(t.texture);t.addEventListener("dispose",m),r.__webglTexture=e.createTexture(),l.textures++;var o=!0===t.isWebGLRenderTargetCube,s=d(t);if(o){i.__webglFramebuffer=[];for(var c=0;c<6;c++)i.__webglFramebuffer[c]=e.createFramebuffer()}else i.__webglFramebuffer=e.createFramebuffer();if(o){for(n.bindTexture(e.TEXTURE_CUBE_MAP,r.__webglTexture),v(e.TEXTURE_CUBE_MAP,t.texture,s),c=0;c<6;c++)y(i.__webglFramebuffer[c],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+c);t.texture.generateMipmaps&&s&&e.generateMipmap(e.TEXTURE_CUBE_MAP),n.bindTexture(e.TEXTURE_CUBE_MAP,null)}else n.bindTexture(e.TEXTURE_2D,r.__webglTexture),v(e.TEXTURE_2D,t.texture,s),y(i.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),t.texture.generateMipmaps&&s&&e.generateMipmap(e.TEXTURE_2D),n.bindTexture(e.TEXTURE_2D,null);t.depthBuffer&&_(t)},this.updateRenderTargetMipmap=function(t){var r=t.texture;if(r.generateMipmaps&&d(t)&&r.minFilter!==i._16&&r.minFilter!==i._19){var o=t&&t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=a.get(r).__webglTexture;n.bindTexture(o,s),e.generateMipmap(o),n.bindTexture(o,null)}}}n.d(t,"a",function(){return a})},function(e,t,n){"use strict";var i=n(68),r=n(4),a=n(0);function o(e,t){var n,o,s,c,l,u,h,d,f=e.context,p=e.state;function m(){var t=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),i=new Uint16Array([0,1,2,0,2,3]);n=f.createBuffer(),o=f.createBuffer(),f.bindBuffer(f.ARRAY_BUFFER,n),f.bufferData(f.ARRAY_BUFFER,t,f.STATIC_DRAW),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,o),f.bufferData(f.ELEMENT_ARRAY_BUFFER,i,f.STATIC_DRAW),h=f.createTexture(),d=f.createTexture(),p.bindTexture(f.TEXTURE_2D,h),f.texImage2D(f.TEXTURE_2D,0,f.RGB,16,16,0,f.RGB,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),p.bindTexture(f.TEXTURE_2D,d),f.texImage2D(f.TEXTURE_2D,0,f.RGBA,16,16,0,f.RGBA,f.UNSIGNED_BYTE,null),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),s={vertexShader:["uniform lowp int renderType;","uniform vec3 screenPosition;","uniform vec2 scale;","uniform float rotation;","uniform sampler2D occlusionMap;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float vVisibility;","void main() {","vUV = uv;","vec2 pos = position;","if ( renderType == 2 ) {","vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );","visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );","visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );","vVisibility =        visibility.r / 9.0;","vVisibility *= 1.0 - visibility.g / 9.0;","vVisibility *=       visibility.b / 9.0;","vVisibility *= 1.0 - visibility.a / 9.0;","pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;","pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;","}","gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );","}"].join("\n"),fragmentShader:["uniform lowp int renderType;","uniform sampler2D map;","uniform float opacity;","uniform vec3 color;","varying vec2 vUV;","varying float vVisibility;","void main() {","if ( renderType == 0 ) {","gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );","} else if ( renderType == 1 ) {","gl_FragColor = texture2D( map, vUV );","} else {","vec4 texture = texture2D( map, vUV );","texture.a *= opacity * vVisibility;","gl_FragColor = texture;","gl_FragColor.rgb *= color;","}","}"].join("\n")},c=function(t){var n=f.createProgram(),i=f.createShader(f.FRAGMENT_SHADER),r=f.createShader(f.VERTEX_SHADER),a="precision "+e.getPrecision()+" float;\n";return f.shaderSource(i,a+t.fragmentShader),f.shaderSource(r,a+t.vertexShader),f.compileShader(i),f.compileShader(r),f.attachShader(n,i),f.attachShader(n,r),f.linkProgram(n),n}(s),l={vertex:f.getAttribLocation(c,"position"),uv:f.getAttribLocation(c,"uv")},u={renderType:f.getUniformLocation(c,"renderType"),map:f.getUniformLocation(c,"map"),occlusionMap:f.getUniformLocation(c,"occlusionMap"),opacity:f.getUniformLocation(c,"opacity"),color:f.getUniformLocation(c,"color"),scale:f.getUniformLocation(c,"scale"),rotation:f.getUniformLocation(c,"rotation"),screenPosition:f.getUniformLocation(c,"screenPosition")}}this.render=function(s,g,v){if(0!==t.length){var y=new a.a,x=v.w/v.z,_=.5*v.z,b=.5*v.w,w=16/v.w,E=new r.a(w*x,w),T=new a.a(1,1,0),S=new r.a(1,1),M=new i.a;M.min.set(v.x,v.y),M.max.set(v.x+(v.z-16),v.y+(v.w-16)),void 0===c&&m(),f.useProgram(c),p.initAttributes(),p.enableAttribute(l.vertex),p.enableAttribute(l.uv),p.disableUnusedAttributes(),f.uniform1i(u.occlusionMap,0),f.uniform1i(u.map,1),f.bindBuffer(f.ARRAY_BUFFER,n),f.vertexAttribPointer(l.vertex,2,f.FLOAT,!1,16,0),f.vertexAttribPointer(l.uv,2,f.FLOAT,!1,16,8),f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,o),p.disable(f.CULL_FACE),p.setDepthWrite(!1);for(var A=0,L=t.length;A<L;A++){w=16/v.w,E.set(w*x,w);var C=t[A];if(y.set(C.matrixWorld.elements[12],C.matrixWorld.elements[13],C.matrixWorld.elements[14]),y.applyMatrix4(g.matrixWorldInverse),y.applyMatrix4(g.projectionMatrix),T.copy(y),S.x=v.x+T.x*_+_-8,S.y=v.y+T.y*b+b-8,!0===M.containsPoint(S)){p.activeTexture(f.TEXTURE0),p.bindTexture(f.TEXTURE_2D,null),p.activeTexture(f.TEXTURE1),p.bindTexture(f.TEXTURE_2D,h),f.copyTexImage2D(f.TEXTURE_2D,0,f.RGB,S.x,S.y,16,16,0),f.uniform1i(u.renderType,0),f.uniform2f(u.scale,E.x,E.y),f.uniform3f(u.screenPosition,T.x,T.y,T.z),p.disable(f.BLEND),p.enable(f.DEPTH_TEST),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0),p.activeTexture(f.TEXTURE0),p.bindTexture(f.TEXTURE_2D,d),f.copyTexImage2D(f.TEXTURE_2D,0,f.RGBA,S.x,S.y,16,16,0),f.uniform1i(u.renderType,1),p.disable(f.DEPTH_TEST),p.activeTexture(f.TEXTURE1),p.bindTexture(f.TEXTURE_2D,h),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0),C.positionScreen.copy(T),C.customUpdateCallback?C.customUpdateCallback(C):C.updateLensFlares(),f.uniform1i(u.renderType,2),p.enable(f.BLEND);for(var P=0,R=C.lensFlares.length;P<R;P++){var F=C.lensFlares[P];F.opacity>.001&&F.scale>.001&&(T.x=F.x,T.y=F.y,T.z=F.z,w=F.size*F.scale/v.w,E.x=w*x,E.y=w,f.uniform3f(u.screenPosition,T.x,T.y,T.z),f.uniform2f(u.scale,E.x,E.y),f.uniform1f(u.rotation,F.rotation),f.uniform1f(u.opacity,F.opacity),f.uniform3f(u.color,F.color.r,F.color.g,F.color.b),p.setBlending(F.blending,F.blendEquation,F.blendSrc,F.blendDst),e.setTexture2D(F.texture,1),f.drawElements(f.TRIANGLES,6,f.UNSIGNED_SHORT,0))}}}p.enable(f.CULL_FACE),p.enable(f.DEPTH_TEST),p.setDepthWrite(!0),e.resetGLState()}}}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";var i=n(15),r=n(0),a=n(18);function o(e,t){var n,o,s,c,l,u,h=e.context,d=e.state,f=new r.a,p=new a.a,m=new r.a;function g(){var t=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),r=new Uint16Array([0,1,2,0,2,3]);n=h.createBuffer(),o=h.createBuffer(),h.bindBuffer(h.ARRAY_BUFFER,n),h.bufferData(h.ARRAY_BUFFER,t,h.STATIC_DRAW),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,o),h.bufferData(h.ELEMENT_ARRAY_BUFFER,r,h.STATIC_DRAW),s=function(){var t=h.createProgram(),n=h.createShader(h.VERTEX_SHADER),i=h.createShader(h.FRAGMENT_SHADER);return h.shaderSource(n,["precision "+e.getPrecision()+" float;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),h.shaderSource(i,["precision "+e.getPrecision()+" float;","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),h.compileShader(n),h.compileShader(i),h.attachShader(t,n),h.attachShader(t,i),h.linkProgram(t),t}(),c={position:h.getAttribLocation(s,"position"),uv:h.getAttribLocation(s,"uv")},l={uvOffset:h.getUniformLocation(s,"uvOffset"),uvScale:h.getUniformLocation(s,"uvScale"),rotation:h.getUniformLocation(s,"rotation"),scale:h.getUniformLocation(s,"scale"),color:h.getUniformLocation(s,"color"),map:h.getUniformLocation(s,"map"),opacity:h.getUniformLocation(s,"opacity"),modelViewMatrix:h.getUniformLocation(s,"modelViewMatrix"),projectionMatrix:h.getUniformLocation(s,"projectionMatrix"),fogType:h.getUniformLocation(s,"fogType"),fogDensity:h.getUniformLocation(s,"fogDensity"),fogNear:h.getUniformLocation(s,"fogNear"),fogFar:h.getUniformLocation(s,"fogFar"),fogColor:h.getUniformLocation(s,"fogColor"),alphaTest:h.getUniformLocation(s,"alphaTest")};var a=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");a.width=8,a.height=8;var d=a.getContext("2d");d.fillStyle="white",d.fillRect(0,0,8,8),(u=new i.a(a)).needsUpdate=!0}function v(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}this.render=function(i,r){if(0!==t.length){void 0===s&&g(),h.useProgram(s),d.initAttributes(),d.enableAttribute(c.position),d.enableAttribute(c.uv),d.disableUnusedAttributes(),d.disable(h.CULL_FACE),d.enable(h.BLEND),h.bindBuffer(h.ARRAY_BUFFER,n),h.vertexAttribPointer(c.position,2,h.FLOAT,!1,16,0),h.vertexAttribPointer(c.uv,2,h.FLOAT,!1,16,8),h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,o),h.uniformMatrix4fv(l.projectionMatrix,!1,r.projectionMatrix.elements),d.activeTexture(h.TEXTURE0),h.uniform1i(l.map,0);var a=0,y=0,x=i.fog;x?(h.uniform3f(l.fogColor,x.color.r,x.color.g,x.color.b),x.isFog?(h.uniform1f(l.fogNear,x.near),h.uniform1f(l.fogFar,x.far),h.uniform1i(l.fogType,1),a=1,y=1):x.isFogExp2&&(h.uniform1f(l.fogDensity,x.density),h.uniform1i(l.fogType,2),a=2,y=2)):(h.uniform1i(l.fogType,0),a=0,y=0);for(var _=0,b=t.length;_<b;_++){(E=t[_]).modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,E.matrixWorld),E.z=-E.modelViewMatrix.elements[14]}t.sort(v);var w=[];for(_=0,b=t.length;_<b;_++){var E,T=(E=t[_]).material;if(!1!==T.visible){h.uniform1f(l.alphaTest,T.alphaTest),h.uniformMatrix4fv(l.modelViewMatrix,!1,E.modelViewMatrix.elements),E.matrixWorld.decompose(f,p,m),w[0]=m.x,w[1]=m.y;var S=0;i.fog&&T.fog&&(S=y),a!==S&&(h.uniform1i(l.fogType,S),a=S),null!==T.map?(h.uniform2f(l.uvOffset,T.map.offset.x,T.map.offset.y),h.uniform2f(l.uvScale,T.map.repeat.x,T.map.repeat.y)):(h.uniform2f(l.uvOffset,0,0),h.uniform2f(l.uvScale,1,1)),h.uniform1f(l.opacity,T.opacity),h.uniform3f(l.color,T.color.r,T.color.g,T.color.b),h.uniform1f(l.rotation,T.rotation),h.uniform2fv(l.scale,w),d.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst),d.setDepthTest(T.depthTest),d.setDepthWrite(T.depthWrite),T.map?e.setTexture2D(T.map,0):e.setTexture2D(u,0),h.drawElements(h.TRIANGLES,6,h.UNSIGNED_SHORT,0)}}d.enable(h.CULL_FACE),e.resetGLState()}}}n.d(t,"a",function(){return o})},function(e,t,n){"use strict";var i=n(15);function r(e,t,n,r,a,o,s,c,l){i.a.call(this,e,t,n,r,a,o,s,c,l),this.needsUpdate=!0}n.d(t,"a",function(){return r}),r.prototype=Object.create(i.a.prototype),r.prototype.constructor=r},function(e,t,n){"use strict";var i=n(15),r=n(1);function a(e,t,n,a,o,s,c,l,u,h){if((h=void 0!==h?h:r._40)!==r._40&&h!==r._41)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&h===r._40&&(n=r._25),void 0===n&&h===r._41&&(n=r._33),i.a.call(this,null,a,o,s,c,l,h,n,u),this.image={width:e,height:t},this.magFilter=void 0!==c?c:r._16,this.minFilter=void 0!==l?l:r._16,this.flipY=!1,this.generateMipmaps=!1}n.d(t,"a",function(){return a}),a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.isDepthTexture=!0},function(e,t,n){"use strict";var i=n(15);function r(e,t,n,r,a,o,s,c,l){i.a.call(this,e,t,n,r,a,o,s,c,l),this.generateMipmaps=!1;var u=this;!function t(){requestAnimationFrame(t),e.readyState>=e.HAVE_CURRENT_DATA&&(u.needsUpdate=!0)}()}n.d(t,"a",function(){return r}),r.prototype=Object.create(i.a.prototype),r.prototype.constructor=r},function(e,t,n){"use strict";(function(i){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(16),o=f(n(144)),s=f(n(145)),c=f(n(139)),l=f(n(140)),u=f(n(141)),h=f(n(143)),d=f(n(142));function f(e){return e&&e.__esModule?e:{default:e}}n(146),n(151),n(148),n(150),n(147),n(149);var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name="ChiomentiWorld"}return r(e,[{key:"destroy",value:function(){this._destroyed=!0,this._element.removeEventListener("mousemove",this._onMouseMove.bind(this)),this._element.removeEventListener("mousedown",this._onMouseDown.bind(this)),this._element.removeEventListener("mouseup",this._onMouseUp.bind(this)),this._element.removeEventListener("touchmove",this._onMouseMove.bind(this)),this._element.removeEventListener("touchstart",this._onMouseDown.bind(this)),this._element.removeEventListener("touchend",this._onMouseUp.bind(this))}},{key:"init",value:function(e){var t=this;return!!o.default.webgl&&(this._data=e.data,this._element=e.element,!(!this._data||!this._element)&&(this.pinsVisible=!0,this._worldRadius=5,this.idleCameraRadius=e.idleCameraRadius||20,this.zoomedCameraRadius=e.zoomedCameraRadius||17,this.mouseSensitivity=e.mouseSensitivity||10,this.onZoomOut=e.onZoomOut,this.onZoomIn=e.onZoomIn,this.baseAssetsPath=e.baseAssetsPath||"/assets/images",this._cameraRadius=new c.default(this.idleCameraRadius),this._cameraRadius.speed=2,this._destroyed=!1,this._state="idle",this._overPin=null,this._zoomedPin=null,this.resize(),this._scene=new a.Scene,this._mousePosition=new a.Vector2(-100,-100),this._mousePickingPosition=new a.Vector2(-100,-100),this._mouseDownPosition=new a.Vector2(-100,-100),this._phiThetaDownPosition=new a.Vector2(-100,-100),this._phiTheta=new l.default(new a.Vector2(0,-.5)),this._textureLoader=new a.TextureLoader,this._raycaster=new a.Raycaster,this._clock=new a.Clock(!0),this._pins=[],this._viewportWidth=null,this._viewportHeight=null,this._renderer=new a.WebGLRenderer({antialias:!1,canvas:this._element,alpha:!0}),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(this._viewportWidth,this._viewportHeight),this._camera=new a.PerspectiveCamera(35,this._viewportWidth/this._viewportHeight,1,25e3),this._world=this._createMultiWorld(),this._scene.add(this._world),this._data.forEach(function(e){t._createPin(e.lat,e.lon,e.id)}),this.resize(),this._render(),!0))}},{key:"_useEffectComposer",value:function(){this.composer=new i.EffectComposer(this._renderer);var e=new i.SSAARenderPass(this._scene,this._camera);e.unbiased=!1,e.sampleLevel=2,this.composer.addPass(e);var t=new i.ShaderPass(i.CopyShader);t.renderToScreen=!0,this.composer.addPass(t)}},{key:"_createSingleWorld",value:function(){var e=new a.SphereBufferGeometry(this._worldRadius,32,32),t=new a.MeshBasicMaterial({color:16777215,map:this._textureLoader.load(this.baseAssetsPath+"/world_texture.png"),transparent:!0,side:a.FrontSide,lights:!1,fog:!1,shading:a.FlatShading});return t.map.magFilter=a.LinearFilter,t.map.minFilter=a.LinearFilter,new a.Mesh(e,t)}},{key:"_createMultiWorld",value:function(){for(var e=new a.Object3D,t=0;t<2;t++)for(var n=0;n<4;n++){var i=n+1+4*t,r=Math.PI/2,o=new a.SphereBufferGeometry(this._worldRadius,16,16,r*n,r,r*t,r),s=this._textureLoader.load(this.baseAssetsPath+"/world_0"+i+".png");s.magFilter=a.LinearFilter,s.minFilter=a.LinearFilter;var c=new a.ShaderMaterial({uniforms:{map:{type:"t",value:s},offsetRepeat:{type:"v4",value:new a.Vector4(0,0,1,1)},opacity:{type:"f",value:.3}},vertexShader:h.default,fragmentShader:d.default,transparent:!0}),l=new a.Mesh(o,c);e.add(l)}return e}},{key:"togglePins",value:function(e){this.pinsVisible=e,e||this.unzoom(),this._pins.forEach(function(t){t.toggleVisibility(e)})}},{key:"zoom",value:function(e){}},{key:"_setCameraRadius",value:function(e){TweenMax.killTweensOf(this._cameraRadius),TweenMax.to(this._cameraRadius,.5,{target:e})}},{key:"_setPhiTheta",value:function(e,t){TweenMax.killTweensOf(this._phiTheta),TweenMax.to(this._phiTheta,.5,{x:e,y:t})}},{key:"unzoom",value:function(){"idle"!==this._state&&(TweenMax.killDelayedCallsTo(this._setCameraRadius),TweenMax.killDelayedCallsTo(this.unzoom),this._setCameraRadius(this.idleCameraRadius),this._state="idle",this._setPhiTheta(this._phiTheta.x,-.5),this._zoomedPin.unzoom(),this._zoomedPin=null,"function"==typeof this.onZoomOut&&this.onZoomOut())}},{key:"_getPinByID",value:function(e){for(var t=0;t<this._pins.length;t++){var n=this._pins[t];if(n.pinId===e)return n}return null}},{key:"hideStats",value:function(){this.stats.dom.parentNode.removeChild(this.stats.dom)}},{key:"showStats",value:function(){this.stats=new s.default,document.body.appendChild(this.stats.dom)}},{key:"_render",value:function(){var e=this;if(!this._destroyed){var t=this._clock.getDelta();if(this._phiTheta.update(t),this._cameraRadius.update(t),this.composer?this.composer.render():this._renderer.render(this._scene,this._camera),this._raycaster.setFromCamera(this._mousePickingPosition,this._camera),this.pinsVisible){var n=this._raycaster.intersectObjects(this._pins,!0);n.forEach(function(t){t.distanceFromCamera=e._camera.getWorldPosition().distanceTo(t.point)}),n.sort(function(e,t){return e.distanceFromCamera-t.distanceFromCamera}),n.length>0&&n[0].object.isPin?(this._element.style.cursor="pointer",this._overPin&&this._overPin.controller.onMouseOut(),this._overPin=n[0].object,this._overPin.controller.onMouseOver()):(this._overPin&&this._overPin.controller.onMouseOut(),this._element.style.cursor="initial",this._overPin=null)}this.isMouseDown&&"idle"===this._state&&(this._phiTheta.x=this._phiThetaDownPosition.x+(this._mouseDownPosition.x-this._mousePosition.x)/(this._viewportWidth/this.mouseSensitivity),this._phiTheta.y=this._phiThetaDownPosition.y+(this._mouseDownPosition.y-this._mousePosition.y)/(this._viewportHeight/this.mouseSensitivity),this._phiTheta.y=Math.max(-.8,Math.min(.8,this._phiTheta.y))),isNaN(this._phiTheta.x)&&(this._phiTheta.x=0),isNaN(this._phiTheta.y)&&(this._phiTheta.y=0),this._phiTheta.y=this._clamp(this._phiTheta.y,-Math.PI/2+.001,Math.PI/2-.001),"idle"===this._state&&(this._phiTheta.x+=.01),this._getCartesianCoordinates(this._camera.position,this._cameraRadius.value,this._phiTheta.value.x,this._phiTheta.value.y),this._camera.lookAt(this._scene.position),this.stats&&this.stats.update(),requestAnimationFrame(this._render.bind(this))}}},{key:"_getMousePositionX",value:function(e){return e.touches&&e.touches.length>0?e.touches[0].pageX-e.touches[0].target.offsetLeft:e.offsetX}},{key:"_getMousePositionY",value:function(e){return e.touches&&e.touches.length>0?e.touches[0].pageY-e.touches[0].target.offsetTop:e.offsetY}},{key:"_updateMousePosition",value:function(e){this._mousePosition.x=this._getMousePositionX(e),this._mousePosition.y=this._getMousePositionY(e),this._mousePickingPosition.x=this._mousePosition.x/this._viewportWidth*2-1,this._mousePickingPosition.y=-this._mousePosition.y/this._viewportHeight*2+1}},{key:"_onMouseMove",value:function(e){this._updateMousePosition(e),e.preventDefault()}},{key:"_onMouseDown",value:function(e){this.isMouseDown=!0,this._updateMousePosition(e),this._mouseDownPosition.copy(this._mousePosition),this._phiThetaDownPosition.copy(this._phiTheta)}},{key:"_onMouseUp",value:function(e){this.isMouseDown=!1,this._overPin&&this.zoom(this._overPin.controller.pinId)}},{key:"_createPin",value:function(e,t,n){var i=new u.default(this._textureLoader,n,this.baseAssetsPath),r=parseFloat(e.split("°")[0]);"S"===e.split("°")[1]&&(r=-r);var a=parseFloat(t.split("°")[0]);"W"===t.split("°")[1]&&(a=-a),this._getVector3FromLatLong(i.position,this._worldRadius+.01,r,a),this._world.add(i),this._pins.push(i),i.lookAt(this._world.position)}},{key:"_getVector3FromLatLong",value:function(e,t,n,i){var r=(90-n)*Math.PI/180,a=(i+180)*Math.PI/180;e.x=-t*Math.sin(r)*Math.cos(a),e.z=t*Math.sin(r)*Math.sin(a),e.y=t*Math.cos(r)}},{key:"_getCameraSphericalCoordinates",value:function(e){var t=e.length(),n=Math.atan2(e.x,e.z),i=Math.acos(e.y/t)-Math.PI/2,r=2*Math.PI,a=Math.floor(this._phiTheta.value.x/r)*r+n,o=this._shortestAngle(a,this._phiTheta.value.x);return{radius:t,theta:i,phi:n=this._phiTheta.value.x+o}}},{key:"_getCartesianCoordinates",value:function(e,t,n,i){e.z=t*Math.sin(i+Math.PI/2)*Math.cos(n),e.x=t*Math.sin(i+Math.PI/2)*Math.sin(n),e.y=t*Math.cos(i+Math.PI/2)}},{key:"_clamp",value:function(e,t,n){return Math.max(t,Math.min(n,e))}},{key:"_shortestAngle",value:function(e,t){var n=e-t;return this._absmod(n+Math.PI,2*Math.PI)-Math.PI}},{key:"_absmod",value:function(e,t){return(e%t+t)%t}},{key:"resize",value:function(e,t){this._viewportWidth=e||this._element.width,this._viewportHeight=t||this._element.height,this._renderer&&(this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(this._viewportWidth,this._viewportHeight)),this._camera&&(this._camera.aspect=this._viewportWidth/this._viewportHeight,this._camera.updateProjectionMatrix()),this.composer&&this._renderer&&this.composer.setSize(this._viewportWidth,this._viewportHeight)}},{key:"name",get:function(){return this._name}}]),e}();t.default=p,e.exports=t.default}).call(t,n(16))}])},e.exports=i()},ws33:function(e,t){},wtU2:function(e,t){},xXiM:function(e,t){e.exports="#define GLSLIFY 1\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\nuniform vec2 uResolution;\nuniform vec3 colorA;\nuniform vec3 colorB;\n\n#pragma include(THREE.ShaderChunk.common)\n#pragma include(THREE.ShaderChunk.packing)\n#pragma include(THREE.ShaderChunk.dithering_pars_fragment)\n#pragma include(THREE.ShaderChunk.color_pars_fragment)\n#pragma include(THREE.ShaderChunk.uv_pars_fragment)\n#pragma include(THREE.ShaderChunk.uv2_pars_fragment)\n#pragma include(THREE.ShaderChunk.map_pars_fragment)\n#pragma include(THREE.ShaderChunk.alphamap_pars_fragment)\n#pragma include(THREE.ShaderChunk.aomap_pars_fragment)\n#pragma include(THREE.ShaderChunk.lightmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.emissivemap_pars_fragment)\n#pragma include(THREE.ShaderChunk.envmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.gradientmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.fog_pars_fragment)\n#pragma include(THREE.ShaderChunk.bsdfs)\n#pragma include(THREE.ShaderChunk.lights_pars_begin)\n#pragma include(THREE.ShaderChunk.lights_pars_maps)\n#pragma include(THREE.ShaderChunk.lights_phong_pars_fragment)\n#pragma include(THREE.ShaderChunk.shadowmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.bumpmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.normalmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.specularmap_pars_fragment)\n#pragma include(THREE.ShaderChunk.logdepthbuf_pars_fragment)\n#pragma include(THREE.ShaderChunk.clipping_planes_pars_fragment)\n\nvoid main() {\n\n\t#pragma include(THREE.ShaderChunk.clipping_planes_fragment)\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#pragma include(THREE.ShaderChunk.logdepthbuf_fragment)\n\t#pragma include(THREE.ShaderChunk.map_fragment)\n\t#pragma include(THREE.ShaderChunk.color_fragment)\n\t#pragma include(THREE.ShaderChunk.alphamap_fragment)\n\t#pragma include(THREE.ShaderChunk.alphatest_fragment)\n\t#pragma include(THREE.ShaderChunk.specularmap_fragment)\n\t#pragma include(THREE.ShaderChunk.normal_fragment_begin)\n\t#pragma include(THREE.ShaderChunk.normal_fragment_maps)\n\t#pragma include(THREE.ShaderChunk.emissivemap_fragment)\n\n\t// accumulation\n\t#pragma include(THREE.ShaderChunk.lights_phong_fragment)\n\t#pragma include(THREE.ShaderChunk.lights_fragment_begin)\n\t#pragma include(THREE.ShaderChunk.lights_fragment_maps)\n\t#pragma include(THREE.ShaderChunk.lights_fragment_end)\n\n\t// modulation\n\t#pragma include(THREE.ShaderChunk.aomap_fragment)\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#pragma include(THREE.ShaderChunk.envmap_fragment)\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n  float grayscaleValue = dot(gl_FragColor.rgb, vec3(0.299, 0.587, 0.114)) * 1.;\n\tgl_FragColor = vec4((mix(vec4(colorB, 1.0), vec4(colorA, 1.0), grayscaleValue).rgb)  , diffuseColor.a );\n\n\n\n\t//gl_FragColor = vec4(vec3(grayscaleValue), 10.);\n\n\t#pragma include(THREE.ShaderChunk.tonemapping_fragment)\n\t#pragma include(THREE.ShaderChunk.encodings_fragment)\n\t#pragma include(THREE.ShaderChunk.fog_fragment)\n\t#pragma include(THREE.ShaderChunk.premultiplied_alpha_fragment)\n\t#pragma include(THREE.ShaderChunk.dithering_fragment)\n\n}\n"},zn7v:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.d92247839b0c213b46b7.js.map